window.__require=function e(t,o,n){function i(r,c){if(!o[r]){if(!t[r]){var s=r.split("/");if(s=s[s.length-1],!t[s]){var l="function"==typeof __require&&__require;if(!c&&l)return l(s,!0);if(a)return a(s,!0);throw new Error("Cannot find module '"+r+"'")}r=s}var u=o[r]={exports:{}};t[r][0].call(u.exports,function(e){return i(t[r][1][e]||e)},u,u.exports,e,t,o,n)}return o[r].exports}for(var a="function"==typeof __require&&__require,r=0;r<n.length;r++)i(n[r]);return i}({ADManager:[function(e,t,o){"use strict";cc._RF.push(t,"920b8I6xFJPCqUQIcDVcOmJ","ADManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ADMgr=void 0;var a=e("./ArrayUtils"),r=e("./GameConfig"),c=e("./LanMgr"),s=e("./LoadingManager"),l=e("./LogManager"),u=e("./MiniGameSdk"),d=e("./PlatformManager"),p=e("./SingletonManager"),h=e("./TipsManager"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._adInstance=null,t._successCallback=null,t._failCallback=null,t._currentRetryCount=0,t._maximumRetryCount=0,t._adTitle="",t}return i(t,e),t.prototype.setShareData=function(){u.MiniGameSdk.API.showShareMenu()},t.prototype.shareGame=function(e){u.MiniGameSdk.API.shareAppToFriendsNew("\u4f60\u6562\u6765\u5403\u6211\u5417","","https://mmocgame.qpic.cn/wechatgame/bSAKPPBBQFUN44PHyDL1mOY72Z1pA2eT0x3QtvGFxdL0ZPob1wej1Dy32ttBtt5y/0","",e)},t.prototype.showRewardedVideoAd=function(e,t,o,n){void 0===n&&(n=3),t&&t()},t.prototype.showInterstitial=function(e){d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.showInterstitial(e)},t.prototype.loadBanner=function(e,t,o){void 0===t&&(t=u.MiniGameSdk.EAdBannerLocation.TOP),void 0===o&&(o=1),d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.loadBanner(e,t,o)},t.prototype.showBanner=function(){d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.showBanner()},t.prototype.hideBanner=function(){d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.hideBanner()},t.prototype.loadCustom=function(e,t,o,n){if(void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=1),d.PlatformMgr.isMiniGame()){var i=window.wx.getSystemInfoSync().screenHeight;u.MiniGameSdk.AdvertManager.instance.loadCustom(e,{top:i-t,left:o},n)}},t.prototype.showCustom=function(){d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.showCustom()},t.prototype.hideCustom=function(){d.PlatformMgr.isMiniGame()&&u.MiniGameSdk.AdvertManager.instance.hideCustom()},t.prototype._createRewardedVideoAd=function(){return this._adInstance||(this._getADUnitId(),this._adInstance.onError(this._handleRewardedVideoAdError.bind(this)),this._adInstance.onClose(this._handleRewardedVideoAdClose.bind(this)),this._adInstance.onLoad(this._handleRewardedVideoAdLoaded.bind(this))),this._adInstance},t.prototype._playRewardedVideo=function(){var e=this._createRewardedVideoAd();e.load().then(function(){e.show()})},t.prototype._getADUnitId=function(){var e=r.default.adConfig.ADUnitId;return a.default.getRandomElement(e)},t.prototype._handleRewardedVideoAdError=function(e){this._currentRetryCount<this._maximumRetryCount?(this._currentRetryCount++,this._playRewardedVideo()):(h.TipMgr.showToast(c.langMgr.getStr("0001")),s.LoadingMgr.hide(),l.LogMgr.debug("show reward video error: "+e))},t.prototype._handleRewardedVideoAdClose=function(e){s.LoadingMgr.hide(),l.LogMgr.debug("reward video close "+JSON.stringify(e)),(null==e?void 0:e.isEnded)?this._successCallback&&this._successCallback():this._failCallback&&this._failCallback()},t.prototype._handleRewardedVideoAdLoaded=function(){l.LogMgr.debug("reward video load success")},t}(p.SingletonBase);o.ADMgr=f.getInstance(),cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./GameConfig":"GameConfig","./LanMgr":"LanMgr","./LoadingManager":"LoadingManager","./LogManager":"LogManager","./MiniGameSdk":"MiniGameSdk","./PlatformManager":"PlatformManager","./SingletonManager":"SingletonManager","./TipsManager":"TipsManager"}],AIControl:[function(e,t,o){"use strict";cc._RF.push(t,"71c49BSgP9IR7Zj4hKWyzrQ","AIControl"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ResKeeper"),i=cc._decorator,a=i.ccclass,r=i.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuBiaoDian=null,t.blockNode=null,t.isOpen=!1,t.aiCDTime=.5,t.clickCDTime=1,t.mouseDelayTime=.5,t.dragTime=1,t.startDelayTime=2,t.fightDelayTime=1,t.isAiTime=!1,t}var o;return __extends(t,e),o=t,t.prototype.onLoad=function(){o._instance=this,this.node.zIndex=9999,this.blockNode.active=!1},t.prototype.displayClickButton=function(e,t){var o=this;this.isOpen&&!this.isAiTime&&(this.isAiTime=!0,this.scheduleOnce(function(){o.shuBiaoDian.active=!0,o.shuBiaoDian.stopAllActions();var n=e.convertToWorldSpaceAR(cc.v2(0,0)),i=o.shuBiaoDian.parent.convertToNodeSpaceAR(n);o.shuBiaoDian.setPosition(i),o.shuBiaoDian.runAction(cc.sequence(cc.delayTime(o.mouseDelayTime),cc.callFunc(function(){o.shuBiaoDian.active=!1,o.isAiTime=!1,t&&t()})))},this.clickCDTime))},__decorate([r(cc.Node)],t.prototype,"shuBiaoDian",void 0),__decorate([r(cc.Node)],t.prototype,"blockNode",void 0),o=__decorate([a],t)}(n.default);o.default=c,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],AddPowerByTime:[function(e,t,o){"use strict";cc._RF.push(t,"a5ee1RoAnBE4YeTfdifCMBA","AddPowerByTime");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./TimeUtils"),l=e("./EvenType"),u=e("./PlayerDataManager"),d=e("./GameGlobalVariable"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeLabel=null,t}return i(t,e),t.prototype.onEnable=function(){this.resetDisplayTime(),r.EventMgrInstance.addListener(l.EVENT_TYPE.Hall_ResetRich,this.resetDisplayTime,this)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(l.EVENT_TYPE.Hall_ResetRich,this.resetDisplayTime,this)},t.prototype.resetDisplayTime=function(){var e=this;if(this.timeLabel){this.timeLabel.node.stopAllActions(),this.timeLabel.string="";var t=u.PlayerDataMgr.globalData;if(t.power<t.maxPower){var o=(new Date).getTime(),n=6e4*d.GameGlobalVariable.addPowerTime,i=o-t.lastAddPowerTime;if(i>=n){var a=Math.floor(i/n);if(t.power+a>t.maxPower)return void u.PlayerDataMgr.addPower(t.maxPower-t.power);u.PlayerDataMgr.addPower(a),i-=a*n,t.lastAddPowerTime=o-i}i=n-i;var r=Math.floor(.001*i);this.timeLabel.string=s.default.convertSecondsToMinutesSeconds(r),this.timeLabel.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){r--,e.timeLabel.string=s.default.convertSecondsToMinutesSeconds(r),0===r&&e.resetDisplayTime()}))))}}},a([f(cc.Label)],t.prototype,"timeLabel",void 0),a([h],t)}(c.default);o.default=g,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GameGlobalVariable":"GameGlobalVariable","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./TimeUtils":"TimeUtils"}],ArrayUtils:[function(e,t,o){"use strict";cc._RF.push(t,"83453BlOa5NT7mIy44kwYdx","ArrayUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LogManager"),i=function(){function e(){}return e.shuffleArray=function(e){for(var t,o,n=e.slice(),i=n.length,a=i;a--;)a!==(o=Math.floor(Math.random()*i))&&(t=n[a],n[a]=n[o],n[o]=t);return n},e.generateRandomArray=function(e,t,o){for(var n=[],i=[],a=t;a<=o;a++)n.push(a);for(;e>0;){var r=Math.floor(Math.random()*(n.length-1));i.push(n[r]),n[r]=n[n.length-1],n.pop(),e--}return i},e.getRandomElement=function(e){return e[this.generateRandomArray(e.length,0,e.length-1)[this.random(0,e.length)]]},e.random=function(e,t){var o=Math.floor(Math.random()*(t-e))+e;return o==t&&(o-=1),o},e.deepClone=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("Input must be an array");return e.map(function(e){return Array.isArray(e)?t.deepClone(e):"object"==typeof e&&null!==e?JSON.parse(JSON.stringify(e)):e})},e.uniqueElements=function(e){return e.filter(function(e,t,o){return o.indexOf(e)===t})},e.removeNullElements=function(e){return e.filter(function(e){return null!=e})},e.getRandomElementByProbability=function(e,t){if(e.length===t.length){for(var o=[],i=0;i<e.length;i++)for(var a=e[i],r=t[i],c=0;c<r;c++)o.push(a);return(o=this.shuffleArray(o))[this.generateRandomArray(o.length,0,o.length-1)[this.random(0,o.length)]]}n.LogMgr.error("\u968f\u673a\u6570\u7ec4\u4e0e\u6982\u7387\u6570\u7ec4\u957f\u5ea6\u4e0d\u4e00\u81f4")},e.getWeightedRandomIndex=function(e){var t=0;e.forEach(function(e){return t+=e}),t*=Math.random();for(var o=0;o<e.length;o++)if((t-=e[o])<=0)return o;return 0},e.getCenterIndex=function(e){return[Math.floor(e.length/2),Math.floor(e[0].length/2)]},e.removeEmptyElements=function(e){return e.filter(function(e){return null!=e})},e}();o.default=i,cc._RF.pop()},{"./LogManager":"LogManager"}],AudioManager:[function(e,t,o){"use strict";cc._RF.push(t,"f3628PAgqNH5bUqHWwLXQFl","AudioManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.AudioMgr=void 0;var r=e("./BundleConfig"),c=e("./ResLoader"),s=e("./DataManager"),l=e("./LogManager"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secret_key="audio",t._settings=null,t.currentMusic=null,t}return i(t,e),Object.defineProperty(t.prototype,"isMusicOn",{get:function(){return!this._settings||this._settings.musicOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEffectOn",{get:function(){return!this._settings||this._settings.effectOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShakeOn",{get:function(){return!this._settings||this._settings.shakeOn},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this._load("setting");this._settings=a({music:"",musicVolume:1,musicOn:!0,effectVolume:1,effectOn:!0,shakeOn:!0},e),console.log("init settings")},t.prototype.playBackgroundMusic=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=r.BundleNames.Audio);var n=o+"&"+e;n!==this.currentMusic&&(this.currentMusic=n,console.log("play bgm",this._settings),this._settings.musicOn&&(this._save("setting",this._settings),c.default.loadRes(o,e,cc.AudioClip).then(function(n){n?cc.audioEngine.playMusic(n,t):l.LogMgr.debug("AudioManager playBgm failed",o,e)})))},t.prototype.stopBackgroundMusic=function(){cc.audioEngine.stopMusic()},t.prototype.toggleMusic=function(e){this._settings.musicOn=e,e?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic(),this._save("setting",this._settings)},t.prototype.setBackgroundMusicVolume=function(e){this._settings.musicVolume=e,cc.audioEngine.setMusicVolume(e),this._save("setting",this._settings)},t.prototype.playSoundEffect=function(e,t,o){void 0===t&&(t=!1),void 0===o&&(o=r.BundleNames.Audio),this._settings.effectOn&&c.default.loadRes(o,e,cc.AudioClip).then(function(n){n?cc.audioEngine.playEffect(n,t):l.LogMgr.debug("AudioManager playEffect failed",o,e)})},t.prototype.toggleSoundEffects=function(e){this._settings.effectOn=e,e||cc.audioEngine.stopAllEffects(),this._save("setting",this._settings)},t.prototype.setSoundEffectVolume=function(e){this._settings.effectVolume=e,cc.audioEngine.setEffectsVolume(e),this._save("setting",this._settings)},t.prototype.toggleShake=function(e){this._settings.shakeOn=e,this._save("setting",this._settings)},t.prototype.getAudioSettings=function(){return this._settings},t}(s.default);o.AudioMgr=u.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./DataManager":"DataManager","./LogManager":"LogManager","./ResLoader":"ResLoader"}],AutoImagZiTi:[function(e,t,o){"use strict";cc._RF.push(t,"9e125O1M/RANZY9V4KoamK8","AutoImagZiTi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=cc._decorator,d=u.ccclass,p=(u.property,u.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.setSprites=function(e){return r(this,void 0,Promise,function(){var t,o,n,i,a,r,l,u,d;return c(this,function(c){switch(c.label){case 0:t=e.length,o=this.node.children,n=o.length,i=Math.max(t,n),a=0,c.label=1;case 1:return a<i?(r=e[a],l=o[a],r?l?(u=l.getComponent(cc.Sprite),[4,this._loadRes(s.BundleNames.Common,"res/player/boss_"+r,cc.SpriteFrame)]):[3,3]:[3,4]):[3,6];case 2:d=c.sent(),u.spriteFrame=d,l.active=!0,l.width="1"===r?10:15,c.label=3;case 3:return[3,5];case 4:l&&(l.active=!1),c.label=5;case 5:return a++,[3,1];case 6:return[2]}})})},a([d],t)}(l.default));o.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],BagCiTiaoRichText:[function(e,t,o){"use strict";cc._RF.push(t,"c24538KRE9HmaZaVD1W6wc5","BagCiTiaoRichText");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./UIManager"),s=e("./UIConfig_Home"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuiGuoId=0,t.ciTiaoId=0,t}return i(t,e),t.prototype.displayHybridInfo=function(){c.default.open(r.BundleNames.Home,s.UIView_Home.UI_ShowZaZhong,{shuiGuoId:this.shuiGuoId,ciTiaoId:this.ciTiaoId})},a([u],t)}(cc.Component));o.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],BaseExcel:[function(e,t,o){"use strict";cc._RF.push(t,"8faf3uBwlJEbrlw7vF85v7d","BaseExcel"),Object.defineProperty(o,"__esModule",{value:!0}),o.BaseExcel=o.itemData=void 0;var n=e("./ExcelUtil");o.itemData=function(e,t,o){this.key=e,this.value=t,this.extent=o};var i=function(){function e(){}return e.loadData=function(e,t,o){this.dataMap.set(e,n.ExcelUtil.convertExcelData(e,t,o))},e.getData=function(e,t){var o=this.dataMap.get(e);return(null==o?void 0:o.get(t))||null},e.getAllData=function(e){return this.dataMap.get(e)},e.dataMap=new Map,e}();o.BaseExcel=i,cc._RF.pop()},{"./ExcelUtil":"ExcelUtil"}],BaseModule:[function(e,t,o){"use strict";cc._RF.push(t,"ff6e0z5NuJK5YmSfr3KxGkw","BaseModule");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.ModuleNames=void 0;var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass;c.property,c.inspector,function(e){e.Shop="Module_Shop",e.WareHouse="Module_WareHouse",e.Fighting="Module_Fighting",e.News="Module_News"}(o.ModuleNames||(o.ModuleNames={}));var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.show=function(e){void 0===e&&(e={})},a([s],t)}(r.default);o.default=l,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],BossComming_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"f0b45J7Yt9O8ZrIJ4UTY17H","BossComming_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_tiaoNode=null,t.node_boneNode=null,t.node_ziNode=null,t.node_fireNode=null,t.node_headNode=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_tiaoNode",void 0),a([l(cc.Node)],t.prototype,"node_boneNode",void 0),a([l(cc.Node)],t.prototype,"node_ziNode",void 0),a([l(cc.Node)],t.prototype,"node_fireNode",void 0),a([l(cc.Node)],t.prototype,"node_headNode",void 0),a([s("BossComming_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],BossComming:[function(e,t,o){"use strict";cc._RF.push(t,"05dbfsnlxRIMrjqfa5tGw74","BossComming");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BossComming_UIBindings"),c=e("./ResKeeper"),s=e("./AudioManager"),l=e("./BundleConfig"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.onLoad=function(){this.startAnimation()},t.prototype.startAnimation=function(){var e=this.auto_ui;this.runNodeHeadAnimation(e.node_headNode),this.runNodeBoneAnimation(e.node_boneNode),this.runNodeZiAnimation(e.node_ziNode),this.runNodeFireAnimation(e.node_fireNode)},t.prototype.runNodeHeadAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(1,1.1,1.1),cc.fadeTo(1,180)),cc.spawn(cc.scaleTo(1,1,1),cc.fadeTo(1,255)))))},t.prototype.runNodeBoneAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.125,15),cc.rotateTo(.25,-15),cc.rotateTo(.125,0),cc.delayTime(1))))},t.prototype.runNodeZiAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1,1.1),cc.scaleTo(1,1,1))))},t.prototype.runNodeFireAnimation=function(e){var t=0;e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.children.forEach(function(o,n){o.active=n===t%e.childrenCount}),t++}),cc.delayTime(.25))))},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.displayAnimation=function(){var e=this;if(!this.node.children[0].active){s.AudioMgr.playSoundEffect("sound/bossComming",!1,l.BundleNames.Game),this.node.children[0].active=!0;var t=this.auto_ui.node_tiaoNode;t.setPosition(7,101),t.opacity=255,t.stopAllActions(),t.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveTo(.1,t.x,t.y+10),cc.moveTo(.2,t.x,t.y-15),cc.moveTo(.1,t.x,t.y)),3),cc.fadeOut(1),cc.callFunc(function(){e.node.children[0].active=!1})))}},a([p(r.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default));o.default=h,cc._RF.pop()},{"./AudioManager":"AudioManager","./BossComming_UIBindings":"BossComming_UIBindings","./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],BuffMag:[function(e,t,o){"use strict";cc._RF.push(t,"ebb89SlWm9KJrwZNPkkfHzH","BuffMag");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BuffMgr=void 0;var a=e("./CommonUtils"),r=e("./EvenType"),c=e("./EventManager"),s=e("./Excel"),l=e("./ExcelUtil"),u=e("./GameDataManager"),d=e("./GameGlobalVariable"),p=e("./HallGlobalVariable"),h=e("./PlayerDataManager"),f=e("./SingletonManager"),g=e("./UI_MosterLogic"),_=e("./UI_Player"),y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ciTiaoData=[],t.offTime=0,t.monsterBombCount={},t.attackCount={},t.currentWaveCount=0,t.monsterBomb={},t.durianCountRecord={},t.intervalCount={},t.playerSendCount={},t}return i(t,e),t.prototype.addCurrentCiTiao=function(e){this.addSingleCiTiao(e)||this.ciTiaoData.push(e)},t.prototype.saveCurrentCiTiao=function(){u.GameDataMgr.updateCiTiaoData(d.GameGlobalVariable.nowlevel,this.ciTiaoData)},t.prototype.calculateFinalAward=function(e){for(var t=0,o=0,n=this.ciTiaoData;o<n.length;o++){var i=n[o],a=s.Excel.getFruitBuff(i.citiaoshuzhitype);6===a.buffefftype&&(t+=a.value[0])}return e+t},t.prototype.addSingleCiTiao=function(e){var t=s.Excel.getFruitBuff(e.citiaoshuzhitype),o=!1;return 44===t.buffefftype&&(c.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_YinBi,t.value[0]),o=!0),o},t.prototype.setSavedCiTiao=function(e){this.ciTiaoData=e},t.prototype.getPlayerCiTiaoList=function(e){return this.ciTiaoData.filter(function(t){return 1===t.citiaochuxian||t.shuiguoId===e.playerId+1e3})},t.prototype.clearCurrentCiTiao=function(){this.ciTiaoData=[],u.GameDataMgr.updateCiTiaoData(d.GameGlobalVariable.nowlevel,null),c.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_CiTiao)},t.prototype.getCurrentCiTiao=function(e){for(var t=this,o=s.Excel.shuiguocitiao_all,n=[],i=o.size,a=function(e){var o=s.Excel.fruitcitiao(e);if(0!==o.citiaoshuzhitype&&![59,60,64].includes(o.id)){var i=-1;-1===o.citiaochuxian&&(i=t.ciTiaoData.findIndex(function(e){return e.id===o.id})),-1===i&&(-1!==o.citiaochuxian||h.PlayerDataMgr.getEquipIsDressUp(o.shuiguoId)&&p.default.getUnLockCiTiao(o))&&n.push({index:e-1,weight:o.weigth})}},r=1;r<=i;r++)a(r);return e?this.selectRandomCiTiao(n):this.selectHighQualityCiTiao(n)},t.prototype.selectRandomCiTiao=function(e){for(var t=[],o=0;o<3;o++){var n=this.randomWeightIndex(e);t.push(s.Excel.fruitcitiao(e[n].index+1)),e.splice(n,1)}return t},t.prototype.selectHighQualityCiTiao=function(e){for(var t=[],o=[],n=0;n<e.length;n++){var i=e[n].index,a=s.Excel.fruitcitiao(i+1);3===a.quality&&t.length<2&&t.push(n),2===a.quality&&o.length<1&&o.push(n)}return t.concat(o).map(function(t){return s.Excel.fruitcitiao(e[t].index+1)})},t.prototype.randomWeightIndex=function(e){for(var t=e.reduce(function(e,t){return e+t.weight},0)*Math.random(),o=0;o<e.length;o++)if((t-=e[o].weight)<=0)return o;return 0},t.prototype.monsterHit=function(e,t){for(var o=null,n=0,i=this.ciTiaoData;n<i.length;n++){var a=i[n],r=s.Excel.getFruitBuff(a.citiaoshuzhitype);a.shuiguoId===t.playerId+1e3&&(1===r.buffefftype?(!o||o.bufftime<r.bufftime)&&(o=r):e.applySpeedReduction(r,t)),24===r.buffefftype&&t.kuangrePlayer&&e.applySpeedReduction(r,t)}this.applyPlayerBuff(e,t,o)},t.prototype.applyPlayerBuff=function(e,t,o){var n=s.Excel.getFruitBuff(t.sgtianfuid);n&&e.applySpeedReduction(n,t),o&&e.applySpeedReduction(o,t);var i=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",t.playerId+1e3)[t.playerInfo.equipLevel];if(i){var a=s.Excel.getFruitBuff(i.newTianFuBuff);a&&e.applySpeedReduction(a,t)}},t.prototype.getPoisonFog=function(){return this.findBuffByEffectType(37)},t.prototype.getPoisonDamage=function(){return this.findBuffByEffectType(41)},t.prototype.findBuffByEffectType=function(e){for(var t=null,o=0;o<this.ciTiaoData.length;o++){var n=this.ciTiaoData[o],i=s.Excel.getFruitBuff(n.citiaoshuzhitype);i.buffefftype===e&&(t=i)}return t},t.prototype.addMosterBombCount=function(e){var t=e.node.uuid;this.monsterBombCount[t]=(this.monsterBombCount[t]||0)+1},t.prototype.clearMonsterBombCount=function(e){delete this.monsterBombCount[e.node.uuid]},t.prototype.getMonsterBombSailingCount=function(e){var t=e.node.uuid;return this.hasBuffEffectType(31)?.1*(this.monsterBombCount[t]||0):0},t.prototype.getMonsterBombDamageIncrease=function(){return this.calculateBuffValueByEffectType(29,100)},t.prototype.getSecondaryFruitBuff=function(){return this.findBuffByEffectType(45)},t.prototype.addPlayerAttack=function(e,t){var o=s.Excel.getFruitBuff(t.sgtianfuid);return o&&16===o.buffefftype||(o=this.getNewTianFuBuff(t)),o&&16===o.buffefftype?this.calculateAttackIncrease(e,t,o):0},t.prototype.getNewTianFuBuff=function(e){var t=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];return t?s.Excel.getFruitBuff(t.newTianFuBuff):null},t.prototype.calculateAttackIncrease=function(e,t,o){var n=e.node.uuid,i=t.node.uuid,a=this.attackCount[n]&&this.attackCount[n][i]||0;return a=Math.min(a+1,o.value[1]),this.attackCount[n]||(this.attackCount[n]={}),this.attackCount[n][i]=a,o.value[0]/100*a},t.prototype.clearMonsterStack=function(e){delete this.attackCount[e.node.uuid]},t.prototype.boshuAttackAdd=function(){this.currentWaveCount+=this.countBuffEffectType(48)},t.prototype.getAttackIncrease=function(){var e=this.findBuffByEffectType(48);if(e){var t=e.value[0]*this.currentWaveCount;return t>e.value[1]&&(t=e.value[1]),t/100}return 0},t.prototype.resetCurrentWave=function(){this.currentWaveCount=0},t.prototype.playerAttackModeInProgress=function(e,t){return this.findPlayerBuffByEffectType(e,14)?2:t},t.prototype.applyAttackBonus=function(e,t,o){for(var n=0,i=0,a=this.ciTiaoData;i<a.length;i++){var r=a[i],c=s.Excel.getFruitBuff(r.citiaoshuzhitype);r.shuiguoId!==e.playerId+1e3&&1!==r.citiaochuxian||(n+=this.calculateAttackBonus(c,e,o))}return e.kuangrePlayer&&(n+=this.calculateFrenzyAttackBonus(e)),this.applyAttackTypeBonus(t,n,o)},t.prototype.calculateAttackBonus=function(e,t,o){var n=0;return 1===o&&[15,38].includes(e.buffefftype)?n+=e.value[0]/100:2===o&&(17===e.buffefftype?n+=Math.min(e.value[0]/100,3):33===e.buffefftype&&(n+=this.calculateSendCountBonus(t,e))),2===o&&28===e.buffefftype&&3!==t.playerId&&(n+=e.value[0]/100*this.getBeOhterShuiGuoBuff(t)),1===o&&9===e.buffefftype&&3!==t.playerId&&(n+=e.value[0]/100*this.getBeOhterShuiGuoBuff(t)),n},t.prototype.calculateSendCountBonus=function(e,t){var o=e.node.uuid,n=this.playerSendCount[o]||1;return n=Math.min(n,15),t.value[0]/100*n},t.prototype.calculateFrenzyAttackBonus=function(e){return this.addTalent(e).reduce(function(e,t){return e+(40===t.buffefftype?t.value[0]/100:0)},0)},t.prototype.applyAttackTypeBonus=function(e,t,o){var n=this.getAttackIncrease();return 1===o?e*(1+t+n):2===o?e/(1+t):e},t.prototype.getTotalMonsterDamage=function(e){return e*(1+this.ciTiaoData.reduce(function(e,t){var o=s.Excel.getFruitBuff(t.citiaoshuzhitype);return 1===t.citiaochuxian&&43===o.buffefftype?e+o.value[0]/100:e},0))},t.prototype.getMonsterBombBonus=function(e){if(this.monsterBomb[e.node.uuid]){var t=this.findBuffByEffectType(31);return t?t.value[0]/100:0}return 0},t.prototype.getBleedBonus=function(e){var t=this.findPlayerBuffByEffectType(e,49);return t?t.value[0]/100:0},t.prototype.setMonsterBomb=function(e){this.monsterBomb[e]="ok"},t.prototype.cleanMosterBomb=function(e){delete this.monsterBomb[e]},t.prototype.getBombBuffScope=function(e){var t=this.findPlayerBuffByEffectType(e,4);return t?t.value[0]/100:0},t.prototype.setBombDamage=function(e,t){var o=this.findPlayerBuffByEffectType(e,42);if(o){c.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_BaoZha,t.node.getPosition(),2,o.value[0]);var n=t.getNowMosterNode(o.value[0]),i=this.applyAttackBonus(e,e.sgattack,1);i+=i*o.value[1]/100,n.forEach(function(t){t.getComponent(g.default).fujiaAttack(i,1,e)})}},t.prototype.getRangeBuff=function(e){return this.findPlayerBuffByEffectType(e,36)},t.prototype.getBombBuff=function(e){for(var t=null,o=0;o<this.ciTiaoData.length;o++){var n=this.ciTiaoData[o];if(n.shuiguoId==e.playerId+1e3&&4==(i=s.Excel.getFruitBuff(n.citiaoshuzhitype)).buffefftype){t=i;break}}if(!t){var i,a=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];a&&(i=s.Excel.getFruitBuff(a.newTianFuBuff))&&4==i.buffefftype&&(t=i)}return t},t.prototype.findPlayerBuffByEffectType=function(e,t){for(var o=0,n=this.ciTiaoData;o<n.length;o++){var i=n[o];if(i.shuiguoId===e.playerId+1e3){var a=s.Excel.getFruitBuff(i.citiaoshuzhitype);if(a.buffefftype===t)return a}}return null},t.prototype.getBlueMelonExtraBuff=function(e){return this.findPlayerBuffByEffectType(e,32)},t.prototype.getBeOhterShuiGuoBuff=function(e){for(var t=e.node.parent.children,o=0,n=0;n<t.length;n++){var i=t[n];if(e.node.uuid!==i.uuid&&3===i.getComponent(_.default).playerId)for(var r=i.getChildByName("dir").children,c=0;c<r.length;c++){var s=r[c],l=s.x+i.x,u=s.y+i.y;if(a.default.isPointInRect(cc.v2(l,u),e.node)){o++;break}}}return o},t.prototype.getDurianBuff=function(e){return this.getDurianCountBuff(e,30,3)},t.prototype.getDurianBomb=function(e){var t=null,o=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];if(o){var n=s.Excel.getFruitBuff(o.newTianFuBuff);49===n.buffefftype&&(t=n)}return t},t.prototype.getDurianCountBuff=function(e,t,o){var n=this.findPlayerBuffByEffectType(e,t);if(n){var i=e.node.uuid,a=(this.durianCountRecord[i]||0)+1;if(this.durianCountRecord[i]=a,a>o)return this.durianCountRecord[i]=0,n}return null},t.prototype.cleanLiuLian=function(){this.durianCountRecord={}},t.prototype.getAttackCritical=function(e,t){void 0===t&&(t=!1);for(var o=0,n=0,i=null,a=0,r=this.ciTiaoData;a<r.length;a++){var c=r[a],l=s.Excel.getFruitBuff(c.citiaoshuzhitype);e.kuangrePlayer&&e.kuangrePlayer.playerId+1e3===c.shuiguoId&&(26===l.buffefftype&&(o+=l.value[0]/100),23===l.buffefftype&&(n+=l.value[0]/100)),c.shuiguoId!==e.playerId+1e3&&c.shuiguoId||(12===l.buffefftype&&(o+=l.value[0]/100),13===l.buffefftype&&(n+=l.value[0]/100),34===l.buffefftype&&(i=l))}return{baojijilv:o=this.applyIntervalBuff(e,i,o,t),baojijiacheng:n}},t.prototype.applyIntervalBuff=function(e,t,o,n){if(t){var i=e.node.uuid,a=this.intervalCount[i]||0;n||(a+=1),this.intervalCount[i]=a,a>t.value[0]&&(this.intervalCount[i]=0,o=1)}return o},t.prototype.isFrenzyOver=function(){return this.ciTiaoData.some(function(e){return 25===s.Excel.getFruitBuff(e.citiaoshuzhitype).buffefftype})},t.prototype.getLemonReal=function(e){for(var t=e.node.parent.children,o=[],n=0;n<t.length;n++){var i=t[n];if(i.uuid!==e.node.uuid){var r=i.getComponent(_.default);if(3===r.playerId)for(var c=i.getChildByName("dir").children,s=0;s<c.length;s++){var l=c[s],u=l.x+i.x,d=l.y+i.y;if(a.default.isPointInRect(cc.v2(u,d),e.node)){o.push(r);break}}}}return o},t.prototype.getFixedAttack=function(e){var t=this,o=this.getBeOhterShuiGuoBuff(e),n=this.ciTiaoData.reduce(function(e,t){var n=s.Excel.getFruitBuff(t.citiaoshuzhitype);return 21===n.buffefftype?e+n.value[0]*o:e},0);return this.getLemonReal(e).reduce(function(e,o){var n=s.Excel.shuiguo(o.playerId+1e3),i=s.Excel.getFruitBuff(n.talent);return e+t.getLemonResult(o,i)},n)},t.prototype.getLemonResult=function(e,t){var o=l.ExcelUtil.getMatchingData(s.Excel.shuiguolevel_all,"shuiguoId",e.playerId+1e3),n=h.PlayerDataMgr.getEquipDataById(e.playerId+1e3).level,i=o.slice(0,n).reduce(function(e,t,o){return o>0?e+t.addbeidongbuff[0]:e},0),a=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel],r=a?a.addbeidongbuff[0]/100:0;return t.value[0]*(1+r)+i},t.prototype.addTalent=function(e){return e.kuangrePlayer?[s.Excel.getFruitBuff(e.kuangrePlayer.sgtianfuid)]:[]},t.prototype.addPlayerSendCount=function(e){var t=e.node.uuid;this.playerSendCount[t]=(this.playerSendCount[t]||0)+1},t.prototype.clearPlayerSendCount=function(e){delete this.playerSendCount[e.node.uuid]},t.prototype.getPlayerExperienceValue=function(e){return e*(1+this.ciTiaoData.reduce(function(e,t){var o=s.Excel.getFruitBuff(t.citiaoshuzhitype);return 47===o.buffefftype?e+o.value[0]/100:e},0))},t.prototype.isStacked=function(e){return this.ciTiaoData.some(function(t){return t.shuiguoId===e.playerId+1e3&&35===s.Excel.getFruitBuff(t.citiaoshuzhitype).buffefftype})},t.prototype.getCurrentSpeedRatio=function(){return this.ciTiaoData.reduce(function(e,t){var o=s.Excel.getFruitBuff(t.citiaoshuzhitype);return 19===o.buffefftype?e+o.value[0]/100:e},0)},t.prototype.isContinuousAttack=function(e){return this.ciTiaoData.some(function(t){return t.shuiguoId===e.playerId+1e3&&18===s.Excel.getFruitBuff(t.citiaoshuzhitype).buffefftype})},t.prototype.getFruitBuff=function(e,t){var o=s.Excel.shuiguo(e),n=s.Excel.getFruitBuff(o.talent),i=n.value[0];return 1002===e?i=this.getFruitBonus(t):1003===e&&(i=this.getHamiMelonBonus(t)),{nowvalue:i,otherValue:void 0!==n.value[1]?n.value[1]:-1}},t.prototype.getFruitBonus=function(e){var t=s.Excel.shuiguo(1002),o=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",1002)[e],n=s.Excel.getFruitBuff(t.talent).value[0],i=0;return o&&o.addbeidongbuff[0]&&(i=o.addbeidongbuff[0]/100),n*(1+i)},t.prototype.getHamiMelonBonus=function(e){var t=s.Excel.shuiguo(1003),o=l.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",1003)[e],n=s.Excel.getFruitBuff(t.talent).value[0],i=0;return o&&o.addbeidongbuff[0]&&(i=o.addbeidongbuff[0]/100),n*(1+i)},t.prototype.setFrenzyBuff=function(e){var t=e.node.parent.children.filter(function(t){var o=t.getComponent(_.default);return t.uuid!==e.node.uuid&&!o.kuangrePlayer&&![5,8,9].includes(o.sgattacktagtype)});t.length>0&&t[a.default.getRandomInteger(0,t.length-1)].setKuangRe(e)},t.prototype.hasBuffEffectType=function(e){return this.ciTiaoData.some(function(t){return s.Excel.getFruitBuff(t.citiaoshuzhitype).buffefftype===e})},t.prototype.calculateBuffValueByEffectType=function(e,t){return this.ciTiaoData.reduce(function(o,n){var i=s.Excel.getFruitBuff(n.citiaoshuzhitype);return i.buffefftype===e?o+i.value[0]/t:o},0)},t.prototype.countBuffEffectType=function(e){return this.ciTiaoData.reduce(function(t,o){return s.Excel.getFruitBuff(o.citiaoshuzhitype).buffefftype===e?t+1:t},0)},t}(f.SingletonBase);o.BuffMgr=y.getInstance(),cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./SingletonManager":"SingletonManager","./UI_MosterLogic":"UI_MosterLogic","./UI_Player":"UI_Player"}],BundleConfig:[function(e,t,o){"use strict";var n;cc._RF.push(t,"beaf7+EOcVJwK8HqWLC4l8i","BundleConfig"),Object.defineProperty(o,"__esModule",{value:!0}),o.MainGameBundle=o.BundleNames=void 0,function(e){e.Resouce="resouce",e.Excel="excel",e.Audio="audio",e.Home="home",e.Game="game",e.Common="common"}(n=o.BundleNames||(o.BundleNames={})),o.MainGameBundle=n.Home,cc._RF.pop()},{}],CameraShak:[function(e,t,o){"use strict";cc._RF.push(t,"faa9bydhAVI/r/Y6SwTjVta","CameraShak");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){r.EventMgrInstance.addListener(s.EVENT_TYPE.COMMON_SHAK,this.executeShake,this)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.COMMON_SHAK,this.executeShake,this)},t.prototype.executeShake=function(){var e=this;cc.tween(this.node).by(.05,{position:cc.v3(8,8)}).by(.05,{position:cc.v3(-16,-16)}).by(.05,{position:cc.v3(8,8)}).call(function(){e.node.setPosition(cc.Vec2.ZERO)}).start()},a([u],t)}(c.default));o.default=d,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],CommonUtils:[function(e,t,o){"use strict";cc._RF.push(t,"0d1afhjo+ZPrJWbe0mNqYmh","CommonUtils");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var a=e("./AudioManager"),r=e("./BundleConfig"),c=e("./GameDataManager"),s=e("./LogManager"),l=e("./NodePoolMag"),u=e("./PlayerDataManager"),d=e("./ResLoader"),p=function(){function e(){}return e.limitInRange=function(e,t){e=Math.min(e,t);var o=Math.max(e,t)-e;return e+Math.random()*o},e.limitIntegerInRange=function(e,t){return Math.floor(this.limitInRange(e,t+1))},e.getRandomInteger=function(e,t){var o;return e>t&&(e=(o=[t,e])[0],t=o[1]),Math.floor(Math.random()*(t-e+1))+e},e.limitSpriteSize=function(e,t){if(e.spriteFrame){var o=e.spriteFrame.getOriginalSize(),n=1;(o.width>t||o.height>t)&&(n=o.width>o.height?t/o.width:t/o.height,n=Math.min(n,1)),e.node.scale=n}else e.node.scale=1},e.isPointInRect=function(e,t){var o=t.x-t.width/2,n=t.x+t.width/2,i=t.y-t.height/2,a=t.y+t.height/2;return e.x>o&&e.x<n&&e.y>i&&e.y<a},e.onShare=function(){window.tt||window.wx},e.wxShare=function(){},e.replaceStringSymbols=function(e,t,o){for(var n=e,i=0,a=o;i<a.length;i++){var r=a[i];n=n.replace(t,r)}return n},e.showCoinAnimation=function(e,t,o,r,c,s){return void 0===c&&(c=!0),void 0===s&&(s=null),n(this,void 0,Promise,function(){var n,u;return i(this,function(i){switch(i.label){case 0:return n=l.NodePoolMag.instance.getNodeFromPool("coin"),a.AudioMgr.playSoundEffect("effect/daozhang",!1),n?[3,2]:[4,d.default.loadRes("common","prefab/CoinIcon",cc.Prefab)];case 1:u=i.sent(),l.NodePoolMag.instance.createNodePool("coin",1,u,null),i.label=2;case 2:return this.playCoinAnimation({toPosition:e,count:10,amount:o,name:r,fromPosition:t,save:c,onComplete:s}),[2]}})})},e.clearCoins=function(){return n(this,void 0,Promise,function(){return i(this,function(){return cc.director.getScene().children.forEach(function(e){"fei_yinbi"===e.name&&l.NodePoolMag.instance.recycleNodeToPool("coin",e)}),[2]})})},e.playCoinAnimation=function(e){return n(this,void 0,Promise,function(){var t,o,a,p,h,f,g=this;return i(this,function(_){switch(_.label){case 0:for(p in t=function(e){return Math.floor(Math.random()*e)},o={fromPosition:cc.v2(cc.winSize.width/2,cc.winSize.height/2),toPosition:cc.v2(-320,600),count:6,amount:0,name:"gold",save:!0,onComplete:null},a=Object.assign({},o,e))null==a[p]&&(a[p]=o[p]);if(a.save)switch(a.name){case"yinbi":c.GameDataMgr.addSilverCoin(a.amount);break;case"power":u.PlayerDataMgr.addPower(a.amount);break;case"jinbi":u.PlayerDataMgr.addGold(a.amount);break;case"zuanshi":u.PlayerDataMgr.addDiamond(a.amount)}h=function(e){return n(g,void 0,void 0,function(){var o,n,c,u,p,h;return i(this,function(i){switch(i.label){case 0:if(!(o=l.NodePoolMag.instance.getNodeFromPool("coin")))return[2];switch(n=o.getChildByName("img").getComponent(cc.Sprite),c=null,a.name){case"yinbi":return[3,1];case"jinbi":return[3,3];case"zuanshi":return[3,5];case"power":return[3,7]}return[3,9];case 1:return[4,d.default.loadRes(r.BundleNames.Game,"res/yinbi",cc.SpriteFrame)];case 2:return c=i.sent(),[3,9];case 3:return[4,d.default.loadRes(r.BundleNames.Common,"res/ui/tu/goldIcon",cc.SpriteFrame)];case 4:return c=i.sent(),[3,9];case 5:return[4,d.default.loadRes(r.BundleNames.Common,"res/ui/tu/diamondIcon",cc.SpriteFrame)];case 6:return c=i.sent(),[3,9];case 7:return[4,d.default.loadRes(r.BundleNames.Common,"res/ui/tu/powerIcon",cc.SpriteFrame)];case 8:return c=i.sent(),[3,9];case 9:return o.name="fei_yinbi",n.spriteFrame=c,o.zIndex=cc.macro.MAX_ZINDEX,s.LogMgr.debug("\u91d1\u5e01\u8282\u70b9\uff1a",o,a.fromPosition),o.setPosition(a.fromPosition),cc.director.getScene().addChild(o),u=t(240)-120,p=t(240)-120,h=t(200)/1e3,cc.tween(o).delay(h).by(.6,{x:u,y:p},{easing:cc.easing.quadOut}).to(1,{x:a.toPosition.x,y:a.toPosition.y},{easing:cc.easing.quartIn}).call(function(){0!==e?l.NodePoolMag.instance.recycleNodeToPool("coin",o):(a.onComplete&&a.onComplete(),l.NodePoolMag.instance.recycleNodeToPool("coin",o))}).start(),[2]}})})},f=0,_.label=1;case 1:return f<a.count?[4,h(f)]:[3,4];case 2:_.sent(),_.label=3;case 3:return f++,[3,1];case 4:return[2]}})})},e.layoutChildren=function(e,t,o){void 0===t&&(t=0),void 0===o&&(o=!0);var n=e.children,i=[];if(n.length<=1)return 1===n.length&&(i.push(cc.Vec2.ZERO),o&&n[0].setPosition(0,0)),i;var a=0;n.forEach(function(e){return a+=e.width}),a+=(n.length-1)*t;for(var r=0,c=-1;c<n.length-1;c++)r+=-1===c?-a/2+n[0].width/2:n[c].width/2+t+n[c+1].width/2,i.push(cc.v2(r,0)),o&&(n[c+1].x=r);return i},e.sendTrackingEvent=function(e,t){this.sendTrackingDataByItemName(e,t),s.LogMgr.debug("\u53d1\u9001\u57cb\u70b9",e,t)},e.sendTrackingDataByItemName=function(e,t){var o;window.tt?o=window.tt:window.wx&&(o=window.wx),o&&o.uma&&o.uma.trackEvent(e,{itemName:t})},e.loadLevel5Effect=function(e,t,o,a,c,s){return void 0===c&&(c=null),void 0===s&&(s=null),n(this,void 0,Promise,function(){return i(this,function(){return t&&t.destroyAllChildren(),a(r.BundleNames.Common,"item/item_level5_qi_"+e,cc.Prefab).then(function(e){var o=cc.instantiate(e);t&&(o.parent=t,o.setPosition(0,0)),c&&c(o)}),o&&o.destroyAllChildren(),a(r.BundleNames.Common,"item/item_level5_huo_"+e,cc.Prefab).then(function(e){var t=cc.instantiate(e);o&&(t.parent=o,t.setPosition(0,0)),s&&s(t)}),[2]})})},e._onShowCallback=null,e._lastShareTime=0,e._failedShareCount=0,e}();o.default=p,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./GameDataManager":"GameDataManager","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./ResLoader":"ResLoader"}],Const_Common:[function(e,t,o){"use strict";cc._RF.push(t,"e53ffDry2dAMJTCU812PovA","Const_Common"),Object.defineProperty(o,"__esModule",{value:!0}),o.DressUpEquipGuideIndex=o.UpEquipLevelGuideIndex=o.GameBagGuideIndex=o.GuideName=void 0,function(e){e.GameBag="gameBag",e.EquipLevelUp="upEquipLevel",e.FruitDressUpEquip="dressupEquip"}(o.GuideName||(o.GuideName={})),function(e){e[e.InitialGuide1=0]="InitialGuide1",e[e.DragFruitGuide2=1]="DragFruitGuide2",e[e.RefreshButtonGuide3=2]="RefreshButtonGuide3",e[e.SynthesisGuide4=3]="SynthesisGuide4",e[e.StartBattleGuide6=4]="StartBattleGuide6",e[e.EntryGuide7=5]="EntryGuide7",e[e.EntryGuide7Completion=6]="EntryGuide7Completion",e[e.GridGuide8=7]="GridGuide8",e[e.OtherFruitsGuide9=8]="OtherFruitsGuide9",e[e.GuideEnd10=9]="GuideEnd10",e[e.GuideCompletion=10]="GuideCompletion"}(o.GameBagGuideIndex||(o.GameBagGuideIndex={})),function(e){e[e.GiveFixedReward1=0]="GiveFixedReward1",e[e.GuideClickWarehouseFruit2=1]="GuideClickWarehouseFruit2",e[e.GuideClickUpgrade3=2]="GuideClickUpgrade3",e[e.GuideBattle4=3]="GuideBattle4",e[e.GuideCompletion=4]="GuideCompletion"}(o.UpEquipLevelGuideIndex||(o.UpEquipLevelGuideIndex={})),function(e){e[e.GuideDialog=0]="GuideDialog",e[e.SelectFruit=1]="SelectFruit",e[e.GuideDressing=2]="GuideDressing",e[e.GuideCompletion=3]="GuideCompletion"}(o.DressUpEquipGuideIndex||(o.DressUpEquipGuideIndex={})),cc._RF.pop()},{}],Const_Game:[function(e,t,o){"use strict";cc._RF.push(t,"a78eb7Wwi9EepRTuaELxcaf","Const_Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.FruitPrefabName=o.FruitId=o.VideoPurchaseData=void 0;o.VideoPurchaseData=function(){this.coinCount=0},function(e){e[e["\u6768\u6843\u5fcd\u8005"]=1001]="\u6768\u6843\u5fcd\u8005",e[e["\u62db\u8d22\u6a59\u5b50"]=1002]="\u62db\u8d22\u6a59\u5b50",e[e["\u67e0\u6aac\u7cbe"]=1003]="\u67e0\u6aac\u7cbe",e[e["\u7206\u5934\u74dc"]=1004]="\u7206\u5934\u74dc",e[e["\u5143\u5a74\u679c"]=1005]="\u5143\u5a74\u679c",e[e["\u897f\u74dc\u5927\u70ae"]=1006]="\u897f\u74dc\u5927\u70ae",e[e["\u69b4\u83b2\u738b"]=1007]="\u69b4\u83b2\u738b",e[e["\u5357\u74dc\u70b8\u5f39"]=1008]="\u5357\u74dc\u70b8\u5f39",e[e["\u9999\u8549\u5c04\u624b"]=1009]="\u9999\u8549\u5c04\u624b",e[e["\u9ec4\u74dc\u5927\u68d2"]=1010]="\u9ec4\u74dc\u5927\u68d2",e[e["\u8fa3\u59b9\u5b50"]=1011]="\u8fa3\u59b9\u5b50",e[e["\u51bb\u65af\u68a8"]=1012]="\u51bb\u65af\u68a8",e[e["\u6bd2\u8611\u83c7"]=1013]="\u6bd2\u8611\u83c7",e[e["\u5929\u5c71\u96ea\u83b2"]=1014]="\u5929\u5c71\u96ea\u83b2"}(o.FruitId||(o.FruitId={})),function(e){e.gezi="gezi",e.heng2="heng2",e.Lxingfan="Lxingfan",e.sige="sige",e.shu2="shu2",e.Lxing="Lxing",e.shu3="shu3",e.heng3="heng3",e.qizi="qizi"}(o.FruitPrefabName||(o.FruitPrefabName={})),cc._RF.pop()},{}],Const_Hall:[function(e,t,o){"use strict";cc._RF.push(t,"f3041Y9TKxAHZ+bSSaljqXR","Const_Hall"),Object.defineProperty(o,"__esModule",{value:!0}),o.BagEquipShowData=o.equipIconSize=o.BoxInfoData=o.GetItemsData=o.OpenBoxViewData=o.ShopItemInfoData=o.RichType=o.TodayShopItemData=o.ShopSaveData=void 0;o.ShopSaveData=function(){this.nextResetTime=0,this.todayResetCount=0,this.boxExp=0,this.boxLevel=0,this.box1BuyCount=0,this.box2BuyCount=0,this.videoBuyGoldCount=0,this.todayBuyDiamondCount=0};o.TodayShopItemData=function(){},function(e){e[e.Video=0]="Video",e[e.Gold=1]="Gold",e[e.Diamond=2]="Diamond"}(o.RichType||(o.RichType={}));o.ShopItemInfoData=function(){};o.OpenBoxViewData=function(){this.boxType=0};o.GetItemsData=function(){};o.BoxInfoData=function(){},o.equipIconSize=100;o.BagEquipShowData=function(){this.unLockChar=0,this.shuiGuoId=0},cc._RF.pop()},{}],"CrazySDK.types":[function(e,t,o){"use strict";cc._RF.push(t,"b581fU4oyxMdp3d+3NdYqW4","CrazySDK.types");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.BannerError=o.DataError=o.UserError=o.AdError=o.GeneralError=void 0;var a=function(e,t){this.code=e,this.message=t};o.GeneralError=a;var r=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.code=t,n.message=o,n}return i(t,e),t}(a);o.AdError=r;var c=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.code=t,n.message=o,n}return i(t,e),t}(a);o.UserError=c;var s=function(e){function t(t,o){var n=e.call(this,t,o)||this;return n.code=t,n.message=o,n}return i(t,e),t}(a);o.DataError=s;var l=function(e){function t(t,o,n){var i=e.call(this,t,o)||this;return i.code=t,i.message=o,i.containerId=n,i}return i(t,e),t}(a);o.BannerError=l,cc._RF.pop()},{}],CrazySDKDemoLoadScript:[function(e,t,o){"use strict";cc._RF.push(t,"fc47bGV3W5HJathgkkNsHj8","CrazySDKDemoLoadScript");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.CrazySDKDemoLoadScene=void 0;var r=e("./CrazySDK"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nextSceneName="",t}return i(t,e),t.prototype.start=function(){var e=this;r.default.init().then(function(){e.loadScene()}).catch(function(e){e("Initialization failed "+e)})},t.prototype.loadScene=function(){this.nextSceneName?cc.director.loadScene(this.nextSceneName):console.warn("Scene name is not provided")},a([l()],t.prototype,"nextSceneName",void 0),a([s],t)}(cc.Component);o.CrazySDKDemoLoadScene=u,cc._RF.pop()},{"./CrazySDK":"CrazySDK"}],CrazySDKDemo:[function(e,t,o){"use strict";cc._RF.push(t,"2b9c8PBkTNLKZmCD6gzqFNl","CrazySDKDemo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.CrazySDKDemo=void 0;var s=e("./CrazySDK"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.supportedPlatformLabel=null,t.environmentLabel=null,t.adblockUsageLabel=null,t.inviteLinkLabel=null,t}return i(t,e),t.prototype.onLoad=function(){var e=this;this.supportedPlatformLabel.string="Supported platform: "+(s.default.isSupportedPlatform?"yes":"no"),s.default.isSupportedPlatform&&s.default.init().then(function(){e.environmentLabel.string="Environment: "+s.default.environment}).catch(function(e){e("Initialization failed "+e)})},t.prototype.showRewardedVideo=function(){s.default.ad.requestAd("rewarded",{adError:function(e){cc.log("Rewarded video error",e)},adStarted:function(){cc.log("Rewarded video started")},adFinished:function(){cc.log("Rewarded video finished")}})},t.prototype.showAdBreakVideo=function(){s.default.ad.requestAd("midgame",{adError:function(e){cc.log("Ad break video error",e)},adStarted:function(){cc.log("Ad break video started")},adFinished:function(){cc.log("Ad break video finished")}})},t.prototype.checkAdblockUsage=function(){return r(this,void 0,void 0,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,s.default.ad.hasAdblock()];case 1:return e=o.sent(),this.adblockUsageLabel.string="Adblock: "+(e?"on":"off"),[3,3];case 2:return t=o.sent(),this.adblockUsageLabel.string="Adblock check failed",cc.error("Adblock check failed",t),[3,3];case 3:return[2]}})})},t.prototype.gameplayStart=function(){s.default.game.gameplayStart()},t.prototype.gameplayStop=function(){s.default.game.gameplayStop()},t.prototype.sdkGameLoadingStart=function(){s.default.game.loadingStart()},t.prototype.sdkGameLoadingStop=function(){s.default.game.loadingStop()},t.prototype.happytime=function(){s.default.game.happytime()},t.prototype.inviteLink=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,s.default.game.inviteLink({roomId:"123"})];case 1:return e=t.sent(),this.inviteLinkLabel.string=e,[2]}})})},t.prototype.getUser=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,s.default.user.getUser()];case 1:return e=t.sent(),console.log("User retrieved: "+JSON.stringify(e)),[2]}})})},t.prototype.showAuthPrompt=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return[4,s.default.user.showAuthPrompt()];case 1:return e=t.sent(),console.log("Auth prompt result: "+JSON.stringify(e)),[2]}})})},a([d({type:cc.Label})],t.prototype,"supportedPlatformLabel",void 0),a([d({type:cc.Label})],t.prototype,"environmentLabel",void 0),a([d({type:cc.Label})],t.prototype,"adblockUsageLabel",void 0),a([d({type:cc.Label})],t.prototype,"inviteLinkLabel",void 0),a([u],t)}(cc.Component);o.CrazySDKDemo=p,cc._RF.pop()},{"./CrazySDK":"CrazySDK"}],CrazySDK:[function(e,t,o){"use strict";cc._RF.push(t,"954943rZC9D25RCFh4kmaEB","CrazySDK");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0});var r,c=function(){function e(){}return e.Log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log.apply(console,a(["[CrazySDK]"],e))},e}();(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.REQUESTED=1]="REQUESTED",e[e.INITIALIZED=2]="INITIALIZED"})(r||(r={}));var s=new(function(){function e(){this.initResolvers=[],this.initState=r.UNINITIALIZED,this._version="2.0.0";var e=[cc.sys.MOBILE_BROWSER,cc.sys.DESKTOP_BROWSER];this._isSupportedPlatform=e.indexOf(cc.sys.platform)>=0}return Object.defineProperty(e.prototype,"isSupportedPlatform",{get:function(){return this._isSupportedPlatform},enumerable:!1,configurable:!0}),e.prototype.ensureInitialized=function(){if(this.initState!==r.INITIALIZED)throw new Error("CrazySDK is not initialized yet. Please call CrazySDK.init() first.")},Object.defineProperty(e.prototype,"environment",{get:function(){return this.ensureInitialized(),this.sdk.environment},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isQaTool",{get:function(){return this.ensureInitialized(),this.sdk.isQaTool},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ad",{get:function(){return this.ensureInitialized(),this.sdk.ad},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"game",{get:function(){return this.ensureInitialized(),this.sdk.game},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"user",{get:function(){return this.ensureInitialized(),this.sdk.user},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.ensureInitialized(),this.sdk.data},enumerable:!1,configurable:!0}),e.prototype.initInternal=function(){var e=this;if(this.initState===r.UNINITIALIZED){this.initState=r.REQUESTED;var t=document.createElement("script");t.src="https://sdk.crazygames.com/crazygames-sdk-v3.js",t.async=!0,t.onload=function(){return n(e,void 0,void 0,function(){return i(this,function(e){switch(e.label){case 0:return c.Log("JS SDK loaded"),this.sdk=window.CrazyGames.SDK,[4,this.sdk.init({wrapper:{engine:"cocos",sdkVersion:this._version}})];case 1:return e.sent(),this.initState=r.INITIALIZED,this.initResolvers.forEach(function(e){return e()}),this.initResolvers=[],[2]}})})},t.onerror=function(){return cc.error("Failed to load CrazySDK JS. Please check your internet connection.")},document.head.appendChild(t)}},e.prototype.init=function(){var e=this;if(!this.isSupportedPlatform)throw new Error("CrazySDK is not enabled on this platform");return new Promise(function(t){e.initState===r.INITIALIZED?t():(e.initResolvers.push(t),e.initInternal())})},e}());o.default=s,cc._RF.pop()},{}],DataManager:[function(e,t,o){"use strict";cc._RF.push(t,"9fe3d22W6ZCZqBmYtzZaUkr","DataManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=e("../CrazySDK/CrazySDK"),r=e("./0/YpNetMag"),c=e("./GameConfig"),s=e("./LogManager"),l=function(e){function t(){var t=e.call(this)||this;return t._secret_key="secret-key",t._dataMap=new Map,t}return i(t,e),t.prototype._save=function(e,t){if(s.LogMgr.debug("DataManager","saveData",e,t),s.LogMgr.debug("YpNetMag.isload=",r.GameNetworkManager.isLoad),r.GameNetworkManager.isLoad){var o=JSON.stringify(t),n=this._getKey(e);this._setKey(n,o),this.saveCount(),this._dataMap.set(e,t)}},t.prototype.getSecretKey=function(){return this._secret_key},t.prototype.getAllData=function(){return this._dataMap},t.prototype._load=function(e){var t=this._getKey(e),o=a.default.data.getItem(t);console.log("\u672c\u5730\u52a0\u8f7d",e,o);var n=null;if(o)try{n=JSON.parse(o)}catch(i){n=o}return this._dataMap.set(e,n),n},t.prototype.saveCount=function(){var e=Number(a.default.data.getItem("gameversion"));e||(e=0),e+=1,a.default.data.setItem("gameversion",e.toString())},t.prototype._clear=function(e){var t=[];if(e){t.push(e);for(var o=0;o<t.length;o++){var n=t[o],i=this._getKey(n);this._rmKey(i)}}else a.default.data.clear()},t.prototype._getKey=function(e){return c.default.appConfig.Publish?this._secret_key+"-release-"+e:this._secret_key+"-xfd-"+e},t.prototype._setKey=function(e,t){a.default.data.setItem(e,t)},t.prototype._rmKey=function(e){a.default.data.removeItem(e),this._dataMap.delete(e)},t.prototype.isNull=function(e){return null==e},t}(e("./SingletonManager").SingletonBase);o.default=l,cc._RF.pop()},{"../CrazySDK/CrazySDK":"CrazySDK","./0/YpNetMag":"YpNetMag","./GameConfig":"GameConfig","./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],DebugManager:[function(e,t,o){"use strict";cc._RF.push(t,"3442d0HvSBBw4thXVnBmsFi","DebugManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.DebugMgr=void 0;var a=e("./BundleConfig"),r=e("./GameConfig"),c=e("./ResLoader"),s=e("./ResUtil"),l=e("./SingletonManager"),u=e("./UI_Debug"),d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugUI=null,t.logEntries=[],t.isResourcesLoaded=!1,t}return i(t,e),t.prototype.addLogEntry=function(e){this.logEntries.push(e),this.debugUI?this.executeDebug():this.fetchDebugUI()},t.prototype.removeLogEntry=function(e){var t=this.logEntries.indexOf(e);t>=0&&this.logEntries.splice(t,1),this.executeDebug()},t.prototype.clearLogs=function(){this.logEntries.length=0,this.debugUI=null,this.isResourcesLoaded=!1},t.prototype.fetchDebugUI=function(){var e,t=this;this.isResourcesLoaded||(null===(e=r.default.appConfig)||void 0===e?void 0:e.Publish)||(this.isResourcesLoaded=!0,c.default.loadRes(a.BundleNames.Resouce,"common/UI_Debug",cc.Prefab).then(function(e){var o=s.ResourceUtil.instantiate(e);cc.director.getScene().getChildByName("Canvas").getChildByName("UITips").addChild(o),t.debugUI=o.getComponent(u.default),t.executeDebug()}))},t.prototype.executeDebug=function(){var e;null===(e=this.debugUI)||void 0===e||e.refresh(this.logEntries)},t}(l.SingletonBase);o.DebugMgr=d.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameConfig":"GameConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UI_Debug":"UI_Debug"}],DingbuShipei:[function(e,t,o){"use strict";cc._RF.push(t,"22a56v89kJIpLY9Ie6nHrQA","DingbuShipei");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linpinShiPei=0,t.deftop=0,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){var t=e.node.getComponent(cc.Widget);if(t){0===e.deftop&&(e.deftop=t.top);var o=e.deftop;cc.winSize.height/cc.winSize.width>2&&(t.top=o+e.linpinShiPei,t.updateAlignment())}})},a([l()],t.prototype,"linpinShiPei",void 0),a([s],t)}(r.default));o.default=u,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],EditorAsset:[function(e,t,o){"use strict";cc._RF.push(t,"025e4q2IsFKIKaZ+vTVvL/W","EditorAsset"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.load=function(){return new Promise(function(e){e(null),cc.warn("[EditorAsset]","\u8be5\u51fd\u6570\u53ea\u5728\u7f16\u8f91\u5668\u73af\u5883\u5185\u6709\u6548\uff01")})},e}();o.default=n,cc._RF.pop()},{}],Entry:[function(e,t,o){"use strict";cc._RF.push(t,"da803qpn0xMgrpoqN4fnvfq","Entry");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./UIConfig_Entry"),s=e("./LogManager"),l=e("./ScheduleManage"),u=e("./UIManager"),d=e("./UIScene"),p=e("../CrazySDK/CrazySDK"),h=cc._decorator,f=h.ccclass,g=(h.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sdkInit=!1,t.preload=!1,t}return i(t,e),t.prototype._show=function(){var e=this,t=[];for(var o in c.UIConfigEntry.UIConfig_Entry)if(c.UIConfigEntry.UIConfig_Entry.hasOwnProperty(o)){var n=c.UIConfigEntry.UIConfig_Entry[o].prefab;t.push(n)}p.default.isSupportedPlatform&&p.default.init().then(function(){e.sdkInit=!0,e.onInit()}).catch(function(e){e("Initialization failed "+e)}),cc.resources.preload(t,function(t){t&&s.LogMgr.error("\u9884\u52a0\u8f7d\u901a\u7528\u9884\u5236\u4f53\u9519\u8bef: "+t),e.preload=!0,e.onInit()}),cc.debug.setDisplayStats(!1)},t.prototype.onInit=function(){this.preload&&this.sdkInit&&u.default.open(r.BundleNames.Resouce,c.UIConfigEntry.UIView_Entry.UI_Entry)},t.prototype.update=function(e){l.ScheduleMgr.update(e)},a([f],t)}(d.default));o.default=g,cc._RF.pop()},{"../CrazySDK/CrazySDK":"CrazySDK","./BundleConfig":"BundleConfig","./LogManager":"LogManager","./ScheduleManage":"ScheduleManage","./UIConfig_Entry":"UIConfig_Entry","./UIManager":"UIManager","./UIScene":"UIScene"}],EvenType:[function(e,t,o){"use strict";cc._RF.push(t,"04853hh5qlAraMtvWAbIgsS","EvenType"),Object.defineProperty(o,"__esModule",{value:!0}),o.EVENT_TYPE=void 0,o.EVENT_TYPE={Game_next_level:"Game_next_level",Game_add_power:"Game_add_power",Game_count_down_time:"Game_count_down_time",Game_OpenGame:"Game_OpenGame",Game_CameraControl:"Game_CameraControl",Game_Update:"Game_Update",Game_ShangHai_FeiZi:"Game_ShangHai_FeiZi",Game_Moster_DIE:"Game_Moster_DIE",Game_Add_CiTiao:"Game_Add_CiTiao",Game_Moster_Attack:"Game_Moster_Attack",Hall_StartGame:"Hall_StartGame",Hall_ResetRich:"Hall_ResetRich",HallResetShopBox:"HallResetShopBox",HallScrollShop:"HallScrollShop",HallBagShowDrag:"HallBagShowDrag",HallBagRemoveId:"HallBagRemoveId",HallResetBag:"HallResetBag",HallResetUnLockFurit:"HallResetUnLockFurit",Game_CreateDuWu:"Game_CreateDuWu",Game_YinBiValue:"Game_YinBiValue",Game_Add_YinBi:"Game_Add_YinBi",Game_Moster_FenLie:"Game_Moster_FenLie",MainRedPointChange:"MainRedPointChange",HideGuideShow:"HideGuideShow",Game_ZhaoHuan_Moster:"Game_ZhaoHuan_Moster",Game_Update_Level_Award:"Game_Update_Level_Award",Game_Update_TiaoZhan_Award:"Game_Update_TiaoZhan_Award",Game_Add_BaoZha:"Game_Add_BaoZha",Game_Load_View:"Game_Load_View",Home_Add_Gold:"Home_Add_Gold",COMMON_SHAK:"COMMON_SHAK",Game_Value_Fei:"Game_Value_Fei",Game_Hide:"Game_Hide",Game_PASS:"Game_PASS",GAME_LOCK_SCREE:"GAME_LOCK_SCREE",ResetWareHouseAI:"ResetWareHouseAI",ResetGameBagAI:"ResetGameBagAI",GAME_TIAOZHAN_VIEW:"GAME_TIAOZHAN_VIEW",GAME_TIAOZHAN_COUNT:"GAME_TIAOZHAN_COUNT",GAME_BackHall:"GAME_BackHall",GAME_QianDao_COUNT:"GAME_QianDao_COUNT",Game_TIAOZHAN_PASS:"Game_TIAOZHAN_PASS",Game_TiaoZhan_JiFen:"Game_TiaoZhan_JiFen",GAME_UPDATE_BAG:"GAME_UPDATE_BAG",HOME_QIANDAO_UPDATE:"HOME_QIANDAO_UPDATE",GAME_SHANGHAI_TONGJI:"GAME_SHANGHAI_TONGJI",GAME_SHOW_BOOS:"GAME_SHOW_BOOS",GAME_HIDE_TONGJI:"GAME_HIDE_TONGJI",Game_Show_Level5Tip:"Game_Show_Level5Tip",RichText_Click:"RichText_Click"},cc._RF.pop()},{}],EventManager:[function(e,t,o){"use strict";cc._RF.push(t,"bd4cdNRKe1CG5g8gJ77yT1o","EventManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.EventMgrInstance=void 0;var r=e("./LogManager"),c=function(e){function t(){var t=e.call(this)||this;return t._eventTarget=new cc.EventTarget,t}return i(t,e),t.prototype.addListener=function(e,t,o){return e?null==t?(r.LogMgr.warn("addEventListener callback is nil"),!1):(this._eventTarget.on(e,t,o),!0):(r.LogMgr.warn("eventName is empty: "+e),!1)},t.prototype.addListenerOnce=function(e,t,o){return e?null==t?(r.LogMgr.warn("addEventListenerOnce callback is nil"),!1):(this._eventTarget.once(e,t,o),!0):(r.LogMgr.warn("eventName is empty: "+e),!1)},t.prototype.clearListeners=function(){return this._eventTarget.clear(),!0},t.prototype.removeListener=function(e,t,o){this._eventTarget.off(e,t,o)},t.prototype.emitEvent=function(e){for(var t,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];(t=this._eventTarget).emit.apply(t,a([e],o))},t}(e("./SingletonManager").SingletonBase);o.EventMgrInstance=c.getInstance(),cc._RF.pop()},{"./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],ExcelData:[function(e,t,o){"use strict";cc._RF.push(t,"68b11ntH39Mf5nwmiMoz1gy","ExcelData"),Object.defineProperty(o,"__esModule",{value:!0}),o.ExcelData=void 0;var n=e("./BaseExcel"),i=e("./Excel"),a=function(){function e(){}return e.loadConfig=function(t,o){switch(t){case"addPower":n.BaseExcel.loadData(t,o,i.AddPower);break;case"bagEquipRule":n.BaseExcel.loadData(t,o,i.BagEquipRule);break;case"shopBoxLevel":n.BaseExcel.loadData(t,o,i.ShopBoxLevel);break;case"shopControl":n.BaseExcel.loadData(t,o,i.ShopControl);break;case"shuiguoboshu":n.BaseExcel.loadData(t,o,i.ShuiguoBoshu);break;case e.shuiguobuff:n.BaseExcel.loadData(t,o,i.ShuiguoBuff);break;case e.shuiguocitiao:n.BaseExcel.loadData(t,o,i.ShuiguoCitiao);break;case"shuiguoconfig":n.BaseExcel.loadData(t,o,i.ShuiguoConfig);break;case e.shuiguoguaiwu:n.BaseExcel.loadData(t,o,i.ShuiguoGuaiwu);break;case e.shuiguoguanqia:n.BaseExcel.loadData(t,o,i.ShuiguoGuanqia);break;case"shuiguohecheng":n.BaseExcel.loadData(t,o,i.ShuiguoHecheng);break;case"shuiguojineng":n.BaseExcel.loadData(t,o,i.ShuiguoJineng);break;case"shuiguolevel":n.BaseExcel.loadData(t,o,i.ShuiguoLevel);break;case"shuiguoneibulevel":n.BaseExcel.loadData(t,o,i.ShuiguoNeibulevel);break;case"shuiguoqiandao":n.BaseExcel.loadData(t,o,i.ShuiguoQiandao);break;case"shuiguotianfu":n.BaseExcel.loadData(t,o,i.ShuiguoTianfu);break;case"shuiguotiaozhan":n.BaseExcel.loadData(t,o,i.ShuiguoTiaozhan);break;case e.shuiguo:n.BaseExcel.loadData(t,o,i.Shuiguo);break;case e.todayShop:n.BaseExcel.loadData(t,o,i.TodayShop);break;case"wareHouseControl":n.BaseExcel.loadData(t,o,i.WareHouseControl);break;default:console.error("Unknown config name: "+t)}},e.addPower="addPower",e.bagEquipRule="bagEquipRule",e.shopBoxLevel="shopBoxLevel",e.shopControl="shopControl",e.shuiguoboshu="shuiguoboshu",e.shuiguobuff="shuiguobuff_en",e.shuiguocitiao="shuiguocitiao_en",e.shuiguoconfig="shuiguoconfig",e.shuiguoguaiwu="shuiguoguaiwu_en",e.shuiguoguanqia="shuiguoguanqia_en",e.shuiguohecheng="shuiguohecheng",e.shuiguojineng="shuiguojineng",e.shuiguolevel="shuiguolevel",e.shuiguoneibulevel="shuiguoneibulevel",e.shuiguoqiandao="shuiguoqiandao",e.shuiguotianfu="shuiguotianfu",e.shuiguotiaozhan="shuiguotiaozhan",e.shuiguo="shuiguo_en",e.todayShop="todayShop_en",e.wareHouseControl="wareHouseControl",e.allFiles=["addPower","bagEquipRule","shopBoxLevel","shopControl","shuiguoboshu",e.shuiguobuff,e.shuiguocitiao,"shuiguoconfig",e.shuiguoguaiwu,e.shuiguoguanqia,"shuiguohecheng","shuiguojineng","shuiguolevel","shuiguoneibulevel","shuiguoqiandao","shuiguotianfu","shuiguotiaozhan",e.shuiguo,e.todayShop,"wareHouseControl"],e}();o.ExcelData=a,cc._RF.pop()},{"./BaseExcel":"BaseExcel","./Excel":"Excel"}],ExcelLoader:[function(e,t,o){"use strict";cc._RF.push(t,"87cfaN9KYBGZaZhRnAsMU0Z","ExcelLoader");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.ExcelLoader=void 0;var r=e("./BundleConfig"),c=e("./LogManager"),s=e("./ResLoader"),l=e("./ExcelData"),u=function(){function e(){}return e.loadAllExcelFiles=function(){var e=this;return new Promise(function(t){e._allFiles=a(l.ExcelData.allFiles),e._totalCount=e._allFiles.length;var o=setInterval(function(){return n(e,void 0,void 0,function(){var e;return i(this,function(){return this._loadedCount>=this._totalCount?(clearInterval(o),c.LogMgr.debug("load excel done",this._totalCount),t(!0)):(e=this._allFiles.pop())&&this.loadSingleExcelFile(e),[2]})})},1)})},e.loadSingleExcelFile=function(e){var t=this;s.default.loadRes(r.BundleNames.Excel,e,cc.JsonAsset).then(function(o){t._loadedCount++,o?l.ExcelData.loadConfig(e,o):console.error("load excel "+e+" error"),o.decRef()})},e._allFiles=[],e._totalCount=0,e._loadedCount=0,e}();o.ExcelLoader=u,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ExcelData":"ExcelData","./LogManager":"LogManager","./ResLoader":"ResLoader"}],ExcelUtil:[function(e,t,o){"use strict";cc._RF.push(t,"495e5xu0R5ME7x/VDdn/IyZ","ExcelUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.ExcelUtil=void 0;var n=e("./BaseExcel"),i=function(){function e(){}return e.convertValueToString=function(e,t){var o=this;switch(e){case"string":return t;case"string[]":return t.join(",");case"number":return t+"";case"number[]":return t.join(",");case"number[][]":return t.map(function(e){return e.join(",")}).join(";");case"cc.Vec2":return t.x+","+t.y;case"cc.Vec2[]":return t.map(function(e){return e.x+","+e.y}).join(";");case"cc.Color":return t.toHEX("#rrggbb");case"cc.Color[]":return t.map(function(e){return e.toHEX("#rrggbb")}).join(",");case"itemData":return this.convertItemDataArrayToString([t]);case"itemData[]":return t.map(function(e){return o.convertItemDataArrayToString([e])}).join(";");case"boolean":return(t?1:0)+"";case"boolean[]":return t.map(function(e){return e?1:0}).join(",");default:return t}},e.convertStringToDataType=function(e,t){switch(t){case"string":return e;case"string[]":return e.split(",");case"number":return""===e?0:Number(e);case"number[]":return this.convertStringToNumberArray(e);case"number[][]":return this.convertStringToNumber2DArray(e);case"cc.Vec2":return this.convertStringToVec2(e);case"cc.Vec2[]":return this.convertStringToVec2Array(e);case"cc.Color":return this.convertStringToColor(e);case"cc.Color[]":return this.convertStringToColorArray(e);case"itemData":return this.convertStringToItemData(e);case"itemData[]":return this.convertStringToItemDataArray(e);case"boolean":return this.convertStringToBoolean(e);case"boolean[]":return this.convertStringToBooleanArray(e);default:return e}},e.convertItemDataArrayToString=function(e){return e.map(function(e,t){return 0===t?e.key+","+e.value:";"+e.key+","+e.value}).join("")},e.convertStringToBoolean=function(e){return!(""===e||"0"===e||"false"===e.toLowerCase())},e.convertStringToBooleanArray=function(e){return e.length>0?e.split(",").map(this.convertStringToBoolean):[]},e.convertStringToColorArray=function(e){return e.length>0?e.split(",").map(this.convertStringToColor):[]},e.convertStringToColor=function(e){if(e.length>=6){var t=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),i=e.length>6?parseInt(e.substring(6,8),16):255;return new cc.Color(t,o,n,i)}return cc.Color.BLACK},e.convertStringToVec2Array=function(e){return e.length>0?e.split(";").map(this.convertStringToVec2):[]},e.convertStringToVec2=function(e){var t=this.convertStringToNumberArray(e);return t.length>=2?new cc.Vec2(t[0],t[1]):new cc.Vec2(0,0)},e.convertStringToNumberArray=function(e){return e.length>0?e.split(",").map(Number):[]},e.convertStringToNumber2DArray=function(e){return e.length>0?e.split(";").map(this.convertStringToNumberArray):[]},e.convertItemDataToString=function(e){return e.extent?e.key+","+e.extent+","+e.value:e.key+","+e.value},e.convertStringToItemData=function(e){var t=this.convertStringToNumberArray(e),o=t.length;return 2===o?new n.itemData(t[0],t[1]):o>2?new n.itemData(t[0],t[1],t[2]):null},e.convertStringToItemDataArray=function(e){return e.length>0?e.split(";").map(this.convertStringToItemData):[]},e.convertItemArrayToString=function(e){return e.map(this.convertItemDataToString).join(";")},e.convertJsonToValue=function(e,t,o,n){var i={talk_task:"talk"}[o];for(var a in t){var r=e[a]||"";i&&t[a]===i&&r.indexOf("\\n")>=0&&r.replace(/\\n/g,"\n"),n[t[a]]=this.convertStringToDataType(r,n.typeStr[t[a]])}},e.convertExcelData=function(e,t,o){var n=new Map;if(t instanceof cc.JsonAsset){var i=t.json.rows,a=t.json.header;for(var r in i){var c=new o;this.convertJsonToValue(i[r],a,e,c),(u=parseInt(r))&&n.set(u,c)}}else if(Array.isArray(t)){var s=[],l={};for(var r in t.forEach(function(e,t){if(0===t)for(var o in e)s.push(o);var n=!0;for(var o in e)if(0===o.length||e[o].indexOf("##1")>=0||e[o].indexOf("##2")>=0){n=!1;break}if(n){var i=e[s[0]];i&&i.length>0&&(l[i]=e)}}),l){var u;c=new o,this.convertJsonToValue(l[r],s,e,c),(u=parseInt(r))&&n.set(u,c)}}return n},e.convertExcelToArray=function(e,t){void 0===t&&(t=",");for(var o,n=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),i=[[]];o=n.exec(e);){var a=o[1];a.length&&a!==t&&i.push([]);var r=o[2]?o[2].replace(/""/g,'"'):o[3];i[i.length-1].push(r)}return i.splice(-1),i},e.convertExcelToObjectArray=function(e){for(var t=this.convertExcelToArray(e),o=[],n=1;n<t.length;n++){for(var i={},a=0;a<t[0].length&&a<t[n].length;a++)i[t[0][a]]=t[n][a];o.push(i)}return o},e.convertExcelToJson=function(e){return JSON.stringify(this.convertExcelToObjectArray(e))},e.getMatchingData=function(e,t,o,n,i){var a=[];return e.forEach(function(e){e[t]&&e[t]===o&&(n?e[n]===i&&a.push(e):a.push(e))}),a},e}();o.ExcelUtil=i,cc._RF.pop()},{"./BaseExcel":"BaseExcel"}],Excel:[function(e,t,o){"use strict";cc._RF.push(t,"e953coPthNCdKz4ktPzII0L","Excel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.Excel=o.WareHouseControl=o.TodayShop=o.Shuiguo=o.ShuiguoTiaozhan=o.ShuiguoTianfu=o.ShuiguoQiandao=o.ShuiguoNeibulevel=o.ShuiguoLevel=o.ShuiguoJineng=o.ShuiguoHecheng=o.ShuiguoGuanqia=o.ShuiguoGuaiwu=o.ShuiguoConfig=o.ShuiguoCitiao=o.ShuiguoBuff=o.ShuiguoBoshu=o.ShopControl=o.ShopBoxLevel=o.BagEquipRule=o.AddPower=void 0;var a=e("./BaseExcel"),r=e("./ExcelData"),c=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",addCount:"number",maxTime:"number",price:"number",videoAddCount:"number",videoMaxTime:"number"},t}return i(t,e),t}(a.BaseExcel);o.AddPower=c;var s=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",pfbName:"string",level:"number",isHaveQiPao:"number",showName:"string",weight:"number",videoWidget:"number"},t}return i(t,e),t}(a.BaseExcel);o.BagEquipRule=s;var l=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",level:"number",exp:"number",moneyCount:"number",rewards:"number[]",bigMoneyCount:"number",bigRewards:"number[]"},t}return i(t,e),t}(a.BaseExcel);o.ShopBoxLevel=l;var u=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",resetTime:"number",lastResetCount:"number",todayDiamondCount:"number",getDiamondTime:"number",boxPrice:"number",bigBoxPrice:"number",box1BuyCount:"number",box2BuyCount:"number",gold1Count:"number",gold1Time:"number",gold2Count:"number",gold2Price:"number",gold3Count:"number",gold3Price:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShopControl=u;var d=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",levelname:"string",mosterid:"number[][]",mosterjiaxue:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoBoshu=d;var p=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",buffdesc:"string",buffefftype:"number",bufftime:"number",value:"number[]",probability:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoBuff=p;var h=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",citiaomiaoshu:"string",citiaoshuzhitype:"number",weigth:"number",citiaochuxian:"number",quality:"number",jiesuo:"number",name:"string"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoCitiao=h;var f=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",configkey:"string",name:"string",value:"number",content:"string"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoConfig=f;var g=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",mostername:"string",mosterdesc:"string",mosterimg:"string",mosterxue:"number",mosterspeed:"number",mosterskillid:"string",mosterjinyan:"number",boss:"number",resistance:"number",mostertype:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoGuaiwu=g;var _=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",levelname:"string",type:"number",levelaward:"number[][]",levelboshuid:"number[]",awardboshuid:"number[]",yinbi:"number",awardbox1:"number[][]",awardbox2:"number[][]",awardbox3:"number[][]",dipicture:"number",tiaozhanbox1:"number[][]",tiaozhanbox2:"number[][]",tiaozhanbox3:"number[][]",tiaozhanbox4:"number[][]"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoGuanqia=_;var y=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",shuiguoimg:"string",addattack:"number",addbeidongbuff:"number[]",addattackspeed:"number",newTianFuBuff:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoHecheng=y;var v=function(e){function t(){var t=e.call(this)||this;return t.typeStr={},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoJineng=v;var m=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",shengjixiaohao:"number",addattack:"number",addAtkSpeed:"number",addbeidongbuff:"number[]",money:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoLevel=m;var b=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",jinyan:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoNeibulevel=b;var I=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",award:"number",awardtype:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoQiandao=I;var w=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoid:"string",tianfumiaoshu:"string",tianfuleixing:"number",tianfujiesuo:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoTianfu=w;var E=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",tiaozhanId:"number",tiaozhanName:"string",yinbi:"number",awardboshuid:"number[]",levelboshuid:"number[]",dipicture:"number"},t}return i(t,e),t}(a.BaseExcel);o.ShuiguoTiaozhan=E;var M=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",name:"string",quality:"number",attack:"number",attackspeed:"number",baojilv:"number",baojivalue:"number",attacktype:"number",attackstate:"number",unLock:"number",isShow:"number",talent:"number",shuiguomiaoshu:"string",littleDesc:"string",jinJieLv:"number",jinjieShuiGuoId:"number",newName:"string",starWord:"string"},t}return i(t,e),t}(a.BaseExcel);o.Shuiguo=M;var C=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",count:"number",showName:"string",describe:"string",diamond:"number",gold:"number",discount:"number[]",weight:"number",goldWeight:"number"},t}return i(t,e),t}(a.BaseExcel);o.TodayShop=C;var B=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",unLockArray:"number[]"},t}return i(t,e),t}(a.BaseExcel);o.WareHouseControl=B;var P=function(){function e(){}return e.addPower=function(e){return a.BaseExcel.getData(r.ExcelData.addPower,e)},Object.defineProperty(e,"addPower_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.addPower)},enumerable:!1,configurable:!0}),e.bagEquipRule=function(e){return a.BaseExcel.getData(r.ExcelData.bagEquipRule,e)},Object.defineProperty(e,"bagEquipRule_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.bagEquipRule)},enumerable:!1,configurable:!0}),e.shopBoxLevel=function(e){return a.BaseExcel.getData(r.ExcelData.shopBoxLevel,e)},Object.defineProperty(e,"shopBoxLevel_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shopBoxLevel)},enumerable:!1,configurable:!0}),e.shopControl=function(e){return a.BaseExcel.getData(r.ExcelData.shopControl,e)},Object.defineProperty(e,"shopControl_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shopControl)},enumerable:!1,configurable:!0}),e.shuiguoboshu=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoboshu,e)},Object.defineProperty(e,"shuiguoboshu_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoboshu)},enumerable:!1,configurable:!0}),e.getFruitBuff=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguobuff,e)},Object.defineProperty(e,"shuiguobuff_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguobuff)},enumerable:!1,configurable:!0}),e.fruitcitiao=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguocitiao,e)},Object.defineProperty(e,"shuiguocitiao_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguocitiao)},enumerable:!1,configurable:!0}),e.shuiguoconfig=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoconfig,e)},Object.defineProperty(e,"shuiguoconfig_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoconfig)},enumerable:!1,configurable:!0}),e.shuiguoguaiwu=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoguaiwu,e)},Object.defineProperty(e,"shuiguoguaiwu_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoguaiwu)},enumerable:!1,configurable:!0}),e.shuiguoguanqia=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoguanqia,e)},Object.defineProperty(e,"shuiguoguanqia_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoguanqia)},enumerable:!1,configurable:!0}),e.shuiguohecheng=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguohecheng,e)},Object.defineProperty(e,"shuiguohecheng_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguohecheng)},enumerable:!1,configurable:!0}),e.shuiguojineng=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguojineng,e)},Object.defineProperty(e,"shuiguojineng_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguojineng)},enumerable:!1,configurable:!0}),e.shuiguolevel=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguolevel,e)},Object.defineProperty(e,"shuiguolevel_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguolevel)},enumerable:!1,configurable:!0}),e.shuiguoneibulevel=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoneibulevel,e)},Object.defineProperty(e,"shuiguoneibulevel_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoneibulevel)},enumerable:!1,configurable:!0}),e.shuiguoqiandao=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguoqiandao,e)},Object.defineProperty(e,"shuiguoqiandao_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguoqiandao)},enumerable:!1,configurable:!0}),e.shuiguotianfu=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguotianfu,e)},Object.defineProperty(e,"shuiguotianfu_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguotianfu)},enumerable:!1,configurable:!0}),e.shuiguotiaozhan=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguotiaozhan,e)},Object.defineProperty(e,"shuiguotiaozhan_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguotiaozhan)},enumerable:!1,configurable:!0}),e.shuiguo=function(e){return a.BaseExcel.getData(r.ExcelData.shuiguo,e)},Object.defineProperty(e,"shuiguo_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.shuiguo)},enumerable:!1,configurable:!0}),e.getTodayShop=function(e){return a.BaseExcel.getData(r.ExcelData.todayShop,e)},Object.defineProperty(e,"todayShop_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.todayShop)},enumerable:!1,configurable:!0}),e.wareHouseControl=function(e){return a.BaseExcel.getData(r.ExcelData.wareHouseControl,e)},Object.defineProperty(e,"wareHouseControl_all",{get:function(){return a.BaseExcel.getAllData(r.ExcelData.wareHouseControl)},enumerable:!1,configurable:!0}),e}();o.Excel=P,cc._RF.pop()},{"./BaseExcel":"BaseExcel","./ExcelData":"ExcelData"}],FMButton:[function(e,t,o){"use strict";cc._RF.push(t,"43c70tFxOhBKodPmYl3/ubS","FMButton");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.FMButtonComponent=void 0;var r=e("./AudioManager"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.menu,d=c.disallowMultiple,p=c.requireComponent,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isScale=!0,t.isBtSound=!0,t.isBtSound1=!1,t.lastClickTime=0,t}return i(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Button);e.transition===cc.Button.Transition.NONE&&this.isScale&&(e.transition=cc.Button.Transition.SCALE,e.duration=.1,e.zoomScale=.9),this.node.on("click",this.handleClick,this)},t.prototype.handleClick=function(){var e=(new Date).getTime();e-this.lastClickTime>100&&(this.isBtSound&&r.AudioMgr.playSoundEffect("effect/button"),this.lastClickTime=e)},a([l()],t.prototype,"isScale",void 0),a([l()],t.prototype,"isBtSound",void 0),a([l()],t.prototype,"isBtSound1",void 0),a([s,p(cc.Button),d,u("FM\u7ec4\u4ef6/FMButtonComponent")],t)}(cc.Component);o.FMButtonComponent=h,cc._RF.pop()},{"./AudioManager":"AudioManager"}],GameBagData:[function(e,t,o){"use strict";cc._RF.push(t,"29088/49qJI6YuQopPn2yfr","GameBagData"),Object.defineProperty(o,"__esModule",{value:!0}),o.GameBagData=void 0,function(e){e.BagSaveData=function(){this.bagArray=null,this.dressUpEquips=[],this.equipPool=[],this.videoCount=0,this.pickCardCount=0,this.geZiBaoDi=0,this.cellWposArray=[],this.silverCoin=15,this.videoCellCount=0};e.CellData=function(){};e.EquipData=function(){}}(o.GameBagData||(o.GameBagData={})),cc._RF.pop()},{}],GameConfig:[function(e,t,o){"use strict";cc._RF.push(t,"999bbkoYkRFoIUaO8bU6jFP","GameConfig");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0});var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._appConfig=null,t._adConfig=null,t}return i(t,e),Object.defineProperty(t.prototype,"appConfig",{get:function(){return this._appConfig},set:function(e){this._appConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adConfig",{get:function(){return this._adConfig},set:function(e){this._adConfig=e},enumerable:!1,configurable:!0}),t}(e("./SingletonManager").SingletonBase);o.default=a.getInstance(),cc._RF.pop()},{"./SingletonManager":"SingletonManager"}],GameDataManager:[function(e,t,o){"use strict";cc._RF.push(t,"cf7e6wzCPtKraUT6As7mNkm","GameDataManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.GameDataMgr=void 0;var a,r=e("./DataManager"),c=e("./EventManager"),s=e("./TipsManager"),l=e("./EvenType"),u=e("./Excel"),d=e("./GameBagData"),p=e("./LanMgr");(function(e){e.level="level",e.tiaozhanlevel="tiaozhanlevel",e.gameBag="gameBag"})(a||(a={}));var h=function(e){function t(){var t=e.call(this)||this;return t._secretKey="game",t._level={1:{ispass:!1,maxboshu:0,nowboshu:0,awardjilu:0,citiaodata:null,level:1,huanyipi:0,allhave:0,rolelevel:0}},t._tiaozhanlevel={1:{isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null}},t._gameBag=new d.GameBagData.BagSaveData,t}return i(t,e),t.prototype.initialize=function(e){void 0===e&&(e=null),this.reset(),this._level=Object.assign({},this._level,this.getCurrentData(a.level,e)),this._tiaozhanlevel=Object.assign({},this._tiaozhanlevel,this.getCurrentData(a.tiaozhanlevel,e)),this._gameBag=Object.assign({},this._gameBag,this.getCurrentData(a.gameBag,e))},t.prototype.getCurrentData=function(e,t){return t&&t[e]?t[e]:this._load(e)},t.prototype.reset=function(){this._level={1:{ispass:!1,maxboshu:0,nowboshu:0,awardjilu:0,citiaodata:null,level:1,huanyipi:0,allhave:0,rolelevel:0}},this._tiaozhanlevel={1:{isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null}},this._gameBag=new d.GameBagData.BagSaveData},t.prototype.getCurrentLevelData=function(e){return this._level[e]},t.prototype.getCiTiaoCount=function(e,t){var o=this._level[e];return o?1===t?o.huanyipi:o.allhave:1===t?10:6},t.prototype.clearChallengeLevel=function(e){this._tiaozhanlevel[e]={isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null},this._save(a.tiaozhanlevel,this._tiaozhanlevel)},t.prototype.updateChallengePoints=function(e,t){var o=this._tiaozhanlevel[e];if(o){var n=(o.leijifen||0)+t;o.leijifen=n,this._tiaozhanlevel[e]=o,this._save(a.tiaozhanlevel,this._tiaozhanlevel),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_TiaoZhan_JiFen)}},t.prototype.getChallengePoints=function(e){var t;return(null===(t=this._tiaozhanlevel[e])||void 0===t?void 0:t.leijifen)||0},t.prototype.updateChallengeContinue=function(e,t){var o=this._tiaozhanlevel[e];o&&(o.isjixu=t,this._tiaozhanlevel[e]=o,this._save(a.tiaozhanlevel,this._tiaozhanlevel))},t.prototype.updateRoleLevel=function(e,t,o,n){if(2===n){var i=this._level[e];i&&(i.rolelevel={level:t,levelexper:o},this._level[e]=i,this._save(a.level,this._level))}},t.prototype.getRoleLevel=function(e,t){var o;return 2===t&&(null===(o=this._level[e])||void 0===o?void 0:o.rolelevel)||null},t.prototype.updateCurrentLevel=function(e,t,o,n){if(2===n){var i=this._level[e];i&&(i.huanyipi=t,i.allhave=o,this._level[e]=i,this._save(a.level,this._level))}},t.prototype.unlockLevelProgress=function(e){this._level[e]={ispass:!1,nowboshu:0,awardjilu:{},level:e},this._save(a.level,this._level)},t.prototype.getContinueGame=function(){for(var e in this._level){var t=this._level[e];if(t&&t.citiaodata){var o=u.Excel.shuiguoguanqia(Number(e));if(o.levelboshuid.length<=t.maxboshu&&this.updateLevelPassState(Number(e),2),o.levelboshuid.length>t.nowboshu)return t;break}}return null},t.prototype.getContinueChallenge=function(){return!!this._tiaozhanlevel[1].isjixu},t.prototype.updateCiTiaoData=function(e,t){var o=this._level[e];o&&(o.citiaodata=t?t.concat():null,this._save(a.level,this._level))},t.prototype.getCurrentMaxLevel=function(){var e=[],t=this._level;for(var o in t)t[o]&&t[o].ispass&&e.push(Number(o));return(e=e.sort(function(e,t){return e>t?1:-1})).length<=0?0:e[e.length-1]},t.prototype.updateLevelWave=function(e,t,o){var n,i;if(1===o?(n=this._tiaozhanlevel[e],i=u.Excel.shuiguotiaozhan(e)):2===o&&(n=this._level[e],i=u.Excel.shuiguoguanqia(e)),n){var r=n.maxboshu||0;(t=Math.min(t,i.levelboshuid.length))>=r&&(n.maxboshu=t),n.nowboshu=t,i.levelboshuid[t]||this.updateLevelPassState(e,o),this._save(1===o?a.tiaozhanlevel:a.level,n)}},t.prototype.updateLevelPassState=function(e,t){if(1===t)(o=this._tiaozhanlevel[e])&&(o.ispass=!0,this._tiaozhanlevel[e]=o,this._save(a.tiaozhanlevel,this._tiaozhanlevel),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_TIAOZHAN_PASS));else if(2===t){var o;(o=this._level[e])&&(o.ispass=!0,this._level[e]=o,this.unlockLevelProgress(e+1),this._save(a.level,this._level),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_PASS))}},t.prototype.getCurrentLevelPassState=function(e,t){var o;return 1===t?(o=this._tiaozhanlevel[e])?o.ispass?1:2:-1:2===t?(o=this._level[e])?o.ispass?1:2:-1:void 0},t.prototype.getCurrentLevelWaveState=function(e,t){var o;return 1===t?(o=this._tiaozhanlevel[e])&&o.nowboshu||0:2===t?(o=this._level[e])&&o.nowboshu||0:void 0},t.prototype.getMaxLevelWaveState=function(e,t){var o;return 1===t?(o=this._tiaozhanlevel[e])&&o.maxboshu||0:2===t?(o=this._level[e])&&o.maxboshu||0:void 0},t.prototype.updateChallengeAwardRecord=function(e,t){var o=this._tiaozhanlevel[e];o.awardjilu=o.awardjilu||{},o.awardjilu[t]="isok",this._tiaozhanlevel[e]=o,c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_Update_TiaoZhan_Award),this._save(a.tiaozhanlevel,this._tiaozhanlevel)},t.prototype.getChallengeAwardRecord=function(e,t){var o,n=null===(o=this._tiaozhanlevel[e])||void 0===o?void 0:o.awardjilu;return!!n&&!!n[t]},t.prototype.updateLevelAwardRecord=function(e,t){var o=this._level[e];o.awardjilu=o.awardjilu||{},o.awardjilu[t]="isok",this._level[e]=o,c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_Update_Level_Award),this._save(a.level,this._level)},t.prototype.getLevelAwardRecord=function(e,t){var o,n=null===(o=this._level[e])||void 0===o?void 0:o.awardjilu;return!!n&&!!n[t]},t.prototype.hasLevelAward=function(e){var t=this,o=u.Excel.shuiguoguanqia(e);if(o){var n=o.awardboshuid,i=this.getMaxLevelWaveState(e,2);return n.some(function(o){return i>=o&&!t.getLevelAwardRecord(e,o)})}return!1},Object.defineProperty(t.prototype,"getGameBag",{get:function(){return this._gameBag},enumerable:!1,configurable:!0}),t.prototype.clearGameBagData=function(){this._gameBag=new d.GameBagData.BagSaveData,this.saveGameBagData(),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_YinBiValue)},t.prototype.saveGameBagData=function(){this._save(a.gameBag,this._gameBag)},Object.defineProperty(t.prototype,"getSilverCoin",{get:function(){return this._gameBag.silverCoin||0},enumerable:!1,configurable:!0}),t.prototype.addSilverCoin=function(e){Number.isNaN(e)||(this._gameBag.silverCoin+=e),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_YinBiValue),this.saveGameBagData()},t.prototype.subtractSilverCoin=function(e){if(!Number.isNaN(e)){if(this._gameBag.silverCoin<e)return s.TipMgr.showToast(p.langMgr.getStr("0002")),!1;this._gameBag.silverCoin-=e}return c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_YinBiValue),this.saveGameBagData(),!0},t}(r.default);o.GameDataMgr=new h,cc._RF.pop()},{"./DataManager":"DataManager","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameBagData":"GameBagData","./LanMgr":"LanMgr","./TipsManager":"TipsManager"}],GameGlobalVariable:[function(e,t,o){"use strict";cc._RF.push(t,"7ba8bimNwxAWJvmNRiCBrLI","GameGlobalVariable");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}},a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.GameGlobalVariable=void 0;var r=e("./BundleConfig"),c=e("./AudioManager"),s=e("./EventManager"),l=e("./ResLoader"),u=e("./EvenType"),d=e("./Excel"),p=e("./ExcelUtil"),h=e("./UI_BulletMove"),f=e("./UI_MosterLogic"),g=e("./NodePoolMag"),_=function(){function e(){}return e.initializeConfig=function(){this.huanyipi=this.getConfigData("huanyipin"),this.allhave=this.getConfigData("allhave"),this.shaodangtilicount=this.getConfigData("saodangpower"),this.kaishitilicount=this.getConfigData("kaishipower"),this.meirimianfeicount=this.getConfigData("saodangfreecount"),this.houlevelunlock=this.getConfigData("houlevellunlock"),this.wujintilicount=this.getConfigData("wujintilicount"),this.wujinsaodangcount=this.getConfigData("wujinsaodangtilicount"),this.wujinmeirifreecount=this.getConfigData("wujinmeirifreecount"),this.wujinunlockcount=this.getConfigData("wujinunlockcount"),this.addPowerTime=this.getConfigData("addPowerTime"),this.bagVideoCellCount=this.getConfigData("bagVideoCellCount"),this.severdatatime=this.getConfigData("severdatatime"),this.putongfuhuocount=this.getConfigData("putongfuhuocount"),this.wujinfuhuocount=this.getConfigData("wujinfuhuocount"),this.liulianlanguabomb=this.getConfigData("liulianlanguabomb")},e.getConfigData=function(e){var t=p.ExcelUtil.getMatchingData(d.Excel.shuiguoconfig_all,"configkey",e);return t&&t.length>0?t[0].value:{severdatatime:3,huanyipin:10,allhave:3,saodangpower:5,kaishipower:5,saodangfreecount:3,houlevellunlock:4,wujintilicount:5,wujinsaodangtilicount:5,wujinmeirifreecount:3,addPowerTime:20,bagVideoCellCount:3,wujinunlockcount:4,putongfuhuocount:999999,wujinfuhuocount:1,liulianlanguabomb:.4}[e]||0},e.recordAttack=function(e,t){var o=this.nowwShangHai[e]||0;o+=t,this.nowwShangHai[e]=o,s.EventMgrInstance.emitEvent(u.EVENT_TYPE.GAME_SHANGHAI_TONGJI)},e.clearAttackRecords=function(){this.nowwShangHai={}},e.playHitSoundEffect=function(){(new Date).getTime()-this.offtime1>3e3&&(c.AudioMgr.playSoundEffect("sound/\u51bb\u68a8\u97f3\u6548",!1,r.BundleNames.Game),this.offtime1=(new Date).getTime())},e.playHitDurianSoundEffect=function(){(new Date).getTime()-this.offtimeLiuLian>300*Math.random()&&(c.AudioMgr.playSoundEffect("sound/\u69b4\u83b2\u6253\u51fb",!1,r.BundleNames.Game),this.offtimeLiuLian=(new Date).getTime())},e.playHitSound=function(){(new Date).getTime()-this.offtime>500*Math.random()&&(c.AudioMgr.playSoundEffect("sound/hit",!1,r.BundleNames.Game),this.offtime=(new Date).getTime())},e.playBomb1SoundEffect=function(){(new Date).getTime()-this.offbomb1time>500*Math.random()&&(c.AudioMgr.playSoundEffect("sound/\u5357\u74dc\u70b8\u5f39",!1,r.BundleNames.Game),this.offbomb1time=(new Date).getTime())},e.playBomb2SoundEffect=function(){(new Date).getTime()-this.offbomb2time>500*Math.random()&&(c.AudioMgr.playSoundEffect("sound/\u897f\u74dc\u7206\u70b8",!1,r.BundleNames.Game),this.offbomb2time=(new Date).getTime())},e.isSpecialLevel=function(){return-1===this.nowlevel?1:2},e.decrementHuanYiPi=function(){this.huanyipi-=1},e.decrementAllHave=function(){this.allhave-=1},e.getSceneId=function(){return(-1===this.nowlevel?d.Excel.shuiguotiaozhan(this.teshulevel):d.Excel.shuiguoguanqia(this.nowlevel)).dipicture},e.addCurrentLevelCurrency=function(e){this.nowlevelhuobi+=e},e.subtractCurrentLevelCurrency=function(e){this.nowlevelhuobi-=e},e.sortMonsters=function(e){for(var t=[],o=[],n=0,i=e.getComponentsInChildren(f.default);n<i.length;n++){var r=i[n];if(!r.isDie){var c=cc.Vec2.subtract(cc.v2(),cc.v2(),r.node.getPosition()),s=180/Math.PI*Math.atan2(c.y,c.x)+180;s>=0&&s<=90?t.push({angle:s,script:r}):o.push({angle:s,script:r})}}return t.sort(function(e,t){return t.angle-e.angle}),o.sort(function(e,t){return t.angle-e.angle}),a(t,o)},e.sortBlueMelons=function(e,t){for(var o=[],n=[],i=0,a=e;i<a.length;i++){var r=a[i];r.setBoxState(!1);var c=cc.Vec2.subtract(cc.v2(),cc.v2(),r.node.getPosition()),s=180/Math.PI*Math.atan2(c.y,c.x)+180;s>=0&&s<=90?o.push({angle:s,script:r}):n.push({angle:s,script:r})}o.sort(function(e,t){return t.angle-e.angle}),n.sort(function(e,t){return t.angle-e.angle});var l=this.sortMonsters(t)[0];l&&(o.length>0||n.length>0)&&(l.angle>0&&l.angle<90?(n.forEach(function(e){return e.script.setBoxState(!0)}),o.forEach(function(e){e.angle>l.angle+20?e.script.setBoxState(!1):e.script.setBoxState(!0)})):(o.forEach(function(e){return e.script.setBoxState(!1)}),n.forEach(function(e){e.angle>l.angle+20?e.script.setBoxState(!1):e.script.setBoxState(!0)})))},e.addMovingBullet=function(e){this.movebullets.push(e),-1===this.ishavetime&&(this.sendMovingBullet(),this.ishavetime=setInterval(this.sendMovingBullet.bind(this),200))},e.sendMovingBullet=function(){return n(this,void 0,Promise,function(){var e,t,o,n,a;return i(this,function(i){switch(i.label){case 0:return this.movebullets.length>0?(e=this.movebullets.shift(),(t=g.NodePoolMag.instance.getNodeFromPool("bullet_3"))?[3,2]:[4,l.default.loadRes(r.BundleNames.Game,"prefabs/bullet/bullet3",cc.Prefab)]):[3,3];case 1:o=i.sent(),g.NodePoolMag.instance.createNodePool("bullet_3",1,o),t=g.NodePoolMag.instance.getNodeFromPool("bullet_3"),i.label=2;case 2:return n=e.paths.children[5].convertToWorldSpaceAR(cc.v2()),a=e.liulianNode.convertToNodeSpaceAR(n),t.setPosition(a),t.scale=1,e.liulianNode.addChild(t),setTimeout(function(){t.getComponent(h.default).initializeBullet(e)},10),[3,4];case 3:clearInterval(this.ishavetime),this.ishavetime=-1,i.label=4;case 4:return[2]}})})},e.getMonsterDistance=function(e,t){var o=e.node.x,n=e.node.y,i=e.moveindex,a=t.children;switch(i){case 1:(o+=100)>a[0].x&&(o=a[0].x);break;case 2:if((n+=100)>a[1].y){var r=n-a[1].y;n=a[1].y,o=a[1].x+r,i-=1}break;case 3:(o-=100)<a[2].x&&(r=Math.abs(o-a[2].x),o=a[2].x,n=a[2].y+r,i-=1);break;case 4:(n-=100)<a[3].y&&(r=Math.abs(n-a[3].y),o=a[3].x-r,n=a[3].y,i-=1);break;case 5:(o+=100)>a[4].x&&(r=Math.abs(o+a[4].x),o=a[4].x,n=a[4].y-r,i-=1)}return{pos:cc.v2(o,n),tagindex:i}},e.generateEquidistantCoordinates=function(e,t,o,n,i,a,r,c){void 0===a&&(a=1);for(var s=[],l=0;l<i;l++){var u=e,d=t;if(1===a&&(u=e+o*l)>c)break;if(2===a&&(u=e-o*l)<c)break;if(3===a&&(d=t+n*l)>c)break;if(4===a&&(d=t-n*l)<c)break;s.push({pos:cc.v2(u,d),tagindex:r})}return s},e.splitCreateMonster=function(e,t){for(var o=t.children,n=2,i=[],a=e.moveindex;a>0;a--){var r=e.node.x,c=e.node.y,s=0,l=0,u=[];switch(a){case 5:l=o[a].y,s=o[a].x,a===e.moveindex&&(s=r),u=this.generateEquidistantCoordinates(s,l,50,0,n,1,a,o[4].x);break;case 1:l=o[a].y,s=o[a].x,a===e.moveindex&&(s=r),u=this.generateEquidistantCoordinates(s,l,50,0,n,1,a,o[0].x);break;case 2:l=o[a].y,s=o[a].x,a===e.moveindex&&(l=c),u=this.generateEquidistantCoordinates(s,l,0,50,n,3,a,o[1].y);break;case 3:l=o[a].y,s=o[a].x,a===e.moveindex&&(s=r),u=this.generateEquidistantCoordinates(s,l,50,0,n,2,a,o[2].x);break;case 4:l=o[a].y,s=o[a].x,a===e.moveindex&&(l=c),u=this.generateEquidistantCoordinates(s,l,0,50,n,4,a,o[3].y)}if(u.length>=n){i=i.concat(u.slice(0,n));break}n-=u.length,i=i.concat(u)}return i},e.nowlevel=1,e.teshulevel=1,e.nowlevelhuobi=0,e.selfMap={},e.bulletNode=null,e.languaNode=null,e.liulianNode=null,e.mosterNode=null,e.effNode=null,e.paths=null,e.huanyipi=0,e.allhave=0,e.shaodangtilicount=0,e.kaishitilicount=0,e.meirimianfeicount=0,e.houlevelunlock=0,e.wujintilicount=0,e.wujinsaodangcount=0,e.wujinmeirifreecount=0,e.wujinunlockcount=0,e.putongfuhuocount=0,e.wujinfuhuocount=0,e.liulianlanguabomb=0,e.jiasuState=1,e.isPad=!1,e.severdatatime=3,e.addPowerTime=0,e.bagVideoCellCount=0,e.adddimond=0,e.addjinbi=0,e.addpower=0,e.normalMaxLevel=4,e.zaZhongMaxLevel=5,e.viewofftime=0,e.isFirstGuide=!1,e.nowwShangHai={},e.offtime1=0,e.offtimeLiuLian=0,e.offtime=0,e.offbomb1time=0,e.offbomb2time=0,e.movebullets=[],e.ishavetime=-1,e}();o.GameGlobalVariable=_,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./NodePoolMag":"NodePoolMag","./ResLoader":"ResLoader","./UI_BulletMove":"UI_BulletMove","./UI_MosterLogic":"UI_MosterLogic"}],GuideControl:[function(e,t,o){"use strict";cc._RF.push(t,"670b6ZFwFlKL6xl/+0bZ9Jv","GuideControl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GuideCtrlInstance=void 0;var c=e("./BundleConfig"),s=e("./SingletonManager"),l=e("./ResLoader"),u=e("./ResUtil"),d=e("./GuideMask"),p=e("./GuideShou"),h=function(e){function t(){var t=e.call(this)||this;return t.shouNodeArray=[],t.guideShowPrefab=null,t.guideMaskInstance=null,t}return i(t,e),t.prototype.showOneFingerGuide=function(e){return a(this,void 0,Promise,function(){var t,o,n,i;return r(this,function(a){switch(a.label){case 0:return t=this,o=function(){t.recycleOneFingerGuide(n),e.parent.off(cc.Node.EventType.TOUCH_START,o)},this.shouNodeArray.length>0?(n=this.shouNodeArray.shift(),[3,4]):[3,1];case 1:return this.guideShowPrefab?[3,3]:(i=this,[4,l.default.loadRes(c.BundleNames.Common,"prefab/GuideShou",cc.Prefab)]);case 2:i.guideShowPrefab=a.sent(),a.label=3;case 3:n=cc.instantiate(this.guideShowPrefab),a.label=4;case 4:return n.parent=e.parent,n.stopAllActions(),n.active=!0,n.setPosition(e.x,e.y),e.isWillClickClose&&e.parent.on(cc.Node.EventType.TOUCH_START,o),e.getFingerCallBack&&e.getFingerCallBack(n),n.getComponent(p.default).initializeSettings(e.isWillClickClose),[2]}})})},t.prototype.recycleOneFingerGuide=function(e){e.active=!1,e.removeFromParent(!1),this.shouNodeArray.push(e)},t.prototype.clearGuide=function(){this.guideMaskInstance&&(this.guideMaskInstance.destroy(),this.guideMaskInstance=null)},t.prototype.showGuide=function(e){return a(this,void 0,Promise,function(){var t,o,n;return r(this,function(i){switch(i.label){case 0:return this.guideMaskInstance?[3,2]:[4,l.default.loadRes(c.BundleNames.Common,"prefab/GuideMask",cc.Prefab)];case 1:t=i.sent(),o=cc.director.getScene().getChildByName("Canvas"),(n=u.ResourceUtil.instantiate(t)).parent=o,this.guideMaskInstance=n.getComponent(d.default),n.setPosition(0,0),i.label=2;case 2:return this.guideMaskInstance.node.zIndex=1e3,this.guideMaskInstance.node.active=!0,this.guideMaskInstance.initializeGuide(e),[2]}})})},t.prototype.showGuideMaskFrame=function(e,t){var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(1e3,1700),i=500+(t.height-1334)/2;this.showGuide({wPos:o,size:n,alwaysShow:!0,sayNodePos:cc.v2(0,i),callBack:null,sayStr:e,isHideBtn:!0,noMaskTween:!0})},t}(s.SingletonBase);o.GuideCtrlInstance=h.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GuideMask":"GuideMask","./GuideShou":"GuideShou","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],GuideMask:[function(e,t,o){"use strict";cc._RF.push(t,"fd087j9rrtFmaE35YP9ahsw","GuideMask");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./AudioManager"),c=e("./EventManager"),s=e("./TipsManager"),l=e("./ResKeeper"),u=e("./AIControl"),d=e("./EvenType"),p=e("./PlayerDataManager"),h=e("./GuideShou"),f=e("./GameDataManager"),g=e("./Const_Common"),_=e("./LanMgr"),y=cc._decorator,v=y.ccclass,m=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MaskNode=null,t.mengBanBtn=null,t.shouZhiNode=null,t.btnNode=null,t.sayNode=null,t.sayLabel=null,t.tipNode=null,t.sanJiaoNode=null,t.blockNode=null,t.breakeBtn=null,t.isTweenTime=!0,t.alwaysShow=!1,t.guideCallback=null,t}return i(t,e),t.prototype.onLoad=function(){this.initializeButtonEvents(),this.startNodeActions(),this.breakeBtn.on(cc.Node.EventType.TOUCH_END,this.breakButtonHandler,this)},t.prototype.onClick=function(){s.TipMgr.showToast(_.langMgr.getStr("0003"))},t.prototype.initializeGuide=function(e){var t=this;this.breakeBtn.active=!1,p.PlayerDataMgr.getGuideIndexByTaskName(g.GuideName.GameBag)!==g.GameBagGuideIndex.GuideCompletion&&(p.PlayerDataMgr.WHITE_NAME_NO_VIDEO||cc.sys.isBrowser)&&(this.breakeBtn.active=!0),this.blockNode.active=!0,this.prepareGuideSetup(e,function(){t.completeGuideSetup(e)})},t.prototype.initializeButtonEvents=function(){this.btnNode.on(cc.Node.EventType.TOUCH_START,this.playButtonEffect,this),this.btnNode.on(cc.Node.EventType.TOUCH_END,this.handleButtonClick,this),this.mengBanBtn.node.on("click",this.onClick,this)},t.prototype.playButtonEffect=function(){r.AudioMgr.playSoundEffect("effect/button")},t.prototype.handleButtonClick=function(){this.isTweenTime||(this.alwaysShow||(this.node.active=!1),this.guideCallback&&this.guideCallback())},t.prototype.startNodeActions=function(){this.tipNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.7,1.1,1.1),cc.scaleTo(.7,1,1)))),this.sanJiaoNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,this.sanJiaoNode.x,this.sanJiaoNode.y+15),cc.moveTo(.5,this.sanJiaoNode.x,this.sanJiaoNode.y))))},t.prototype.breakButtonHandler=function(){p.PlayerDataMgr.setGuideIndex(g.GuideName.GameBag,g.GameBagGuideIndex.GuideCompletion),p.PlayerDataMgr.setGuideIndex(g.GuideName.EquipLevelUp,g.UpEquipLevelGuideIndex.GuideCompletion),f.GameDataMgr.reset(),c.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_BackHall),this.node.active=!1},t.prototype.prepareGuideSetup=function(e,t){this.guideCallback=e.callBack,this.shouZhiNode.active=!1,this.sayNode.active=null!=e.sayStr,this.sayLabel.string=e.sayStr,this.alwaysShow=e.alwaysShow||!1,this.tipNode.active=e.showTipNode,e.sayNodePos?(this.sayNode.setPosition(e.sayNodePos),e.noMaskTween||(this.sayNode.scale=0,this.sayNode.runAction(cc.scaleTo(.5,1,1)))):this.sayNode.setPosition(0,0),this.btnNode.active=!1,this.isTweenTime=!0,e.size?this.prepareNodeSize(e,t):this.resetNodeSize()},t.prototype.prepareNodeSize=function(e,t){this.MaskNode.setPosition(this.node.convertToNodeSpaceAR(e.wPos)),this.MaskNode.width=1e3,this.MaskNode.height=1700,cc.Tween.stopAllByTarget(this.MaskNode),e.noMaskTween?(this.MaskNode.width=e.size.width,this.MaskNode.height=e.size.height,t()):cc.tween(this.MaskNode).to(.5,{width:e.size.width,height:e.size.height}).call(t).start()},t.prototype.resetNodeSize=function(){this.MaskNode.width=0,this.MaskNode.height=0,this.MaskNode.setPosition(0,0),this.isTweenTime=!1,this.btnNode.width=1e3,this.btnNode.height=1700,this.btnNode.setPosition(0,0),this.btnNode.active=!0,this.blockNode.active=!1},t.prototype.completeGuideSetup=function(e){var t=this;this.blockNode.active=!1,this.isTweenTime=!1,this.shouZhiNode.active=!e.isHideBtn,e.isHideBtn||this.shouZhiNode.getComponent(h.default).initializeSettings(!0),this.shouZhiNode.setPosition(this.MaskNode.getPosition()),this.btnNode.active=!e.isHideBtn,this.btnNode.setPosition(this.MaskNode.getPosition()),e.btnIsMax?(this.btnNode.width=2e3,this.btnNode.height=3e3):(this.btnNode.width=e.size.width,this.btnNode.height=e.size.height),u.default._instance.isOpen&&u.default._instance.displayClickButton(this.btnNode,function(){t.alwaysShow||(t.node.active=!1),t.guideCallback&&t.guideCallback()})},a([m(cc.Node)],t.prototype,"MaskNode",void 0),a([m(cc.Button)],t.prototype,"mengBanBtn",void 0),a([m(cc.Node)],t.prototype,"shouZhiNode",void 0),a([m(cc.Node)],t.prototype,"btnNode",void 0),a([m(cc.Node)],t.prototype,"sayNode",void 0),a([m(cc.Label)],t.prototype,"sayLabel",void 0),a([m(cc.Node)],t.prototype,"tipNode",void 0),a([m(cc.Node)],t.prototype,"sanJiaoNode",void 0),a([m(cc.Node)],t.prototype,"blockNode",void 0),a([m(cc.Node)],t.prototype,"breakeBtn",void 0),a([v],t)}(l.default);o.default=b,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GuideShou":"GuideShou","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager"}],GuideShou:[function(e,t,o){"use strict";cc._RF.push(t,"76759+xzodP+ZAc3X1iIkxu","GuideShou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./GuideControl"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=e.call(this)||this;return t.shouNode=null,t.quanNode=null,t}return i(t,e),t.prototype.initializeSettings=function(e){var t=this;this.shouNode.stopAllActions(),this.shouNode.children[0].active=!0,this.shouNode.children[1].active=!1,this.quanNode.stopAllActions(),this.quanNode.active=!1,e&&(this.quanNode.active=!0,this.quanNode.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){t.quanNode.opacity=255,t.quanNode.scale=1}),cc.spawn(cc.scaleTo(.5,1.5,1.5),cc.fadeOut(1))))),this.shouNode.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){var e=t.shouNode.children[0],o=t.shouNode.children[1];e.active=!e.active,o.active=!e.active})))))},t.prototype.onEnable=function(){r.EventMgrInstance.addListener(s.EVENT_TYPE.HideGuideShow,this.closeComponent,this)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.HideGuideShow,this.closeComponent,this)},t.prototype.closeComponent=function(){l.GuideCtrlInstance.recycleOneFingerGuide(this.node)},a([p(cc.Node)],t.prototype,"shouNode",void 0),a([p(cc.Node)],t.prototype,"quanNode",void 0),a([d],t)}(c.default);o.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GuideControl":"GuideControl","./ResKeeper":"ResKeeper"}],HallGlobalVariable:[function(e,t,o){"use strict";cc._RF.push(t,"0bba0CEsVRA8bn4upqtfPfP","HallGlobalVariable"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./Const_Game"),i=e("./Excel"),a=e("./PlayerDataManager"),r=function(){function e(){}return Object.defineProperty(e,"getShuiGuoLevelMap",{get:function(){var e=this;return this._shuiGuoLevelMap||(this._shuiGuoLevelMap=new Map,i.Excel.shuiguolevel_all.forEach(function(t){e._shuiGuoLevelMap.has(t.shuiguoId)||e._shuiGuoLevelMap.set(t.shuiguoId,[]),e._shuiGuoLevelMap.get(t.shuiguoId).push(t)})),this._shuiGuoLevelMap},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getShuiGuoCiTiaoMap",{get:function(){var e=this;return this._shuiGuoCiTiaoMap||(this._shuiGuoCiTiaoMap=new Map,i.Excel.shuiguocitiao_all.forEach(function(t){e._shuiGuoCiTiaoMap.has(t.shuiguoId)||e._shuiGuoCiTiaoMap.set(t.shuiguoId,[]),e._shuiGuoCiTiaoMap.get(t.shuiguoId).push(t)})),this._shuiGuoCiTiaoMap},enumerable:!1,configurable:!0}),e.getUnLockCiTiao=function(e){return 1===e.citiaochuxian||0===e.shuiguoId||(console.log("\u6c34\u679cid",e.shuiguoId),a.PlayerDataMgr.getEquipDataById(e.shuiguoId).level>=e.jiesuo)},e.getShuiGuoCurrLevelData=function(e){var t=i.Excel.shuiguo(e),o=this.getShuiGuoLevelMap.get(e),r=a.PlayerDataMgr.getEquipDataById(e),c={atk:t.attack,atkSpeed:t.attackspeed,talent:[],buffIsPercentage:!1},s={atk:t.attack,atkSpeed:t.attackspeed,talent:[],buffIsPercentage:!1},l=i.Excel.getFruitBuff(t.talent);return l&&(l.value.forEach(function(e){c.talent.push(e),s.talent.push(e)}),[n.FruitId.\u7206\u5934\u74dc,n.FruitId.\u69b4\u83b2\u738b,n.FruitId.\u9999\u8549\u5c04\u624b,n.FruitId.\u9ec4\u74dc\u5927\u68d2,n.FruitId.\u8fa3\u59b9\u5b50,n.FruitId.\u51bb\u65af\u68a8,n.FruitId.\u6bd2\u8611\u83c7,n.FruitId.\u5929\u5c71\u96ea\u83b2,n.FruitId.\u5143\u5a74\u679c].includes(e)&&(c.buffIsPercentage=!0,s.buffIsPercentage=!0)),o&&o.forEach(function(e,t){t<r.level-1&&(c.atk+=e.addattack,c.atkSpeed+=e.addAtkSpeed,l&&e.addbeidongbuff.forEach(function(e,t){c.talent[t]+=e||0})),t<=r.level-1&&(s.atk+=e.addattack,s.atkSpeed+=e.addAtkSpeed,l&&e.addbeidongbuff.forEach(function(e,t){s.talent[t]+=e||0}))}),[c,s]},e.getSuiPian=function(e){void 0===e&&(e=[1,0,0]);var t=new Map,o=[[],[],[]];return i.Excel.shuiguo_all.forEach(function(e){a.PlayerDataMgr.getEquipDataById(e.id).isUnLock&&-1!==e.isShow&&o[e.quality-1].push(e)}),e.forEach(function(e,n){if(o[n].length>0)for(var i=0;i<e;i++){var a=Math.floor(Math.random()*o[n].length),r=o[n][a];t.set(r.id,(t.get(r.id)||0)+1)}}),t},e._shuiGuoLevelMap=null,e._shuiGuoCiTiaoMap=null,e.goldId=999999,e.diamondId=999998,e.powerId=999997,e.selfMap={},e.isNeedResetWareHouse=!1,e}();o.default=r,cc._RF.pop()},{"./Const_Game":"Const_Game","./Excel":"Excel","./PlayerDataManager":"PlayerDataManager"}],HallManager:[function(e,t,o){"use strict";cc._RF.push(t,"7fa73OlY1tHA5FL+JlcXsvo","HallManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.HallMgr=void 0;var r,c=e("./DataManager"),s=e("./LogManager"),l=e("./ArrayUtils"),u=e("./PlayerDataManager"),d=e("./Excel"),p=e("./Const_Hall");(function(e){e.shop="shop",e.unLockCiTiao="unLockCiTiao"})(r||(r={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secretKey="hallSaveData",t._unLockCiTiao=[],t._shopData=null,t}return i(t,e),t.prototype.initialize=function(e){void 0===e&&(e=null),this._shopData=new p.ShopSaveData;var t=this.getCurrentData(r.shop,e);this._shopData=a(a({},this._shopData),t);var o=this.getCurrentData(r.unLockCiTiao,e);o&&(this._unLockCiTiao=o)},t.prototype.getCurrentData=function(e,t){var o=null;return t&&(o=t[e])||(o=this._load(e)),o},Object.defineProperty(t.prototype,"shopData",{get:function(){return this._shopData||(this._shopData=new p.ShopSaveData,s.LogMgr.error("\u51fa\u73b0\u4e25\u91cd\u9519\u8bef\uff0c\u5546\u5e97\u6570\u636e\u53d6\u5230\u4e86\u7a7a\u503c")),this._shopData},set:function(e){this._shopData=e},enumerable:!1,configurable:!0}),t.prototype.saveShopData=function(){this._save(r.shop,this._shopData)},t.prototype.checkNextResetTime=function(){var e=(new Date).getTime();return(0===this.shopData.nextResetTime||e>=this.shopData.nextResetTime)&&this.resetShopData(),Math.floor((this.shopData.nextResetTime-e)/1e3)},t.prototype.resetShopData=function(){var e=d.Excel.shopControl(1),t=0,o=0;this._shopData&&(t=this._shopData.boxExp,o=this._shopData.boxLevel),this._shopData=new p.ShopSaveData,this._shopData.boxExp=t,this._shopData.boxLevel=o;var n=new Date;n.setHours(e.resetTime,0,0,0),this.shopData.nextResetTime=n.getTime(),this.ResetTodayShop()},t.prototype.ResetTodayShop=function(){this.shopData.todayShopArray=this.getNewTodayShopData(),this.saveShopData()},t.prototype.getNewTodayShopData=function(){var e=[2,3],t=[],o=[],n=[[],[]];d.Excel.todayShop_all.forEach(function(e){u.PlayerDataMgr.getEquipDataById(e.shuiguoId).isUnLock&&(o.push(e),n[0].push(e.goldWeight),n[1].push(e.weight))});for(var i=0;i<e.length;i++)for(var a=0;a<e[i];a++){var r=o[l.default.getWeightedRandomIndex(n[i])],c=new p.TodayShopItemData;c.shopId=r.id,c.richType=i+1,c.canBuyCount=1,c.discount=r.discount[Math.floor(Math.random()*r.discount.length)],c.price=i+1===p.RichType.Gold?Math.floor(r.gold*c.discount):Math.floor(r.diamond*c.discount),t.push(c)}return t},t.prototype.isCiTiaoUnlocked=function(e){return-1!==this._unLockCiTiao.indexOf(e)},t.prototype.unlockCiTiao=function(e){-1===this._unLockCiTiao.indexOf(e)&&(this._unLockCiTiao.push(e),this._save(r.unLockCiTiao,this._unLockCiTiao))},t}(c.default);o.HallMgr=h.getInstance(),cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./Const_Hall":"Const_Hall","./DataManager":"DataManager","./Excel":"Excel","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager"}],IpadShiPei:[function(e,t,o){"use strict";cc._RF.push(t,"46eeftVLAxEyrbvMwaNsA2p","IpadShiPei");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./GameGlobalVariable"),c=cc._decorator,s=c.ccclass,l=(c.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){var e=cc.winSize.width,t=cc.winSize.height;console.log("\u5e73\u677f \u5bbd\u5ea6="+e,"\u9ad8\u5ea6="+t);var o=this.node.getComponent(cc.Canvas);o&&(t/e<1334/750?(o.fitHeight=!0,o.fitWidth=!1,r.GameGlobalVariable.isPad=!0,console.log("\u5e73\u677f \u9002\u914d\u540e \u5bbd\u5ea6="+cc.winSize.width,"\u9ad8\u5ea6="+cc.winSize.height)):(r.GameGlobalVariable.isPad=!1,o.fitHeight=!1,o.fitWidth=!0,console.log("\u624b\u673a")))},t.prototype.start=function(){},t.prototype.checkIsMiniGame=function(){},a([s],t)}(cc.Component));o.default=l,cc._RF.pop()},{"./GameGlobalVariable":"GameGlobalVariable"}],Item_Bag_CiTiao_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"dcdd6Cov5ZHo55EXrUhROhp","Item_Bag_CiTiao_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_bgFather=null,t.sp_iconSprite=null,t.rtxt_infoLabel=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_bgFather",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.RichText)],t.prototype,"rtxt_infoLabel",void 0),a([s("Item_Bag_CiTiao_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Bag_CiTiao:[function(e,t,o){"use strict";cc._RF.push(t,"44bd0YMJTFKf71qf77p11+y","Item_Bag_CiTiao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Item_Bag_CiTiao_UIBindings"),l=e("./ResKeeper"),u=e("./Excel"),d=e("./PlayerDataManager"),p=e("./BundleConfig"),h=e("./CommonUtils"),f=e("./BagCiTiaoRichText"),g=e("./UnLockLight"),_=e("./HallManager"),y=cc._decorator,v=y.ccclass,m=y.property,b=(y.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.ciTiaoComp=null,t}return i(t,e),t.prototype.initializeSettings=function(e){var t=this,o=d.PlayerDataMgr.getEquipDataById(e.shuiguoId);this.openData=e;var n=this.openData.citiaomiaoshu;u.Excel.shuiguo(e.shuiguoId),this.ciTiaoComp.shuiGuoId=e.shuiguoId,this.ciTiaoComp.ciTiaoId=e.id,n=h.default.replaceStringSymbols(n,"[N]",[""]);var i=u.Excel.getFruitBuff(this.openData.citiaoshuzhitype),a=i?i.value:null,r=[n];-1!==n.indexOf("[X]")&&(r=n.split("[X]"));for(var c="",s=0;s<r.length;s++){var l=r[s];if(-1!==l.indexOf("#")){var f="<img src='player"+(e.shuiguoId-1e3)+"_5' click='ShowZaZhongInfo' />";l=h.default.replaceStringSymbols(l,"#",[f])}c+="<color=#ffffff>"+l+"</c>",s<r.length-1&&a&&(c+="<color=#71ff00>"+a[s]+"</c>")}o.level<this.openData.jiesuo||!o.isUnLock?c="<color=#a3f3ff><size=26>Lv."+this.openData.jiesuo+" unlock:</s></c><color=#333333>"+c+"</c>":_.HallMgr.isCiTiaoUnlocked(e.id)||(_.HallMgr.unlockCiTiao(e.id),0!==this.node.getSiblingIndex()&&this._loadRes(p.BundleNames.Common,"prefab/UnLockLight",cc.Prefab).then(function(e){var o=cc.instantiate(e);o.parent=t.node;var n=t.auto_ui.node_bgFather.children[0],i=cc.size(n.width,n.height),a=n.getComponent(cc.Sprite).spriteFrame;o.getComponent(g.default).initialize(i,a,1)})),c="<outline color=#000000 width=3><b>"+c+"</b></outline>",this.auto_ui.node_bgFather.children[0].active=o.level>=this.openData.jiesuo&&o.isUnLock,this.auto_ui.node_bgFather.children[1].active=o.level<this.openData.jiesuo||!o.isUnLock,this.auto_ui.rtxt_infoLabel.string=c,this.loadSprite(e.id)},t.prototype.loadSprite=function(e){return r(this,void 0,Promise,function(){var t;return c(this,function(o){switch(o.label){case 0:return[4,this._loadRes(p.BundleNames.Common,"res/skillicon/skill_"+e,cc.SpriteFrame)];case 1:return t=o.sent(),this.auto_ui.sp_iconSprite.spriteFrame=t,h.default.limitSpriteSize(this.auto_ui.sp_iconSprite,70),[2]}})})},a([m(s.default)],t.prototype,"auto_ui",void 0),a([m(f.default)],t.prototype,"ciTiaoComp",void 0),a([v],t)}(l.default));o.default=b,cc._RF.pop()},{"./BagCiTiaoRichText":"BagCiTiaoRichText","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./HallManager":"HallManager","./Item_Bag_CiTiao_UIBindings":"Item_Bag_CiTiao_UIBindings","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UnLockLight":"UnLockLight"}],Item_Bag_EquipItem_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"67bd0CW/OZEFYSwHAPEZYyr","Item_Bag_EquipItem_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_unLockInfo=null,t.txt_levelLabel=null,t.txt_expLabel=null,t.txt_nameLabel=null,t.txt_lockLabel=null,t.btn_infoBtn=null,t.node_bgFather=null,t.node_tiaoFather=null,t.node_geZiFather=null,t.node_unLockView=null,t.node_expIconFather=null,t.progress_expBar=null,t.sp_iconSprite=null,t._btnNames=["btn_infoBtn"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_unLockInfo",void 0),a([l(cc.Label)],t.prototype,"txt_levelLabel",void 0),a([l(cc.Label)],t.prototype,"txt_expLabel",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([l(cc.Label)],t.prototype,"txt_lockLabel",void 0),a([l(cc.Button)],t.prototype,"btn_infoBtn",void 0),a([l(cc.Node)],t.prototype,"node_bgFather",void 0),a([l(cc.Node)],t.prototype,"node_tiaoFather",void 0),a([l(cc.Node)],t.prototype,"node_geZiFather",void 0),a([l(cc.Node)],t.prototype,"node_unLockView",void 0),a([l(cc.Node)],t.prototype,"node_expIconFather",void 0),a([l(cc.ProgressBar)],t.prototype,"progress_expBar",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([s("Item_Bag_EquipItem_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Bag_EquipItem:[function(e,t,o){"use strict";cc._RF.push(t,"276ba/h+4xENIm6cltjt49H","Item_Bag_EquipItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Item_Bag_EquipItem_UIBindings"),l=e("./ResKeeper"),u=e("./PlayerDataManager"),d=e("./Excel"),p=e("./BundleConfig"),h=e("./CommonUtils"),f=e("./UIManager"),g=e("./UIConfig_Home"),_=e("./Const_Hall"),y=e("./LanMgr"),v=cc._decorator,m=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.spriteMaterial=[],t.isShowExp=!1,t.miaoBianColor=[new cc.Color(5,140,65,255),new cc.Color(32,71,131,255),new cc.Color(126,33,164,255)],t.openData=null,t}return i(t,e),t.prototype.onLoad=function(){this.auto_ui.addClickListener(this._clickListener,this)},t.prototype._clickListener=function(e){e===this.auto_ui.btn_infoBtn&&this.openInfo()},t.prototype.openInfo=function(e){void 0===e&&(e=!1),f.default.open(p.BundleNames.Home,g.UIView_Home.UI_EquipInfo,{openData:this.openData,upLevelReset:this.reset.bind(this),isAiDressUp:e})},t.prototype.reset=function(){this.startSet(this.openData)},t.prototype.setCanClick=function(e){this.auto_ui.btn_infoBtn.node.active=e},t.prototype.onEnable=function(){this.isShowExp&&this.resetLevelAndExp()},t.prototype.startSet=function(e,t,o){void 0===t&&(t=!0),void 0===o&&(o=!0),this.setCanClick(t),this.openData=e;var n=this.auto_ui;if(this.node.children[0].active=0!==e.unLockChar,this.node.children[1].active=0===e.unLockChar&&0===e.shuiGuoId,this.node.children[2].active=0===e.unLockChar&&0!==e.shuiGuoId,0!==e.unLockChar)n.txt_unLockInfo.string=y.langMgr.getStr("0058",e.unLockChar);else if(0===e.unLockChar&&0!==e.shuiGuoId){var i=d.Excel.shuiguo(e.shuiGuoId),a=u.PlayerDataMgr.getEquipDataById(e.shuiGuoId),r=!!(null==a?void 0:a.isUnLock);n.txt_nameLabel.string=i.name,this.loadSprite(i.id),this.setAllChildGray(!!o&&!r),this.updateBagEquipRule(i.id),this.updateQualityDisplay(i.quality),this.updateLevelAndExpDisplay(r,i.unLock),n.txt_lockLabel.node.active=!r,n.node_tiaoFather.active=r,n.node_unLockView.active=r}},t.prototype.updateBagEquipRule=function(e){var t=this.auto_ui;d.Excel.bagEquipRule_all.forEach(function(o){o.shuiguoId===e&&t.node_geZiFather.children.forEach(function(e){e.active=e.name===o.pfbName})})},t.prototype.updateQualityDisplay=function(e){var t=this.auto_ui;t.node_bgFather.children.forEach(function(t,o){t.active=o===e-1}),t.node_tiaoFather.children.forEach(function(t,o){t.active=o===e-1})},t.prototype.updateLevelAndExpDisplay=function(e,t){var o=this.auto_ui;e?this.resetLevelAndExp():(o.txt_lockLabel.string=y.langMgr.getStr("0058",t),o.txt_levelLabel.string="",o.node_bgFather.children[3].active=!0)},t.prototype.loadSprite=function(e){return r(this,void 0,Promise,function(){var t,o,n;return c(this,function(i){switch(i.label){case 0:return t="res/player/player"+(e-1e3)+"_1",[4,this._loadRes(p.BundleNames.Common,t,cc.SpriteFrame)];case 1:return o=i.sent(),(n=this.auto_ui.sp_iconSprite).spriteFrame=o,h.default.limitSpriteSize(n,_.equipIconSize),[2]}})})},t.prototype.setAllChildGray=function(e){var t=this,o=this.node.children[2].getComponentsInChildren(cc.Sprite),n=this.node.children[2].getComponentsInChildren(cc.Label);o.forEach(function(o){"4"!==o.name&&o.setMaterial(0,e?t.spriteMaterial[1]:t.spriteMaterial[0])}),n.forEach(function(o){o.setMaterial(0,e?t.spriteMaterial[1]:t.spriteMaterial[0])})},t.prototype.resetLevelAndExp=function(){this.isShowExp=!0;var e=this.openData,t=u.PlayerDataMgr.getEquipDataById(e.shuiGuoId);this.auto_ui,e.shuiGuoId>=1e3&&t&&(this.updateLevelDisplay(t.level),this.updateExpDisplay(t,e.upLevelDatas[t.level-1]))},t.prototype.updateLevelDisplay=function(e){this.auto_ui.txt_levelLabel.string="Lv."+e},t.prototype.updateExpDisplay=function(e,t){this.auto_ui,e.level>this.openData.upLevelDatas.length?this.maxExperienceReached(e.fragments):this.updateProgressBar(e.fragments,t.shengjixiaohao)},t.prototype.maxExperienceReached=function(e){var t=this.auto_ui;t.txt_expLabel.string=e+"/MAX",t.progress_expBar.progress=1,t.node_expIconFather.children[0].active=!0,t.node_expIconFather.children[1].stopAllActions(),t.node_expIconFather.children[1].active=!1},t.prototype.updateProgressBar=function(e,t){var o=this.auto_ui,n=e/t;o.txt_expLabel.string=e+"/"+t,o.progress_expBar.progress=n,o.progress_expBar.progress=Math.max(o.progress_expBar.progress,.05),o.progress_expBar.node.children[0].children[0].opacity=n<1?255:0,o.progress_expBar.node.children[0].children[1].opacity=n>=1?255:0,o.node_expIconFather.children[0].active=n<1,o.node_expIconFather.children[1].active=n>=1,n>=1&&this.addFullExpAnimation()},t.prototype.addFullExpAnimation=function(){var e=this.auto_ui;e.node_expIconFather.children[1].stopAllActions(),e.node_expIconFather.children[1].runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,0,15),cc.moveTo(.5,0,0))))},t.prototype.canUpgrade=function(){var e=u.PlayerDataMgr.getEquipDataById(this.openData.shuiGuoId);if(e.level<=this.openData.upLevelDatas.length){var t=this.openData.upLevelDatas[e.level-1],o=this.openData.upLevelDatas[e.level-1];if(e.fragments>=t.shengjixiaohao&&u.PlayerDataMgr.globalData.gold>=o.money)return!0}return!1},a([b(s.default)],t.prototype,"auto_ui",void 0),a([b([cc.Material])],t.prototype,"spriteMaterial",void 0),a([m],t)}(l.default));o.default=I,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./Item_Bag_EquipItem_UIBindings":"Item_Bag_EquipItem_UIBindings","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_CellFatherMove:[function(e,t,o){"use strict";cc._RF.push(t,"c0a33ewt/5Hz46YUk6NQ9Vs","Item_CellFatherMove");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./Logic_ChildMoveEvent"),s=e("./Item_GameBagCell"),l=cc._decorator,u=l.ccclass,d=l.property,p=(l.inspector,function(e){function t(){var t=e.call(this)||this;return t.cellFatherNode=null,t.lastCubeArray=[],t.initialPosition=null,t.checkEndResult=null,t}return i(t,e),t.prototype.initializeSettings=function(e){this.uiBag=e,this.childMoveEvent=this.cellFatherNode.getComponent(c.default),this.childMoveEvent||(this.childMoveEvent=this.cellFatherNode.addComponent(c.default)),this.childMoveEvent.startSet(this.handleChildTouchStart.bind(this),this.handleChildTouchMove.bind(this),this.handleChildTouchEnd.bind(this)),this.childMoveEvent.setCantClick(!1)},t.prototype.setMoveability=function(e,t){if(e){if(t){var o=this.uiBag.auto_ui.node_cubeBaseFather.children[this.cellFatherNode.children[0].getComponent(s.default).cellData.cellIndex].convertToWorldSpaceAR(cc.v2(0,0)),n=this.cellFatherNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)),i=cc.v2(o.x-n.x,o.y-n.y);this.node.x+=i.x,this.node.y+=i.y,this.initialPosition=this.node.getPosition(),this.childMoveEvent.setCantClick(!0)}this.checkEndResult=null}else this.childMoveEvent.setCantClick(!1)},t.prototype.handleChildTouchStart=function(){},t.prototype.handleChildTouchMove=function(e){this.node.x+=e.getDeltaX(),this.node.y+=e.getDeltaY(),this.validateCell()},t.prototype.handleChildTouchEnd=function(){var e=this,t=this.validateCell();this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(cc.Color.WHITE)}),t.isOk?(this.checkEndResult=t,this.node.x+=t.effectPos.x,this.node.y+=t.effectPos.y,this.initialPosition=this.node.getPosition(),this.uiBag.moveChangeBagCellIndex(this.checkEndResult)):(this.node.setPosition(this.initialPosition),this.checkEndResult=null),this.lastCubeArray.length=0},t.prototype.validateCell=function(){var e=this;this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(cc.Color.WHITE)});var t=this.cellFatherNode.children,o=this.uiBag.auto_ui.node_cubeBaseFather.children,n=[],i=[],a=[];t.forEach(function(e){n.push(e.convertToWorldSpaceAR(cc.v2(0,0)))}),o.forEach(function(e){i.push(e.convertToWorldSpaceAR(cc.v2(0,0)))});var r=!0,c=null;this.lastCubeArray.length=0;for(var s=0;s<t.length;s++){for(var l=n[s],u=!1,d=function(t){var o=!1;if(e.uiBag.currAddCellDataMap.size>0&&e.uiBag.currAddCellDataMap.forEach(function(e){if(e.pickCellArray&&!o)for(var n=0;n<e.pickCellArray.length;n++){var i=e.pickCellArray[n];if(t==i.cellData.cellIndex){o=!0;break}}}),o)return"continue";var n=i[t];return cc.Vec2.distance(l,n)<e.uiBag.effectMax?(u=!0,e.lastCubeArray.push(t),a.push(t),c||(c=cc.v2(n.x-l.x,n.y-l.y)),"break"):void 0},p=0;p<o.length&&"break"!==d(p);p++);u||(r=!1)}return this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(r?cc.Color.GREEN:cc.Color.RED)}),{isOk:r,effectPos:c,pickCellArray:a}},a([d(cc.Node)],t.prototype,"cellFatherNode",void 0),a([u],t)}(r.default));o.default=p,cc._RF.pop()},{"./Item_GameBagCell":"Item_GameBagCell","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./ResKeeper":"ResKeeper"}],Item_GameBagCell_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"a07f0+SsBtNqoSn+1Km24Ey","Item_GameBagCell_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_bgNode=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_bgNode",void 0),a([s("Item_GameBagCell_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_GameBagCell:[function(e,t,o){"use strict";cc._RF.push(t,"4aa76sy3ZlGaodUNPWrITQY","Item_GameBagCell");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./BundleConfig"),s=e("./GameGlobalVariable"),l=cc._decorator,u=l.ccclass,d=l.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_bgNode=null,t._isShow=!1,t}return i(t,e),Object.defineProperty(t.prototype,"cellData",{get:function(){return this._cellData},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._loadRes(c.BundleNames.Game,"res/bg/"+s.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.node_bgNode.getComponent(cc.Sprite).spriteFrame=t})},t.prototype.initializeSettings=function(e,t){this.updateCellData(e),this.updateBgNodeVisibility(t),this.equipComp=null},t.prototype.updateCellData=function(e){this._cellData=e},t.prototype.updateBgNodeColor=function(e){this.node_bgNode.color=e},t.prototype.dragEndLockThis=function(e){this.equipComp=e},t.prototype.updateBgNodeVisibility=function(e){this.node_bgNode.active=e,this._isShow=e,this.node_bgNode.opacity=255},t.prototype.temporaryShowBgNode=function(e){this._isShow||(this.node_bgNode.opacity=e?100:255,this.node_bgNode.active=e)},a([d(cc.Node)],t.prototype,"node_bgNode",void 0),a([u],t)}(r.default);o.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],Item_GameEquip:[function(e,t,o){"use strict";cc._RF.push(t,"2c28fTe/+VBDLT/eddn4f1H","Item_GameEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./ResKeeper"),l=e("./Logic_ChildMoveEvent"),u=e("./BundleConfig"),d=e("./Logic_GetEquip"),p=e("./UIManager"),h=e("./GameGlobalVariable"),f=e("./CommonUtils"),g=e("./EventManager"),_=e("./EvenType"),y=e("./QiPaoTween"),v=e("./Excel"),m=e("./PlayerDataManager"),b=e("./Const_Game"),I=e("./UIConfig_Game"),w=e("./LanMgr"),E=cc._decorator,M=E.ccclass,C=E.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_cellFather=null,t.equipIcon=null,t.qiPaoNode=null,t.level5TipNode=null,t.level5TipLabel=null,t.banTouOpacity=155,t.tipNode=null,t.unLockColor=new cc.Color(247,41,166),t}return i(t,e),Object.defineProperty(t.prototype,"equipData",{get:function(){return this._equipData},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._loadRes(u.BundleNames.Game,"res/bg/"+h.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.node_cellFather.children.forEach(function(e){e.children[0].getComponent(cc.Sprite).spriteFrame=t})}),this.tipNode=this.node.getChildByName("upLevel5Tip"),this.tipNode&&(this.tipNode.active=!1)},t.prototype.onEnable=function(){g.EventMgrInstance.addListener(_.EVENT_TYPE.Game_Show_Level5Tip,this.displayTipAnimation,this)},t.prototype.onDisable=function(){g.EventMgrInstance.removeListener(_.EVENT_TYPE.Game_Show_Level5Tip,this.displayTipAnimation,this)},t.prototype.initializeSettings=function(e,t,o,n,i,a){var r=this;this._equipData=e,this.isGeZiType=t,this.showPaiZi=a,this.childMoveArray||(this.childMoveArray=[],this.node_cellFather.children.forEach(function(e){var t=e.getComponent(l.default);t||(t=e.addComponent(l.default)),t.startSet(o,n,i),r.childMoveArray.push(t)})),this.resetShow(),this.displayBubble(e.isHaveQiPao),this.tipNode.active=!1},t.prototype.displayBubble=function(e){if(this.qiPaoNode)if(e){if(this.qiPaoNode.active=!0,0===this.qiPaoNode.childrenCount){var t=this;this._loadRes(u.BundleNames.Game,"item/qiPao_"+this.equipData.pfbName,cc.Prefab).then(function(e){var o=cc.instantiate(e);t.qiPaoNode.addChild(o),o.setPosition(0,0),o.getComponent(y.default).startSet(t.isGeZiType)})}}else this.qiPaoNode.active=!1},t.prototype.displayPurchaseView=function(e,t){if(this.qiPaoNode&&this.qiPaoNode.active){var o=this,n=new b.VideoPurchaseData;n.furidSprite=null,this.isGeZiType?(n.titleStr=w.langMgr.getStr("0034"),n.infoStr=w.langMgr.getStr("0035")):(n.titleStr=w.langMgr.getStr("0036"),n.infoStr=w.langMgr.getStr("0037"),n.furidSprite=this.equipIcon.getComponent(cc.Sprite).spriteFrame),n.pfbName=this._equipData.pfbName,n.clickCallBack=function(){o.equipData.isHaveQiPao=!1,o.qiPaoNode.active=!1,o.isGeZiType&&g.EventMgrInstance.emitEvent(_.EVENT_TYPE.ResetGameBagAI),t&&t()},n.failCallBack=function(){e&&e()},p.default.open(u.BundleNames.Game,I.UIView_Game.UI_VideoBuyOne,n)}else t&&t()},t.prototype.dragEndLockCell=function(e){var t=this;this.lockCellArray=e,this._equipData.lockCellIndex=[],e&&e.forEach(function(e){t._equipData.lockCellIndex.push(e.cellData.cellIndex)})},t.prototype.getGridNode=function(){return this.node_cellFather},t.prototype.resetShow=function(){if(this.node.getComponentInChildren(cc.Label).string="",this.loadFruitSpriteFrame(),!this.equipData.lockCellIndex||0===this.equipData.lockCellIndex.length){var e=Math.random();this.node.angle=e>.66?20:e<.33?-20:0}},t.prototype.loadFruitSpriteFrame=function(){return r(this,void 0,Promise,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return e=this.equipIcon.getComponent(cc.Sprite),t=this,this.node_cellFather.children.forEach(function(e){e.children[0].getComponent(cc.Sprite).enabled=t.equipData.equipLevel<=-1}),this.itemPaiZi||(this.itemPaiZi=this.showPaiZi(this.equipIcon)),this.equipData.equipLevel<=-1?(e.spriteFrame=null,this.itemPaiZi.node.active=!1,[3,3]):[3,1];case 1:return[4,this._loadRes(u.BundleNames.Common,"res/player/"+d.default.getInstance.getEquipUpData(this.equipData.shuiguoId,this.equipData.equipLevel).shuiguoimg,cc.SpriteFrame)];case 2:o=n.sent(),e.spriteFrame=o,this.itemPaiZi.node.active=!0,this.itemPaiZi.initializeSettings(this.equipData.equipLevel,this.equipData.shuiguoId),n.label=3;case 3:return 4===this.equipData.equipLevel&&f.default.loadLevel5Effect(this.equipData.shuiguoId,void 0,void 0,this._loadRes.bind(this),function(e){e.parent=t.node,e.setPosition(0,0),e.setSiblingIndex(1)},function(e){e.parent=t.node,e.setPosition(0,0),e.setSiblingIndex(3)}),[2]}})})},t.prototype.setClickable=function(e,t){void 0===t&&(t=!1),this.childMoveArray.forEach(function(t){t.setCantClick(e)}),t&&(this.equipIcon.opacity=e?255:this.banTouOpacity)},t.prototype.onDestroy=function(){this&&this.equipIcon&&this.equipIcon.destroy()},t.prototype.displayTipAnimation=function(e){if(this.tipNode&&this.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1)if(e.isShow&&d.default.getInstance.getZaZhongId(this.equipData.shuiguoId)===e.shuiGuoId){var t=d.default.getInstance.getMaxLevel(this.equipData.shuiguoId)===h.GameGlobalVariable.zaZhongMaxLevel||d.default.getInstance.getMaxLevel(e.shuiGuoId)===h.GameGlobalVariable.zaZhongMaxLevel;this.tipNode.active=!0,this.tipNode.color=t?this.unLockColor:cc.Color.WHITE,this.tipNode.children[0].active=!t,this.tipNode.stopAllActions(),this.tipNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1,1.1),cc.scaleTo(.5,1,1))))}else this.tipNode.stopAllActions(),this.tipNode.active=!1},t.prototype.displayUnlockLevel5Tip=function(e,t,o){if(this.level5TipNode&&!this.isGeZiType&&(this.level5TipNode.active=!1,e&&this.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1)){this.level5TipNode.y=this.equipIcon.height/2;var n=d.default.getInstance.getZaZhongId(this.equipData.shuiguoId),i=!1;if(t.forEach(function(e){e.equipData.shuiguoId===n&&e.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1&&(i=!0)}),i||o.forEach(function(e){e.equipData.shuiguoId===n&&e.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1&&(i=!0)}),i){var a=v.Excel.shuiguo(this.equipData.shuiguoId),r=v.Excel.shuiguo(n);a&&0!==a.jinjieShuiGuoId&&m.PlayerDataMgr.getEquipDataById(a.id).level<a.unLock?(this.level5TipNode.active=!0,this.level5TipLabel.string="<color=#ffffff>"+a.name+"\u5916\u56f4\u517b\u6210\u81f3</c><color=#00ff00>"+a.unLock+"</c><color=#ffffff>\u7ea7\u89e3\u9501\u6742\u4ea4</c>"):r&&0!==r.jinjieShuiGuoId&&m.PlayerDataMgr.getEquipDataById(r.id).level<r.unLock&&(this.level5TipNode.active=!0,this.level5TipLabel.string="<color=#ffffff>"+r.name+"\u5916\u56f4\u517b\u6210\u81f3</c><color=#00ff00>"+r.unLock+"</c><color=#ffffff>\u7ea7\u89e3\u9501\u6742\u4ea4</c>")}}},a([C(cc.Node)],t.prototype,"node_cellFather",void 0),a([C(cc.Node)],t.prototype,"equipIcon",void 0),a([C(cc.Node)],t.prototype,"qiPaoNode",void 0),a([C(cc.Node)],t.prototype,"level5TipNode",void 0),a([C(cc.RichText)],t.prototype,"level5TipLabel",void 0),a([M],t)}(s.default);o.default=B,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./LanMgr":"LanMgr","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./Logic_GetEquip":"Logic_GetEquip","./PlayerDataManager":"PlayerDataManager","./QiPaoTween":"QiPaoTween","./ResKeeper":"ResKeeper","./UIConfig_Game":"UIConfig_Game","./UIManager":"UIManager"}],Item_Icon_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"14a52npprVJxo2W57mM9ddS","Item_Icon_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.sp_quality=null,t.sp_icon=null,t.dbAnim_quality=null,t.txt_countLabel=null,t}return i(t,e),a([l(cc.Sprite)],t.prototype,"sp_quality",void 0),a([l(cc.Sprite)],t.prototype,"sp_icon",void 0),a([l(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_quality",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([s("Item_Icon_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Icon:[function(e,t,o){"use strict";cc._RF.push(t,"42828kPu59Ik4ci9qp80c+s","Item_Icon");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Item_Icon_UIBindings"),c=e("./ResKeeper"),s=e("./BundleConfig"),l=e("./Excel"),u=e("./CommonUtils"),d=e("./Const_Hall"),p=e("./HallGlobalVariable"),h=cc._decorator,f=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.initialize=function(e,t){var o=this;this.auto_ui.txt_countLabel.string="x"+t;var n=1;switch(e){case p.default.goldId:case p.default.diamondId:case p.default.powerId:var i="goldIcon";e===p.default.diamondId?i="diamondIcon":e===p.default.powerId&&(i="powerIcon"),this._loadRes(s.BundleNames.Common,"res/ui/tu/"+i,cc.SpriteFrame).then(function(e){o.auto_ui.sp_icon.spriteFrame=e,u.default.limitSpriteSize(o.auto_ui.sp_icon,d.equipIconSize)}),this._loadRes(s.BundleNames.Common,"res/quality/quality_m_1",cc.SpriteFrame).then(function(e){o.auto_ui.sp_quality.spriteFrame=e});break;default:n=l.Excel.shuiguo(e).quality,this._loadRes(s.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame).then(function(e){o.auto_ui.sp_icon.spriteFrame=e,u.default.limitSpriteSize(o.auto_ui.sp_icon,d.equipIconSize)}),this._loadRes(s.BundleNames.Common,"res/quality/quality_"+n,cc.SpriteFrame).then(function(e){o.auto_ui.sp_quality.spriteFrame=e})}},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})},a([g(r.default)],t.prototype,"auto_ui",void 0),a([f],t)}(c.default);o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./Item_Icon_UIBindings":"Item_Icon_UIBindings","./ResKeeper":"ResKeeper"}],Item_PaiZi_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"c762cg0e4BHzLGn8NGHU25O","Item_PaiZi_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_da=null,t.node_xiao=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_da",void 0),a([l(cc.Node)],t.prototype,"node_xiao",void 0),a([s("Item_PaiZi_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_PaiZi:[function(e,t,o){"use strict";cc._RF.push(t,"6909ee5DbxHFqiV1zRDOZIV","Item_PaiZi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Item_PaiZi_UIBindings"),c=e("./ResKeeper"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.initialSize=null,t}return i(t,e),t.prototype.initializeSettings=function(e,t){this.auto_ui&&(this.auto_ui.node_xiao.active=!0,this.auto_ui.node_da.active=!1,this.auto_ui.node_xiao.children.forEach(function(t,o){t.active=o===e})),1009===t?this.node.setPosition(68,-68):(this.initialSize||(this.initialSize=cc.v2(this.node.parent.parent.width,this.node.parent.parent.height)),this.node.x=this.initialSize.x/2-25,this.node.y=this.initialSize.y/2*-1+25)},a([u(r.default)],t.prototype,"auto_ui",void 0),a([l],t)}(c.default);o.default=d,cc._RF.pop()},{"./Item_PaiZi_UIBindings":"Item_PaiZi_UIBindings","./ResKeeper":"ResKeeper"}],Item_Setting_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"42fcbS3wYBKKaASqvIy9R2B","Item_Setting_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_shake=null,t.btn_music=null,t.node_off_shake=null,t.node_off_music=null,t._btnNames=["btn_shake","btn_music"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_shake",void 0),a([l(cc.Button)],t.prototype,"btn_music",void 0),a([l(cc.Node)],t.prototype,"node_off_shake",void 0),a([l(cc.Node)],t.prototype,"node_off_music",void 0),a([s("Item_Setting_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Setting:[function(e,t,o){"use strict";cc._RF.push(t,"e4660eErQlHJpPfPuAeqfvS","Item_Setting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Item_Setting_UIBindings"),c=e("./ResKeeper"),s=e("./AudioManager"),l=cc._decorator,u=l.ccclass,d=l.property,p=(l.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.onEnable=function(){this._refreshUI(),this.auto_ui.addClickListener(this._handleClick,this)},t.prototype._handleClick=function(e){switch(e){case this.auto_ui.btn_music:var t=!s.AudioMgr.isMusicOn;s.AudioMgr.toggleMusic(t);break;case this.auto_ui.btn_shake:this.auto_ui.node_off_shake.active=!this.auto_ui.node_off_shake.active}this._refreshUI()},t.prototype._refreshUI=function(){this.auto_ui.node_off_music.active=!s.AudioMgr.isMusicOn},a([d(r.default)],t.prototype,"auto_ui",void 0),a([u],t)}(c.default));o.default=p,cc._RF.pop()},{"./AudioManager":"AudioManager","./Item_Setting_UIBindings":"Item_Setting_UIBindings","./ResKeeper":"ResKeeper"}],Item_Shop_BoxItem_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"b0b3cslmxpCrL4JHnauFiBg","Item_Shop_BoxItem_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_ptBg=null,t.node_jzBg=null,t.txt_nameLabel=null,t.txt_mustGetLabel=null,t.txt_timeLabel=null,t.txt_priceLabel=null,t.btn_showInfoBtn=null,t.btn_videoBuyBtn=null,t.btn_buyBtn=null,t._btnNames=["btn_showInfoBtn","btn_videoBuyBtn","btn_buyBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_ptBg",void 0),a([l(cc.Node)],t.prototype,"node_jzBg",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([l(cc.Label)],t.prototype,"txt_mustGetLabel",void 0),a([l(cc.Label)],t.prototype,"txt_timeLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Button)],t.prototype,"btn_showInfoBtn",void 0),a([l(cc.Button)],t.prototype,"btn_videoBuyBtn",void 0),a([l(cc.Button)],t.prototype,"btn_buyBtn",void 0),a([s("Item_Shop_BoxItem_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_BoxItem:[function(e,t,o){"use strict";cc._RF.push(t,"36071iqTdhO0KBZ+IH3IFqL","Item_Shop_BoxItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Item_Shop_BoxItem_UIBindings"),c=e("./ResKeeper"),s=e("./Excel"),l=e("./HallManager"),u=e("./PlayerDataManager"),d=e("./EventManager"),p=e("./EvenType"),h=e("./UIManager"),f=e("./BundleConfig"),g=e("./HallGlobalVariable"),_=e("./ADManager"),y=e("./Const_Hall"),v=e("./UIConfig_Home"),m=e("./LanMgr"),b=cc._decorator,I=b.ccclass,w=b.property,E=(b.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.isStart=!0,t.childIndex=0,t.delateTime=0,t.timeLabel=null,t.rewards=[],t}return i(t,e),t.prototype.onLoad=function(){var e;null===(e=this.auto_ui)||void 0===e||e.addClickListener(this._clickListener,this)},t.prototype.initialize=function(e,t){t&&(this.timeLabel=t),this.childIndex=e;var o=s.Excel.shopControl(1);this.isStart&&(this.isStart=!1,this.auto_ui.txt_nameLabel.string=0===e?m.langMgr.getStr("0044"):m.langMgr.getStr("0045"),this.auto_ui.txt_priceLabel.string=0===e?""+o.boxPrice:""+o.bigBoxPrice,this.auto_ui.node_ptBg.active=0===e,this.auto_ui.node_jzBg.active=0!==e);var n=s.Excel.shopBoxLevel(l.HallMgr.shopData.boxLevel+1);this.rewards=0===e?n.rewards:n.bigRewards;var i=cc.Color.GREEN,a=m.langMgr.getStr("0038");this.rewards[2]?(i=new cc.Color(223,84,219,255),a=m.langMgr.getStr("0040")):this.rewards[1]&&(i=new cc.Color(12,224,255,255),a=m.langMgr.getStr("0039")),this.auto_ui.txt_mustGetLabel.string=a,this.auto_ui.txt_mustGetLabel.node.color=i;var r=this.auto_ui.btn_videoBuyBtn;r.interactable=0===e?o.box1BuyCount-l.HallMgr.shopData.box1BuyCount>0:o.box2BuyCount-l.HallMgr.shopData.box2BuyCount>0,this.auto_ui.txt_timeLabel.node.active=!r.interactable},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_videoBuyBtn:this.purchaseBoxWithVideo(null);break;case this.auto_ui.btn_buyBtn:this.purchaseBox(!1);break;case this.auto_ui.btn_showInfoBtn:var t=new y.BoxInfoData;t.type=this.childIndex,t.clickCallBack=this.purchaseBoxWithVideo.bind(this),h.default.open(f.BundleNames.Home,v.UIView_Home.UI_BoxInfo,t)}},t.prototype.purchaseBoxWithVideo=function(e){var t=this,o=0===this.childIndex?"\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u666e\u901a\u5b9d\u7bb1":"\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u7cbe\u81f4\u5b9d\u7bb1";_.ADMgr.showRewardedVideoAd(o,function(){t.purchaseBox(!0),e&&e()})},t.prototype.purchaseBox=function(e){var t=s.Excel.shopControl(1),o=0===this.childIndex?t.boxPrice:t.bigBoxPrice;e?(0===this.childIndex?l.HallMgr.shopData.box1BuyCount++:l.HallMgr.shopData.box2BuyCount++,this.retrieveReward(o),this.initialize(this.childIndex)):u.PlayerDataMgr.subtractDiamond(o)&&(this.retrieveReward(o),this.initialize(this.childIndex))},t.prototype.retrieveReward=function(e){var t=this,o=s.Excel.shopBoxLevel(l.HallMgr.shopData.boxLevel+1),n=new y.OpenBoxViewData;n.boxType=this.childIndex,n.boxCount=0;var i=0,a=[];0===this.childIndex?(i=o.moneyCount||0,a=[o.rewards[0]||0,o.rewards[1]||0,o.rewards[2]||0]):(i=o.bigMoneyCount||0,a=[o.bigRewards[0]||0,o.bigRewards[1]||0,o.bigRewards[2]||0]),n.boxCount=a.reduce(function(e,t){return e+t},0),n.clickCallBack=function(){var n=[[],[],[]];s.Excel.shuiguo_all.forEach(function(e){u.PlayerDataMgr.getEquipDataById(e.id).isUnLock&&-1!==e.isShow&&n[e.quality-1].push(e)});var r=new Map;a.forEach(function(e,t){if(n[t].length>0)for(var o=0;o<e;o++){var i=Math.floor(Math.random()*n[t].length),a=n[t][i];r.set(a.id,(r.get(a.id)||0)+1)}});var c=new y.GetItemsData;c.ids=[],c.counts=[],i>0&&(c.ids.push(g.default.goldId),c.counts.push(i)),r.forEach(function(e,t){c.ids.push(t),c.counts.push(e)}),c.clickCallBack=function(){c.ids.forEach(function(e,t){var o=c.counts[t];e===g.default.goldId?u.PlayerDataMgr.addGold(o):u.PlayerDataMgr.addEquipFragments(e,o)}),t.finalizeReward({needDiamond:e,nextExp:o.exp})},h.default.open(f.BundleNames.Home,v.UIView_Home.UI_GetItems,c)},h.default.open(f.BundleNames.Home,v.UIView_Home.UI_OpenBox,n)},t.prototype.finalizeReward=function(e){var t=l.HallMgr.shopData,o=t.boxLevel<s.Excel.shopBoxLevel_all.size-1&&t.boxExp+e.needDiamond>=e.nextExp;t.boxExp+=e.needDiamond,l.HallMgr.saveShopData(),d.EventMgrInstance.emitEvent(p.EVENT_TYPE.HallResetShopBox),o&&h.default.open(f.BundleNames.Home,v.UIView_Home.UI_BoxUpLevel)},t.prototype.update=function(e){this.delateTime+=e,this.delateTime>.2&&(this.delateTime=0,!this.auto_ui.btn_videoBuyBtn.interactable&&this.timeLabel&&(this.auto_ui.txt_timeLabel.string=this.timeLabel.string))},a([w(r.default)],t.prototype,"auto_ui",void 0),a([I],t)}(c.default));o.default=E,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_BoxItem_UIBindings":"Item_Shop_BoxItem_UIBindings","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_Shop_GoldItem_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"9fe05fiZrxGXIdISUVzx+4l","Item_Shop_GoldItem_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_buyBtn=null,t.sp_iconSprite=null,t.txt_nameLabel=null,t.txt_countLabel=null,t.txt_priceLabel=null,t.node_videoIcon=null,t.node_diamondIcon=null,t._btnNames=["btn_buyBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_buyBtn",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Node)],t.prototype,"node_videoIcon",void 0),a([l(cc.Node)],t.prototype,"node_diamondIcon",void 0),a([s("Item_Shop_GoldItem_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_GoldItem:[function(e,t,o){"use strict";cc._RF.push(t,"9b621dZ9s9P+bwi6Jvvwo0r","Item_Shop_GoldItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./Item_Shop_GoldItem_UIBindings"),c=e("./ResKeeper"),s=e("./Excel"),l=e("./HallManager"),u=e("./PlayerDataManager"),d=e("./TipsManager"),p=e("./Const_Hall"),h=e("./UIManager"),f=e("./BundleConfig"),g=e("./UIConfig_Home"),_=e("./ADManager"),y=e("./EventManager"),v=e("./EvenType"),m=e("./RedPointControl"),b=e("./HallGlobalVariable"),I=e("./LanMgr"),w=cc._decorator,E=w.ccclass,M=w.property,C=(w.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.isStart=!0,t.childIndex=0,t.addCount=0,t.priceNum=0,t}return i(t,e),t.prototype.initializeSettings=function(e){var t=this.node.getChildByName("redPoint");t&&(t.active=0===e);var o=s.Excel.shopControl(1);if(this.isStart)switch(this.isStart=!1,this.childIndex=e,e){case 0:this.auto_ui.txt_nameLabel.string=I.langMgr.getStr("0041"),this.auto_ui.txt_countLabel.string="X"+o.gold1Count,this.addCount=o.gold1Count;break;case 1:this.auto_ui.txt_nameLabel.string=I.langMgr.getStr("0042"),this.auto_ui.txt_countLabel.string="X"+o.gold2Count,this.auto_ui.txt_priceLabel.string=""+o.gold2Price,this.auto_ui.node_diamondIcon.active=!0,this.addCount=o.gold2Count,this.priceNum=o.gold2Price;break;case 2:this.auto_ui.txt_nameLabel.string=I.langMgr.getStr("0043"),this.auto_ui.txt_countLabel.string="X"+o.gold3Count,this.auto_ui.txt_priceLabel.string=""+o.gold3Price,this.auto_ui.node_diamondIcon.active=!0,this.addCount=o.gold3Count,this.priceNum=o.gold3Price}if(0===e)if(this.auto_ui.btn_buyBtn.interactable=!0,0===l.HallMgr.shopData.videoBuyGoldCount)this.auto_ui.txt_priceLabel.string=I.langMgr.getStr("0051"),this.auto_ui.node_videoIcon.active=!1;else{var n=o.gold1Time-l.HallMgr.shopData.videoBuyGoldCount+1;n<=0?(this.auto_ui.txt_priceLabel.string=I.langMgr.getStr("0004"),this.auto_ui.node_videoIcon.active=!1,this.auto_ui.btn_buyBtn.interactable=!1):(this.auto_ui.txt_priceLabel.string=I.langMgr.getStr("0052",n),this.auto_ui.node_videoIcon.active=!0)}},t.prototype.onLoad=function(){this.auto_ui.addClickListener(this.handleClickEvent,this)},t.prototype.handleClickEvent=function(e){e===this.auto_ui.btn_buyBtn&&this.purchaseItem()},t.prototype.purchaseItem=function(){var e=this;if(0===this.childIndex){if(s.Excel.shopControl(1).gold1Time-l.HallMgr.shopData.videoBuyGoldCount+1<=0)return void d.TipMgr.showToast(I.langMgr.getStr("0004"));0===l.HallMgr.shopData.videoBuyGoldCount?this.incrementVideoBuyCount():_.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u91d1\u5e01",function(){e.incrementVideoBuyCount()})}else{var t=new p.ShopItemInfoData;t.iconSpriteFrame=this.auto_ui.sp_iconSprite.spriteFrame,t.qualitySpriteFrame=null,t.titleName=this.auto_ui.txt_nameLabel.string,t.count=this.addCount,t.richType=p.RichType.Diamond,t.price=this.priceNum,t.infoStr="\u91d1\u5e01\u53ef\u7528\u4e8e\u88c5\u5907\u5347\u7ea7\uff0c\u53ef\u901a\u8fc7\u4e3b\u7ebf\u5173\u5361\u83b7\u5f97",t.clickCallBack=function(){u.PlayerDataMgr.subtractDiamond(e.priceNum)&&e.displayReward(e.addCount,function(){u.PlayerDataMgr.addGold(e.addCount),d.TipMgr.showToast(I.langMgr.getStr("0005",e.addCount))})},h.default.open(f.BundleNames.Home,g.UIView_Home.UI_ShopItemInfo,t)}},t.prototype.incrementVideoBuyCount=function(){var e=this;this.displayReward(this.addCount,function(){u.PlayerDataMgr.addGold(e.addCount),d.TipMgr.showToast(I.langMgr.getStr("0005",e.addCount)),l.HallMgr.shopData.videoBuyGoldCount++,1===l.HallMgr.shopData.videoBuyGoldCount&&y.EventMgrInstance.emitEvent(v.EVENT_TYPE.MainRedPointChange,m.RedPointType.freeGold),l.HallMgr.saveShopData(),e.initializeSettings(e.childIndex)})},t.prototype.displayReward=function(e,t){var o=new p.GetItemsData;o.ids=[b.default.goldId],o.counts=[e],o.clickCallBack=t,h.default.open(f.BundleNames.Home,g.UIView_Home.UI_GetItems,o)},a([M(r.default)],t.prototype,"auto_ui",void 0),a([E],t)}(c.default));o.default=C,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_GoldItem_UIBindings":"Item_Shop_GoldItem_UIBindings","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_Shop_TodayItem_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"02fcfyGYNNDMKpQclFh+76E","Item_Shop_TodayItem_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_goldbg=null,t.node_discountNode=null,t.node_videoIcon=null,t.node_goldIcon=null,t.node_diamondIcon=null,t.txt_nameLabel=null,t.txt_countLabel=null,t.txt_discountLabel=null,t.txt_priceLabel=null,t.sp_qualitySprite=null,t.sp_iconSprite=null,t.btn_buyBtn=null,t._btnNames=["btn_buyBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_goldbg",void 0),a([l(cc.Node)],t.prototype,"node_discountNode",void 0),a([l(cc.Node)],t.prototype,"node_videoIcon",void 0),a([l(cc.Node)],t.prototype,"node_goldIcon",void 0),a([l(cc.Node)],t.prototype,"node_diamondIcon",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([l(cc.Label)],t.prototype,"txt_discountLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Sprite)],t.prototype,"sp_qualitySprite",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.Button)],t.prototype,"btn_buyBtn",void 0),a([s("Item_Shop_TodayItem_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_TodayItem:[function(e,t,o){"use strict";cc._RF.push(t,"ff72dsgldVCrIl7KFVqQRUD","Item_Shop_TodayItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Item_Shop_TodayItem_UIBindings"),l=e("./ResKeeper"),u=e("./Excel"),d=e("./HallManager"),p=e("./TipsManager"),h=e("./PlayerDataManager"),f=e("./UIManager"),g=e("./UIConfig_Home"),_=e("./BundleConfig"),y=e("./CommonUtils"),v=e("./ADManager"),m=e("./EventManager"),b=e("./EvenType"),I=e("./RedPointControl"),w=e("./HallGlobalVariable"),E=e("./Const_Hall"),M=e("./LanMgr"),C=cc._decorator,B=C.ccclass,P=C.property,x=(C.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.childIndex=0,t.isStart=!0,t}return i(t,e),t.prototype.initializeSettings=function(e){var t=this.node.getChildByName("redPoint");t&&(t.active=0===e),this.childIndex=e,this.auto_ui.node_discountNode.active=!1;var o=u.Excel.shopControl(1);if(this.auto_ui.node_goldbg.active=0===e,this.auto_ui.btn_buyBtn.interactable=!0,0===e)if(this.isStart&&(this.isStart=!1,this.auto_ui.txt_nameLabel.string=M.langMgr.getStr("0050"),this.auto_ui.txt_countLabel.string="x"+o.todayDiamondCount),0===d.HallMgr.shopData.todayBuyDiamondCount)this.auto_ui.txt_priceLabel.string=M.langMgr.getStr("0051"),this.auto_ui.node_videoIcon.active=!1;else{var n=o.getDiamondTime-d.HallMgr.shopData.todayBuyDiamondCount+1;n<=0?(this.auto_ui.txt_priceLabel.string=M.langMgr.getStr("0004"),this.auto_ui.node_videoIcon.active=!1,this.auto_ui.btn_buyBtn.interactable=!1):(this.auto_ui.txt_priceLabel.string=M.langMgr.getStr("0052",n),this.auto_ui.node_videoIcon.active=!0)}else{var i=d.HallMgr.shopData.todayShopArray[e-1];this.todayShopData=u.Excel.getTodayShop(i.shopId),this.loadSprite(this.todayShopData.shuiguoId),this.auto_ui.txt_nameLabel.string=u.Excel.shuiguo(this.todayShopData.shuiguoId).name,this.auto_ui.txt_countLabel.string="x"+this.todayShopData.count,1===i.discount?this.auto_ui.node_discountNode.active=!1:(this.auto_ui.node_discountNode.active=!0,this.auto_ui.txt_discountLabel.string=100*i.discount+"% off"),i.canBuyCount>0?(this.auto_ui.node_goldIcon.active=i.richType===E.RichType.Gold,this.auto_ui.node_diamondIcon.active=i.richType===E.RichType.Diamond,this.auto_ui.txt_priceLabel.string=""+i.price):(this.auto_ui.node_goldIcon.active=!1,this.auto_ui.node_diamondIcon.active=!1,this.auto_ui.txt_priceLabel.string=M.langMgr.getStr("0004"),this.auto_ui.btn_buyBtn.interactable=!1)}},t.prototype.loadSprite=function(e){return r(this,void 0,Promise,function(){var t,o;return c(this,function(n){switch(n.label){case 0:return[4,this._loadRes(_.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame)];case 1:return t=n.sent(),this.auto_ui.sp_iconSprite.spriteFrame=t,y.default.limitSpriteSize(this.auto_ui.sp_iconSprite,E.equipIconSize),[4,this._loadRes(_.BundleNames.Common,"res/quality/quality_"+u.Excel.shuiguo(e).quality,cc.SpriteFrame)];case 2:return o=n.sent(),this.auto_ui.sp_qualitySprite.spriteFrame=o,[2]}})})},t.prototype.onLoad=function(){this.auto_ui.addClickListener(this._clickListener,this)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_buyBtn:this.buyThis()}},t.prototype.buyThis=function(){var e=this;if(0===this.childIndex){var t=u.Excel.shopControl(1);if(t.gold1Time-d.HallMgr.shopData.todayBuyDiamondCount+1==0)return void p.TipMgr.showToast(M.langMgr.getStr("0004"));var o=new E.GetItemsData;o.ids=[w.default.diamondId],o.counts=[t.todayDiamondCount],o.clickCallBack=function(){p.TipMgr.showToast(M.langMgr.getStr("0006",t.todayDiamondCount)),e.initializeSettings(e.childIndex)},0===d.HallMgr.shopData.todayBuyDiamondCount?(h.PlayerDataMgr.addDiamond(t.todayDiamondCount),d.HallMgr.shopData.todayBuyDiamondCount++,d.HallMgr.saveShopData(),m.EventMgrInstance.emitEvent(b.EVENT_TYPE.MainRedPointChange,I.RedPointType.freeDiamond),f.default.open(_.BundleNames.Home,g.UIView_Home.UI_GetItems,o)):v.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u94bb\u77f3",function(){h.PlayerDataMgr.addDiamond(t.todayDiamondCount),d.HallMgr.shopData.todayBuyDiamondCount++,d.HallMgr.saveShopData(),f.default.open(_.BundleNames.Home,g.UIView_Home.UI_GetItems,o)})}else{var n=d.HallMgr.shopData.todayShopArray[this.childIndex-1];if(n.canBuyCount<=0)p.TipMgr.showToast(M.langMgr.getStr("0004"));else{var i=new E.ShopItemInfoData;i.titleName=this.auto_ui.txt_nameLabel.string,i.count=this.todayShopData.count,i.richType=n.richType,i.price=n.price,i.infoStr=this.todayShopData.describe,i.iconSpriteFrame=this.auto_ui.sp_iconSprite.spriteFrame,i.qualitySpriteFrame=this.auto_ui.sp_qualitySprite.spriteFrame,i.clickCallBack=function(){if(n.richType===E.RichType.Gold){if(!h.PlayerDataMgr.subtractGold(n.price))return}else if(!h.PlayerDataMgr.subtractDiamond(n.price))return;h.PlayerDataMgr.addEquipFragments(e.todayShopData.shuiguoId,e.todayShopData.count),d.HallMgr.shopData.todayShopArray[e.childIndex-1].canBuyCount--,d.HallMgr.saveShopData();var t=new E.GetItemsData;t.ids=[e.todayShopData.shuiguoId],t.counts=[e.todayShopData.count],t.clickCallBack=function(){p.TipMgr.showToast(M.langMgr.getStr("0007",e.todayShopData.showName,e.todayShopData.count)),e.initializeSettings(e.childIndex)},f.default.open(_.BundleNames.Home,g.UIView_Home.UI_GetItems,t)},f.default.open(_.BundleNames.Home,g.UIView_Home.UI_ShopItemInfo,i)}}},a([P(s.default)],t.prototype,"auto_ui",void 0),a([B],t)}(l.default));o.default=x,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_TodayItem_UIBindings":"Item_Shop_TodayItem_UIBindings","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],LabelDefault:[function(e,t,o){"use strict";cc._RF.push(t,"a8a04z2YThAJKOidqDae4ow","LabelDefault");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),e("./EditorAsset");var s=cc._decorator,l=s.ccclass,u=s.menu,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){this.initLabel()},t.prototype.resetInEditor=function(){this.initLabel()},t.prototype.initLabel=function(){return r(this,void 0,Promise,function(){return c(this,function(){return[2]})})},a([l,u("\u5feb\u6377\u7ec4\u4ef6/Label Default")],t)}(cc.Component);o.default=d,cc._RF.pop()},{"./EditorAsset":"EditorAsset"}],LanMgr:[function(e,t,o){"use strict";cc._RF.push(t,"1b9edg/LqVDuI5EWfSJYJm5","LanMgr");var n=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.langMgr=void 0;var i=e("./Lan"),a=function(){function e(){this._currentLanguage="en",this._translations={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance||(this._instance=new e),this._instance},enumerable:!1,configurable:!0}),e.prototype.setLanguage=function(e){this._currentLanguage=e},e.prototype.getStr=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var a=i.Lan[e],r=a[this._currentLanguage]||a.cn,c=this.createFormatter(/\$\[(\d+)\]/g);return c.apply(void 0,n([r],t))},e.prototype.loadTranslations=function(e){this._translations=e},e.prototype.createFormatter=function(e){return function(t){for(var o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];return t.replace(e,function(e,t){var n,i,a=parseInt(t,10);return null!==(i=null===(n=o[a])||void 0===n?void 0:n.toString())&&void 0!==i?i:e})}},e}();o.langMgr=a.instance,cc._RF.pop()},{"./Lan":"Lan"}],LanTxt:[function(e,t,o){"use strict";cc._RF.push(t,"ec4fdskuG5Is5ZdUyPsHjG0","LanTxt");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LanMgr"),c=cc._decorator,s=c.ccclass,l=c.property,u=c.requireComponent,d=c.executeInEditMode,p=c.menu,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._lan="",t}return i(t,e),Object.defineProperty(t.prototype,"lan",{get:function(){return this._lan},set:function(e){this._lan=e,this.getComponent(cc.Label).string=r.langMgr.getStr(this._lan)},enumerable:!1,configurable:!0}),t.prototype.start=function(){},a([l],t.prototype,"_lan",void 0),a([l],t.prototype,"lan",null),a([s,u(cc.Label),d,p("\u5feb\u6377\u7ec4\u4ef6/Lan Txt")],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./LanMgr":"LanMgr"}],Lan:[function(e,t,o){"use strict";cc._RF.push(t,"94af0E5tBNJN5K15vlCtJJG","Lan"),Object.defineProperty(o,"__esModule",{value:!0}),o.Lan=void 0,o.Lan={"0001":{cn:"\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01",en:"The video failed to load. Please try again later!"},"0002":{cn:"\u94f6\u5e01\u4e0d\u8db3",en:"Silver coin not enough"},"0003":{cn:"\u8bf7\u5148\u8ddf\u968f\u624b\u6307\u6307\u5f15\u64cd\u4f5c",en:"Please follow the instructions of the finger first."},"0004":{cn:"\u5df2\u552e\u7f44",en:"Sold out"},"0005":{cn:"\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97\u91d1\u5e01$[0]",en:"Purchase successful! Earned $[0] gold coins"},"0006":{cn:"\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97\u94bb\u77f3$[0]",en:"Purchase successful! Earned $[0] diamonds"},"0007":{cn:"\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97$[0]\u788e\u7247$[1]",en:""},"0008":{cn:"\u4f53\u529b\u4e0d\u8db3",en:"Energy not enough"},"0009":{cn:"\u6682\u672a\u89e3\u9501",en:"Not yet unlocked"},"0010":{cn:"\u80cc\u5305\u4e2d\u6709\u7a7a\u4f4d\u672a\u4e0a\u9635\u6c34\u679c",en:"There are empty slots for fruits that have not been used in the backpack."},"0011":{cn:"\u5df2\u9886\u53d6",en:"Already received"},"0012":{cn:"\u606d\u559c\u83b7\u5f97\u5956\u52b1",en:"Congratulations on receiving the award!"},"0013":{cn:"\u606d\u559c\u83b7\u5f97\u6c34\u679c\u788e\u7247",en:"Congratulations on winning the fruit pieces!"},"0014":{cn:"\u91d1\u5e01\u4e0d\u8db3",en:"Gold coin not enough"},"0015":{cn:"\u94bb\u77f3\u4e0d\u8db3",en:"Diamond not enough"},"0016":{cn:"\u788e\u7247\u4e0d\u8db3",en:"Chip not enough"},"0017":{cn:"\u4f53\u529b +$[0]",en:"Energy +$[0]"},"0018":{cn:"\u4eca\u65e5\u5269\u4f59\u6b21\u6570\u4e0d\u8db3",en:"Today's remaining attempts are insufficient."},"0019":{cn:"\u8bf7\u5148\u4e0a\u9635\u6c34\u679c",en:""},"0020":{cn:"\u8bf7\u5c06\u6269\u5c55\u683c\u653e\u7f6e\u5728\u76f8\u90bb\u5730\u5757",en:"Please place the expansion plot adjacent to the neighboring plot."},"0021":{cn:"\u8bf7\u5148\u5b8c\u6210\u5f15\u5bfc\u7ae0\u8282\u6311\u6218",en:"Please complete the challenge in the introductory chapter first."},"0022":{cn:"\u4eca\u65e5\u6311\u6218\u6b21\u6570\u7528\u5c3d",en:"Today's challenge attempts have been exhausted."},"0023":{cn:"\u602a\u7269\u5927\u519b\u5373\u5c06\u5230\u6765\uff0c\u8d76\u5feb\u5e03\u7f6e\u6c34\u679c\u52c7\u58eb\uff0c\u51c6\u5907\u8fce\u6218\u5427\uff01",en:"The monster army is coming soon. Hurry up and arrange the fruit warriors to get ready for the battle!"},"0024":{cn:"\u70b9\u51fb\u4efb\u610f\u4f4d\u7f6e\u8fdb\u5165\u4e0b\u4e00\u6b65",en:"Click anywhere to proceed to the next step."},"0025":{cn:"\u8df3\u8fc7\u5f15\u5bfc",en:"Skip"},"0026":{cn:"\u5c06\u5546\u5e97\u4e2d\u5237\u65b0\u51fa\u7684\u88c5\u5907\uff0c\u653e\u5165\u80cc\u5305",en:"Put the newly obtained equipment from the store into the backpack."},"0027":{cn:"\u786e\u5b9a",en:"Confirm"},"0028":{cn:"\u9886\u53d6\u5956\u52b1",en:"Get reward"},"0029":{cn:"\u5168\u90fd\u8981",en:"Get all"},"0030":{cn:"\u6362\u4e00\u6279",en:"Change"},"0031":{cn:"\u5269\u4f59\u6b21\u6570",en:"Remaining"},"0032":{cn:"\u76f8\u540c\u6c34\u679c\u53ef\u5408\u6210\u5347\u9636\uff0c\u6700\u9ad8\u5347\u81f34\u9636",en:"The same fruit can be combined to form a higher level, with the maximum level reaching 4."},"0033":{cn:"4\u9636\u6c34\u679c\u6839\u636e\u6742\u4ea4\u914d\u65b9\u53ef\u5347\u81f35\u9636",en:"The 4th grade fruit can be upgraded to the 5th grade level through a hybrid formula."},"0034":{cn:"\u989d\u5916\u80cc\u5305\u683c\u5b50",en:"Extra backpack slots"},"0035":{cn:"\u662f\u5426\u89c2\u770b\u89c6\u9891\uff0c\u83b7\u5f97\u989d\u5916\u7684\u80cc\u5305\u683c\u5b50",en:"Watch the video to get an extra backpack slot."},"0036":{cn:"\u89c6\u9891\u83b7\u5f973\u7ea7\u6c34\u679c",en:"The video got lv.3 fruit."},"0037":{cn:"\u662f\u5426\u89c2\u770b\u89c6\u9891\u83b7\u5f973\u7ea7\u6c34\u679c",en:"Whether watching the video will earn you level 3 fruits"},"0038":{cn:"\u666e\u901a",en:"Normal"},"0039":{cn:"\u9ad8\u7ea7",en:"Advanced"},"0040":{cn:"\u7a00\u6709",en:"Rare"},"0041":{cn:"\u4e00\u70b9\u91d1\u5e01",en:"Sm. gold coins"},"0042":{cn:"\u4e00\u888b\u91d1\u5e01",en:"Med. gold coins"},"0043":{cn:"\u4e00\u7bb1\u91d1\u5e01",en:"Lrg. gold coins"},"0044":{cn:"\u666e\u901a\u793c\u76d2",en:"Ordinary gift box"},"0045":{cn:"\u7cbe\u81f4\u793c\u76d2",en:"Deluxe gift box"},"0046":{cn:"\u4f60\u7684\u6311\u6218\u6a21\u5f0f\u8fd8\u6709\u672a\u5b8c\u6210",en:"Your challenge mode is still incomplete."},"0047":{cn:"\u4f60\u5728\u7b2c$[0]\u5173\u8fd8\u6709\u672a\u5b8c\u6210\u7684\u6218\u6597",en:"You still have unfinished battles to complete in level $[0]."},"0048":{cn:"\u606d\u559c\u89e3\u9501\u4e86\u65b0\u6c34\u679c\uff0c\u8d76\u7d27\u53bb\u5c06\u65b0\u6c34\u679c\u4e0a\u9635\u5427",en:"Congratulations! You have unlocked the new fruit. Hurry up and put it into use!"},"0049":{cn:"\u83b7\u5f97\u4e86\u6c34\u679c\u788e\u7247\uff0c\u53bb\u7ed9\u6c34\u679c\u5347\u7ea7\u63d0\u5347\u6218\u529b\u5427",en:"You have obtained fruit fragments. Go and upgrade the fruits to enhance your combat power!"},"0050":{cn:"\u94bb\u77f3",en:"Diamonds"},"0051":{cn:"\u514d\u8d39",en:"Free"},"0052":{cn:"\u514d\u8d39($[0])",en:"Free($[0])"},"0053":{cn:"\u5237\u65b0\u5546\u5e97\u83b7\u5f97\u66f4\u591a\u6c34\u679c",en:"Refresh the store to get more fruits."},"0054":{cn:"\u76f8\u540c\u7684\u6c34\u679c\u53ef\u4ee5\u5408\u6210\u5347\u7ea7",en:"The same fruits can be combined to upgrade."},"0055":{cn:"\u6a58\u5b50\u4f1a\u5728\u6bcf\u6ce2\u7ed3\u675f\u540e\uff0c\u989d\u5916\u4ea7\u51fa\u94f6\u5e01",en:"After each wave, oranges will produce additional silver coins."},"0056":{cn:"\u51fa\u73b0\u6269\u5c55\u683c\u5b50\uff0c\u8d76\u7d27\u5c06\u5176\u62d6\u653e\u81f3\u76f8\u90bb\u7684\u7a7a\u5730\u5904\u83b7\u5f97\u66f4\u5927\u7684\u7a7a\u95f4\u5427\uff01",en:"If you see expanded grids, drag and drop them to the adjacent empty spaces to gain more space!"},"0057":{cn:"\u662f\u5426\u89c2\u770b\u89c6\u9891\uff0c\u83b7\u5f97$[0]\u94f6\u5e01",en:"Whether to watch the video and obtain $[0] silver coins"},"0058":{cn:"\u901a\u8fc7\u7ae0\u8282$[0]\u89e3\u9501",en:"Unlock through CH.$[0]"},"0059":{cn:"\u672a\u89e3\u9501",en:"Not unlocked"},"0060":{cn:"\u5df2\u901a\u5173",en:"Passed"},"0061":{cn:"\u6700\u9ad8\u7eaa\u5f55:$[0]/$[1]",en:"High scores:$[0]/$[1]"},"0062":{cn:"\u7b2c$[0]\u6ce2",en:"Wave $[0]"},"0063":{cn:"\u4eca\u65e5\u5269\u4f59$[0]\u6b21",en:"$[0] left today"},"0064":{cn:"\u4eca\u65e5\u514d\u8d39\u6b21\u6570\u5269\u4f59\uff1a$[0]",en:"Remaining free usage today:$[0]"},"0065":{cn:"\u7b2c$[0]\u7ae0",en:"CH.$[0]"},"0066":{cn:"\u65e0\u5c3d\u8bd5\u70bc",en:"Endless Trials"},"0067":{cn:"\u4e00\u6ce2\u5408\u6210,\u602a\u7269\u65e0\u5c3d\u6765\u88ad",en:"A wave of attacks, endless monsters are coming!"},"0068":{cn:"\u5df2\u6fc0\u6d3b\u7279\u6027",en:"Activated feature"},"0069":{cn:"4\u9636$[0]\u53ef\u4e0e4\u9636$[1]\u6742\u4ea4\u5408\u6210\u81f35\u9636",en:"T4 $[0] + T4 $[1] -> T5"},"0070":{cn:"\u4e2d\u9014\u9000\u51fa\u4e0d\u4f1a\u83b7\u5f97\u4efb\u4f55\u5956\u52b1\u3002\u5e76\u4e14\u4e0d\u4f1a\u8fd4\u56de\u4f53\u529b\uff0c\u786e\u5b9a\u73b0\u5728\u9000\u51fa\u5417\uff1f",en:"Exiting halfway will not earn any rewards. And your stamina will not be restored. Are you sure you want to quit now?"},"0071":{cn:"\u5df2\u89e3\u9501",en:"Unlocked"},"0072":{cn:"<color=#ffffff>\u653b\u51fb\u529b + </c><color=#00ff00>100</c> <color=#ffffff>%</c>",en:"<color=#ffffff>Atk + </c><color=#00ff00>100</c> <color=#ffffff>%</c>"},"0073":{cn:"<color=#ffffff>\u653b\u51fb\u901f\u5ea6\u5149\u73af + </c><color=#00ff00>100</c> <color=#ffffff>%</c>",en:"<color=#ffffff>Attack Speed Aura + </c><color=#00ff00>100</c> <color=#ffffff>%</c>"},"0074":{cn:"<color=#ffffff>\u6280\u80fd\u901f\u5ea6 + </c><color=#00ff00>100</c> <color=#ffffff>%</c>",en:"<color=#ffffff>Skill Speed + </c><color=#00ff00>100</c> <color=#ffffff>%</c>"},"0075":{cn:"\u4ea7\u51fa\u94f6\u5e01\u7ffb\u500d",en:"Silver Coin Output Doubled"},"0076":{cn:"\u653b\u51fb\u529b\u5149\u73af",en:"Attack Damage Aura"},"0077":{cn:"\u5929\u8d4b\u52a0\u6210\u6548\u679c\u7ffb\u500d",en:"Talent Bonus Effect Doubled"},"0078":{cn:"\u5145\u5206\u5229\u7528\u5b89\u6392\u7a7a\u5730\uff0c\u505a\u4e00\u4e2a\u6574\u7406\u5927\u5e08\u5427\uff01",en:"Make the most of the empty spaces\u2014be an organizing master!"},"0079":{cn:"\u4f7f\u7528\u94f6\u5e01\u5237\u65b0\u5546\u5e97\uff0c\u83b7\u5f97\u66f4\u591a\u6c34\u679c\u52a0\u5f3a\u5b9e\u529b",en:"Spend silver coins to refresh the shop and get more fruits to boost your strength!"},"0080":{cn:"\u5347\u7ea7\u540e\u53ef\u4ee5\u83b7\u5f97\u5c5e\u6027\u63d0\u5347\uff0c\u9009\u62e9\u8fd9\u4e2a\u6bd2\u8611\u83c7\u7684\u7279\u6027\u5427",en:"After upgrading, you'll get a stat boost. Choose this Poison Mushroom trait!"},"0081":{cn:"\u7ee7\u7eed\u6311\u6218\u5173\u5361\uff0c\u53ef\u89e3\u9501\u66f4\u5f3a\u5927\u7684\u6c34\u679c\u5e76\u83b7\u5f97\u5927\u91cf\u5956\u52b1",en:"Continue challenging levels to unlock more powerful fruits and earn rich rewards!"},"0082":{cn:"\u6c34\u679c\u5347\u7ea7\u4f1a\u589e\u52a0\u57fa\u7840\u5c5e\u6027\uff0c\u8fbe\u5230\u7279\u5b9a\u7b49\u7ea7\u4f1a\u89e3\u9501\u65b0\u7684\u6280\u80fd",en:"Fruit upgrading increases basic attributes, and reaching a specific level will unlock new skills."},"0083":{cn:"\u7b2c$[0]\u6ce2\u7ed3\u675f\uff0c\u8fdb\u5165\u7b2c$[1]\u6ce2",en:"Wave $[0] ends, entering Wave $[1]."}},cc._RF.pop()},{}],LayoutExtent:[function(e,t,o){"use strict";cc._RF.push(t,"bdf3104gLBGpqvD4vQHpAmZ","LayoutExtent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./ResUtil"),s=cc._decorator,l=s.ccclass,u=s.property,d=s.menu,p=s.requireComponent,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemEx=null,t.itemPrefabEx=null,t.scale=1,t._templateItem=null,t._initialized=!1,t._itemsMap=new Map,t._currentId=0,t._activeExecutions=new Map,t._renderFunction=null,t._renderContext=null,t}return i(t,e),t.prototype.start=function(){this._initialize()},t.prototype._initialize=function(){this._initialized||(this.itemEx?(this._templateItem=c.ResourceUtil.instantiate(this.itemEx),this.scale=this.itemEx.scale,this.itemEx.active=!1):this.itemPrefabEx&&(this._templateItem=c.ResourceUtil.instantiate(this.itemPrefabEx)),this._initialized=!0)},t.prototype.setItemRenderer=function(e,t){this._renderFunction=e,this._renderContext=t},t.prototype.setNumItems=function(e,t,o,n,i){var a=this;void 0===t&&(t=0),void 0===i&&(i=!0),c.ResourceUtil.removeAllChildrenAndRelease(this.node,i),this._itemsMap.clear(),this._initialize();var r=[],s=e.length;if(t<=0){for(var l=0;l<s;l++){var u=this._generateItem(l,e[l]);r.push(u)}this._initialized=!0,o&&o.call(n)}else this.stopLastExecutePerFrame(),this._executePerFrame(this._getItemGenerator(e,s),t,function(){a._initialized=!0,o&&o.call(n)},this,r);return r},t.prototype.getItems=function(){return this._itemsMap},t.prototype._getItemGenerator=function(e,t){var o;return r(this,function(n){switch(n.label){case 0:t=t||e.length,o=0,n.label=1;case 1:return o<t?[4,this._generateItem(o,e[o])]:[3,4];case 2:n.sent(),n.label=3;case 3:return o++,[3,1];case 4:return[2]}})},t.prototype._generateItem=function(e,t){var o=this._createItem(e);return this._renderFunction&&this._renderFunction.call(this._renderContext,o,t,e),o},t.prototype._createItem=function(e){var t=c.ResourceUtil.instantiate(this._templateItem);return t.name=e.toString(),t.active=!0,t.parent=this.node,t.scale=this.scale,this._itemsMap.set(e,t),t},t.prototype._executePerFrame=function(e,t,o,n,i){var a=this,r=this._currentId++;this._activeExecutions.set(r,!0);var c=function(){if(a._activeExecutions.get(r)){for(var s=Date.now(),l=e.next();!l.done;){if(i&&l.value&&i.push(l.value),Date.now()-s>t)return void a.scheduleOnce(c);l=e.next()}o&&o.call(n,i),a._activeExecutions.delete(r)}};c()},t.prototype.stopLastExecutePerFrame=function(){var e=this._currentId-1;this.stopExecutePerFrame(e)},t.prototype.stopExecutePerFrame=function(e){this._activeExecutions.has(e)&&this._activeExecutions.set(e,!1)},a([u(cc.Node)],t.prototype,"itemEx",void 0),a([u(cc.Prefab)],t.prototype,"itemPrefabEx",void 0),a([u({type:cc.Float})],t.prototype,"scale",void 0),a([l,d("UI\u7ec4\u4ef6/Layout Extent"),p(cc.Layout)],t)}(cc.Component);o.default=h,cc._RF.pop()},{"./ResUtil":"ResUtil"}],ListItem:[function(e,t,o){"use strict";cc._RF.push(t,"f05bcBeutFOuJpv0Ags2USv","ListItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,c=cc._decorator,s=c.ccclass,l=c.property,u=c.disallowMultiple,d=c.menu,p=c.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(r||(r={}));var h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=r.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t.adaptiveSize=!1,t._unselectedSpriteFrame=null,t._isSelected=!1,t._isEventRegistered=!1,t._buttonComponent=null,t.list=null,t.listId=null,t}return i(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._isSelected},set:function(e){if(this._isSelected=e,this.selectedFlag)switch(this.selectedMode){case r.TOGGLE:this.selectedFlag.active=e;break;case r.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._buttonComponent||(this._buttonComponent=this.node.getComponent(cc.Button)),this._buttonComponent},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode===r.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype.registerEvent=function(){this._isEventRegistered||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvent(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._isEventRegistered=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvent=function(e,t,o){if(void 0===o&&(o=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var n=new cc.Component.EventHandler;return n.target=o||e.node,n.component=e.comName,n.handler=t,n}},t.prototype.showAnimation=function(e,t,o){var n,i=this,a=this.node;switch(e){case 0:n=cc.tween(a).to(.2,{scale:.7}).by(.3,{y:2*a.height});break;case 1:n=cc.tween(a).to(.2,{scale:.7}).by(.3,{x:2*a.width});break;case 2:n=cc.tween(a).to(.2,{scale:.7}).by(.3,{y:-2*a.height});break;case 3:n=cc.tween(a).to(.2,{scale:.7}).by(.3,{x:-2*a.width});break;default:n=cc.tween(a).to(.3,{scale:.1})}(t||o)&&n.call(function(){if(o){i.list._delSingleItem(a);for(var e=i.list.displayData.length-1;e>=0;e--)if(i.list.displayData[e].id===i.listId){i.list.displayData.splice(e,1);break}}t&&t()}),n.start()},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},a([l(cc.Sprite)],t.prototype,"icon",void 0),a([l(cc.Node)],t.prototype,"title",void 0),a([l({type:cc.Enum(r)})],t.prototype,"selectedMode",void 0),a([l({type:cc.Node,visible:function(){return this.selectedMode>r.NONE}})],t.prototype,"selectedFlag",void 0),a([l({type:cc.SpriteFrame,visible:function(){return this.selectedMode===r.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),a([l],t.prototype,"adaptiveSize",void 0),a([s,u(),d("UI\u7ec4\u4ef6/List Item"),p(-5001)],t)}(cc.Component);o.default=h,cc._RF.pop()},{}],List:[function(e,t,o){"use strict";cc._RF.push(t,"f671bSyfCNG7ayLaZ4l7OZy","List"),Object.defineProperty(o,"__esModule",{value:!0});var n,i,a,r=e("./ListItem"),c=e("./ResUtil"),s=cc._decorator,l=s.ccclass,u=s.property,d=s.disallowMultiple,p=s.menu,h=s.executionOrder,f=s.requireComponent;(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(n||(n={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(i||(i={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(a||(a={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=n.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=i.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=a.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._numItems=0,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t._scrollView=null,t.content=null,t._layout=null,t._align=cc.Layout.Type.HORIZONTAL,t._resizeMode=cc.Layout.ResizeMode.NONE,t._startAxis=cc.Layout.AxisDirection.HORIZONTAL,t._topGap=0,t._rightGap=0,t._bottomGap=0,t._leftGap=0,t._columnGap=0,t._lineGap=0,t._colLineNum=0,t._verticalDir=cc.Layout.VerticalDirection.TOP_TO_BOTTOM,t._horizontalDir=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT,t._itemTmp=null,t._itemSize=cc.size(0,0),t._pool=new cc.NodePool,t._lastDisplayData=[],t.displayData=[],t._updateCounter=0,t._scrollItem=null,t._beganPos=null,t._scrollPos=null,t._scrollToListId=null,t._scrollToEndTime=null,t._scrollToSo=null,t._customSize=null,t._actualNumItems=0,t._cyclicNum=0,t._cyclicPos1=0,t._cyclicPos2=0,t._cyclicAllItemSize=0,t._cycilcAllItemSizeNoEdge=0,t._allItemSize=0,t._allItemSizeNoEdge=0,t._alignCalcType=0,t._lastSelectedId=null,t.multSelected=[],t.nearestListId=null,t.elasticTop=0,t.elasticRight=0,t.elasticBottom=0,t.elasticLeft=0,t.viewTop=0,t.viewRight=0,t.viewBottom=0,t.viewLeft=0,t.displayItemNum=0,t.firstListId=0,t._aniDelItem=null,t._aniDelBeforePos=null,t._aniDelBeforeScale=1,t._aniDelCB=null,t._sizeType=!1,t._lack=!1,t.frameCount=0,t.curScrollIsTouch=!1,t.scrollToListId=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!==this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t;switch(this.selectedMode){case a.SINGLE:if(!this.repeatEventSingle&&e===this._selectedId)return;t=this.getItemByListId(e);var o=void 0;if(this._selectedId>=0?this._lastSelectedId=this._selectedId:this._lastSelectedId=null,this._selectedId=e,t&&(o=t.getComponent(r.default))&&(o.selected=!0),this._lastSelectedId>=0&&this._lastSelectedId!==this._selectedId){var n=this.getItemByListId(this._lastSelectedId);n&&(n.getComponent(r.default).selected=!1)}this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],t,e%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems);break;case a.MULT:if(!(t=this.getItemByListId(e)))return;o=t.getComponent(r.default),this._selectedId>=0&&(this._lastSelectedId=this._selectedId),this._selectedId=e;var i=!o.selected;o.selected=i;var c=this.multSelected.indexOf(e);i&&c<0?this.multSelected.push(e):!i&&c>=0&&this.multSelected.splice(c,1),this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],t,e%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems,i)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){if(this.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(this._actualNumItems=this._numItems=e,this._forceUpdate=!0,this._virtual)this._resizeContent(),this.cyclic&&(this._numItems=this._cyclicNum*this._numItems),this._onScrolling(),this.frameByFrameRenderNum||this.slideMode!==i.PAGE||(this.curPageNum=this.nearestListId);else{this.cyclic&&(this._resizeContent(),this._numItems=this._cyclicNum*this._numItems);var t=this.content.getComponent(cc.Layout);if(t&&(t.enabled=!0),this._delRedundantItem(),this.firstListId=0,this.frameByFrameRenderNum>0){for(var o=this.frameByFrameRenderNum>this._numItems?this._numItems:this.frameByFrameRenderNum,n=0;n<o;n++)this._createOrUpdateItem2(n);this.frameByFrameRenderNum<this._numItems&&(this._updateCounter=this.frameByFrameRenderNum,this._updateDone=!1)}else{for(n=0;n<this._numItems;n++)this._createOrUpdateItem2(n);this.displayItemNum=this._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){cc.isValid(this._itemTmp)&&this._itemTmp.destroy(),cc.isValid(this.tmpNode)&&this.tmpNode.destroy(),this._pool&&this._pool.clear()},t.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.on("touch-up",this._onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on("scroll-began",this._onScrollBegan,this,!0),this.node.on("scroll-ended",this._onScrollEnded,this,!0),this.node.on("scrolling",this._onScrolling,this,!0),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},t.prototype._unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.off("touch-up",this._onTouchUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off("scroll-began",this._onScrollBegan,this,!0),this.node.off("scroll-ended",this._onScrollEnded,this,!0),this.node.off("scrolling",this._onScrolling,this,!0),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},t.prototype._init=function(){if(!this._inited)if(this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this._scrollView.content,this.content){switch(this._layout=this.content.getComponent(cc.Layout),this._align=this._layout.type,this._resizeMode=this._layout.resizeMode,this._startAxis=this._layout.startAxis,this._topGap=this._layout.paddingTop,this._rightGap=this._layout.paddingRight,this._bottomGap=this._layout.paddingBottom,this._leftGap=this._layout.paddingLeft,this._columnGap=this._layout.spacingX,this._lineGap=this._layout.spacingY,this._colLineNum=0,this._verticalDir=this._layout.verticalDirection,this._horizontalDir=this._layout.horizontalDirection,this.setTemplateItem(c.ResourceUtil.instantiate(this.templateType===n.PREFAB?this.tmpPrefab:this.tmpNode)),this._slideMode!==i.ADHERING&&this._slideMode!==i.PAGE||(this._scrollView.inertia=!1,this._scrollView._onMouseWheel=function(){}),this.virtual||(this.lackCenter=!1),this._lastDisplayData=[],this.displayData=[],this._pool=new cc.NodePool,this._forceUpdate=!1,this._updateCounter=0,this._updateDone=!0,this.curPageNum=0,this.cyclic&&(this._scrollView._processAutoScrolling=this._processAutoScrolling.bind(this),this._scrollView._startBounceBackIfNeeded=function(){return!1}),this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}}}c.ResourceUtil.removeAllChildrenAndRelease(this.content),this._inited=!0}else cc.error(this.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var o=t-1;t=o*o*o*o*o+1}var n=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),i=this._scrollView.getScrollEndedEventTiming(),a=Math.abs(t-1)<=i;a&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),a&&(this._scrollView._autoScrolling=!1);var r=n.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),a),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){this._itemTmp=e,this._resizeMode===cc.Layout.ResizeMode.CHILDREN?this._itemSize=this._layout.cellSize:this._itemSize=cc.size(e.width,e.height),e.getComponent(r.default)||(this.selectedMode=a.NONE);var t=e.getComponent(cc.Widget);switch(t&&t.enabled&&(this._needUpdateWidget=!0),this.selectedMode===a.MULT&&(this.multSelected=[]),this._align){case cc.Layout.Type.HORIZONTAL:this._colLineNum=1,this._sizeType=!1;break;case cc.Layout.Type.VERTICAL:this._colLineNum=1,this._sizeType=!0;break;case cc.Layout.Type.GRID:if(this._startAxis===cc.Layout.AxisDirection.HORIZONTAL){var o=this.content.width-this._leftGap-this._rightGap;this._colLineNum=Math.floor((o+this._columnGap)/(this._itemSize.width+this._columnGap)),this._sizeType=!0}else{var n=this.content.height-this._topGap-this._bottomGap;this._colLineNum=Math.floor((n+this._lineGap)/(this._itemSize.height+this._lineGap)),this._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!this._inited&&e&&cc.error("List initialization not completed!"),this._inited},t.prototype._resizeContent=function(){var e;switch(this._align){case cc.Layout.Type.HORIZONTAL:if(this._customSize){var t=this._getFixedSize(null);e=this._leftGap+t.val+this._itemSize.width*(this._numItems-t.count)+this._columnGap*(this._numItems-1)+this._rightGap}else e=this._leftGap+this._itemSize.width*this._numItems+this._columnGap*(this._numItems-1)+this._rightGap;break;case cc.Layout.Type.VERTICAL:this._customSize?(t=this._getFixedSize(null),e=this._topGap+t.val+this._itemSize.height*(this._numItems-t.count)+this._lineGap*(this._numItems-1)+this._bottomGap):e=this._topGap+this._itemSize.height*this._numItems+this._lineGap*(this._numItems-1)+this._bottomGap;break;case cc.Layout.Type.GRID:if(this._startAxis===cc.Layout.AxisDirection.HORIZONTAL){var o=Math.ceil(this._numItems/this._colLineNum);e=this._topGap+this._itemSize.height*o+this._lineGap*(o-1)+this._bottomGap}else{var n=Math.ceil(this._numItems/this._colLineNum);e=this._leftGap+this._itemSize.width*n+this._columnGap*(n-1)+this._rightGap}}var i=this.content.getComponent(cc.Layout);if(i&&(i.enabled=!1),this._allItemSize=e,this._allItemSizeNoEdge=this._allItemSize-(this._sizeType?this._topGap+this._bottomGap:this._leftGap+this._rightGap),this.cyclic){var a=this._sizeType?this.node.height:this.node.width;this._cyclicPos1=0;var r=a-this._cyclicPos1;this._cyclicNum=Math.ceil(r/this._allItemSizeNoEdge)+1;var c=this._sizeType?this._lineGap:this._columnGap;this._cyclicPos2=this._cyclicPos1+this._allItemSizeNoEdge+c,this._cyclicAllItemSize=this._allItemSize+this._allItemSizeNoEdge*(this._cyclicNum-1)+c*(this._cyclicNum-1),this._cycilcAllItemSizeNoEdge=this._allItemSizeNoEdge*this._cyclicNum+c*(this._cyclicNum-1)}this._lack=!this.cyclic&&this._allItemSize<(this._sizeType?this.node.height:this.node.width);var s=this._lack&&this.lackCenter?.1:0,l=this._lack?(this._sizeType?this.node.height:this.node.width)-s:this.cyclic?this._cyclicAllItemSize:this._allItemSize;l<0&&(l=0),this._sizeType?this.content.height=l:this.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!==e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var o=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),n=this._sizeType?cc.v2(0,o):cc.v2(o,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(n))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(n)))}}if(this._calcViewPos(),this._sizeType?(this.viewTop=this.viewTop,this.viewBottom=this.viewBottom):(this.viewRight=this.viewRight,this.viewLeft=this.viewLeft),this._virtual){this.displayData=[];var i=void 0,a=0,r=this._numItems-1;if(this._customSize)for(var c=!1,s=a;s<=r&&!c;s++)switch(i=this._calcItemPos(s),this._align){case cc.Layout.Type.HORIZONTAL:i.right>=this.viewLeft&&i.left<=this.viewRight?this.displayData.push(i):0!==s&&this.displayData.length>0&&(c=!0);break;case cc.Layout.Type.VERTICAL:i.bottom<=this.viewTop&&i.top>=this.viewBottom?this.displayData.push(i):0!==s&&this.displayData.length>0&&(c=!0);break;case cc.Layout.Type.GRID:this._startAxis===cc.Layout.AxisDirection.HORIZONTAL?i.bottom<=this.viewTop&&i.top>=this.viewBottom?this.displayData.push(i):0!==s&&this.displayData.length>0&&(c=!0):i.right>=this.viewLeft&&i.left<=this.viewRight?this.displayData.push(i):0!==s&&this.displayData.length>0&&(c=!0)}else{var l=this._itemSize.width+this._columnGap,u=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:a=Math.floor((this.viewLeft-this._leftGap)/l)*this._colLineNum,r=Math.ceil((this.viewRight-this._leftGap)/l)*this._colLineNum;break;case 2:a=Math.floor((-this.viewRight-this._rightGap)/l)*this._colLineNum,r=Math.ceil((-this.viewLeft-this._rightGap)/l)*this._colLineNum;break;case 3:a=Math.floor((-this.viewTop-this._topGap)/u)*this._colLineNum,r=Math.ceil((-this.viewBottom-this._topGap)/u)*this._colLineNum;break;case 4:a=Math.floor((this.viewBottom-this._bottomGap)/u)*this._colLineNum,r=Math.ceil((this.viewTop-this._bottomGap)/u)*this._colLineNum}for(a=Math.max(0,a),r=Math.min(this._numItems-1,r),s=a;s<=r;s++)this.displayData.push(this._calcItemPos(s))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var d=this._lastDisplayData.length,p=this.displayItemNum!==d;if(p&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),p=this.firstListId!==this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!==this._lastDisplayData[d-1]),this._forceUpdate||p)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{for(this._lastDisplayData=[],s=0;s<this.displayItemNum;s++)this._createOrUpdateItem(this.displayData[s]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,o,n,i,a,r;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var c=this._getFixedSize(e);o=(t=this._leftGap+(this._itemSize.width+this._columnGap)*(e-c.count)+(c.val+this._columnGap*c.count))+((s=this._customSize[e])>0?s:this._itemSize.width)}else o=(t=this._leftGap+(this._itemSize.width+this._columnGap)*e)+this._itemSize.width;return this.lackCenter&&(t-=this._leftGap,t+=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:t,right:o,x:a=t+this._itemTmp.anchorX*this._itemSize.width,y:r=this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:var s;if(this._customSize)c=this._getFixedSize(e),t=(o=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-c.count)-(c.val+this._columnGap*c.count))-((s=this._customSize[e])>0?s:this._itemSize.width);else t=(o=-this._rightGap-(this._itemSize.width+this._columnGap)*e)-this._itemSize.width;return this.lackCenter&&(o+=this._rightGap,o-=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:t,right:o,x:a=t+this._itemTmp.anchorX*this._itemSize.width,y:r=this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(c=this._getFixedSize(e),i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*(e-c.count)-(c.val+this._lineGap*c.count))-((l=this._customSize[e])>0?l:this._itemSize.height)):i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*e)-this._itemSize.height,this.lackCenter&&(n+=this._topGap,n-=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n,bottom:i,x:a=this._itemTmp.x,y:r=i+this._itemTmp.anchorY*this._itemSize.height};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var l;if(this._customSize)c=this._getFixedSize(e),n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-c.count)+(c.val+this._lineGap*c.count))+((l=this._customSize[e])>0?l:this._itemSize.height);else n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*e)+this._itemSize.height;return this.lackCenter&&(i-=this._bottomGap,i+=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:n,bottom:i,x:a=this._itemTmp.x,y:r=i+this._itemTmp.anchorY*this._itemSize.height}}break;case cc.Layout.Type.GRID:var u=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:r=(i=(n=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:n=(i=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,r=i+this._itemTmp.anchorY*this._itemSize.height}switch(t=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:a=t+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=t+(1-this._itemTmp.anchorX)*this._itemSize.width,a-=(1-this.content.anchorX)*this.content.width,a*=-1}return{id:e,top:n,bottom:i,x:a,y:r};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:o=(t=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,a=t+this._itemTmp.anchorX*this._itemSize.width,a-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:a=(t=(o=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,a+=(1-this.content.anchorX)*this.content.width}switch(r=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:r-=(1-this._itemTmp.anchorY)*this._itemSize.height,r+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:r-=this._itemTmp.anchorY*this._itemSize.height,r+=this.content.anchorY*this.content.height,r*=-1}return{id:e,left:t,right:o,x:a,y:r}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var o={id:e,x:t.x,y:t.y,top:0,bottom:0,left:0,right:0};return this._sizeType?(o.top=t.y+t.height*(1-t.anchorY),o.bottom=t.y-t.height*t.anchorY):(o.left=t.x-t.width*t.anchorX,o.right=t.x+t.width*(1-t.anchorX)),o},t.prototype.getItemPos=function(e){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,o=0;for(var n in this._customSize)parseInt(n)<e&&(t+=this._customSize[n],o++);return{val:t,count:o}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){if(this.curScrollIsTouch=!1,null!=this.scrollToListId){var e=this.getItemByListId(this.scrollToListId);this.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}this._onScrolling(),this._slideMode!==i.ADHERING||this.adhering?this._slideMode===i.PAGE&&(null!=this._beganPos&&this.curScrollIsTouch?this._pageAdhere():this.adhere()):this.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView.hasNestedViewGroup(e,t)&&e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node){for(var o=e.target;null==o._listId&&o.parent;)o=o.parent;null!=o._listId?this._scrollItem=o:this._scrollItem=e.target}},t.prototype._onTouchUp=function(){this._scrollPos=null,this._slideMode===i.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===i.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){this._scrollView.hasNestedViewGroup(e,t)||e.simulate||(this._scrollPos=null,this._slideMode===i.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===i.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!==this._itemSize.width||this._sizeType&&e.height!==this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!==t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){if(this.cyclic||!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){var e=this._sizeType?this.viewTop:this.viewLeft,t=(this._sizeType?this.node.height:this.node.width)*this.pageDistance;if(Math.abs(this._beganPos-e)>t)switch(this._alignCalcType){case 1:case 4:this._beganPos>e?this.prePage(.5):this.nextPage(.5);break;case 2:case 3:this._beganPos<e?this.prePage(.5):this.nextPage(.5)}else this.elasticTop<=0&&this.elasticRight<=0&&this.elasticBottom<=0&&this.elasticLeft<=0&&this.adhere();this._beganPos=null}},t.prototype.adhere=function(){if(this.checkInited()&&!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){this.adhering=!0,this._calcNearestItem();var e=(this._sizeType?this._topGap:this._leftGap)/(this._sizeType?this.node.height:this.node.width);this.scrollTo(this.nearestListId,.7,e)}},t.prototype.update=function(){if(this.frameByFrameRenderNum>0&&!this._updateDone)if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var o=this.displayData[t];o&&this._createOrUpdateItem(o)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode===i.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode===i.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var o=this._pool.size()>0;if(t=o?this._pool.get():c.ResourceUtil.instantiate(this._itemTmp),o&&cc.isValid(t)||(t=c.ResourceUtil.instantiate(this._itemTmp)),t._listId!==e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),o&&this._needUpdateWidget){var n=t.getComponent(cc.Widget);n&&n.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var i=t.getComponent(r.default);t.listItem=i,i&&(i.listId=e.id,i.list=this,i._registerEvent()),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t=this.content.children[e];if(t)this._forceUpdate&&this.renderEvent&&(t._listId=e,(o=t.getComponent(r.default))&&(o.listId=e),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e%this._actualNumItems));else{(t=c.ResourceUtil.instantiate(this._itemTmp))._listId=e,this.content.addChild(t);var o=t.getComponent(r.default);t.listItem=o,o&&(o.listId=e,o.list=this,o.registerEvent()),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e%this._actualNumItems)}this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>a.NONE){var t=e.node;switch(this.selectedMode){case a.SINGLE:e.selected=this.selectedId===t._listId;break;case a.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t="number"==typeof e?this.getItemByListId(e):e;if(t){var o=this.getItemPos(t._listId);t.setPosition(o.x,o.y)}},t.prototype.setMultSelected=function(e,t){var o=this;this.checkInited()&&(Array.isArray(e)||(e=[e]),null==t?this.multSelected=e:e.forEach(function(e){var n=o.multSelected.indexOf(e);t&&n<0?o.multSelected.push(e):!t&&n>=0&&o.multSelected.splice(n,1)}),this._forceUpdate=!0,this._onScrolling())},t.prototype.getMultSelected=function(){return this.multSelected},t.prototype.hasMultSelected=function(e){return this.multSelected&&this.multSelected.indexOf(e)>=0},t.prototype.updateItem=function(e){var t=this;this.checkInited()&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){var o=t.getItemByListId(e);o&&cc.Component.EventHandler.emitEvents([t.renderEvent],o,e%t._actualNumItems)}))},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){if(this.content)return this.content.children.find(function(t){return t._listId===e})},t.prototype._getOutsideItem=function(){var e=this;return this.content.children.filter(function(t){return!e.displayData.some(function(e){return e.id===t._listId})})},t.prototype._delRedundantItem=function(){var e=this;if(this._virtual)this._getOutsideItem().forEach(function(t){if(!e._scrollItem||t._listId!==e._scrollItem._listId){t.isCached=!0,e._pool.put(t);var o=e._lastDisplayData.indexOf(t._listId);o>=0&&e._lastDisplayData.splice(o,1)}});else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){c.ResourceUtil.removeFromParentAndRelease(e),e.destroy&&e.destroy()},t.prototype.aniDelItem=function(e,t,o){var n=this;if(!this.checkInited()||this.cyclic||!this._virtual)return cc.error("This function is not allowed to be called!");if(!t)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(this._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var i=this.getItemByListId(e);if(i){var c=i.getComponent(r.default);this._aniDelRuning=!0,this._aniDelCB=t,this._aniDelItem=i,this._aniDelBeforePos=i.position,this._aniDelBeforeScale=i.scale;var s=this.displayData[this.displayData.length-1].id,l=c.selected;c.showAnimation(o,function(){var o;if(s<n._numItems-2&&(o=s+1),null!=o){var i=n._calcItemPos(o);n.displayData.push(i),n._virtual?n._createOrUpdateItem(i):n._createOrUpdateItem2(o)}else n._numItems--;if(n.selectedMode===a.SINGLE)l?n._selectedId=-1:n._selectedId-1>=0&&n._selectedId--;else if(n.selectedMode===a.MULT&&n.multSelected.length){var r=n.multSelected.indexOf(e);r>=0&&n.multSelected.splice(r,1),n.multSelected=n.multSelected.map(function(t){return t>=e?t-1:t})}if(n._customSize){n._customSize[e]&&delete n._customSize[e];var c={};for(var u in n._customSize){var d=n._customSize[u];c[parseInt(u)-(parseInt(u)>=e?1:0)]=d}n._customSize=c}null==o&&(o=s),n._aniDelRuning=!1,t(e),n._aniDelCB=null},!0)}else t(e)},t.prototype.scrollTo=function(e,t,o,n){var i=this;if(void 0===t&&(t=.5),void 0===o&&(o=null),void 0===n&&(n=!1),this.checkInited(!1)){t<0&&(t=0),e<0?e=0:e>=this._numItems&&(e=this._numItems-1),!this._virtual&&this._layout&&this._layout.enabled&&this._layout.updateLayout();var a=this.getItemPos(e);if(!a)return!1;var r=void 0;switch(this._alignCalcType){case 1:r=cc.v2(a.left-(null!=o?this.node.width*o:this._leftGap),0);break;case 2:r=cc.v2(a.right-this.node.width+(null!=o?this.node.width*o:this._rightGap)+this.content.width,0);break;case 3:r=cc.v2(0,-a.top+(null!=o?this.node.height*o:this._topGap));break;case 4:r=cc.v2(0,-a.bottom-this.node.height-(null!=o?this.node.height*o:this._bottomGap)+this.content.height)}var c=this.content.getPosition(),s=Math.abs(this._sizeType?c.y:c.x),l=this._sizeType?r.y:r.x;Math.abs((null!=this._scrollPos?this._scrollPos:s)-l)>.5&&(this._scrollView.scrollToOffset(r,t),this._scrollToListId=e,this._scrollToEndTime=(new Date).getTime()/1e3+t,this._scrollToSo=this.scheduleOnce(function(){if(i._adheringBarrier||(i.adhering=i._adheringBarrier=!1),i._scrollPos=i._scrollToListId=i._scrollToEndTime=i._scrollToSo=null,n){var t=i.getItemByListId(e);t&&cc.tween(t).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},t+.1),t<=0&&this._onScrolling())}},t.prototype._calcNearestItem=function(){this.nearestListId=null,this._virtual&&this._calcViewPos();for(var e=this.viewTop,t=this.viewRight,o=this.viewBottom,n=this.viewLeft,i=!1,a=0;a<this.content.childrenCount&&!i;a+=this._colLineNum){var r=this._virtual?this.displayData[a]:this._calcExistItemPos(a);if(r){var c=this._sizeType?(r.top+r.bottom)/2:(r.left+r.right)/2;switch(this._alignCalcType){case 1:r.right>=n&&(this.nearestListId=r.id,n>c&&(this.nearestListId+=this._colLineNum),i=!0);break;case 2:r.left<=t&&(this.nearestListId=r.id,t<c&&(this.nearestListId+=this._colLineNum),i=!0);break;case 3:r.bottom<=e&&(this.nearestListId=r.id,e<c&&(this.nearestListId+=this._colLineNum),i=!0);break;case 4:r.top>=o&&(this.nearestListId=r.id,o>c&&(this.nearestListId+=this._colLineNum),i=!0)}}}var s=this._virtual?this.displayData[this.displayItemNum-1]:this._calcExistItemPos(this._numItems-1);if(s&&s.id===this._numItems-1){var l=this._sizeType?(s.top+s.bottom)/2:(s.left+s.right)/2;switch(this._alignCalcType){case 1:t>l&&(this.nearestListId=s.id);break;case 2:n<l&&(this.nearestListId=s.id);break;case 3:o<l&&(this.nearestListId=s.id);break;case 4:e>l&&(this.nearestListId=s.id)}}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){if(this.checkInited()){if(this._slideMode!==i.PAGE)return cc.error("This function is not allowed to be called, Must SlideMode = PAGE!");if(e<0||e>=this._numItems||this.curPageNum===e)return;this.curPageNum=e,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],e),this.scrollTo(e,t)}},t.prototype.calcCustomSize=function(e){if(this.checkInited()){if(!this._itemTmp)return cc.error("Unset template item!");if(!this.renderEvent)return cc.error("Unset Render-Event!");this._customSize={};var t=c.ResourceUtil.instantiate(this._itemTmp);this.content.addChild(t);for(var o=0;o<e;o++)cc.Component.EventHandler.emitEvents([this.renderEvent],t,o),t.height===this._itemSize.height&&t.width===this._itemSize.width||(this._customSize[o]=this._sizeType?t.height:t.width);return Object.keys(this._customSize).length||(this._customSize=null),c.ResourceUtil.removeFromParentAndRelease(t),t.destroy&&t.destroy(),this._customSize}},__decorate([u({type:cc.Enum(n)})],t.prototype,"templateType",void 0),__decorate([u({type:cc.Node,visible:function(){return this.templateType===n.NODE}})],t.prototype,"tmpNode",void 0),__decorate([u({type:cc.Prefab,visible:function(){return this.templateType===n.PREFAB}})],t.prototype,"tmpPrefab",void 0),__decorate([u({type:cc.Enum(i)})],t.prototype,"_slideMode",void 0),__decorate([u({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode===i.PAGE}})],t.prototype,"pageDistance",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this._slideMode===i.PAGE}})],t.prototype,"pageChangeEvent",void 0),__decorate([u()],t.prototype,"_virtual",void 0),__decorate([u({visible:function(){return this.slideMode===i.NORMAL}})],t.prototype,"cyclic",void 0),__decorate([u({visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),__decorate([u({visible:function(){return this.virtual&&!this.lackCenter}})],t.prototype,"lackSlide",void 0),__decorate([u({type:cc.Integer,range:[0,6,1],slide:!0})],t.prototype,"_updateRate",void 0),__decorate([u({type:cc.Integer,range:[0,12,1],slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),__decorate([u({type:cc.Component.EventHandler})],t.prototype,"renderEvent",void 0),__decorate([u({type:cc.Enum(a)})],t.prototype,"selectedMode",void 0),__decorate([u({visible:function(){return this.selectedMode===a.SINGLE}})],t.prototype,"repeatEventSingle",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>a.NONE}})],t.prototype,"selectedEvent",void 0),__decorate([u({serializable:!1})],t.prototype,"_numItems",void 0),__decorate([l,d,p("UI\u7ec4\u4ef6/List Extent"),f(cc.ScrollView),h(-5e3)],t)}(cc.Component);o.default=g,cc._RF.pop()},{"./ListItem":"ListItem","./ResUtil":"ResUtil"}],LiuHaiShiPei:[function(e,t,o){"use strict";cc._RF.push(t,"18cbdtJE8VN175qmS7H6rRk","LiuHaiShiPei");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lenpinvalue=0,t}return i(t,e),t.prototype.onEnable=function(){if(cc.winSize.height/cc.winSize.width>=2){var e=this.node.getComponent(cc.Widget);e&&(e.top+=this.lenpinvalue,this.scheduleOnce(function(){e.updateAlignment()}))}},a([l],t.prototype,"lenpinvalue",void 0),a([s],t)}(r.default));o.default=u,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],LoadingManager:[function(e,t,o){"use strict";cc._RF.push(t,"da850gG7atKP5xMhRbpdH0M","LoadingManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.LoadingMgr=void 0;var a=e("./BundleConfig"),r=e("./ResLoader"),c=e("./ResUtil"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadingNode=null,t._shouldHide=!1,t._isResourceLoaded=!1,t}return i(t,e),t.prototype.show=function(){this._shouldHide=!0,this._loadingNode?this._executeLoading():this._fetchLoadingResource()},t.prototype.hide=function(){this._loadingNode?(this._shouldHide=!0,this._loadingNode.active=!1):this._shouldHide=!1},t.prototype._fetchLoadingResource=function(){var e=this;this._isResourceLoaded||(this._isResourceLoaded=!0,r.default.loadRes(a.BundleNames.Resouce,"common/UI_Loading",cc.Prefab).then(function(t){var o,n;e._loadingNode=c.ResourceUtil.instantiate(t),null===(n=null===(o=cc.director.getScene().getChildByName("Canvas"))||void 0===o?void 0:o.getChildByName("UILoading"))||void 0===n||n.addChild(e._loadingNode),e._executeLoading()}))},t.prototype._executeLoading=function(){this._loadingNode&&(this._loadingNode.active=this._shouldHide)},t}(e("./SingletonManager").SingletonBase);o.LoadingMgr=s.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],LodingGuodu_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"54dfdMBa6NPCom6PYSSmDkY","LodingGuodu_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_img=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_img",void 0),a([s("LodingGuodu_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],LodingGuodu:[function(e,t,o){"use strict";cc._RF.push(t,"71237pk2XpDzaXDhWTLOlQW","LodingGuodu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./LodingGuodu_UIBindings"),l=e("./EvenType"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.onEnable=function(){cc.game.addPersistRootNode(this.node),this.auto_ui&&(this.auto_ui.node_img.opacity=0),r.EventMgrInstance.addListener(l.EVENT_TYPE.Game_Load_View,this.handleViewLoad,this)},t.prototype.handleViewLoad=function(e){if(this.auto_ui){var t=cc.tween(this.auto_ui.node_img);e?t.to(.2,{opacity:255}).start():t.to(.2,{opacity:0}).start()}},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_Load_View,this.handleViewLoad,this)},a([p(s.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default);o.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./LodingGuodu_UIBindings":"LodingGuodu_UIBindings","./ResKeeper":"ResKeeper"}],LogManager:[function(e,t,o){"use strict";cc._RF.push(t,"a7bc2kYwlJBlZcJKpDQxAnG","LogManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__spreadArrays||function(){for(var e=0,t=0,o=arguments.length;t<o;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<o;t++)for(var a=arguments[t],r=0,c=a.length;r<c;r++,i++)n[i]=a[r];return n};Object.defineProperty(o,"__esModule",{value:!0}),o.LogMgr=void 0;var r=e("./SingletonManager"),c=e("./GameConfig"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logTag="[game-logger]",t}return i(t,e),t.prototype.debug=function(){for(var e,t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];(null===(e=c.default.appConfig)||void 0===e?void 0:e.Publish)||console.log.apply(console,a([this._logTag],t))},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,a([this._logTag],e))},t.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,a([this._logTag],e))},t.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,a([this._logTag],e))},t}(r.SingletonBase);o.LogMgr=s.getInstance(),cc._RF.pop()},{"./GameConfig":"GameConfig","./SingletonManager":"SingletonManager"}],Logic_ChildMoveEvent:[function(e,t,o){"use strict";cc._RF.push(t,"ee4adeBSLNGN7M9ofk2tXVI","Logic_ChildMoveEvent");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,r.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canClick=!0,t.onTouchStart=null,t.onTouchMove=null,t.onTouchEnd=null,t}return i(t,e),t.prototype.onLoad=function(){this.registerEventListeners()},t.prototype.registerEventListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.handleTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.handleTouchEnd,this)},t.prototype.startSet=function(e,t,o){this.onTouchStart=e,this.onTouchMove=t,this.onTouchEnd=o},t.prototype.handleTouchStart=function(e){this.canClick&&this.onTouchStart&&this.onTouchStart(e)},t.prototype.handleTouchMove=function(e){this.canClick&&this.onTouchMove&&this.onTouchMove(e)},t.prototype.handleTouchEnd=function(e){this.canClick&&this.onTouchEnd&&this.onTouchEnd(e)},t.prototype.removeEventListeners=function(){this.node.targetOff(this)},t.prototype.setDelayCantClick=function(e){var t=this;this.canClick=!1,this.scheduleOnce(function(){t.canClick=!0},e)},t.prototype.setCantClick=function(e){this.canClick=e,this.removeEventListeners(),e&&this.registerEventListeners()},a([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],Logic_GetEquip:[function(e,t,o){"use strict";cc._RF.push(t,"9391esz/2FAMrudx9L3fEGo","Logic_GetEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LogManager"),c=e("./ArrayUtils"),s=e("./ObjectUtils"),l=e("./PlayerDataManager"),u=e("./Excel"),d=e("./GameDataManager"),p=e("./GameGlobalVariable"),h=e("./Const_Game"),f=cc._decorator,g=f.ccclass,_=(f.property,f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geZiBiChuCount=5,t.oneGeZiId=1,t.zaZhongMap=new Map,t.equipPool=[],t.equipWeights=[],t.videoEquipWeights=[],t.geZiIdArray=[],t.geZiWeights=[],t.shuiGuoLevelMap=new Map,t}var o;return i(t,e),o=t,Object.defineProperty(t,"getInstance",{get:function(){return this._instance||(this._instance=new o,this._instance.startCheckData(),this._instance.startSetShuiGuoLevel()),this._instance},enumerable:!1,configurable:!0}),t.prototype.getEquip=function(e,t,o,n){var i=this,a=d.GameDataMgr.getGameBag;a.pickCardCount++,t&&a.videoCount++;var l=[];this.equipWeights.forEach(function(e,t){var o=i.equipPool[t];2===o.level||3===o.level?l.push(e+0):l.push(e)}),o<=1&&this.geZiIdArray.forEach(function(e){1===o&&e===i.oneGeZiId?l[e-1]=l[e-1]:l[e-1]=0}),a.geZiBaoDi++,r.LogMgr.debug("\u683c\u5b50\u4fdd\u5e95\u6570\u91cf:",a.geZiBaoDi);for(var u=[],p=0;p<e;p++){var f=void 0;if(0===p&&t)f=c.default.getWeightedRandomIndex(this.videoEquipWeights);else if(a.geZiBaoDi>=this.geZiBiChuCount&&o>0)f=1===o?this.oneGeZiId-1:this.geZiIdArray[c.default.getWeightedRandomIndex(this.geZiWeights)]-1;else{var g=void 0;do{f=c.default.getWeightedRandomIndex(l),g=this.equipPool[f]}while(1===n&&g&&(g.shuiguoId===h.FruitId.\u6768\u6843\u5fcd\u8005||g.shuiguoId===h.FruitId.\u67e0\u6aac\u7cbe||g.shuiguoId===h.FruitId.\u8fa3\u59b9\u5b50||g.shuiguoId===h.FruitId.\u62db\u8d22\u6a59\u5b50))}u.push(s.default.deepClone(this.equipPool[f])),-1===this.equipPool[f].level&&(a.geZiBaoDi=0,r.LogMgr.debug("\u89e6\u53d1\u683c\u5b50\u4fdd\u5e95:",a.geZiBaoDi))}return u},t.prototype.getOneCell=function(e,t,o){var n=[];if(p.GameGlobalVariable.nowlevel>=1&&p.GameGlobalVariable.nowlevel<=4){var i=[];switch(o){case 1:i=[2,3];break;case 2:i=[1];break;case 3:i=[4,5,6,7]}if(i.length>0){var a=i[Math.floor(Math.random()*i.length)];return n.push(s.default.deepClone(this.equipPool[a-1])),n}}for(var r=0;r<e;r++){var l=-1;t>0&&(l=1===t?this.oneGeZiId-1:this.geZiIdArray[c.default.getWeightedRandomIndex(this.geZiWeights)]-1),-1!==l&&n.push(s.default.deepClone(this.equipPool[l]))}return n},t.prototype.startCheckData=function(){var e=this;this.equipPool.length||(this.equipPool=[],this.equipWeights=[],this.videoEquipWeights=[],this.geZiIdArray=[],this.geZiWeights=[],u.Excel.bagEquipRule_all.forEach(function(t){(-1===t.level||l.PlayerDataMgr.dressUpArray.includes(t.shuiguoId)||-1===u.Excel.shuiguo(t.shuiguoId).isShow&&2===p.GameGlobalVariable.isSpecialLevel())&&(e.equipPool.push(t),e.equipWeights.push(t.weight),e.videoEquipWeights.push(t.videoWidget),-1===t.level&&(e.geZiIdArray.push(t.id),e.geZiWeights.push(t.weight)))}))},t.prototype.startSetShuiGuoLevel=function(){var e=this;this.shuiGuoLevelMap.size||(this.shuiGuoLevelMap=new Map,u.Excel.shuiguohecheng_all.forEach(function(t){e.shuiGuoLevelMap.has(t.shuiguoId)||e.shuiGuoLevelMap.set(t.shuiguoId,[]),e.shuiGuoLevelMap.get(t.shuiguoId).push(t)}))},t.prototype.getEquipUpData=function(e,t){var o;return null===(o=this.shuiGuoLevelMap.get(e))||void 0===o?void 0:o[t]},t.prototype.getMaxLevel=function(e){var t=-1,o=u.Excel.shuiguo(e);if(0!==o.jinjieShuiGuoId)t=o.id;else{var n=u.Excel.shuiguo(this.getZaZhongId(e));n&&0!==n.jinjieShuiGuoId&&(t=n.id)}if(-1!==t){var i=u.Excel.shuiguo(t),a=l.PlayerDataMgr.getEquipDataById(t);if(i.jinJieLv<=a.level)return p.GameGlobalVariable.zaZhongMaxLevel}return p.GameGlobalVariable.normalMaxLevel},t.prototype.resetThis=function(){this.equipPool=[],this.startCheckData()},t.prototype.getZaZhongId=function(e){var t,o=this;return 0===this.zaZhongMap.size&&u.Excel.shuiguo_all.forEach(function(e){0!==e.jinjieShuiGuoId&&(o.zaZhongMap.set(e.id,e.jinjieShuiGuoId),o.zaZhongMap.set(e.jinjieShuiGuoId,e.id))}),null!==(t=this.zaZhongMap.get(e))&&void 0!==t?t:-1},t.prototype.getMustGetGeZi=function(){return null},o=a([g],t)}(cc.Component));o.default=_,cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./Const_Game":"Const_Game","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./ObjectUtils":"ObjectUtils","./PlayerDataManager":"PlayerDataManager"}],MiniGameSdk:[function(e,t,o){"use strict";cc._RF.push(t,"ecb50t6ftlN4Y0AsTiTf1PC","MiniGameSdk"),Object.defineProperty(o,"__esModule",{value:!0}),o.MiniGameSdk=void 0,function(e){var t;function o(){return null!==window.wx&&void 0!==window.wx}function n(){return null!==window.tt&&void 0!==window.tt}function i(){return o()?t.WECHAT:n()?t.BYTEDANCE:t.DEVELOP}function a(){var e,o=i();o===t.WECHAT?e=wx.getSystemInfoSync():o===t.BYTEDANCE&&(e=tt.getSystemInfoSync());var n={width:0,height:0};return e&&(n.width=e.windowWidth,n.height=e.windowHeight),n}(function(e){e[e.DEVELOP=0]="DEVELOP",e[e.WECHAT=1]="WECHAT",e[e.BYTEDANCE=2]="BYTEDANCE"})(t||(t={})),e.isWechat=o,e.isBytedance=n;var r,c=function(){function e(e){this._adUid=e}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.show=function(){var e,a,r=this,c=i();if(c!==t.DEVELOP)return o()&&!wx.createInterstitialAd?(console.warn("wechat unsupport interstitial AD!"),void(this._interstitialAd=null)):n()&&!tt.createInterstitialAd?(console.warn("bytedance unsupport interstitial AD!"),void(this._interstitialAd=null)):void(this._interstitialAd?this._interstitialAd.load():(c===t.WECHAT?this._interstitialAd=wx.createInterstitialAd({adUnitId:this._adUid}):c===t.BYTEDANCE?this._interstitialAd=tt.createInterstitialAd({adUnitId:this._adUid}):this._interstitialAd=null,null===(e=this._interstitialAd)||void 0===e||e.onLoad(function(){console.log("load interstitial ad success"),r._interstitialAd.show().catch(function(e){console.log("catch interstitial ad error:",e)})}),null===(a=this._interstitialAd)||void 0===a||a.onError(function(e){console.log("interstitial ad on error:",e)})));this._interstitialAd=null},e.prototype.destory=function(){var e;null===(e=this._interstitialAd)||void 0===e||e.destroy()},e}(),s=function(){function e(e,t,o,n){void 0===o&&(o=300),void 0===n&&(n=!1),this._adUid=e,this.create(n,o,t)}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.create=function(e,o,n){var r,c,s=this,l=i();if(l!==t.DEVELOP){this.destroy();var u=a(),d=.4*o,p=0,h=0;"boolean"==typeof n?(h=(u.width-o)/2,p=n?5:u.height-d):(h=n.left,p=n.top);var f={adUnitId:this._adUid,adIntervals:30,style:{left:h,top:p+20,width:o}};l===t.WECHAT?this._bannerAd=wx.createBannerAd(f):l===t.BYTEDANCE?this._bannerAd=tt.createBannerAd(f):this._bannerAd=null,null===(r=this._bannerAd)||void 0===r||r.onError(function(e){console.log("ad banner error:",e)}),null===(c=this._bannerAd)||void 0===c||c.onLoad(function(){e&&s._bannerAd.show()})}else this._bannerAd=null},e.prototype.show=function(){var e;null===(e=this._bannerAd)||void 0===e||e.show()},e.prototype.hide=function(){var e;null===(e=this._bannerAd)||void 0===e||e.hide()},e.prototype.destroy=function(){var e;null===(e=this._bannerAd)||void 0===e||e.destroy()},e}(),l=function(){function e(e,t,o,n){void 0===t&&(t=0),void 0===o&&(o=0),void 0===n&&(n=1),this._adUid=e,this.createCustomAd(t,o,n)}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.createCustomAd=function(e,o){var n,a=i();if(a===t.DEVELOP||a===t.BYTEDANCE)return this._customAd=null,void console.log("develop or bytedance env not support custom Ad:",a);this.destroy(),this._customAd=wx.createCustomAd({adUnitId:this._adUid,style:{left:o,top:e,fixed:!0}}),null===(n=this._customAd)||void 0===n||n.onError(function(e){console.log("ad custom error:",e)})},e.prototype.show=function(){var e;null===(e=this._customAd)||void 0===e||e.show()},e.prototype.hide=function(){var e;null===(e=this._customAd)||void 0===e||e.hide()},e.prototype.destroy=function(){var e;null===(e=this._customAd)||void 0===e||e.destroy()},e}();(function(e){e[e.ACCEPT=0]="ACCEPT",e[e.REJECT=1]="REJECT",e[e.ERROR=2]="ERROR"})(r=e.EAdVideoResult||(e.EAdVideoResult={}));var u,d=function(){function e(e){this._videoAd=null,this._adUid=e}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.show=function(e,o,n){var a,c,s,l,u,d=this;void 0===n&&(n=3);var p=function(t,n){null==e||e.call(o,t,n)},h=i();if(h===t.DEVELOP)return p(r.ACCEPT,1),void(this._videoAd=null);var f=function(e){var o;if(null===(o=d._videoAd)||void 0===o||o.offClose(f),h===t.WECHAT)e&&e.isEnded||void 0===e?p(r.ACCEPT,1):p(r.REJECT,0);else if(h===t.BYTEDANCE){var n=e;n&&n.count>0?p(r.ACCEPT,n.count):p(r.REJECT,0)}};null===(a=this._videoAd)||void 0===a||a.offClose(f),h===t.WECHAT?this._videoAd=wx.createRewardedVideoAd({adUnitId:this._adUid}):h===t.BYTEDANCE?this._videoAd=tt.createRewardedVideoAd({adUnitId:this._adUid,multiton:!0,multitonRewardMsg:["\u591a1\u6b21\u5956\u52b1","\u518d\u591a\u4e00\u6b21\u5956\u52b1","\u518d\u591a\u4e00\u6b21\u5956\u52b1"],multitonRewardTimes:n}):this._videoAd=null,null===(c=this._videoAd)||void 0===c||c.onLoad(function(){console.log("ad video load success")}),null===(s=this._videoAd)||void 0===s||s.onError(function(e){console.log("ad video error:",e),p(r.ERROR,0)}),null===(l=this._videoAd)||void 0===l||l.onClose(f),null===(u=this._videoAd)||void 0===u||u.show().catch(function(){var e;null===(e=d._videoAd)||void 0===e||e.load().then(function(){var e;return null===(e=d._videoAd)||void 0===e?void 0:e.show()}).catch(function(e){console.log("catch video ad error:",e),p(r.ERROR,0)})})},e.prototype.destory=function(){var e;null===(e=this._videoAd)||void 0===e||e.destory()},e}();(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(u=e.EAdBannerLocation||(e.EAdBannerLocation={}));var p,h=function(){function e(){this.blnFromShare=!1}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.prototype.loadBanner=function(e,t,o){var n;void 0===t&&(t=u.TOP),void 0===o&&(o=1),null===(n=this._bannerAd)||void 0===n||n.destroy();var i=a(),r=i.width*o;r=(r=r<300?300:r)>i.width?i.width:r,r=300,this._bannerAd=new s(e,"number"==typeof t?t===u.TOP:t,r,!1)},e.prototype.showBanner=function(){this._bannerAd?this._bannerAd.show():console.error("MiniGameSDK: banner is null, you must call loadBanner(...) first!")},e.prototype.hideBanner=function(){var e;null===(e=this._bannerAd)||void 0===e||e.hide()},e.prototype.showInterstitial=function(e){var t;this._interstitialAd&&this._interstitialAd.aduid===e?this._interstitialAd.show():(null===(t=this._interstitialAd)||void 0===t||t.destory(),this._interstitialAd=new c(e),this._interstitialAd.show())},e.prototype.loadCustom=function(e,t,o){var n;void 0===t&&(t={top:0,left:0}),void 0===o&&(o=1),null===(n=this._customAd)||void 0===n||n.destroy(),this._customAd=new l(e,t.top,t.left,o)},e.prototype.loadCustomOne1=function(e,t,o){void 0===t&&(t={top:0,left:0}),void 0===o&&(o=1)},e.prototype.loadCustomOne2=function(e,t,o){void 0===t&&(t={top:0,left:0}),void 0===o&&(o=1)},e.prototype.loadCustomOne3=function(e,t,o){void 0===t&&(t={top:0,left:0}),void 0===o&&(o=1)},e.prototype.loadCustomOne4=function(e,t,o){void 0===t&&(t={top:0,left:0}),void 0===o&&(o=1)},e.prototype.showCustom=function(){this._customAd?this._customAd.show():console.error("MiniGameSDK: custom is null, you must call loadCustom(...) first!")},e.prototype.hideCustom=function(){var e;null===(e=this._customAd)||void 0===e||e.hide()},e.prototype.showCustomOne2=function(){},e.prototype.showCustomOne3=function(){},e.prototype.showVideo=function(e,t,o,n){var i;void 0===n&&(n=3),this._videoAd&&this._videoAd.aduid===e?this._videoAd.show(t,o,n):(null===(i=this._videoAd)||void 0===i||i.destory(),this._videoAd=new d(e),this._videoAd.show(t,o,n))},e.prototype.destroyAll=function(){var e,t,o,n;null===(e=this._bannerAd)||void 0===e||e.destroy(),this._bannerAd=null,null===(t=this._interstitialAd)||void 0===t||t.destory(),this._interstitialAd=null,null===(o=this._videoAd)||void 0===o||o.destory(),this._videoAd=null,null===(n=this._customAd)||void 0===n||n.destroy(),this._customAd=null},e}();e.AdvertManager=h,function(e){e[e.SHORT=0]="SHORT",e[e.LONG=1]="LONG"}(p=e.EVirbrateType||(e.EVirbrateType={}));var f=function(){function n(){}return n.autoCheckCallback=function(e,o){switch(i()){case t.DEVELOP:console.log("develop env not support!");break;case t.WECHAT:null==e||e();break;case t.BYTEDANCE:null==o||o()}},n.shareAppToFriendsNew=function(e,t,o,i,a){var r=this;void 0===t&&(t=""),window.tt?tt.shareAppMessage({title:e,desc:t,imageUrl:null!=o?o:"",query:null!=i?i:"",success:function(e){console.log("share success:",e),null==a||a(!0)},fail:function(e){console.log("share fail:",e),null==a||a(!1)}}):window.wx&&(this._onShowCallback=function(){window.wx.offShow(r._onShowCallback);var e=Date.now();a&&(r._failedShareCount<2?e-r._lastShareTime>2e3?Math.random()<.3?(a(!1),n.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u5206\u4eab\u81f3\u7fa4\u804a"),r._failedShareCount++):(n.showToast("\u5206\u4eab\u6210\u529f"),a(!0)):(r._failedShareCount++,a(!1),n.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u91cd\u65b0\u5206\u4eab")):(n.showToast("\u5206\u4eab\u6210\u529f"),r._failedShareCount=0,a(!0)))},window.wx.onShow(this._onShowCallback),this._lastShareTime=Date.now(),window.wx.shareAppMessage({imageUrlId:"",imageUrl:"https://mmocgame.qpic.cn/wechatgame/bSAKPPBBQFUN44PHyDL1mOY72Z1pA2eT0x3QtvGFxdL0ZPob1wej1Dy32ttBtt5y/0",title:"\u4f60\u6562\u6765\u5403\u6211\u5417"}))},n.showToast=function(e,t){void 0===t&&(t=2),this.autoCheckCallback(function(){wx.showToast({title:e,icon:"success",duration:1e3*t})},function(){tt.showToast({title:e,duration:1e3*t,success:function(e){console.log(""+e)},fail:function(){console.log("showToast\u8c03\u7528\u5931\u8d25")}})})},n.vibrate=function(e){void 0===e&&(e=p.SHORT),this.autoCheckCallback(function(){switch(e){case p.SHORT:wx.vibrateShort({success:function(e){console.log("vibrate success:",e)},fail:function(e){console.log("vibrateShort failed",e)}});break;case p.LONG:wx.vibrateLong({success:function(e){console.log("vibrate success",e)},fail:function(e){console.log("vibrateLong failed",e)}})}},function(){switch(e){case p.SHORT:tt.vibrateShort({success:function(e){console.log("vibrate success:",e)},fail:function(e){console.log("vibrateShort failed",e)}});break;case p.LONG:tt.vibrateLong({success:function(e){console.log("vibrate success",e)},fail:function(e){console.log("vibrateLong failed",e)}})}})},n.createWxGameHub=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=cc.view.getVisibleSize(),o=(t.width,t.height,wx.getSystemInfoSync()),n=o.screenWidth,i=o.screenHeight;console.log("\u5c4f\u5e55\u5bbd:"+n),console.log("\u5c4f\u5e55\u9ad8:"+i),o.windowWidth,o.windowHeight,e.API.gameClubButton=wx.createGameClubButton({icon:"light",style:{left:10,top:60,width:40,height:40,backgroundColor:"#00000000"}})}},n.reboot=function(){this.autoCheckCallback(function(){wx.restartMiniProgram({success:function(){console.log("restart success")},fail:function(){console.log("restart failed")}})},function(){try{tt.restartMiniProgramSync()}catch(e){console.log("restartMiniProgramSync",e)}})},n.exit=function(){this.autoCheckCallback(function(){wx.exitMiniProgram({success:function(){console.log("exit success")},fail:function(){console.log("exit failed")}})},function(){tt.exitMiniProgram({success:function(e){console.log("exit success:",null==e?void 0:e.data)},fail:function(e){console.log("exit fail:",null==e?void 0:e.errMsg)}})})},n.randomIntNum=function(t,o){return Math.round(e.API.randomFloatNum(t,o))},n.randomFloatNum=function(e,t){var o=Date.now();return t=t||0,e=e||0,t=Math.max(t,e),(e=Math.min(t,e))+(o=(9301*o+49297)%233280)/233280*(t-e)},n.showShareMenu=function(){this.autoCheckCallback(function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(){},fail:function(){},complete:function(){}});var t=["\u9b54\u6027\u5c0f\u6e38\u620f\uff0c\u65e0\u9700\u4e0b\u8f7d\uff0c\u70b9\u51fb\u5373\u73a9\uff01","\u8c01\u8bbe\u8ba1\u7684\u7b2c\u4e8c\u5173\uff0c\u5b8c\u5168\u8fc7\u4e0d\u53bb\u554a\uff01","\u89e3\u538b\uff0c\u5b9e\u5728\u662f\u592a\u89e3\u538b\u4e86\uff01","\u6211\u8001\u516c\u79d2\u8fc7\u7b2c\u4e8c\u5173\uff01\u4f60\u884c\u4e0d\u884c\u5440","\u542c\u54e5\u4e00\u53e5\u529d\uff0c\u8fd9\u6e38\u620f\u4f60\u522b\u78b0\uff0c\u6015\u4f60\u628a\u63e1\u4e0d\u4f4f\uff01","\u8fd9\u5173\u80fd\u4e0d\u80fd\u4e00\u6b21\u8fc7\u5c31\u770b\u4f60\u4e86","\u6709\u672c\u4e8b\u4f60\u6765\u628a\u7b2c\u4e8c\u5173\u8fc7\u4e86\u5440[\u65fa\u67f4]","\u8be5\u4e0d\u4f1a\u6709\u4eba\u8fc7\u4e0d\u4e86\u7b2c\u4e8c\u5173\u5427\uff1f","\u80fd\u8fc7\u7b2c\u4e8c\u5173\u7684\u4eba\uff0c\u667a\u5546\u90fd\u4e0d\u4f4e\u4e8e150[\u563f\u54c8]","\u8c01\u80fd\u8fc7\u53bb\u7b2c2\u5173\u6211\u5c31\u670d\u5979\uff01[\u5de6\u54fc\u54fc]","\u996d\u524d\u73a9\u4e00\u628a\uff0c\u5f00\u5fc3\u53c8\u89e3\u538b[\u673a\u667a][\u5472\u7259]","\u7b11\u6b7b\uff0c\u8001\u5a46\u6765\u4e86\u4e5f\u8fc7\u4e0d\u4e86\u7b2c\u4e8c\u5173[\u5472\u7259]","\u8c01\u80fd\u8fc7\u5173\u6211\u5c31\u670d\u5979\uff01","\u636e\u8bf4\u8fd9\u6e38\u620f\u4ec50.2%\u7684\u4eba\u80fd\u901a\u8fc7\u7b2c\u4e8c\u5173\uff0c\u4f60\u6562\u6765\u8bd5...","\u8fd9\u6e38\u620f\u4f60\u80fd\u8fc7\u4e86\u7b2c\u4e8c\u5173\uff0c\u7b97\u4f60\u5389\u5bb3\uff01"],o=["https://mmocgame.qpic.cn/wechatgame/oxByTG5ibhWjHwM4OPKyhf5vJSZictFSZdspMiccic3uo3tYdPpNnFokzC19MYLQUGcP/0","https://mmocgame.qpic.cn/wechatgame/kVz9DdkicmVg8tFWHCV80uNTaH4tIuxfZpAcyz2iaSSY7rmEOM7wsCgHgXWjjN1uhU/0","https://mmocgame.qpic.cn/wechatgame/4Nvoic6orqLonquA5DKR5MzLYNnSpicqD2XdO45MHY10bibsMFusmPhpfibJ1WXMXHhA/0","https://mmocgame.qpic.cn/wechatgame/icwicFxXAiaFTyHWWGlMC9PTG1WeTS2f4UJzI1SFBhk2SUyLInMmb9drX3XMxGUQ1KL/0","https://mmocgame.qpic.cn/wechatgame/ibVyxNISGA75TsSGaOmBp3dqSWD4yd9lznHe0Qq0ZG6DcTOuDllmHSV2dhA5300p9/0","https://mmocgame.qpic.cn/wechatgame/cmT3ulLfYrlcDWiakgibawib4aUiaWRuy2eEV64qrUO00PiaPbzacNPIlBjOIia6B1AKxC/0","https://mmocgame.qpic.cn/wechatgame/XqtEbkfpjbQ7LEpmDjTl1z4hzeUNNCIdRckDZuhYy7yrcLQZ9vaLIdDrXfTQLG2t/0","https://mmocgame.qpic.cn/wechatgame/WohhvAj4g78IJY2Yn64f6TsjY25nCNlibHIfHH8AlnmJuCsS51GySNHsbRzveibicicG/0"];window.wx.onShareAppMessage(function(){return{title:t[e.API.randomIntNum(0,t.length-1)],imageUrl:o[e.API.randomIntNum(0,o.length-1)],query:"shareid=100"}}),window.wx.onShareTimeline(function(){return{title:t[e.API.randomIntNum(0,t.length-1)],imageUrl:o[e.API.randomIntNum(0,o.length-1)],query:"shareid=200"}}),window.wx.onShow(function(){console.log("onShow"),e.AdvertManager.instance.blnFromShare?e.AdvertManager.instance.blnFromShare=!1:e.AdvertManager.instance.showInterstitial("adunit-203b3a122ff3e583"),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects(),cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects()})},function(){tt.showShareMenu({success:function(){console.log("show menu is showing")},fail:function(e){console.log("showShareMenu:",e.errMsg)},complete:function(){console.log("showShareMenu complete")}})})},n.navigateTo=function(e,t){this.autoCheckCallback(function(){wx.navigateToMiniProgram({appId:e,extraData:{foo:"bar"},envVersion:"develop",success:function(){null==t||t()}})},function(){tt.navigateToVideoView({videoId:e,success:function(){null==t||t()},fail:function(e){console.log("bytedance navigateToVideoView fail",e)}})})},n.login=function(e){var o=i(),a=function(){o===t.WECHAT?wx.login({success:function(t){t.code?(n._loginCode=t.code,n._loginAnonymousCode=null,null==e||e(n._loginCode,n._loginAnonymousCode)):console.log("login error:",t.errMsg)},fail:function(){n._loginCode=null,n._loginAnonymousCode=null,null==e||e(n._loginCode,n._loginAnonymousCode),console.log("login fail")}}):o===t.BYTEDANCE?tt.login({force:!0,success:function(t){var o,i;console.log("login "+t.code+" "+t.anonymousCode),t.code?(n._loginCode=null===(o=t.code)||void 0===o?void 0:o.toString(),n._loginAnonymousCode=null===(i=t.anonymousCode)||void 0===i?void 0:i.toString(),null==e||e(n._loginCode,n._loginAnonymousCode)):console.log("login error:",t.errMsg)},fail:function(t){n._loginCode=null,n._loginAnonymousCode=null,null==e||e(n._loginCode,n._loginAnonymousCode),console.log("login fail",t)}}):(n._loginCode=null,n._loginAnonymousCode=null,null==e||e(n._loginCode,n._loginAnonymousCode),console.log("not mini game platform, login codes are all null"))};n._loginCode?o===t.WECHAT?wx.checkSession({success:function(){console.log("session is valid, use current code:",n._loginCode),null==e||e(n._loginCode,n._loginAnonymousCode)},fail:function(){console.log("session expired"),a()}}):o===t.BYTEDANCE?tt.checkSession({success:function(){console.log("session is valid, user current code: "+n._loginCode+", "+n._loginAnonymousCode),null==e||e(n._loginCode,n._loginAnonymousCode)},fail:function(){console.log("session expired"),a()}}):(console.log("not mini game platform, login null"),null==e||e(null,null)):a()},n.callWechatCloudFunction=function(e,t,i){o()?this.login(function(){n._hasInitWechatCloudFunction||(wx.cloud.init(),n._hasInitWechatCloudFunction=!0),wx.cloud.callFunction({name:t,data:i,success:function(t){return null==e?void 0:e(t)},fail:function(t){console.log("wechat cloud function error:",t),null==e||e(null)}})}):console.log("Not wechat platform, not support callWechatCloudFunction")},n.setUserCloudStorage=function(e,t){this.autoCheckCallback(function(){wx.setUserCloudStorage({KVDataList:[{key:e,value:t}],success:function(){return console.log("set cloud storage success:"+e+", value:"+t)},fail:function(e){return console.log("set cloud storage error:",e)}})},function(){tt.setUserCloudStorage({KVDataList:[{key:e,value:t}],success:function(){return console.log("set cloud storage success:"+e+", value:"+t)},fail:function(e){return console.log("set cloud storage error:",e)}})})},n._loginCode=null,n._loginAnonymousCode=null,n._hasInitWechatCloudFunction=!1,n._onShowCallback=null,n._lastShareTime=0,n._failedShareCount=0,n.gameClubButton=null,n}();e.API=f;var g=function(){function e(){}return e.listenFromSidebar=function(e,t){if(n()){tt.onShow(function(o){console.log("onShow launch res:",o),"021036"===o.scene?(null==e||e.call(t,!0),console.log("launch from sidebar")):(null==e||e.call(t,!1),console.log("NOT launch from douyin sidebar!"))});var o=tt.getLaunchOptionsSync();o&&"021036"===o.scene&&(null==e||e.call(t,!0))}else null==e||e.call(t,!1)},e.checkSideBar=function(e,t){n()?tt.checkScene({scene:"sidebar",success:function(o){console.log("check scene success: ",o.isExist),null==e||e.call(t,o.isExist)},fail:function(o){console.log("check scene fail:",o),null==e||e.call(t,!1)}}):null==e||e.call(t,!1)},e.navigateToSidebar=function(e,t){if(!n())return console.log("not douyin platform!"),void(null==e||e.call(t,!1));tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate success"),null==e||e.call(t,!0)},fail:function(o){console.log("navigate failed reason:",o),null==e||e.call(t,!1)}})},e}();e.BytedanceSidebar=g}(o.MiniGameSdk||(o.MiniGameSdk={})),cc._RF.pop()},{}],MiniGame:[function(e,t,o){"use strict";cc._RF.push(t,"68263d/po1Mw7R+W49p69Fw","MiniGame"),Object.defineProperty(o,"__esModule",{value:!0}),o.isMiniGame=void 0,o.isMiniGame=function(){return[cc.sys.WECHAT_GAME,cc.sys.ALIPAY_GAME,cc.sys.QTT_GAME,cc.sys.BYTEDANCE_GAME,cc.sys.HUAWEI_GAME,cc.sys.OPPO_GAME,cc.sys.VIVO_GAME,cc.sys.XIAOMI_GAME,cc.sys.BAIDU_GAME,cc.sys.JKW_GAME,cc.sys.LINKSURE].includes(cc.sys.platform)},cc._RF.pop()},{}],ModuleManager:[function(e,t,o){"use strict";cc._RF.push(t,"3429br0D0BIqpSXdGfDW/2d","ModuleManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.ModuleMgr=void 0;var c=e("./BundleConfig"),s=e("./EventManager"),l=e("./SingletonManager"),u=e("./ResLoader"),d=e("./ResUtil"),p=e("./EvenType"),h=e("./BaseModule"),f=function(e){function t(){var t=e.call(this)||this;return t._modules=new Map,t._isLoading=!1,t}return i(t,e),t.prototype.show=function(e,t,o){return void 0===o&&(o={}),a(this,void 0,Promise,function(){var n,i,a;return r(this,function(r){switch(r.label){case 0:return n=null,s.EventMgrInstance.emitEvent(p.EVENT_TYPE.Game_Load_View,!0),this._isLoading?[2]:(this._isLoading=!0,this._modules.has(e)?(n=this._modules.get(e)||null,[3,3]):[3,1]);case 1:return i="module/"+e,[4,u.default.loadRes(c.BundleNames.Home,i,cc.Prefab)];case 2:a=r.sent(),n=d.ResourceUtil.instantiate(a),t.addChild(n),n.getComponent(h.default).show(o),this._modules.set(e,n),r.label=3;case 3:return this._modules.forEach(function(e){e.active=e===n}),this._isLoading=!1,s.EventMgrInstance.emitEvent(p.EVENT_TYPE.Game_Load_View,!1),[2]}})})},t.prototype.clearAllModules=function(){this._modules.clear()},t}(l.SingletonBase);o.ModuleMgr=f.getInstance(),cc._RF.pop()},{"./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],Module_Fighting_RedPoint:[function(e,t,o){"use strict";cc._RF.push(t,"c2998WOE8pFjKIZ3j195MWO","Module_Fighting_RedPoint");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./Excel"),d=e("./GameDataManager"),p=cc._decorator,h=p.ccclass,f=p.property,g=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.huangdong=null,t.type=1,t.huangtw=null,t}return i(t,e),t.prototype.onEnable=function(){switch(this.type){case 1:r.EventMgrInstance.addListener(s.EVENT_TYPE.Game_Update_Level_Award,this.updateUI,this),this.updateUI();break;case 2:r.EventMgrInstance.addListener(s.EVENT_TYPE.HOME_QIANDAO_UPDATE,this.handleQianDao,this),this.handleQianDao()}},t.prototype.handleQianDao=function(){l.PlayerDataMgr.resetQianDaoCount(),1===l.PlayerDataMgr.globalData.isqiandaocode?(this.node.children[0].active=!0,this.startHuangDongAnimation()):(this.huangtw&&(this.huangtw.stop(),this.huangdong&&(this.huangdong.angle=0,cc.Tween.stopAllByTarget(this.huangdong))),this.node.children[0].active=!1)},t.prototype.startHuangDongAnimation=function(){if(this.huangdong){var e=cc.tween(this.huangdong).to(.1,{angle:-10}).to(.1,{angle:10}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:0}).delay(.2);this.huangtw=cc.tween(this.huangdong).repeatForever(e).start()}},t.prototype.updateUI=function(){for(var e=u.Excel.shuiguolevel_all.size,t=!1,o=0;o<e;o++)if(d.GameDataMgr.hasLevelAward(o+1)){t=!0;break}this.node.children[0].active=t},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.Game_Update_Level_Award,this.updateUI,this),r.EventMgrInstance.removeListener(s.EVENT_TYPE.HOME_QIANDAO_UPDATE,this.handleQianDao,this)},a([f(cc.Node)],t.prototype,"huangdong",void 0),a([f],t.prototype,"type",void 0),a([h],t)}(c.default));o.default=g,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],Module_Fighting_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"ed71b7LQy9M0Ys97Bz7c/VY","Module_Fighting_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_title=null,t.txt_levelstate=null,t.txt_zhangjielb=null,t.node_rightNode=null,t.node_leftNode=null,t.btn_qiandao=null,t.btn_rankBtn=null,t.btn_saodang=null,t.btn_startgame=null,t.btn_setting=null,t.btn_sidebar=null,t._btnNames=["btn_qiandao","btn_rankBtn","btn_saodang","btn_startgame","btn_setting","btn_sidebar"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_title",void 0),a([l(cc.Label)],t.prototype,"txt_levelstate",void 0),a([l(cc.Label)],t.prototype,"txt_zhangjielb",void 0),a([l(cc.Node)],t.prototype,"node_rightNode",void 0),a([l(cc.Node)],t.prototype,"node_leftNode",void 0),a([l(cc.Button)],t.prototype,"btn_qiandao",void 0),a([l(cc.Button)],t.prototype,"btn_rankBtn",void 0),a([l(cc.Button)],t.prototype,"btn_saodang",void 0),a([l(cc.Button)],t.prototype,"btn_startgame",void 0),a([l(cc.Button)],t.prototype,"btn_setting",void 0),a([l(cc.Button)],t.prototype,"btn_sidebar",void 0),a([s("Module_Fighting_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_Fighting:[function(e,t,o){"use strict";cc._RF.push(t,"f6f1fAq5dFOJa5aG1PX9rMz","Module_Fighting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Module_Fighting_UIBindings"),l=e("./EventManager"),u=e("./EvenType"),d=e("./Excel"),p=e("./BaseModule"),h=e("./GameDataManager"),f=e("./TipsManager"),g=e("./BundleConfig"),_=e("./UIManager"),y=e("./PlayerDataManager"),v=e("./UIRotate"),m=e("./HallGlobalVariable"),b=e("./LogManager"),I=e("./GameGlobalVariable"),w=e("./ADManager"),E=e("./UI_BoxAward"),M=e("./AIControl"),C=e("./UIConfig_Game"),B=e("./UIConfig_Home"),P=e("./Const_Hall"),x=e("./LanMgr"),G=cc._decorator,T=G.ccclass,D=G.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.qiehuanNode=null,t.boshuaward=null,t.awardNode=null,t.saodangLb=null,t.playicon=null,t.shaodanglb=null,t.kaishilb=null,t.zhangjieLb=null,t.nowviewid=0,t.ismove=!1,t.changId=0,t}return i(t,e),t.prototype.onEnable=function(){l.EventMgrInstance.addListener(u.EVENT_TYPE.Game_Value_Fei,this.handleFeiQian,this),l.EventMgrInstance.addListener(u.EVENT_TYPE.Game_PASS,this.updateUI,this),this.handleFeiQian(),this.updateUI(),this.checkAI(),this.updateSweepUI()},t.prototype.updateStamina=function(){this.kaishilb.string="\xd7"+I.GameGlobalVariable.kaishitilicount,this.shaodanglb.string="\xd7"+I.GameGlobalVariable.shaodangtilicount},t.prototype.updateSweepUI=function(){var e=y.PlayerDataMgr.getSaoDangCount();e<=0?(this.playicon.active=!0,this.saodangLb.node.active=!1):(this.playicon.active=!1,this.saodangLb.node.active=!0,this.saodangLb.string=x.langMgr.getStr("0064",e))},t.prototype.updateUI=function(){var e=h.GameDataMgr.getCurrentMaxLevel();this.setChapterId(0===e?0:e)},t.prototype.handleFeiQian=function(){var e=I.GameGlobalVariable.adddimond,t=I.GameGlobalVariable.addjinbi,o=I.GameGlobalVariable.addpower;0!==e&&(l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,3,e),I.GameGlobalVariable.adddimond=0),0!==t&&(l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,2,t),I.GameGlobalVariable.addjinbi=0),0!==o&&(l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,1,o),I.GameGlobalVariable.addpower=0)},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(u.EVENT_TYPE.Game_Value_Fei,this.handleFeiQian,this),l.EventMgrInstance.removeListener(u.EVENT_TYPE.Game_PASS,this.updateUI,this)},t.prototype.show=function(){this.auto_ui.addClickListener(this._clickListener,this);var e=this.auto_ui,t=e.btn_sidebar,o=e.btn_rankBtn;t.node.active=!1,cc.sys.platform,cc.sys.BYTEDANCE_GAME,o.node.active=cc.sys.platform===cc.sys.BYTEDANCE_GAME},t.prototype.hide=function(){},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_saodang:this._handleSweepClick();break;case t.btn_startgame:this.onClickStartGame();break;case t.btn_setting:this.showSettings();break;case t.btn_qiandao:this.showSignIn();break;case t.btn_sidebar:_.default.open(g.BundleNames.Home,B.UIView_Home.UI_Sidebar);break;case t.btn_rankBtn:cc.sys.platform,cc.sys.BYTEDANCE_GAME}},t.prototype._handleSweepClick=function(){y.PlayerDataMgr.globalData.power>=I.GameGlobalVariable.shaodangtilicount?y.PlayerDataMgr.getSaoDangCount()>0?this._consumeSweepResources():w.ADMgr.showRewardedVideoAd("\u89c6\u9891\u626b\u8361",this._consumeSweepResources.bind(this)):f.TipMgr.showToast(x.langMgr.getStr("0008"))},t.prototype._consumeSweepResources=function(){y.PlayerDataMgr.subtractPower(I.GameGlobalVariable.shaodangtilicount),y.PlayerDataMgr.subSaoDangCount(1),this.updateSweepUI(),I.GameGlobalVariable.nowlevel=this.changId+1,_.default.open(g.BundleNames.Game,C.UIView_Game.UI_GameOver,{type:2,back:function(){}})},t.prototype.showSignIn=function(){_.default.open(g.BundleNames.Home,B.UIView_Home.UI_QianDao)},t.prototype.showSettings=function(){_.default.open(g.BundleNames.Home,B.UIView_Home.UI_Setting)},t.prototype.onClickStartGame=function(){if(y.PlayerDataMgr.dressUpArray.every(function(e){return 0!==e})){var e=d.Excel.shuiguoguanqia(this.changId+1),t=h.GameDataMgr.getCurrentLevelPassState(e.id,2);1===t||2===t?l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Hall_StartGame,this.changId+1):f.TipMgr.showToast(x.langMgr.getStr("0009"))}else f.TipMgr.showToast(x.langMgr.getStr("0010"))},t.prototype.setCurrentView=function(e){var t=this,o=this.qiehuanNode.children[this.nowviewid],n=this.qiehuanNode.children[0===this.nowviewid?1:0];n.opacity=255,this.ismove=!0;var i=1===e?375+o.width:-(375+o.width),a=1===e?-(375+n.width):375+n.width;cc.tween(o).to(.25,{x:i}).start(),n.x=a,cc.tween(n).to(.25,{x:0}).call(function(){t.ismove=!1}).start(),this.nowviewid=0===this.nowviewid?1:0,this._updateRightLeftNode(),this.updateCharacterData()},t.prototype._updateRightLeftNode=function(){var e=h.GameDataMgr.getCurrentMaxLevel()+I.GameGlobalVariable.houlevelunlock,t=d.Excel.shuiguoguanqia_all.size,o=Math.min(e,t-1);this.auto_ui.node_rightNode.active=this.changId+1<=o,this.auto_ui.node_leftNode.active=this.changId-1>=0},t.prototype.updateCharacterData=function(){return r(this,void 0,void 0,function(){var e,t,o,n,i;return c(this,function(a){switch(a.label){case 0:return e=d.Excel.shuiguoguanqia(this.changId+1),t=h.GameDataMgr.getCurrentLevelData(this.changId+1),b.LogMgr.debug("\u5f53\u524d\u5173\u5361\u672c\u5730\u6570\u636e",t),o=this.qiehuanNode.children[this.nowviewid],(n=this.qiehuanNode.children[0===this.nowviewid?1:0])&&(n.opacity=0),[4,this._loadRes(g.BundleNames.Home,"res/\u521d\u59cb\u4e4b\u5730/levelicon"+e.dipicture,cc.SpriteFrame)];case 1:return i=a.sent(),o.getComponent(cc.Sprite).spriteFrame=i,o.children[0].getComponent(cc.Sprite).spriteFrame=i,this._updateUIElements(e),[2]}})})},t.prototype._updateUIElements=function(e){switch(this.auto_ui.txt_title.string=e.id+"."+e.levelname,h.GameDataMgr.getCurrentLevelPassState(e.id,2)){case-1:this._handleLockedLevel();break;case 1:this._handleCompletedLevel();break;case 2:this._handleCurrentLevel(e)}this._updateBoshuAwards(e)},t.prototype._handleLockedLevel=function(){this.auto_ui.btn_startgame.node.active=!1,this.auto_ui.txt_zhangjielb.node.active=!0,this.auto_ui.txt_zhangjielb.string=x.langMgr.getStr("0058",this.changId),this.auto_ui.txt_levelstate.string=x.langMgr.getStr("0059"),this.auto_ui.btn_saodang.node.active=!1,this.qiehuanNode.children[this.nowviewid].children[0].active=!0},t.prototype._handleCompletedLevel=function(){this.auto_ui.txt_zhangjielb.node.active=!1,this.auto_ui.btn_startgame.node.active=!0,this.auto_ui.txt_levelstate.string=x.langMgr.getStr("0060"),this.auto_ui.btn_saodang.node.active=!0,this.qiehuanNode.children[this.nowviewid].children[0].active=!1},t.prototype._handleCurrentLevel=function(e){this.auto_ui.btn_startgame.node.active=!0,this.auto_ui.txt_zhangjielb.node.active=!1,this.auto_ui.txt_levelstate.string=x.langMgr.getStr("0061",h.GameDataMgr.getMaxLevelWaveState(this.changId+1,2),e.levelboshuid.length),this.auto_ui.btn_saodang.node.active=!1,this.qiehuanNode.children[this.nowviewid].children[0].active=!1},t.prototype._updateBoshuAwards=function(e){for(var t=this.boshuaward.children,o=0;o<t.length;o++){var n=t[o],i=e.awardboshuid[o];n.children[1].getComponent(cc.Label).string=x.langMgr.getStr("0062",i),this._updateBoshuAwardNode(n,i)}this._updateRedPoints()},t.prototype._updateBoshuAwardNode=function(e,t){var o=h.GameDataMgr.getMaxLevelWaveState(this.changId+1,2)>=t,n=o&&h.GameDataMgr.getLevelAwardRecord(this.changId+1,t),i=e.children[0].getChildByName("unlockimg"),a=e.children[0].getChildByName("lockimg"),r=e.children[0].getChildByName("redpoint"),c=e.children[0].getComponent(v.default);i.active=n,a.active=!n,r.active=!n&&o,n?c.stopRotateTween():c.startRotateTween()},t.prototype._updateRedPoints=function(){this.auto_ui.node_leftNode.getChildByName("redpoint").active=this._hasLeftRedPoint(),this.auto_ui.node_rightNode.getChildByName("redpoint").active=this._hasRightRedPoint()},t.prototype._hasLeftRedPoint=function(){for(var e=this.changId;e>=0;e--)if(h.GameDataMgr.hasLevelAward(e))return!0;return!1},t.prototype._hasRightRedPoint=function(){for(var e=this.changId+2;e<d.Excel.shuiguoguanqia_all.size;e++)if(h.GameDataMgr.hasLevelAward(e))return!0;return!1},t.prototype.onAwardBoxClick=function(e,t){var o=d.Excel.shuiguoguanqia(this.changId+1),n=o.awardboshuid[Number(t)-1];h.GameDataMgr.getMaxLevelWaveState(this.changId+1,2)>=n?h.GameDataMgr.getLevelAwardRecord(this.changId+1,n)?f.TipMgr.showToast(x.langMgr.getStr("0011")):(this._handleAwardAcquisition(t,o),h.GameDataMgr.updateLevelAwardRecord(this.changId+1,n),this.updateCharacterData()):this._displayAwardNode(e,o,t)},t.prototype._handleAwardAcquisition=function(e,t){switch(f.TipMgr.showToast(x.langMgr.getStr("0012")),e){case"1":this.getAwardData(t.awardbox1);break;case"2":this.getAwardData(t.awardbox2);break;case"3":this.getAwardData(t.awardbox3)}},t.prototype._displayAwardNode=function(e,t,o){var n=e.getCurrentTarget();this.awardNode.getComponent(E.default).displayAward(n,t,o)},t.prototype.onHideAwradTip=function(){this.awardNode.active&&(this.awardNode.active=!1)},t.prototype.getAwardData=function(e){var t=new P.GetItemsData;t.ids=[],t.counts=[];for(var o=0,n=e;o<n.length;o++){var i=n[o];this._handleAwardDistribution(i,t)}t.clickCallBack=this._getAwardsCallback.bind(this,t),_.default.open(g.BundleNames.Home,B.UIView_Home.UI_GetItems,t)},t.prototype._handleAwardDistribution=function(e,t){var o=e[0],n=e[1],i=e[2];switch(o){case 1:t.ids.push(m.default.goldId),t.counts.push(n);break;case 2:t.ids.push(m.default.diamondId),t.counts.push(n);break;case 3:t.ids.push(m.default.powerId),t.counts.push(n);break;case 5:this._distributeFragments(n,i,t)}},t.prototype._distributeFragments=function(e,t,o){var n=null;1===e?n=m.default.getSuiPian([t,0,0]):2===e?n=m.default.getSuiPian([0,t,0]):3===e&&(n=m.default.getSuiPian([0,0,t])),n.forEach(function(e,t){o.ids.push(t),o.counts.push(e)})},t.prototype._getAwardsCallback=function(e){e.ids.forEach(function(t,o){var n=e.counts[o];switch(t){case m.default.goldId:l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,2,n);break;case m.default.diamondId:l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,3,n);break;case m.default.powerId:l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Home_Add_Gold,1,n);break;default:f.TipMgr.showToast(x.langMgr.getStr("0013")),y.PlayerDataMgr.addEquipFragments(t,n)}})},t.prototype.setChapterId=function(e){this.changId=e,this.auto_ui.node_rightNode.active=!0,this.auto_ui.node_leftNode.active=!0,this.updateCharacterData(),this._updateRightLeftNode()},t.prototype.nextLevel=function(){this.ismove||(this.changId+=1,this.setCurrentView(2))},t.prototype.lastLevel=function(){this.ismove||(this.changId-=1,this.setCurrentView(1))},t.prototype.checkAI=function(){var e=this;M.default._instance.isOpen&&M.default._instance.displayClickButton(this.auto_ui.btn_startgame.node,function(){e.onClickStartGame()})},t.prototype._loadRes=function(e,t,o){return r(this,void 0,Promise,function(){return c(this,function(){return[2,new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})]})})},a([D(s.default)],t.prototype,"auto_ui",void 0),a([D(cc.Node)],t.prototype,"qiehuanNode",void 0),a([D(cc.Node)],t.prototype,"boshuaward",void 0),a([D(cc.Node)],t.prototype,"awardNode",void 0),a([D(cc.Label)],t.prototype,"saodangLb",void 0),a([D(cc.Node)],t.prototype,"playicon",void 0),a([D(cc.Label)],t.prototype,"shaodanglb",void 0),a([D(cc.Label)],t.prototype,"kaishilb",void 0),a([D(cc.Label)],t.prototype,"zhangjieLb",void 0),a([T],t)}(p.default);o.default=N,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./LogManager":"LogManager","./Module_Fighting_UIBindings":"Module_Fighting_UIBindings","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIRotate":"UIRotate","./UI_BoxAward":"UI_BoxAward"}],Module_News_RedPoint:[function(e,t,o){"use strict";cc._RF.push(t,"1deecG8l11ILYuGkJzNgrKi","Module_News_RedPoint");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./GameDataManager"),d=cc._decorator,p=d.ccclass,h=(d.property,d.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){r.EventMgrInstance.addListener(s.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.updateUI,this),r.EventMgrInstance.addListener(s.EVENT_TYPE.Game_PASS,this.updateUI,this),this.updateUI()},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.updateUI,this),r.EventMgrInstance.removeListener(s.EVENT_TYPE.Game_PASS,this.updateUI,this)},t.prototype.updateUI=function(){var e=u.GameDataMgr.getCurrentMaxLevel(),t=l.PlayerDataMgr.getWuJinCount();this.node.children[0].active=e>=4&&t>0},a([p],t)}(c.default));o.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],Module_News:[function(e,t,o){"use strict";cc._RF.push(t,"8e920nBVzVItZud5jPSBcM7","Module_News");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./EventManager"),s=e("./UIManager"),l=e("./TimeUtils"),u=e("./EvenType"),d=e("./PlayerDataManager"),p=e("./GameDataManager"),h=e("./GameGlobalVariable"),f=e("./UIConfig_Home"),g=e("./BaseModule"),_=e("./LanMgr"),y=cc._decorator,v=y.ccclass,m=y.property,b=(y.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wujintime=null,t.wujincount=null,t.wujinLock=null,t.jiesuoTip=null,t}return i(t,e),t.prototype.onEnable=function(){c.EventMgrInstance.addListener(u.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeWuJinUI,this),this.initializeWuJinUI(),-1===h.GameGlobalVariable.nowlevel&&(this.displayTiaoZhan(),h.GameGlobalVariable.nowlevel=1)},t.prototype.onDisable=function(){c.EventMgrInstance.removeListener(u.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeWuJinUI,this)},t.prototype.show=function(){this.initializeWuJinUI()},t.prototype.hide=function(){},t.prototype.initializeWuJinUI=function(){this.jiesuoTip&&(this.jiesuoTip.string=_.langMgr.getStr("0058",h.GameGlobalVariable.wujinunlockcount)),this.wujinLock&&(this.wujinLock.active=p.GameDataMgr.getCurrentMaxLevel()<h.GameGlobalVariable.wujinunlockcount);var e=d.PlayerDataMgr.getWuJinCount();this.wujincount&&(this.wujincount.string=_.langMgr.getStr("0063",e))},t.prototype.displayTiaoZhan=function(){s.default.open(r.BundleNames.Home,f.UIView_Home.UI_WuJinTiaoZhan)},t.prototype.displayTip=function(){s.default.open(r.BundleNames.Home,f.UIView_Home.UI_ShuoMing)},t.prototype.update=function(){this.wujintime&&(this.wujintime.string=l.default.convertSecondsToHMS(l.default.getMillisecondsUntilMidnight()/1e3))},a([m(cc.Label)],t.prototype,"wujintime",void 0),a([m(cc.Label)],t.prototype,"wujincount",void 0),a([m(cc.Node)],t.prototype,"wujinLock",void 0),a([m(cc.Label)],t.prototype,"jiesuoTip",void 0),a([v],t)}(g.default));o.default=b,cc._RF.pop()},{"./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./TimeUtils":"TimeUtils","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Module_Shop_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"10a9eqXQzlIVZ+4YQAWziSE","Module_Shop_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_todayResetTimeLabel=null,t.txt_todayLastCountLabel=null,t.txt_boxLevelLabel=null,t.txt_boxExpLabel=null,t.btn_ResetTodayBtn=null,t.btn_boxExpInfoBtn=null,t.node_todayFather=null,t.node_boxFather=null,t.node_goldFather=null,t.progress_boxExpBar=null,t._btnNames=["btn_ResetTodayBtn","btn_boxExpInfoBtn"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_todayResetTimeLabel",void 0),a([l(cc.Label)],t.prototype,"txt_todayLastCountLabel",void 0),a([l(cc.Label)],t.prototype,"txt_boxLevelLabel",void 0),a([l(cc.Label)],t.prototype,"txt_boxExpLabel",void 0),a([l(cc.Button)],t.prototype,"btn_ResetTodayBtn",void 0),a([l(cc.Button)],t.prototype,"btn_boxExpInfoBtn",void 0),a([l(cc.Node)],t.prototype,"node_todayFather",void 0),a([l(cc.Node)],t.prototype,"node_boxFather",void 0),a([l(cc.Node)],t.prototype,"node_goldFather",void 0),a([l(cc.ProgressBar)],t.prototype,"progress_boxExpBar",void 0),a([s("Module_Shop_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_Shop:[function(e,t,o){"use strict";cc._RF.push(t,"2e583j3h4NKD4Q4Ya9n3v1I","Module_Shop");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ADManager"),u=e("./EventManager"),d=e("./ResLoader"),p=e("./UIManager"),h=e("./TimeUtils"),f=e("./Module_Shop_UIBindings"),g=e("./EvenType"),_=e("./Excel"),y=e("./HallManager"),v=e("./Item_Shop_BoxItem"),m=e("./Item_Shop_GoldItem"),b=e("./Item_Shop_TodayItem"),I=e("./BaseModule"),w=e("./UIConfig_Home"),E=cc._decorator,M=E.ccclass,C=E.property,B=(E.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.formattedTimeString="",t}return i(t,e),t.prototype.onLoad=function(){u.EventMgrInstance.addListener(g.EVENT_TYPE.HallResetShopBox,this.resetBoxLevelAndExp,this),u.EventMgrInstance.addListener(g.EVENT_TYPE.HallScrollShop,this.handleEventScroll,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),u.EventMgrInstance.removeListener(g.EVENT_TYPE.HallResetShopBox,this.resetBoxLevelAndExp,this),u.EventMgrInstance.removeListener(g.EVENT_TYPE.HallScrollShop,this.handleEventScroll,this)},t.prototype.show=function(e){this.auto_ui.addClickListener(this._clickListener,this),this.initializeSettings(e)},t.prototype.handleEventScroll=function(e){e&&(e.isUp?this.node.getChildByName("ScrollView_Main").getComponent(cc.ScrollView).scrollToTop(.2):e.isBottom&&this.node.getChildByName("ScrollView_Main").getComponent(cc.ScrollView).scrollToBottom(.2))},t.prototype.hide=function(){},t.prototype.initializeSettings=function(e){var t=this;void 0===e&&(e=null);var o=_.Excel.shopControl(1),n=this.auto_ui,i=y.HallMgr.checkNextResetTime();this.showTimeLabel(i),n.btn_ResetTodayBtn.interactable=o.lastResetCount-y.HallMgr.shopData.todayResetCount>0,n.txt_todayResetTimeLabel.node.stopAllActions(),n.txt_todayResetTimeLabel.node.runAction(cc.repeat(cc.sequence(cc.delayTime(1),cc.callFunc(function(){i--,t.showTimeLabel(i),i<0&&t.initializeSettings()})),i)),n.txt_todayLastCountLabel.string=""+(o.lastResetCount-y.HallMgr.shopData.todayResetCount),this.resetBoxLevelAndExp(),this.showTodayItem().then(function(){t.showBoxItem().then(function(){t.showGoldItem().then(function(){e&&t.scheduleOnce(function(){t.handleEventScroll(e)})})})})},t.prototype.showTodayItem=function(){return r(this,void 0,Promise,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return 0!==(e=this.auto_ui.node_todayFather).childrenCount?[3,2]:[4,d.default.loadRes(s.BundleNames.Home,"item/item_shop_todayItem",cc.Prefab)];case 1:for(t=n.sent(),o=0;o<6;o++)e.addChild(cc.instantiate(t));n.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(b.default).initializeSettings(t)}),[2]}})})},t.prototype.showBoxItem=function(){return r(this,void 0,Promise,function(){var e,t,o,n=this;return c(this,function(i){switch(i.label){case 0:return 0!==(e=this.auto_ui.node_boxFather).childrenCount?[3,2]:[4,d.default.loadRes(s.BundleNames.Home,"item/item_shop_boxItem",cc.Prefab)];case 1:for(t=i.sent(),o=0;o<2;o++)e.addChild(cc.instantiate(t));i.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(v.default).initialize(t,n.auto_ui.txt_todayResetTimeLabel)}),[2]}})})},t.prototype.showGoldItem=function(){return r(this,void 0,Promise,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return 0!==(e=this.auto_ui.node_goldFather).childrenCount?[3,2]:[4,d.default.loadRes(s.BundleNames.Home,"item/item_shop_goldItem",cc.Prefab)];case 1:for(t=n.sent(),o=0;o<3;o++)e.addChild(cc.instantiate(t));n.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(m.default).initializeSettings(t)}),[2]}})})},t.prototype.showTimeLabel=function(e){this.formattedTimeString=h.default.convertSecondsToHMS(e),this.auto_ui.txt_todayResetTimeLabel.string=this.formattedTimeString},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_ResetTodayBtn:this.resetTodayShop();break;case this.auto_ui.btn_boxExpInfoBtn:p.default.open(s.BundleNames.Home,w.UIView_Home.UI_BoxLevelInfo)}},t.prototype.resetTodayShop=function(){var e=this,t=_.Excel.shopControl(1);t.lastResetCount-y.HallMgr.shopData.todayResetCount>0?l.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u5237\u65b0\u6bcf\u65e5\u5546\u5e97",function(){y.HallMgr.shopData.todayResetCount++,y.HallMgr.ResetTodayShop(),e.showTodayItem();var o=t.lastResetCount-y.HallMgr.shopData.todayResetCount;e.auto_ui.txt_todayLastCountLabel.string=""+o,e.auto_ui.btn_ResetTodayBtn.interactable=o>0}):this.auto_ui.btn_ResetTodayBtn.interactable=!1},t.prototype.resetBoxLevelAndExp=function(){for(var e=_.Excel.shopBoxLevel(y.HallMgr.shopData.boxLevel+1);y.HallMgr.shopData.boxExp>=e.exp&&e.exp>0;)y.HallMgr.shopData.boxLevel++,y.HallMgr.shopData.boxExp-=e.exp,e=_.Excel.shopBoxLevel(y.HallMgr.shopData.boxLevel+1);this.auto_ui.txt_boxLevelLabel.string="LV."+(y.HallMgr.shopData.boxLevel+1),e&&e.exp?(this.auto_ui.txt_boxExpLabel.string=y.HallMgr.shopData.boxExp+"/"+e.exp,this.auto_ui.progress_boxExpBar.progress=y.HallMgr.shopData.boxExp/e.exp):(this.auto_ui.txt_boxExpLabel.string="MAX",this.auto_ui.progress_boxExpBar.progress=1)},a([C(f.default)],t.prototype,"auto_ui",void 0),a([M],t)}(I.default));o.default=B,cc._RF.pop()},{"./ADManager":"ADManager","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallManager":"HallManager","./Item_Shop_BoxItem":"Item_Shop_BoxItem","./Item_Shop_GoldItem":"Item_Shop_GoldItem","./Item_Shop_TodayItem":"Item_Shop_TodayItem","./Module_Shop_UIBindings":"Module_Shop_UIBindings","./ResLoader":"ResLoader","./TimeUtils":"TimeUtils","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Module_WareHouse_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"c5294f5X9REn4IxWuNoEbRh","Module_WareHouse_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_allCountLabel=null,t.node_dressupFather=null,t.node_scrollView=null,t.node_unLockFather=null,t.node_lockFather=null,t.node_clickCardNode=null,t.node_dragView=null,t.node_dragFather=null,t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_allCountLabel",void 0),a([l(cc.Node)],t.prototype,"node_dressupFather",void 0),a([l(cc.Node)],t.prototype,"node_scrollView",void 0),a([l(cc.Node)],t.prototype,"node_unLockFather",void 0),a([l(cc.Node)],t.prototype,"node_lockFather",void 0),a([l(cc.Node)],t.prototype,"node_clickCardNode",void 0),a([l(cc.Node)],t.prototype,"node_dragView",void 0),a([l(cc.Node)],t.prototype,"node_dragFather",void 0),a([s("Module_WareHouse_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_WareHouse:[function(e,t,o){"use strict";cc._RF.push(t,"03b78n6L8hHULuOjOq/Xt1C","Module_WareHouse");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./Module_WareHouse_UIBindings"),s=e("./AIControl"),l=e("./GuideControl"),u=e("./RedPointControl"),d=e("./EvenType"),p=e("./PlayerDataManager"),h=e("./Excel"),f=e("./Logic_ChildMoveEvent"),g=e("./HallGlobalVariable"),_=e("./Item_Bag_EquipItem"),y=e("./UI_Hall"),v=e("./BaseModule"),m=e("./Const_Common"),b=e("./Const_Hall"),I=cc._decorator,w=I.ccclass,E=I.property,M=(I.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.equipItem=null,t.dragnode=null,t.dragStartPos=null,t.dragShuiGuoId=null,t.shuiGuoArray=[],t.upLevelMap=null,t.aiCurrUnLockArray=[],t.aiCurrDressUpArray=[],t}return i(t,e),t.prototype.onLoad=function(){r.EventMgrInstance.addListener(d.EVENT_TYPE.HallBagShowDrag,this.showDrag,this),r.EventMgrInstance.addListener(d.EVENT_TYPE.HallBagRemoveId,this.removeHero,this),r.EventMgrInstance.addListener(d.EVENT_TYPE.HallResetBag,this.resetThis,this),r.EventMgrInstance.addListener(d.EVENT_TYPE.ResetWareHouseAI,this.resetAIEvent,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),r.EventMgrInstance.removeListener(d.EVENT_TYPE.HallBagShowDrag,this.showDrag,this),r.EventMgrInstance.removeListener(d.EVENT_TYPE.HallBagRemoveId,this.removeHero,this),r.EventMgrInstance.removeListener(d.EVENT_TYPE.HallResetBag,this.resetThis,this),r.EventMgrInstance.removeListener(d.EVENT_TYPE.ResetWareHouseAI,this.resetAIEvent,this)},t.prototype.show=function(){var e=this;this.initialize(),this.scheduleOnce(function(){if(p.PlayerDataMgr.getGuideIndexByTaskName(m.GuideName.EquipLevelUp)==m.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2){var t=e.auto_ui.node_dressupFather.children[0];if(t){var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(t.width,t.height);l.GuideCtrlInstance.showGuide({callBack:function(){p.PlayerDataMgr.setGuideIndex(m.GuideName.EquipLevelUp,m.UpEquipLevelGuideIndex.GuideClickUpgrade3),t.getComponent(_.default).openInfo()},wPos:o,size:n})}}else p.PlayerDataMgr.getGuideIndexByTaskName(m.GuideName.FruitDressUpEquip)==m.DressUpEquipGuideIndex.SelectFruit?e.scheduleOnce(function(){var t=e.auto_ui.node_unLockFather.children[0];if(t){var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(t.width,t.height);l.GuideCtrlInstance.showGuide({callBack:function(){p.PlayerDataMgr.setGuideIndex(m.GuideName.FruitDressUpEquip,m.DressUpEquipGuideIndex.GuideDressing),t.getComponent(_.default).openInfo()},wPos:o,size:n})}},.15):e.checkAI()})},t.prototype.hide=function(){},t.prototype.onEnable=function(){g.default.isNeedResetWareHouse&&this.upLevelMap&&this.resetThis()},t.prototype.resetThis=function(){g.default.isNeedResetWareHouse=!1,this.ShowDragView(!1),this.resetDressUp(),this.resetUnLock(),this.checkAI(),this.resetLock()},t.prototype.initialize=function(){var e=this;this.upLevelMap||(this.shuiGuoArray=[],h.Excel.shuiguo_all.forEach(function(t){-1!==t.isShow&&e.shuiGuoArray.push(t)}),this.upLevelMap=new Map,h.Excel.shuiguo_all.forEach(function(t){-1!==t.isShow&&e.upLevelMap.set(t.id,[])}),h.Excel.shuiguolevel_all.forEach(function(t){e.upLevelMap.get(t.shuiguoId).push(t)})),this.ShowDragView(!1),this.resetDressUp(),this.resetUnLock(),this.resetLock()},t.prototype.resetDressUp=function(){this.auto_ui.node_dressupFather.children.forEach(function(e){e.active=!1});for(var e=0,t=p.PlayerDataMgr.dressUpArray,o=h.Excel.wareHouseControl(1).unLockArray,n=0;n<t.length;n++){var i=t[n],a=void 0;n<this.auto_ui.node_dressupFather.childrenCount?a=this.auto_ui.node_dressupFather.children[n]:(a=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_dressupFather,a.active=!0;var r=a.getComponent(_.default),c=new b.BagEquipShowData;c.shuiGuoId=i,-1===i&&(c.unLockChar=o[n]),i>0&&(e++,c.upLevelDatas=this.upLevelMap.get(i)),r.startSet(c)}this.auto_ui.txt_allCountLabel.string=e+"/"+t.length},t.prototype.resetUnLock=function(){this.auto_ui.node_unLockFather.children.forEach(function(e){e.active=!1}),this.shuiGuoArray.sort(function(e,t){return t.quality-e.quality});for(var e=p.PlayerDataMgr.dressUpArray,t=0,o=0;o<this.shuiGuoArray.length;o++){var n=this.shuiGuoArray[o].id;if(p.PlayerDataMgr.getEquipDataById(n).isUnLock&&-1===e.indexOf(n)){var i=void 0;t<this.auto_ui.node_unLockFather.childrenCount?i=this.auto_ui.node_unLockFather.children[t]:(i=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_unLockFather,i.active=!0;var a=i.getComponent(_.default),r=new b.BagEquipShowData;r.shuiGuoId=n,r.upLevelDatas=this.upLevelMap.get(n),a.startSet(r),t++}}this.auto_ui.node_unLockFather.active=t>0,this.auto_ui.node_unLockFather.parent.getChildByName("\u5df2\u89e3\u9501").active=t>0},t.prototype.resetLock=function(){this.auto_ui.node_lockFather.children.forEach(function(e){e.active=!1});for(var e=0,t=[],o=0;o<this.shuiGuoArray.length;o++){var n=(i=this.shuiGuoArray[o]).id;p.PlayerDataMgr.getEquipDataById(n).isUnLock||t.push(i)}for(t.sort(function(e,t){return e.unLock-t.unLock}),o=0;o<t.length;o++){var i=t[o],a=void 0;e<this.auto_ui.node_lockFather.childrenCount?a=this.auto_ui.node_lockFather.children[e]:(a=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_lockFather,a.active=!0;var r=a.getComponent(_.default),c=new b.BagEquipShowData;c.shuiGuoId=i.id,c.upLevelDatas=this.upLevelMap.get(i.id),r.startSet(c),e++}this.auto_ui.node_lockFather.active=e>0,this.auto_ui.node_lockFather.parent.getChildByName("\u672a\u89e3\u9501").active=e>0},t.prototype.showDrag=function(e){this.ShowDragView(!0),this.dragnode||(this.dragnode=cc.instantiate(this.equipItem),this.dragnode.parent=this.auto_ui.node_dragFather,this.dragnode.setPosition(0,0),this.auto_ui.node_dragFather.addComponent(f.default).startSet(this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this)),this.auto_ui.node_clickCardNode.addComponent(f.default).startSet(this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this)),this.dragStartPos=this.auto_ui.node_dragFather.getPosition()),this.dragnode.active=!0;var t=new b.BagEquipShowData;t.shuiGuoId=e,t.upLevelDatas=this.upLevelMap.get(e),this.dragnode.getComponent(_.default).startSet(t,!1),this.dragShuiGuoId=e,s.default._instance.isOpen&&this.changeOneItem()},t.prototype.onChildTouchStart=function(e){e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.auto_ui.node_dragFather.parent.convertToNodeSpaceAR(e.getLocation()))},t.prototype.onChildTouchMove=function(e){e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.auto_ui.node_dragFather.parent.convertToNodeSpaceAR(e.getLocation()))},t.prototype.onChildTouchUp=function(e){for(var t=this.auto_ui.node_dressupFather.convertToNodeSpaceAR(e.getLocation()),o=0;o<this.auto_ui.node_dressupFather.children.length;o++){var n=this.auto_ui.node_dressupFather.children[o];if(cc.Vec2.distance(t,n.getPosition())<100){var i=n.getComponent(_.default);if(-1===p.PlayerDataMgr.globalData.dressUpArray[o])break;i.openData.shuiGuoId>0&&p.PlayerDataMgr.removeDressUpEquip(i.openData.shuiGuoId,o),p.PlayerDataMgr.addDressUpEquip(this.dragShuiGuoId,o),r.EventMgrInstance.emitEvent(d.EVENT_TYPE.MainRedPointChange,u.RedPointType.upEquip),this.resetDressUp(),this.resetUnLock(),this.ShowDragView(!1);break}}e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.dragStartPos)},t.prototype.removeHero=function(e){e>0&&p.PlayerDataMgr.removeDressUpEquip(e),this.resetDressUp(),this.resetUnLock()},t.prototype.ShowDragView=function(e){this.auto_ui.node_scrollView.active=!e,this.auto_ui.node_dragView.active=e,this.auto_ui.node_clickCardNode.active=e,this.showScaleTween(e)},t.prototype.showScaleTween=function(e){this.auto_ui.node_dressupFather.children.forEach(function(t){t.stopAllActions(),t.scale=1,e&&t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.1,1.1),cc.scaleTo(.8,.9,.9))))})},t.prototype.resetAIEvent=function(){var e=this;r.EventMgrInstance.emitEvent(d.EVENT_TYPE.MainRedPointChange,u.RedPointType.upEquip),this.scheduleOnce(function(){e.checkAI()},s.default._instance.aiCDTime)},t.prototype.checkAI=function(){var e=this;s.default._instance.isOpen&&this.scheduleOnce(function(){e.checkNeedDressUp()?e.dressUpOneItem():e.upgradeOneItem()||s.default._instance.displayClickButton(y.default._instance.auto_ui.btn_fightingBtn.node,function(){y.default._instance.showViewByType(2)})})},t.prototype.checkNeedDressUp=function(){if(p.PlayerDataMgr.dressUpArray.filter(function(e){return 0===e}).length>0){this.aiCurrUnLockArray=[];for(var e=0,t=null,o=0;o<this.auto_ui.node_unLockFather.children.length;o++){var n=this.auto_ui.node_unLockFather.children[o],i=h.Excel.shuiguo(n.getComponent(_.default).openData.shuiGuoId);i.quality>e&&(t=i,e=i.quality)}return this.aiCurrUnLockArray=[t],!0}this.aiCurrDressUpArray=[],this.aiCurrUnLockArray=[],this.shuiGuoArray.sort(function(e,t){return t.quality-e.quality});var a=p.PlayerDataMgr.dressUpArray;for(o=0;o<this.shuiGuoArray.length;o++){var r=this.shuiGuoArray[o],c=r.id;p.PlayerDataMgr.getEquipDataById(c).isUnLock&&(-1===a.indexOf(c)?this.aiCurrUnLockArray.push(r):this.aiCurrDressUpArray.push(r))}return this.aiCurrDressUpArray[this.aiCurrDressUpArray.length-1].quality<this.aiCurrUnLockArray[0].quality},t.prototype.dressUpOneItem=function(){for(var e=this,t=function(t){var o=e.auto_ui.node_unLockFather.children[t];if(o.getComponent(_.default).openData.shuiGuoId===e.aiCurrUnLockArray[0].id)return s.default._instance.displayClickButton(o,function(){o.getComponent(_.default).openInfo(!0)}),{value:void 0}},o=0;o<this.auto_ui.node_unLockFather.children.length;o++){var n=t(o);if(n)return n.value}},t.prototype.changeOneItem=function(){for(var e=function(e){var t=this.auto_ui.node_dressupFather.children[e];if(t.getComponent(_.default).openData.shuiGuoId==this.aiCurrDressUpArray[this.aiCurrDressUpArray.length-1].id){var o=t.getComponent(_.default);return-1==p.PlayerDataMgr.globalData.dressUpArray[e]?"break":(s.default._instance.displayClickButton(t,function(){o.openData.shuiGuoId>0&&p.PlayerDataMgr.removeDressUpEquip(o.openData.shuiGuoId,e),p.PlayerDataMgr.addDressUpEquip(this.dragShuiGuoId,e),this.ResetDressUp(),this.ResetUnLock(),this.ShowDragView(!1),this.AICheck()}),{value:void 0})}},t=0;t<this.auto_ui.node_dressupFather.children.length;t++){var o=e(t);if("object"==typeof o)return o.value;if("break"===o)break}},t.prototype.upgradeOneItem=function(){for(var e=function(e){s.default._instance.displayClickButton(e.node,function(){e.openInfo()})},t=0;t<this.auto_ui.node_dressupFather.children.length;t++)if((o=this.auto_ui.node_dressupFather.children[t].getComponent(_.default)).canUpgrade())return e(o),!0;for(t=0;t<this.auto_ui.node_unLockFather.children.length;t++){var o;if((o=this.auto_ui.node_unLockFather.children[t].getComponent(_.default)).canUpgrade())return e(o),!0}return!1},a([E(c.default)],t.prototype,"auto_ui",void 0),a([E(cc.Prefab)],t.prototype,"equipItem",void 0),a([w],t)}(v.default));o.default=M,cc._RF.pop()},{"./AIControl":"AIControl","./BaseModule":"BaseModule","./Const_Common":"Const_Common","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./Item_Bag_EquipItem":"Item_Bag_EquipItem","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./Module_WareHouse_UIBindings":"Module_WareHouse_UIBindings","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./UI_Hall":"UI_Hall"}],NodePoolMag:[function(e,t,o){"use strict";cc._RF.push(t,"35d9cwnEtZLALmSvPRIpWvy","NodePoolMag"),Object.defineProperty(o,"__esModule",{value:!0}),o.NodePoolMag=void 0;var n=e("./LogManager"),i=function(){function e(){this.nodePools={},this.prefabs={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.createNodePool=function(e,t,o,i){var a=this.nodePools[e];if(a)n.LogMgr.debug("\u5bf9\u8c61\u6c60\u5df2\u7ecf\u521b\u5efa");else{a=new cc.NodePool(i),this.nodePools[e]=a,this.prefabs[e]=o;for(var r=0;r<t;r++){var c=cc.instantiate(o);a.put(c)}}},e.prototype.getNodeFromPool=function(e){var t=this.nodePools[e];if(t&&t.size()>0)return t.get();var o=this.prefabs[e];return o&&o.isValid?cc.instantiate(o):null},e.prototype.recycleNodeToPool=function(e,t){var o=this.nodePools[e];o&&t.isValid?o.put(t):n.LogMgr.debug("\u8282\u70b9\u6c60\u4e0d\u5b58\u5728",e)},e.prototype.clearAllNodePools=function(){for(var e in this.nodePools)this.clearNodePool(e)},e.prototype.clearNodePool=function(e){var t=this.nodePools[e];t&&(t.clear(),delete this.nodePools[e],delete this.prefabs[e])},e._instance=new e,e}();o.NodePoolMag=i,cc._RF.pop()},{"./LogManager":"LogManager"}],ObjectUtils:[function(e,t,o){"use strict";cc._RF.push(t,"66fd19PujBM77bdzEHjLpR3","ObjectUtils");var n=this&&this.__assign||function(){return(n=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var i=function(){function e(){}return e.deepClone=function(e){var t=new WeakMap,o=function(e){if(null===e)return null;var o,a,r=e.constructor;switch(r){case Array:return o=e,a=[],t.set(o,a),o.forEach(function(e){return a.push(i(e))}),a;case Map:return function(e){var o=new Map;return t.set(e,o),e.forEach(function(e,t){return o.set(t,i(e))}),o}(e);case Set:return function(e){var o=new Set;return t.set(e,o),e.forEach(function(e){return o.add(i(e))}),o}(e);case Date:case Number:case String:return new r(e);case Boolean:return new r(e.valueOf());case RegExp:return function(e){var t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}(e)}var c=Object.create(Object.getPrototypeOf(e));return t.set(e,c),Reflect.ownKeys(e).forEach(function(t){var o=Reflect.getOwnPropertyDescriptor(e,t);if(o){var a=n({},o);"value"in o&&(a.value=i(e[t])),Reflect.defineProperty(c,t,a)}}),c},i=function(e){return"object"!=typeof e||null===e?e:t.has(e)?t.get(e):o(e)};return i(e)},e.mapToObj=function(e){var t={};return e.forEach(function(e,o){t[o]=e}),t},e.objToMap=function(e){var t=new Map;return Object.keys(e||{}).forEach(function(o){t.set(o,e[o])}),t},e.calculateDiff=function(e,t){var o={};return Object.keys(e).forEach(function(n){e[n]!==t[n]&&(o[n]=t[n])}),o},e}();o.default=i,cc._RF.pop()},{}],PlatformManager:[function(e,t,o){"use strict";cc._RF.push(t,"89aabDoDGhDj42qHnnOSH7n","PlatformManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.PlatformMgr=void 0;var a=e("./SingletonManager"),r=[cc.sys.WECHAT_GAME,cc.sys.ALIPAY_GAME,cc.sys.QTT_GAME,cc.sys.BYTEDANCE_GAME,cc.sys.HUAWEI_GAME,cc.sys.OPPO_GAME,cc.sys.VIVO_GAME,cc.sys.XIAOMI_GAME,cc.sys.BAIDU_GAME,cc.sys.JKW_GAME,cc.sys.LINKSURE],c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.isMiniGame=function(){return r.includes(cc.sys.platform)},t.prototype.isWxGame=function(){return cc.sys.platform===cc.sys.WECHAT_GAME},t.prototype.isDyGame=function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME},t.prototype.isBrowser=function(){return cc.sys.isBrowser},t}(a.SingletonBase);o.PlatformMgr=c.getInstance(),cc._RF.pop()},{"./SingletonManager":"SingletonManager"}],PlayerDataManager:[function(e,t,o){"use strict";cc._RF.push(t,"1c4d9ifkhtAkYyoZ5hweWCx","PlayerDataManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,o=1,n=arguments.length;o<n;o++)for(var i in t=arguments[o])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0}),o.PlayerDataMgr=void 0;var r,c=e("./Const_Common"),s=e("./DataManager"),l=e("./EventManager"),u=e("./EvenType"),d=e("./Excel"),p=e("./GameDataManager"),h=e("./GameGlobalVariable"),f=e("./LanMgr"),g=e("./LogManager"),_=e("./RedPointControl"),y=e("./TimeUtils"),v=e("./TipsManager");(function(e){e.global="global"})(r||(r={}));var m=function(){this.power=30,this.maxPower=30,this.gold=0,this.diamond=0,this.equipSaveData={},this.dressUpArray=[0,0,0,0,0,0,-1,-1],this.saveCount=0,this.nextResetTime=0,this.lastAddPowerTime=0,this.addPowerTime=0,this.videoAddPowerTime=0,this.guideMap={},this.guideSendIndex=0,this.wujincount=3,this.wujintime=0,this.saodangcount=3,this.saodangtime=0,this.qiandaocount=0,this.isqiandaocode=1,this.qiandaotime=0},b=function(){this.level=1,this.isUnLock=!1,this.fragments=0},I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secret_key="playerData",t.globalData=new m,t.WHITE_NAME_NO_VIDEO=!1,t.OPEN_GM=!0,t}return i(t,e),Object.defineProperty(t.prototype,"chapter",{get:function(){return p.GameDataMgr.getCurrentMaxLevel()||1},enumerable:!1,configurable:!0}),t.prototype.getGuideIndexByTaskName=function(e){var t=this.globalData.guideMap;return t[e]||(t[e]=0),t[e]},t.prototype.setGuideIndex=function(e,t){var o=this.globalData,n=o.guideMap,i=o.guideSendIndex;if(n[e]||(n[e]=0),t>n[e]){switch(n[e]=t,this.saveGlobalData(),e){case c.GuideName.GameBag:case c.GuideName.EquipLevelUp:break;case c.GuideName.FruitDressUpEquip:}if(e===c.GuideName.GameBag&&t<=i)return;this.globalData.guideSendIndex=t}},t.prototype.gmSetGuideIndex=function(e,t){this.globalData.guideMap[e]=t,this.saveGlobalData()},t.prototype.initialize=function(e){void 0===e&&(e=null),console.log("\u8fdc\u7a0b\u6570\u636e",e),this.globalData=new m;var t=this.getCurrentData(r.global,e);this.globalData=a(a({},this.globalData),t),console.log("\u672c\u5730\u6570\u636e",this.globalData,t),this.startCheckEquip(),this.checkIfTimeToReset(),this.performOtherChecks(),t||this.playerFirstTime()},t.prototype.getCurrentData=function(e,t){var o=null;return t&&(o=t[e])||(o=this._load(e)),o},t.prototype.performOtherChecks=function(){var e=this,t=d.Excel.wareHouseControl(1).unLockArray,o=this.globalData.dressUpArray;t.forEach(function(t,n){n>=o.length?e.globalData.dressUpArray.push(-1):e.chapter<t?e.globalData.dressUpArray[n]=-1:e.chapter>=t&&-1===o[n]&&(o[n]=0)})},t.prototype.checkIfTimeToReset=function(){var e=Date.now();if(!this.globalData.nextResetTime||e>=this.globalData.nextResetTime){var t=new Date;t.setHours(24,0,0,0),this.globalData.nextResetTime=t.getTime(),this.resetAllDataByTime()}},t.prototype.resetAllDataByTime=function(){this.globalData.addPowerTime=0,this.globalData.videoAddPowerTime=0,this.saveGlobalData()},t.prototype.saveGlobalData=function(){this._save(r.global,this.globalData)},t.prototype.addPower=function(e){this.globalData.power+=e,this.changeWealth()},t.prototype.subtractPower=function(e){return this.globalData.power<e?(v.TipMgr.showToast(f.langMgr.getStr("0008")),!1):(this.globalData.power>=this.globalData.maxPower&&this.globalData.power-e<this.globalData.maxPower&&(this.globalData.lastAddPowerTime=Date.now()),this.globalData.power-=e,this.changeWealth(),!0)},t.prototype.addGold=function(e){this.globalData.gold+=e,this.changeWealth()},t.prototype.subtractGold=function(e){return this.globalData.gold<e?(v.TipMgr.showToast(f.langMgr.getStr("0014")),!1):(this.globalData.gold-=e,this.changeWealth(),!0)},t.prototype.addDiamond=function(e){this.globalData.diamond+=e,this.changeWealth()},t.prototype.subtractDiamond=function(e){return this.globalData.diamond<e?(v.TipMgr.showToast(f.langMgr.getStr("0015")),!1):(this.globalData.diamond-=e,this.changeWealth(),!0)},t.prototype.changeWealth=function(){this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.Hall_ResetRich)},t.prototype.playerFirstTime=function(){var e=this,t=this.chapter;d.Excel.shuiguo_all.forEach(function(o){-1!==o.isShow&&o.unLock<=t&&e.addDressUpEquip(o.id)})},t.prototype.startCheckEquip=function(){var e=this,t=!1,o=this.chapter;d.Excel.shuiguo_all.forEach(function(n){e.globalData.equipSaveData[n.id]||(e.globalData.equipSaveData[n.id]=new b,t=!0),e.globalData.equipSaveData[n.id].isUnLock=o>=n.unLock}),t&&(g.LogMgr.debug("StartCheckEquip \u4fdd\u5b58\u6570\u636e"),this.saveGlobalData())},t.prototype.gameWinCheckUnlock=function(){var e=this,t=[],o=!1,n=this.chapter;return d.Excel.shuiguo_all.forEach(function(i){!e.globalData.equipSaveData[i.id].isUnLock&&n>=i.unLock&&(e.globalData.equipSaveData[i.id].isUnLock=!0,o=!0,t.push(i.id))}),o&&(this.saveGlobalData(),this.performOtherChecks()),t},Object.defineProperty(t.prototype,"dressUpArray",{get:function(){return this.globalData.dressUpArray},enumerable:!1,configurable:!0}),t.prototype.hallGetEquipIsDressUp=function(e){return!!d.Excel.shuiguo(e)&&this.dressUpArray.includes(e)},t.prototype.getEquipIsDressUp=function(e){var t=d.Excel.shuiguo(e);return!t||this.dressUpArray.includes(e)||-1===t.isShow},t.prototype.addDressUpEquip=function(e,t){void 0===t&&(t=-1);var o=this.globalData.dressUpArray;if(-1===t){for(var n=0;n<o.length;n++)if(0===o[n]){t=n;break}if(-1===t)return}o[t]=e,this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.MainRedPointChange,_.RedPointType.upEquip)},t.prototype.removeDressUpEquip=function(e,t){void 0===t&&(t=-1);var o=this.globalData.dressUpArray;if(-1===t){for(var n=0;n<o.length;n++)if(o[n]===e){t=n;break}if(-1===t)return}o[t]=0,this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.MainRedPointChange,_.RedPointType.upEquip)},t.prototype.addEquipLevel=function(e){var t=this.globalData.equipSaveData[e];t&&t.isUnLock&&(t.level++,this.saveGlobalData())},t.prototype.addEquipFragments=function(e,t){this.globalData.equipSaveData[e].fragments+=t,this.saveGlobalData(),_.RedPointCtrl.getRedPointStatusByType(_.RedPointType.upEquip)&&l.EventMgrInstance.emitEvent(u.EVENT_TYPE.MainRedPointChange,_.RedPointType.upEquip)},t.prototype.useEquipFragments=function(e,t){var o=this.globalData.equipSaveData[e];return o.fragments<t?(v.TipMgr.showToast(f.langMgr.getStr("0016")),!1):(o.fragments-=t,this.saveGlobalData(),!0)},t.prototype.getEquipDataById=function(e){return this.globalData.equipSaveData[e]},t.prototype.getWuJinCount=function(){return this.resetWuJinCount(),this.globalData.wujincount},t.prototype.subtractWuJinCount=function(e){this.globalData.wujincount-=e,this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.GAME_TIAOZHAN_COUNT)},t.prototype.resetWuJinCount=function(e){void 0===e&&(e=!1);var t=this.globalData.wujintime;0===t||e?(p.GameDataMgr.clearChallengeLevel(1),this.globalData.wujincount=h.GameGlobalVariable.wujinmeirifreecount,this.globalData.wujintime=Date.now(),this.saveGlobalData()):y.default.areTimestampsOnSameDay(t,Date.now())||(this.globalData.wujincount=h.GameGlobalVariable.wujinmeirifreecount,this.globalData.wujintime=Date.now(),p.GameDataMgr.clearChallengeLevel(1),this.saveGlobalData())},t.prototype.getSaoDangCount=function(){return this.resetSaoDangCount(),this.globalData.saodangcount},t.prototype.subSaoDangCount=function(e){this.globalData.saodangcount-=e,this.saveGlobalData()},t.prototype.resetSaoDangCount=function(){var e=this.globalData.saodangtime;0===e?(this.globalData.saodangcount=h.GameGlobalVariable.meirimianfeicount,this.globalData.saodangtime=Date.now(),this.saveGlobalData()):y.default.areTimestampsOnSameDay(e,Date.now())||(this.globalData.saodangcount=h.GameGlobalVariable.meirimianfeicount,this.globalData.saodangtime=Date.now(),this.saveGlobalData())},t.prototype.getQianDaoCount=function(){return this.globalData.qiandaocount},t.prototype.addQianDaoCount=function(e){this.globalData.qiandaocount+=e,this.globalData.qiandaocount>d.Excel.shuiguoqiandao_all.size&&(this.globalData.qiandaocount=0),this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.GAME_QianDao_COUNT)},t.prototype.setQianDaoState=function(){this.globalData.isqiandaocode=2,this.addQianDaoCount(1),this.globalData.qiandaotime=Date.now(),this.saveGlobalData(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HOME_QIANDAO_UPDATE)},t.prototype.resetData=function(){this._clear()},t.prototype.resetQianDaoCount=function(){var e=this.globalData.qiandaotime;0===e?(this.globalData.isqiandaocode=1,this.saveGlobalData()):y.default.areTimestampsOnSameDay(e,Date.now())||(this.globalData.isqiandaocode=1,this.saveGlobalData())},t}(s.default);o.PlayerDataMgr=I.getInstance(),cc._RF.pop()},{"./Const_Common":"Const_Common","./DataManager":"DataManager","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LanMgr":"LanMgr","./LogManager":"LogManager","./RedPointControl":"RedPointControl","./TimeUtils":"TimeUtils","./TipsManager":"TipsManager"}],PosController:[function(e,t,o){"use strict";cc._RF.push(t,"bfb3fc30jZGU6vmFQVQXv9O","PosController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.ControllerNode=o.PosNode=void 0;var r=cc._decorator,c=r.ccclass,s=r.property,l=r.menu,u=function(){function e(){this._node=null,this.position=new cc.Vec2(0,0)}return Object.defineProperty(e.prototype,"node",{get:function(){return this._node},set:function(e){this._node=e},enumerable:!1,configurable:!0}),a([s({type:cc.Node,visible:!1})],e.prototype,"_node",void 0),a([s({displayName:"\u8282\u70b9\u5750\u6807"})],e.prototype,"position",void 0),a([s({type:cc.Node,displayName:"\u63a7\u5236\u8282\u70b9"})],e.prototype,"node",null),a([c("PosNode")],e)}();o.PosNode=u;var d=function(){function e(){this.name="",this.nodes=[]}return a([s({displayName:"\u63a7\u5236\u540d\u79f0"})],e.prototype,"name",void 0),a([s({type:[u],displayName:"\u8282\u70b9&\u5750\u6807"})],e.prototype,"nodes",void 0),a([c("ControllerNode")],e)}();o.ControllerNode=d;var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controllerNodes=[],t._currentIndex=0,t}return i(t,e),Object.defineProperty(t.prototype,"choiceIndex",{get:function(){return this._currentIndex},set:function(){},enumerable:!1,configurable:!0}),t.prototype.setSelectionIndex=function(e){if(e>=0&&e<this.controllerNodes.length){this._currentIndex=e;for(var t=0,o=this.controllerNodes[e].nodes;t<o.length;t++){var n=o[t];n.node&&(n.node.x=n.position.x,n.node.y=n.position.y)}}},t.prototype.setSelectionName=function(e){for(var t=0;t<this.controllerNodes.length;t++)if(this.controllerNodes[t].name===e){this._currentIndex=t;for(var o=0,n=this.controllerNodes[t].nodes;o<n.length;o++){var i=n[o];i.node&&(i.node.x=i.position.x,i.node.y=i.position.y)}break}},t.prototype.getSelectionIndex=function(){return this._currentIndex},t.prototype.getSelectionName=function(){return this.controllerNodes[this._currentIndex].name},t.prototype.getControllersByName=function(e){for(var t=0,o=this.controllerNodes;t<o.length;t++){var n=o[t];if(n.name===e)return n.nodes}},a([s({type:[d],displayName:"Controller"})],t.prototype,"controllerNodes",void 0),a([s({type:cc.Integer})],t.prototype,"_currentIndex",void 0),a([s({type:cc.Integer})],t.prototype,"choiceIndex",null),a([c,l("Controller/Position Controller")],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],Province:[function(e,t,o){"use strict";cc._RF.push(t,"c2843BZ5u9HI7BaC0DzoT3D","Province"),Object.defineProperty(o,"__esModule",{value:!0}),o.ProvinceMgr=o.ProvinceMapping=void 0,o.ProvinceMapping={2:"\u5317\u4eac",3:"\u5b89\u5fbd",4:"\u798f\u5efa",5:"\u7518\u8083",6:"\u5e7f\u4e1c",7:"\u5e7f\u897f",8:"\u8d35\u5dde",9:"\u6d77\u5357",10:"\u6cb3\u5317",11:"\u6cb3\u5357",12:"\u9ed1\u9f99\u6c5f",13:"\u6e56\u5317",14:"\u6e56\u5357",15:"\u5409\u6797",16:"\u6c5f\u82cf",17:"\u6c5f\u897f",18:"\u8fbd\u5b81",19:"\u5185\u8499\u53e4",20:"\u5b81\u590f",21:"\u9752\u6d77",22:"\u5c71\u4e1c",23:"\u5c71\u897f",24:"\u9655\u897f",25:"\u4e0a\u6d77",26:"\u56db\u5ddd",27:"\u5929\u6d25",28:"\u897f\u85cf",29:"\u65b0\u7586",30:"\u4e91\u5357",31:"\u6d59\u6c5f",32:"\u91cd\u5e86",33:"\u9999\u6e2f",34:"\u6fb3\u95e8",35:"\u53f0\u6e7e",3409:"\u672a\u77e5"};var n=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getName=function(e){return o.ProvinceMapping[e]||"\u672a\u77e5"},e}();o.ProvinceMgr=n.getInstance(),cc._RF.pop()},{}],QiPaoTween:[function(e,t,o){"use strict";cc._RF.push(t,"f3e57QSm3JPk6Thi4rC7OMs","QiPaoTween");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./ResKeeper"),s=e("./GameGlobalVariable"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onLoad=function(){},t.prototype.startSet=function(e){var t=this;e&&this._loadRes(r.BundleNames.Game,"res/bg/"+s.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(e){t.node.getChildByName("node_cellFather").children.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=e})})},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})},a([u],t)}(c.default));o.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],RedPointControl:[function(e,t,o){"use strict";cc._RF.push(t,"7f335BguPNLQK98KIkPf7ET","RedPointControl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.RedPointCtrl=o.RedPointController=o.RedPointLevel=o.RedPointType=void 0;var a,r=e("./SingletonManager"),c=e("./PlayerDataManager"),s=e("./Excel"),l=e("./HallGlobalVariable"),u=e("./HallManager");(function(e){e[e.freeDiamond=1]="freeDiamond",e[e.freeGold=2]="freeGold",e[e.upEquip=3]="upEquip",e[e.type4=4]="type4",e[e.type5=5]="type5",e[e.type6=6]="type6",e[e.type7=7]="type7"})(a=o.RedPointType||(o.RedPointType={})),function(e){e[e.little=0]="little",e[e.all=1]="all"}(o.RedPointLevel||(o.RedPointLevel={}));var d=function(e){function t(){var t=e.call(this)||this;return t.redPointStatusMap=new Map,t}return i(t,e),t.prototype.getRedPointStatusByType=function(e){return this.updateRedPointStatusByType(e),!!this.redPointStatusMap.get(e)&&this.redPointStatusMap.get(e)},t.prototype.updateRedPointStatusByType=function(e){var t=this;switch(e){case a.freeDiamond:this.redPointStatusMap.set(e,0==u.HallMgr.shopData.todayBuyDiamondCount);break;case a.freeGold:this.redPointStatusMap.set(e,0==u.HallMgr.shopData.videoBuyGoldCount);break;case a.upEquip:this.redPointStatusMap.set(e,!1);var o=c.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e});o&&o.length>0?this.redPointStatusMap.set(e,!0):s.Excel.shuiguo_all.forEach(function(o){var n=c.PlayerDataMgr.getEquipDataById(o.id);if(n&&n.isUnLock){var i=l.default.getShuiGuoLevelMap.get(o.id);i&&n.level<=i.length&&n.fragments>=i[n.level-1].shengjixiaohao&&t.redPointStatusMap.set(e,!0)}})}},t}(r.SingletonBase);o.RedPointController=d,o.RedPointCtrl=d.getInstance(),cc._RF.pop()},{"./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./PlayerDataManager":"PlayerDataManager","./SingletonManager":"SingletonManager"}],RedPointItem:[function(e,t,o){"use strict";cc._RF.push(t,"1f3914JiT5AZ7UGVcVS/4lR","RedPointItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./RedPointControl"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPoints=[],t.redPointNode=null,t}return i(t,e),t.prototype.onEnable=function(){this.displayRedPoint(),r.EventMgrInstance.addListener(s.EVENT_TYPE.MainRedPointChange,this.handleRedPointChange,this)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.MainRedPointChange,this.handleRedPointChange,this)},t.prototype.displayRedPoint=function(){var e=this.redPoints.some(function(e){return l.RedPointCtrl.getRedPointStatusByType(e)});this.redPointNode.active=e},t.prototype.handleRedPointChange=function(e){e&&this.redPoints.includes(e)&&this.displayRedPoint()},a([p({type:[cc.Enum(l.RedPointType)],tooltip:"\u9700\u8981\u5b8c\u6210\u7684\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"redPoints",void 0),a([p(cc.Node)],t.prototype,"redPointNode",void 0),a([d],t)}(c.default));o.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper"}],ResKeeper:[function(e,t,o){"use strict";cc._RF.push(t,"e7548uPzG1IHbJAG5JOhIeu","ResKeeper");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LogManager"),c=e("./ResLoader"),s=cc._decorator.ccclass,l=function(e){function t(){var t=e.call(this)||this;return t._autoResList=[],t}return i(t,e),t.prototype._loadRes=function(e,t,o){var n=this;return new Promise(function(i){c.default.loadRes(e,t,o).then(function(e){e&&n.autoReleaseRes(e),i(e)})})},t.prototype.onDestroy=function(){var e=this._autoResList.map(function(e){return e.name});r.LogMgr.debug("auto release all resources: "+JSON.stringify(e)),this._releaseAutoResList()},t.prototype._releaseAutoResList=function(){for(var e=0,t=this._autoResList;e<t.length;e++)t[e].decRef();this._autoResList.length=0},t.prototype.autoReleaseRes=function(e){e.addRef(),this._autoResList.push(e)},a([s],t)}(cc.Component);o.default=l,cc._RF.pop()},{"./LogManager":"LogManager","./ResLoader":"ResLoader"}],ResLoader:[function(e,t,o){"use strict";cc._RF.push(t,"6bb26tYPddGS7YfeSGyasL8","ResLoader");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("../CrazySDK/CrazySDK"),s=e("./BundleConfig"),l=e("./LogManager"),u=function(e){function t(){return e.call(this)||this}return i(t,e),t.prototype.loadBundle=function(e){return new Promise(function(t){var o=cc.assetManager.getBundle(e);e===s.BundleNames.Resouce&&(o=cc.resources),o?t(o):(c.default.game.loadingStart(),cc.assetManager.loadBundle(e,function(o,n){c.default.game.loadingStop(),o?(l.LogMgr.error("Failed to load bundle: "+e),t(null)):t(n)}))})},t.prototype.loadRes=function(e,t,o){var n=this;return new Promise(function(i){return a(n,void 0,void 0,function(){var n,a,s;return r(this,function(r){switch(r.label){case 0:return"string"!=typeof e?[3,2]:[4,this.loadBundle(e)];case 1:return a=r.sent(),[3,3];case 2:a=e,r.label=3;case 3:return(n=a)?(s=n.get(t,o))?i(s):(c.default.game.loadingStart(),n.load(t,o,function(o,n){c.default.game.loadingStop(),o?(l.LogMgr.error("Failed to load res: bundle: "+e+", url: "+t),i(null)):i(n)})):i(null),[2]}})})})},t}(e("./SingletonManager").SingletonBase);o.default=u.getInstance(),cc._RF.pop()},{"../CrazySDK/CrazySDK":"CrazySDK","./BundleConfig":"BundleConfig","./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],ResUtil:[function(e,t,o){"use strict";cc._RF.push(t,"8f503HZlhxLTY5UPaFTxC1e","ResUtil"),Object.defineProperty(o,"__esModule",{value:!0}),o.ResourceUtil=void 0;var n=e("./LogManager"),i=e("./ResKeeper"),a=function(){function e(){}return e.getResKeeper=function(t,o){return t?t.getComponent(i.default)||(o?t.addComponent(i.default):e.getResKeeper(t.parent,o)):null},e.assignResourceWith=function(t,o,i){var a=e.getResKeeper(o,i);return a&&t?(a.autoReleaseRes(t),t):(n.LogMgr.error("AssignWith "+t+" to "+o+" failed"),null)},e.instantiate=function(t){var o=cc.instantiate(t),i=e.getResKeeper(o,!0);if(i){var a=o._prefab;if(a){var r=a.asset;i.autoReleaseRes(r)}else n.LogMgr.warn("instantiate "+t+", autoRelease failed, not found asset")}else n.LogMgr.warn("instantiate "+t+", autoRelease failed, not found ResKeeper");return o},e.removeAllChildrenAndRelease=function(e,t){if(void 0===t&&(t=!0),t)for(var o=e.getComponentsInChildren(i.default),n=0;n<o.length;n++)o[n].node.destroy();e.removeAllChildren(t)},e.removeFromParentAndRelease=function(e,t){if(void 0===t&&(t=!0),t)for(var o=e.getComponentsInChildren(i.default),n=0;n<o.length;n++)o[n].node.destroy();e.removeFromParent(t)},e}();o.ResourceUtil=a,cc._RF.pop()},{"./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],RichTextLink:[function(e,t,o){"use strict";cc._RF.push(t,"1ae3e3pY8pI/4pMD15FL/bQ","RichTextLink"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./EvenType"),i=e("./EventManager"),a=cc._decorator,r=a.ccclass,c=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onClick=function(e,t){i.EventMgrInstance.emitEvent(n.EVENT_TYPE.RichText_Click,t)},__decorate([r],t)}(cc.Component));o.default=c,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager"}],ScheduleManage:[function(e,t,o){"use strict";cc._RF.push(t,"96b49NUJvpK3qILhwellwC7","ScheduleManage");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.ScheduleMgr=void 0;var a=e("./SingletonManager"),r=e("./EvenType"),c=e("./EventManager"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.update=function(e){c.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Update,e)},t}(a.SingletonBase);o.ScheduleMgr=s.getInstance(),cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./SingletonManager":"SingletonManager"}],SingletonManager:[function(e,t,o){"use strict";cc._RF.push(t,"b2bbfO1wZREuYFng5b/Dhex","SingletonManager"),Object.defineProperty(o,"__esModule",{value:!0}),o.SingletonBase=void 0;var n=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new this),this._instance},e}();o.SingletonBase=n,cc._RF.pop()},{}],TimeUtils:[function(e,t,o){"use strict";cc._RF.push(t,"9412aiznsJBfaAxOkcesAno","TimeUtils"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function e(){}return e.convertSecondsToMinutesSeconds=function(e,t){void 0===t&&(t=!1);var o=Math.floor(e/60),n=Math.floor(e%60),i=n<10?"0"+n:""+n;return t?o+"\uff1a"+i:o+":"+i},e.convertSecondsToHMS=function(e){var t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=Math.floor(e%60);return(t<10?"0"+t:""+t)+":"+(o<10?"0"+o:""+o)+":"+(n<10?"0"+n:""+n)},e.getDayOfYear=function(){var e=new Date,t=new Date(e.getFullYear(),0,0),o=e.getTime()-t.getTime();return Math.floor(o/864e5)},e.getCurrentTimestamp=function(){return Date.now()},e.convertTimestampToDate=function(e){var t=new Date(e);return t.getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5"},e.getCurrentTimeString=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.formatTimestampToHMS=function(e){var t=Math.floor(e/36e5),o=Math.floor(e%36e5/6e4),n=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")+":"+n.toString().padStart(2,"0")},e.areTimestampsOnSameDay=function(e,t){var o=new Date(e),n=new Date(t);return o.getFullYear()===n.getFullYear()&&o.getMonth()===n.getMonth()&&o.getDate()===n.getDate()},e.getMillisecondsUntilMidnight=function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0,0).getTime()-e.getTime()},e}();o.default=n,cc._RF.pop()},{}],TipsManager:[function(e,t,o){"use strict";cc._RF.push(t,"3b8e8SJSwVNIps4tVTCDTIx","TipsManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)});Object.defineProperty(o,"__esModule",{value:!0}),o.TipMgr=void 0;var a=e("./BundleConfig"),r=e("./UI_Toast"),c=e("./ResLoader"),s=e("./ResUtil"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._toastNode=null,t._isResourceLoaded=!1,t}return i(t,e),t.prototype.showToast=function(e){e&&(this._toastNode?this._executeToast(e):this._fetchToast(e))},t.prototype._fetchToast=function(e){var t=this;this._isResourceLoaded||(this._isResourceLoaded=!0,c.default.loadRes(a.BundleNames.Resouce,"common/UI_Toast",cc.Prefab).then(function(o){var n,i;t._toastNode=s.ResourceUtil.instantiate(o),null===(i=null===(n=cc.director.getScene().getChildByName("Canvas"))||void 0===n?void 0:n.getChildByName("UITips"))||void 0===i||i.addChild(t._toastNode),t._executeToast(e)}))},t.prototype._executeToast=function(e){var t,o;null===(o=null===(t=this._toastNode)||void 0===t?void 0:t.getComponent(r.default))||void 0===o||o.show(e)},t}(e("./SingletonManager").SingletonBase);o.TipMgr=l.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UI_Toast":"UI_Toast"}],UIAdaptive:[function(e,t,o){"use strict";cc._RF.push(t,"209ceBWM1lFTqqxECyNXWJ/","UIAdaptive");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,c=cc._decorator,s=c.ccclass,l=c.property,u=c.disallowMultiple,d=c.menu;(function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Down=2]="Down",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"})(r||(r={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=r.None,t}return i(t,e),t.prototype.onLoad=function(){var e=0,t=0;switch(this.dir){case r.Top:t=this._calculateAdaptOffsetY();break;case r.Down:t=-this._calculateAdaptOffsetY();break;case r.LEFT:e=-this._calculateAdaptOffsetX();break;case r.RIGHT:e=this._calculateAdaptOffsetX()}this.node.x+=e,this.node.y+=t},t.prototype._calculateAdaptOffsetX=function(){var e=cc.view.getDesignResolutionSize();return(cc.winSize.width-e.width)/2},t.prototype._calculateAdaptOffsetY=function(){var e=cc.view.getDesignResolutionSize();return(cc.winSize.height-e.height)/2},a([l({type:cc.Enum(r)})],t.prototype,"dir",void 0),a([s,u(),d("\u8282\u70b9\u9002\u914d\u7ec4\u4ef6/adaptive")],t)}(cc.Component);o.default=p,cc._RF.pop()},{}],UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"e792bkQd2JEQJSTjZijF9u3","UIBindings"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./AudioManager"),i=function(){function e(){this._btnNames=[],this._buttons=[],this._clickFastMap=new Map,this._clickInterval=500,this._clickTimeMap=new Map}return e.prototype.addClickListener=function(e,t){var o=this;this._callfunc=e,this._target=t,this._buttons=[],this._btnNames.forEach(function(e){var t=o[e];t&&t instanceof cc.Button&&o._buttons.push(t)});for(var n=0,i=this._buttons;n<i.length;n++){var a=i[n];a&&this._addClickListener(a)}},e.prototype.setClickFast=function(e){this._buttons.includes(e)&&this._clickFastMap.set(e,!0)},e.prototype._addClickListener=function(e){var t=e.node;t.targetOff(this),t.on("click",this._clickListener,this),t.on(cc.Node.EventType.TOUCH_START,function(){n.AudioMgr.playSoundEffect("effect/button")},this)},e.prototype._clickListener=function(e){var t=this._clickTimeMap.get(e),o=(new Date).getTime(),n=0;this._clickFastMap.has(e)||(n=this._clickInterval),(!t||o-t>=n)&&(this._clickTimeMap.set(e,o),this._callfunc.apply(this._target,[e]))},e}();o.default=i,cc._RF.pop()},{"./AudioManager":"AudioManager"}],UIConfig_Entry:[function(e,t,o){"use strict";cc._RF.push(t,"c8fdaxNtO5NWbmG8JmhJf+k","UIConfig_Entry"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIConfigEntry=void 0;var n=e("./BundleConfig"),i=e("./UIManager");(function(e){var t,o;(function(e){e.UI_Entry="UI_Entry",e.UI_Toast="UI_Toast",e.UI_Loading="UI_Loading",e.UI_Debug="UI_Debug"})(o=e.UIView_Entry||(e.UIView_Entry={})),e.UIConfig_Entry=((t={})[o.UI_Entry]={prefab:"common/UI_Entry",block:!0},t[o.UI_Toast]={prefab:"common/UI_Toast",block:!1},t[o.UI_Loading]={prefab:"common/UI_Loading",block:!0},t[o.UI_Debug]={prefab:"common/UI_Debug",block:!1},t),i.default.registerUIConfig(n.BundleNames.Resouce,e.UIConfig_Entry)})(o.UIConfigEntry||(o.UIConfigEntry={})),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIConfig_Game:[function(e,t,o){"use strict";var n;cc._RF.push(t,"48cb1sLCVxLFaKqKlSR5ZDh","UIConfig_Game"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIConfig_Game=o.UIView_Game=void 0;var i=e("./BundleConfig"),a=e("./UIManager");o.UIView_Game={UI_GameView:"UI_GameView",UI_Bag:"UI_Bag",UI_ChiTiao:"UI_ChiTiao",UI_GameOver:"UI_GameOver",UI_PlayerInfo:"UI_PlayerInfo",UI_GameFail:"UI_GameFail",UI_GameEquipInfo:"UI_GameEquipInfo",UI_VideoBuyOne:"UI_VideoBuyOne",UI_GamePuase:"UI_GamePuase",UI_GetZaZhong:"UI_GetZaZhong",UI_AttackTongJi:"UI_AttackTongJi",UI_TuJian:"UI_TuJian"},o.UIConfig_Game=((n={})[o.UIView_Game.UI_GameView]={prefab:"prefabs/UI_GameView",block:!0},n[o.UIView_Game.UI_Bag]={prefab:"prefabs/hecheng/UI_Bag",block:!0},n[o.UIView_Game.UI_ChiTiao]={prefab:"prefabs/UI_ChiTiao",block:!0},n[o.UIView_Game.UI_GameOver]={prefab:"prefabs/UI_GameOver",block:!0},n[o.UIView_Game.UI_PlayerInfo]={prefab:"prefabs/UI_PlayerInfo",block:!0,mask:!0},n[o.UIView_Game.UI_GameFail]={prefab:"prefabs/UI_GameFail",block:!0,mask:!0},n[o.UIView_Game.UI_GameEquipInfo]={prefab:"prefabs/UI_GameEquipInfo",block:!0,mask:!1},n[o.UIView_Game.UI_VideoBuyOne]={prefab:"prefabs/UI_VideoBuyOne",block:!0,mask:!0},n[o.UIView_Game.UI_GamePuase]={prefab:"prefabs/UI_GamePuase",block:!0,mask:!0},n[o.UIView_Game.UI_GetZaZhong]={prefab:"prefabs/UI_GetZaZhong",block:!0,mask:!1},n[o.UIView_Game.UI_AttackTongJi]={prefab:"prefabs/UI_AttackTongJi",block:!0,mask:!0},n[o.UIView_Game.UI_TuJian]={prefab:"prefabs/UI_TuJian",block:!0,mask:!0},n),a.default.registerUIConfig(i.BundleNames.Game,o.UIConfig_Game),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIConfig_Home:[function(e,t,o){"use strict";var n;cc._RF.push(t,"422778V+lhF5Kj6qZMo4TN3","UIConfig_Home"),Object.defineProperty(o,"__esModule",{value:!0}),o.UIConfig_Home=o.UIView_Home=void 0;var i=e("./BundleConfig"),a=e("./UIManager");o.UIView_Home={UI_Hall:"UI_Hall",UI_Setting:"UI_Setting",UI_Sidebar:"UI_Sidebar",UI_AddPower:"UI_AddPower",UI_ShopItemInfo:"UI_ShopItemInfo",UI_OpenBox:"UI_OpenBox",UI_GetItems:"UI_GetItems",UI_BoxUpLevel:"UI_BoxUpLevel",UI_BoxLevelInfo:"UI_BoxLevelInfo",UI_BoxInfo:"UI_BoxInfo",UI_BoxItemInfo:"UI_BoxItemInfo",UI_EquipInfo:"UI_EquipInfo",UI_JiXuGame:"UI_JiXuGame",UI_UnlockNewEquip:"UI_UnlockNewEquip",UI_ShowZaZhong:"UI_ShowZaZhong",UI_DeBug:"UI_DeBug",UI_WuJinTiaoZhan:"UI_WuJinTiaoZhan",UI_QianDao:"UI_QianDao",UI_ShuoMing:"UI_ShuoMing"},o.UIConfig_Home=((n={})[o.UIView_Home.UI_Hall]={prefab:"prefabs/UI_Hall",block:!0},n[o.UIView_Home.UI_Setting]={prefab:"prefabs/UI_Setting",block:!0,mask:!0},n[o.UIView_Home.UI_Sidebar]={prefab:"prefabs/UI_Sidebar",block:!0,mask:!0},n[o.UIView_Home.UI_AddPower]={prefab:"prefabs/UI_AddPower",block:!0,mask:!0},n[o.UIView_Home.UI_ShopItemInfo]={prefab:"prefabs/UI_ShopItemInfo",block:!0,mask:!0},n[o.UIView_Home.UI_OpenBox]={prefab:"prefabs/UI_OpenBox",block:!0,mask:!0},n[o.UIView_Home.UI_GetItems]={prefab:"prefabs/UI_GetItems",block:!0,mask:!1},n[o.UIView_Home.UI_BoxUpLevel]={prefab:"prefabs/UI_BoxUpLevel",block:!0,mask:!0},n[o.UIView_Home.UI_BoxLevelInfo]={prefab:"prefabs/UI_BoxLevelInfo",block:!0,mask:!0},n[o.UIView_Home.UI_BoxInfo]={prefab:"prefabs/UI_BoxInfo",block:!0,mask:!0},n[o.UIView_Home.UI_BoxItemInfo]={prefab:"prefabs/UI_BoxItemInfo",block:!0,mask:!0},n[o.UIView_Home.UI_EquipInfo]={prefab:"prefabs/UI_EquipInfo",block:!0,mask:!1},n[o.UIView_Home.UI_JiXuGame]={prefab:"prefabs/UI_JiXuGame",block:!0,mask:!0},n[o.UIView_Home.UI_UnlockNewEquip]={prefab:"prefabs/UI_UnlockNewEquip",block:!0,mask:!1},n[o.UIView_Home.UI_ShowZaZhong]={prefab:"prefabs/UI_ShowZaZhong",block:!0,mask:!0},n[o.UIView_Home.UI_DeBug]={prefab:"prefabs/UI_DeBug",block:!0,mask:!0},n[o.UIView_Home.UI_WuJinTiaoZhan]={prefab:"huodong/UI_WuJinTiaoZhan",block:!0,mask:!0},n[o.UIView_Home.UI_QianDao]={prefab:"prefabs/UI_QianDao",block:!0,mask:!0},n[o.UIView_Home.UI_ShuoMing]={prefab:"prefabs/UI_ShuoMing",block:!0,mask:!0},n),a.default.registerUIConfig(i.BundleNames.Home,o.UIConfig_Home),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIFuDong:[function(e,t,o){"use strict";cc._RF.push(t,"b9088jF1T5GKaSygqIO3xD+","UIFuDong");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=r.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=.5,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.playFloatingAnimation()},t.prototype.playFloatingAnimation=function(){var e=cc.tween(this.node).to(this.time,{y:this.node.y+10}).to(this.time,{y:this.node.y});cc.tween(this.node).repeatForever(e).start()},a([s],t.prototype,"time",void 0),a([c,l("UI\u7ec4\u4ef6/UIFuDong")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],UIHomeAddCoin:[function(e,t,o){"use strict";cc._RF.push(t,"7b54dIE9vVMXY2iWJqIHreO","UIHomeAddCoin");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./EventManager"),s=e("./ResKeeper"),l=e("./UIManager"),u=e("./CommonUtils"),d=e("./EvenType"),p=e("./PlayerDataManager"),h=e("./UIConfig_Home"),f=cc._decorator,g=f.ccclass,_=f.property,y=(f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icontag=null,t.count=null,t.addtype=1,t.clickCount=0,t}return i(t,e),t.prototype.onEnable=function(){c.EventMgrInstance.addListener(d.EVENT_TYPE.Home_Add_Gold,this.handleAddGold,this),c.EventMgrInstance.addListener(d.EVENT_TYPE.Hall_ResetRich,this.refreshUI,this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.count)switch(this.addtype){case 1:this.count.string=p.PlayerDataMgr.globalData.power+"/"+p.PlayerDataMgr.globalData.maxPower;break;case 2:this.count.string=""+p.PlayerDataMgr.globalData.gold;break;case 3:this.count.string=""+p.PlayerDataMgr.globalData.diamond}},t.prototype.handleAddGold=function(e,t){var o;if(this.addtype===e){var n=null===(o=this.icontag)||void 0===o?void 0:o.convertToWorldSpaceAR(cc.v2(0,0)),i=this.getCoinType(e);i&&n&&u.default.showCoinAnimation(n,null,t,i)}},t.prototype.getCoinType=function(e){switch(e){case 1:return"power";case 2:return"jinbi";case 3:return"zuanshi";default:return null}},t.prototype.onDisable=function(){c.EventMgrInstance.removeListener(d.EVENT_TYPE.Home_Add_Gold,this.handleAddGold,this),c.EventMgrInstance.removeListener(d.EVENT_TYPE.Hall_ResetRich,this.refreshUI,this)},t.prototype.showDeBug=function(){p.PlayerDataMgr.OPEN_GM&&cc.sys.isBrowser&&(this.clickCount+=1,console.log("\u70b9\u51fb\u6b21\u6570",this.clickCount),this.clickCount>5&&l.default.open(r.BundleNames.Home,h.UIView_Home.UI_DeBug),this.unschedule(this.resetClickCount),this.scheduleOnce(this.resetClickCount,.4))},t.prototype.resetClickCount=function(){this.clickCount=0},a([_(cc.Node)],t.prototype,"icontag",void 0),a([_(cc.Label)],t.prototype,"count",void 0),a([_()],t.prototype,"addtype",void 0),a([g],t)}(s.default));o.default=y,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],UIManager:[function(e,t,o){"use strict";cc._RF.push(t,"53550gvXOhBFrnzqMfqR5v9","UIManager");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var c=e("./LogManager"),s=e("./SingletonManager"),l=e("./ResKeeper"),u=e("./ResLoader"),d=e("./ResUtil"),p=e("./UIView"),h=e("./BundleConfig"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isOpening=!1,t._openQueue=[],t._uiConf=new Map,t._uiList=new Map,t}return i(t,e),t.prototype.open=function(e,t,o){var n=this,i=this._uiConf.get(e);if(i){var a=i[t];if(a)if(a.args=o,this._isOpening){c.LogMgr.warn("\u6b63\u5728\u6253\u5f00\u5176\u4ed6\u754c\u9762, "+t+" \u52a0\u5165\u7b49\u5f85\u961f\u5217");var r={bundleName:e,uiName:t,uiInfo:a};this._openQueue.push(r)}else{var s=e+"_"+t,l=this._uiList.get(s);if(cc.isValid(l,!0)){var u=l.node.zIndex;this._uiList.forEach(function(e){e.node.zIndex>u&&n.close(e)}),l.onResume.apply(l,o)}else this._show(e,t,a)}else c.LogMgr.warn("Bundle: "+e+" UI: "+t+" \u672a\u6ce8\u518c UI\u914d\u7f6e")}else c.LogMgr.warn("Bundle: "+e+" \u672a\u6ce8\u518c UI\u914d\u7f6e")},t.prototype.close=function(e){var t=e.bundleName,o=e.uiName;if(e.showHideViews(),e.rmEvents(),e.onClose(),this._uiList.delete(t+"_"+o),!e.isCache)for(var n=e.node.getComponentsInChildren(l.default),i=0;i<n.length;i++)n[i].node.destroy();e.node.removeFromParent(!0)},t.prototype.closeView=function(e,t){var o=e+"_"+t,n=this._uiList.get(o);n?this.close(n):c.LogMgr.warn("UIManager close view error: bundle: "+e+", view: "+t)},t.prototype.closeAllViews=function(){var e=this;this._uiList.forEach(function(t){e.close(t)})},t.prototype.registerUIConfig=function(e,t){this._uiConf.has(e)&&c.LogMgr.warn("Bundle: "+e+" \u91cd\u590d\u6ce8\u518c UI\u914d\u7f6e"),this._uiConf.set(e,t)},t.prototype.unregisterUIConfig=function(e){this._uiConf.delete(e)},t.prototype.unregisterAllUIConfigs=function(){this._uiConf.clear()},t.prototype.getViewByName=function(e,t){var o=e+"_"+t;return this._uiList.get(o)},t.prototype.getAllViews=function(){return Array.from(this._uiList.values())},t.prototype._show=function(e,t,o){return a(this,void 0,Promise,function(){var n,i,a,s,l,f,g,_,y,v;return r(this,function(r){switch(r.label){case 0:return this._isOpening=!0,n=null,o.block?(n=this._getBlockInputNode(e,t),o.mask?((i=n.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.CUSTOM,[4,u.default.loadRes(h.BundleNames.Resouce,"texture/singleColor",cc.SpriteFrame)]):[3,2]):[3,2];case 1:a=r.sent(),i.spriteFrame=a,n.color=cc.color(0,0,0),n.opacity=230,r.label=2;case 2:return[4,u.default.loadBundle(e)];case 3:return(s=r.sent())?(l=o.prefab,[4,u.default.loadRes(s,l,cc.Prefab)]):[3,5];case 4:return(f=r.sent())?(g=cc.director.getScene().getChildByName("Canvas"),_=g.getChildByName("UIRoot"),y=d.ResourceUtil.instantiate(f),v=y.getComponent(p.default),_.addChild(y),this._adaptiveCenter(y),y.zIndex=this._uiList.size+1,y.name=e+"_"+t,v?(this._autoExecNext(n,y),v.init(e,t,o.args),this._uiList.set(e+"_"+t,v),c.LogMgr.debug("UIManager open view: "+t)):(c.LogMgr.warn("UI: "+t+" \u672a\u6ce8\u518c UIView"),this._autoExecNext(n))):(c.LogMgr.error("Unable to find bundle "+e+" prefab "+l),this._autoExecNext(n)),[3,6];case 5:c.LogMgr.error("Unable to find bundle "+e),this._autoExecNext(n),r.label=6;case 6:return[2]}})})},t.prototype._autoExecNext=function(e,t){if(this._isOpening=!1,t&&e?(e.parent=t,e.zIndex=-1,e.setPosition(cc.v2(0,0))):e&&e.removeFromParent(),this._openQueue.length>0){var o=this._openQueue.shift();this._show(o.bundleName,o.uiName,o.uiInfo)}},t.prototype._getBlockInputNode=function(e,t){var o=new cc.Node(e+"_"+t+"_block");return o.setContentSize(cc.winSize),o.addComponent(cc.BlockInputEvents),cc.director.getScene().getChildByName("Canvas").getChildByName("UIBlock").addChild(o),o.zIndex=999,o},t.prototype._adaptiveCenter=function(){},t}(s.SingletonBase);o.default=f.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./LogManager":"LogManager","./ResKeeper":"ResKeeper","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UIView":"UIView"}],UIRotate:[function(e,t,o){"use strict";cc._RF.push(t,"24c9eXoQ0tM2a5oJOkAL1HW","UIRotate");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=r.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotate=5,t.time=.5,t.delayTime=0,t.isCircle=!1,t.isAuto=!1,t}return i(t,e),t.prototype.onLoad=function(){this.isAuto||this.startRotateTween()},t.prototype.startRotateTween=function(){this.node.stopAllActions(),this.node.angle=0,this.isCircle||this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,0),cc.delayTime(this.delayTime))))},t.prototype.stopRotateTween=function(){this.isCircle||this.node.stopAllActions(),this.node.angle=0},t.prototype.update=function(){this.isCircle&&(this.node.angle+=this.rotate)},a([s({type:cc.Float})],t.prototype,"rotate",void 0),a([s({type:cc.Float})],t.prototype,"time",void 0),a([s({type:cc.Float})],t.prototype,"delayTime",void 0),a([s({tooltip:"\u662f\u5426\u4e00\u76f4\u8f6c\u5708"})],t.prototype,"isCircle",void 0),a([s()],t.prototype,"isAuto",void 0),a([c,l("UI\u7ec4\u4ef6/UIRotate")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],UIScale:[function(e,t,o){"use strict";cc._RF.push(t,"e8402IFP+tMzbFuibCRgSYh","UIScale");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=r.menu,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toScale=1.1,t.time=.5,t.delay=.5,t.normalScale=1,t}return i(t,e),t.prototype.onLoad=function(){this.node.tss=this,this.normalScale=this.node.scale,this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(this.time,this.normalScale*this.toScale),cc.scaleTo(this.time,this.normalScale),cc.delayTime(this.delay))))},a([s({type:cc.Float})],t.prototype,"toScale",void 0),a([s({type:cc.Float})],t.prototype,"time",void 0),a([s({type:cc.Float})],t.prototype,"delay",void 0),a([c,l("UI\u7ec4\u4ef6/UIScale")],t)}(cc.Component);o.default=u,cc._RF.pop()},{}],UIScene:[function(e,t,o){"use strict";cc._RF.push(t,"dc87fL9P2NDv5LdC33ut2PN","UIScene");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r,c=e("./DebugManager"),s=e("./UIView"),l=cc._decorator,u=l.ccclass,d=(l.property,l.menu);(function(e){e[e.UIRoot=999]="UIRoot",e[e.UIBlock=1e3]="UIBlock",e[e.UILoading=1001]="UILoading",e[e.UITips=1002]="UITips"})(r||(r={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneRootName="scene_root",t.isSceneRoot=!0,t}return i(t,e),t.prototype.onLoad=function(){for(var e in r)if(Object.prototype.hasOwnProperty.call(r,e)&&!this.node.getChildByName(e)){var t=r[e],o=new cc.Node(e);o.setContentSize(cc.winSize),o.zIndex=t,this.node.addChild(o)}this.init()},t.prototype.init=function(){var t=cc.director.getScene(),o=cc.assetManager.bundles.find(function(e){return!!e.getSceneInfo(t.name)}),n=o?o.name:void 0;c.DebugMgr.clearLogs(),e.prototype.init.call(this,n,this.sceneRootName,null)},a([u,d("view/UIScene")],t)}(s.default);o.default=p,cc._RF.pop()},{"./DebugManager":"DebugManager","./UIView":"UIView"}],UITools:[function(e,t,o){"use strict";cc._RF.push(t,"e579aU058RCPL1/YcE3Cx5D","UITools"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./LogManager"),i=e("./ResLoader"),a=e("./ResUtil"),r=function(){function e(){}return e.addClickEvent=function(e,t,o,i){void 0===i&&(i=500),(null==e?void 0:e.node)?(e.node.off("click"),e.node.on("click",function(n){if(i>0){var a=e.lastclickTime,r=(new Date).getTime();if(a&&r-a<i)return;e.lastclickTime=r,t.apply(o,[n])}else t.apply(o,[n])},o)):n.LogMgr.error("add click event error: "+e)},e.rmClickEvent=function(e){(null==e?void 0:e.node)?e.node.off("click"):n.LogMgr.error("remove click event error: "+e)},e.shake=function(e,t){var o=cc.tween(e),n=[{position:cc.v2(t.x,t.y),duration:.05},{position:cc.v2(-t.x,-t.y),duration:.05},{position:cc.v2(t.x,t.y),duration:.05},{position:cc.v2(-t.x,-t.y),duration:.05},{position:cc.v2(0,0),duration:.05}];o.by(0,{position:cc.v3(0,0)});for(var i=0,a=n;i<a.length;i++){var r=a[i];o.by(r.duration,{position:cc.v3(r.position)})}o.start()},e.loadTexture=function(e,t){i.default.loadRes(t,t,cc.SpriteFrame).then(function(t){t&&(e.spriteFrame=t,a.ResourceUtil.assignResourceWith(t,e.node))})},e.loadDragonBones=function(e,t,o){return new Promise(function(n,r){var c=cc.path.basename(o),s=cc.path.dirname(o),l=s+"/"+c+"_ske",u=s+"/"+c+"_tex";i.default.loadRes(t,l,dragonBones.DragonBonesAsset).then(function(o){o?(a.ResourceUtil.assignResourceWith(o,e.node),i.default.loadRes(t,u,dragonBones.DragonBonesAtlasAsset).then(function(t){t?(e.dragonAsset=o,e.dragonAtlasAsset=t,a.ResourceUtil.assignResourceWith(o,e.node),n(!0)):r(!1)})):r(!1)})})},e.addTouchEventListener=function(e,t,o){e.on(cc.Node.EventType.TOUCH_START,t,o),e.on(cc.Node.EventType.TOUCH_MOVE,t,o),e.on(cc.Node.EventType.TOUCH_END,t,o),e.on(cc.Node.EventType.TOUCH_CANCEL,t,o)},e.rmTouchEventListener=function(e){e.off(cc.Node.EventType.TOUCH_START),e.off(cc.Node.EventType.TOUCH_MOVE),e.off(cc.Node.EventType.TOUCH_END),e.off(cc.Node.EventType.TOUCH_CANCEL)},e.fadeOut=function(e,t,o,n){void 0===o&&(o=!1),void 0===n&&(n=!0),cc.Tween.stopAllByTarget(e),cc.tween(e).to(t,{opacity:0}).call(function(){o&&a.ResourceUtil.removeFromParentAndRelease(e,n)}).start()},e.scaleTo=function(e,t){var o=t/Math.max(e.width,e.height);e.scale=o},e}();o.default=r,cc._RF.pop()},{"./LogManager":"LogManager","./ResLoader":"ResLoader","./ResUtil":"ResUtil"}],UIView:[function(e,t,o){"use strict";cc._RF.push(t,"743a8DSuqhBr4IQgN4a26Ii","UIView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.UIViewShowType=void 0;var r,c=e("./EventManager"),s=e("./LogManager"),l=e("./ResKeeper"),u=e("./UIManager"),d=e("./UITools"),p=cc._decorator,h=p.ccclass,f=p.property,g=p.menu;(function(e){e[e.Normal=0]="Normal",e[e.Sclae=1]="Sclae",e[e.Opacity=2]="Opacity"})(r=o.UIViewShowType||(o.UIViewShowType={}));var _=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCache=!1,t.isFull=!1,t.showType=r.Normal,t._scene=!1,t._params=null,t._eventMap=new Map,t._hideViews=[],t._actTime=.2,t.auto_ui=null,t}return i(t,e),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bundleName",{get:function(){return this._bundleName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiName",{get:function(){return this._uiName},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t,o){this._bundleName=e,this._uiName=t,this._params=o,this._addClickListener(),this._addEventListener(),this._show(o),this._showOpenAnim()},t.prototype._show=function(){},t.prototype._close=function(){u.default.close(this)},t.prototype.onResume=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},t.prototype.onClose=function(){},t.prototype._showOpenAnim=function(){var e=this,t=this.node,o=t.getChildByName("root")||t;if(this.showType===r.Sclae){var n=o.scale;o.scale=.1,cc.tween(o).to(this._actTime,{scale:n},{easing:""}).call(function(){e._onOpenAnimOver()}).start()}else this.showType===r.Opacity?(o.opacity=0,cc.tween(o).to(this._actTime,{opacity:255}).call(function(){e._onOpenAnimOver()}).start()):this._onOpenAnimOver()},t.prototype._onOpenAnimOver=function(){this.isFull&&this._hideOtherViews()},t.prototype._clickListener=function(){},t.prototype._addEventListener=function(){},t.prototype._hideOtherViews=function(){for(var e=u.default.getAllViews(),t=e.indexOf(this),o=0;o<e.length;o++){var n=e[o],i=n.node,a=i.zIndex;n!==this&&i.active&&t>a&&(n.node.active=!1,this._hideViews.push(n))}},t.prototype.showHideViews=function(){if(this._hideViews&&this._hideViews.length>0)for(var e=0;e<this._hideViews.length;e++){var t=this._hideViews[e];t&&t.node&&(t.node.active=!0)}},t.prototype._addClickListener=function(){this.auto_ui&&this.auto_ui.addClickListener(this._clickListener,this);var e=this._bundleName+"_"+this._uiName+"_block",t=this.node.getChildByName(e);if(t){var o=t.addComponent(cc.Button);d.default.addClickEvent(o,this._clickBlock,this)}},t.prototype._addEvent=function(e,t,o){o||(o=this);var n=this._eventMap.get(e);n&&o===n.target&&t===n.callBack?s.LogMgr.error("\u91cd\u590d\u6ce8\u518c\u4e8b\u4ef6: "+e):(c.EventMgrInstance.addListener(e,t,o),this._eventMap.set(e,{callBack:t,target:o}))},t.prototype.rmEvents=function(){this._eventMap&&(this._eventMap.forEach(function(e,t){var o=e.callBack,n=e.target;c.EventMgrInstance.removeListener(t,o,n)}),this._eventMap.clear())},t.prototype._clickBlock=function(){},a([f({displayName:"\u662f\u5426\u5e38\u9a7b",visible:function(){return!this._scene}})],t.prototype,"isCache",void 0),a([f({displayName:"\u662f\u5426\u5168\u5c4f",visible:function(){return!this._scene}})],t.prototype,"isFull",void 0),a([f({type:cc.Enum(r),displayName:"\u6253\u5f00\u65b9\u5f0f",visible:function(){return!this._scene}})],t.prototype,"showType",void 0),a([h,g("view/UIView")],t)}(l.default);o.default=_,cc._RF.pop()},{"./EventManager":"EventManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper","./UIManager":"UIManager","./UITools":"UITools"}],UI_AddPower_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"93f4d9OCFNFIaACWYfuR5gd","UI_AddPower_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_addBtn=null,t.btn_videoAddBtn=null,t.btn_closeBtn=null,t.txt_addCountLabel=null,t.txt_lastCountLabel=null,t.txt_priceLabel=null,t.txt_videoAddCountLabel=null,t.txt_videoLastCountLabel=null,t._btnNames=["btn_addBtn","btn_videoAddBtn","btn_closeBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_addBtn",void 0),a([l(cc.Button)],t.prototype,"btn_videoAddBtn",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Label)],t.prototype,"txt_addCountLabel",void 0),a([l(cc.Label)],t.prototype,"txt_lastCountLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Label)],t.prototype,"txt_videoAddCountLabel",void 0),a([l(cc.Label)],t.prototype,"txt_videoLastCountLabel",void 0),a([s("UI_AddPower_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_AddPower:[function(e,t,o){"use strict";cc._RF.push(t,"97fb8WRvT1CIbcaExgY2dwQ","UI_AddPower");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_AddPower_UIBindings"),c=e("./UIView"),s=e("./Excel"),l=e("./PlayerDataManager"),u=e("./TipsManager"),d=e("./ADManager"),p=e("./Const_Hall"),h=e("./HallGlobalVariable"),f=e("./UIManager"),g=e("./BundleConfig"),_=e("./UIConfig_Home"),y=e("./LanMgr"),v=cc._decorator,m=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.onLoad=function(){},t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this.auto_ui;this.addPowerData||(this.addPowerData=s.Excel.addPower(1),n.txt_addCountLabel.string="X"+this.addPowerData.addCount,n.txt_priceLabel.string=""+this.addPowerData.price,n.txt_videoAddCountLabel.string="X"+this.addPowerData.videoAddCount),n.txt_lastCountLabel.string=y.langMgr.getStr("0063",this.addPowerData.maxTime-l.PlayerDataMgr.globalData.addPowerTime),n.txt_videoLastCountLabel.string=y.langMgr.getStr("0063",this.addPowerData.videoMaxTime-l.PlayerDataMgr.globalData.videoAddPowerTime)},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_closeBtn:this._close();break;case t.btn_addBtn:this.buyThis(!1);break;case t.btn_videoAddBtn:this.buyThis(!0)}},t.prototype.buyThis=function(e){var t=this,o=function(e){var o=new p.GetItemsData;o.ids=[h.default.powerId],o.counts=[e?t.addPowerData.videoAddCount:t.addPowerData.addCount],o.clickCallBack=function(){e?(l.PlayerDataMgr.globalData.videoAddPowerTime++,l.PlayerDataMgr.addPower(t.addPowerData.videoAddCount),t.auto_ui.txt_videoLastCountLabel.string=y.langMgr.getStr("0063",t.addPowerData.videoMaxTime-l.PlayerDataMgr.globalData.videoAddPowerTime)):(l.PlayerDataMgr.globalData.addPowerTime++,l.PlayerDataMgr.addPower(t.addPowerData.addCount),t.auto_ui.txt_lastCountLabel.string=y.langMgr.getStr("0063",t.addPowerData.maxTime-l.PlayerDataMgr.globalData.addPowerTime));var o=y.langMgr.getStr("0017",e?t.addPowerData.videoAddCount:t.addPowerData.addCount);u.TipMgr.showToast(o)},f.default.open(g.BundleNames.Home,_.UIView_Home.UI_GetItems,o)};e&&this.addPowerData.videoMaxTime-l.PlayerDataMgr.globalData.videoAddPowerTime<=0||!e&&this.addPowerData.maxTime-l.PlayerDataMgr.globalData.addPowerTime<=0?u.TipMgr.showToast(y.langMgr.getStr("0018")):e?d.ADMgr.showRewardedVideoAd("\u89c6\u9891\u8d2d\u4e70\u4f53\u529b",function(){o(e)}):l.PlayerDataMgr.subtractDiamond(this.addPowerData.price)&&o(e)},a([b(r.default)],t.prototype,"auto_ui",void 0),a([m],t)}(c.default));o.default=I,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_AddPower_UIBindings":"UI_AddPower_UIBindings"}],UI_AttackInfo:[function(e,t,o){"use strict";cc._RF.push(t,"5feb3EKLbZGeLacreiRj2QK","UI_AttackInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.inspector,function(e){function t(){var t=e.call(this)||this;return t.baojiNode=null,t.zhongduNode=null,t.putongNode=null,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.updateValue=function(e,t){var o=(e+"").split("."),n=null;switch(t){case 2:this.baojiNode.active=!0,this.zhongduNode.active=!1,this.putongNode.active=!1,n=this.baojiNode.getChildByName("value").getComponent(cc.Label);break;case 3:this.baojiNode.active=!1,this.zhongduNode.active=!0,this.putongNode.active=!1,n=this.zhongduNode.getChildByName("value").getComponent(cc.Label);break;default:this.baojiNode.active=!1,this.zhongduNode.active=!1,this.putongNode.active=!0,n=this.putongNode.getChildByName("value").getComponent(cc.Label)}n.string=o[0],this.scheduleOnce(function(){n.node.parent.width=n.node.width})},a([l(cc.Node)],t.prototype,"baojiNode",void 0),a([l(cc.Node)],t.prototype,"zhongduNode",void 0),a([l(cc.Node)],t.prototype,"putongNode",void 0),a([s],t)}(r.default));o.default=u,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_AttackTongJi:[function(e,t,o){"use strict";cc._RF.push(t,"76712VzO/9MUqZOevmFSSSG","UI_AttackTongJi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EventManager"),u=e("./ResKeeper"),d=e("./CommonUtils"),p=e("./EvenType"),h=e("./Excel"),f=e("./GameGlobalVariable"),g=cc._decorator,_=g.ccclass,y=g.property,v=(g.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll=null,t.tipTongji=null,t.maxvalue=1e4,t.ids=0,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},t.prototype.onEnable=function(){l.EventMgrInstance.addListener(p.EVENT_TYPE.GAME_SHANGHAI_TONGJI,this.onDamageTongJi,this),this.hideStatistics()},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(p.EVENT_TYPE.GAME_SHANGHAI_TONGJI,this.onDamageTongJi,this)},t.prototype.displayStatistics=function(){this.tipTongji.active?this.hideStatistics():(this.tipTongji.active=!0,this.tipTongji.scale=0,cc.tween(this.tipTongji).to(.1,{scale:1}).start(),this.onDamageTongJi())},t.prototype.hideStatistics=function(){var e=this;this.tipTongji.active&&cc.tween(this.tipTongji).to(.1,{scale:0}).call(function(){e.tipTongji.active=!1}).start()},t.prototype.onDamageTongJi=function(){return r(this,void 0,Promise,function(){var e,t,o,n,i,a,r,l,u,p,g,_,y,v,m,b,I,w,E,M;return c(this,function(c){switch(c.label){case 0:for(e=this.scroll.content.children,t=Object.keys(f.GameGlobalVariable.nowwShangHai).sort(function(e,t){return f.GameGlobalVariable.nowwShangHai[t]-f.GameGlobalVariable.nowwShangHai[e]}),this.ids=0,o=0,n=0,i=t;n<i.length;n++)r=i[n],o+=f.GameGlobalVariable.nowwShangHai[r];a=0,c.label=1;case 1:return a<5?(r=t[a],l=e[a],r?(l||(l=cc.instantiate(e[0]),this.scroll.content.addChild(l)),l.active=!0,u=l.children[0].getComponent(cc.Sprite),p=h.Excel.shuiguo(1e3+Number(r)),[4,this._loadRes(s.BundleNames.Game,"res/tongji"+p.quality,cc.SpriteFrame)]):[3,6]):[3,8];case 2:return g=c.sent(),u.spriteFrame=g,_=l.children[2].getComponent(cc.Sprite),[4,this._loadRes(s.BundleNames.Game,"res/tongjipro"+(a+1),cc.SpriteFrame)];case 3:return y=c.sent(),_.spriteFrame=y,(v=l.children[1].getComponent(cc.Sprite)).name===r?[3,5]:[4,this._loadRes(s.BundleNames.Common,"res/player/player"+r+"_1",cc.SpriteFrame)];case 4:m=c.sent(),v.spriteFrame=m,v.node.name=r,d.default.limitSpriteSize(v,60),c.label=5;case 5:return b=l.children[3].getComponent(cc.Label),I=f.GameGlobalVariable.nowwShangHai[r],w=this.formatNumberWithChineseUnit(I),b.string=w,E=l.children[2],M=250*f.GameGlobalVariable.nowwShangHai[r]/o,E.width=M,[3,7];case 6:l&&(l.active=!1),c.label=7;case 7:return a++,[3,1];case 8:return[2]}})})},t.prototype.formatNumberWithChineseUnit=function(e){return e>=1e8?(e/1e8).toFixed(1)+"E":e>=1e4?(e/1e4).toFixed(1)+"W":e.toString().split(".")[0]},a([y(cc.ScrollView)],t.prototype,"scroll",void 0),a([y(cc.Node)],t.prototype,"tipTongji",void 0),a([_],t)}(u.default));o.default=v,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],UI_Bag_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"c96b4a1xARBR6xrbCEHAD8r","UI_Bag_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_viewNode=null,t.node_cubeItem=null,t.node_EquipFather=null,t.node_diTuNode=null,t.node_cubeBaseFather=null,t.node_DragEndNode=null,t.node_cubeFather=null,t.node_DragTempNode=null,t.node_DragFather=null,t.node_videoLastCount=null,t.node_bottomBtn=null,t.node_sliverLabelNode=null,t.node_jiantou=null,t.node_upBuffEffect=null,t.node_upBuffFather=null,t.node_upTipNode=null,t.node_useGeZiTip=null,t.btn_UseGeZiBtn=null,t.btn_VideoGetCell=null,t.btn_VideoResetBtn=null,t.btn_ResetBtn=null,t.btn_start=null,t.dbAnim_heChengEffect=null,t.rtxt_upTipLabel=null,t._btnNames=["btn_UseGeZiBtn","btn_VideoGetCell","btn_VideoResetBtn","btn_ResetBtn","btn_start"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_viewNode",void 0),a([l(cc.Node)],t.prototype,"node_cubeItem",void 0),a([l(cc.Node)],t.prototype,"node_EquipFather",void 0),a([l(cc.Node)],t.prototype,"node_diTuNode",void 0),a([l(cc.Node)],t.prototype,"node_cubeBaseFather",void 0),a([l(cc.Node)],t.prototype,"node_DragEndNode",void 0),a([l(cc.Node)],t.prototype,"node_cubeFather",void 0),a([l(cc.Node)],t.prototype,"node_DragTempNode",void 0),a([l(cc.Node)],t.prototype,"node_DragFather",void 0),a([l(cc.Node)],t.prototype,"node_videoLastCount",void 0),a([l(cc.Node)],t.prototype,"node_bottomBtn",void 0),a([l(cc.Node)],t.prototype,"node_sliverLabelNode",void 0),a([l(cc.Node)],t.prototype,"node_jiantou",void 0),a([l(cc.Node)],t.prototype,"node_upBuffEffect",void 0),a([l(cc.Node)],t.prototype,"node_upBuffFather",void 0),a([l(cc.Node)],t.prototype,"node_upTipNode",void 0),a([l(cc.Node)],t.prototype,"node_useGeZiTip",void 0),a([l(cc.Button)],t.prototype,"btn_UseGeZiBtn",void 0),a([l(cc.Button)],t.prototype,"btn_VideoGetCell",void 0),a([l(cc.Button)],t.prototype,"btn_VideoResetBtn",void 0),a([l(cc.Button)],t.prototype,"btn_ResetBtn",void 0),a([l(cc.Button)],t.prototype,"btn_start",void 0),a([l(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_heChengEffect",void 0),a([l(cc.RichText)],t.prototype,"rtxt_upTipLabel",void 0),a([s("UI_Bag_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Bag:[function(e,t,o){"use strict";cc._RF.push(t,"b2b4fBG8c5G+oqWcOPCtn1/","UI_Bag");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ADManager"),c=e("./AIControl"),s=e("./AudioManager"),l=e("./BuffMag"),u=e("./BundleConfig"),d=e("./EvenType"),p=e("./EventManager"),h=e("./Excel"),f=e("./GameDataManager"),g=e("./GameGlobalVariable"),_=e("./GuideControl"),y=e("./Item_CellFatherMove"),v=e("./Item_GameBagCell"),m=e("./Item_GameEquip"),b=e("./Item_PaiZi"),I=e("./LogManager"),w=e("./Logic_GetEquip"),E=e("./PlayerDataManager"),M=e("./UIManager"),C=e("./UIView"),B=e("./UI_Bag_UIBindings"),P=e("./TipsManager"),x=e("./Const_Common"),G=e("./Const_Game"),T=e("./UIConfig_Game"),D=e("./LanMgr"),N=cc._decorator,S=N.ccclass,O=N.property,U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.paiZiPfb=null,t.maxX=5,t.maxY=7,t.startX=3,t.startY=3,t.effectMax=60,t.oneBuyMoney=15,t.videoGetMoney=30,t.xifuTime=.15,t.moveTime=.22,t.viewNodePosY=100,t.lastPickArray=[],t.cellCompMap=new Map,t.equipPool=new Map,t.dressUpEquipMap=new Map,t.baseCellCompArray=[],t.currAddCellDataMap=new Map,t.selfMap={},t.firstUseArray=[],t.childPosMap=new Map,t.currPickNode=null,t.currPickNodeComp=null,t.moveLength=0,t.guide4Time=-1,t.isUpBuffCdTime=!1,t.upBuffArray=[],t.jianTouArray=[],t.mustResetTime=-1,t}return i(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];w.default.getInstance.resetThis()},t.prototype.gameOpenMoveTween=function(e,t){var o=e?this.viewNodePosY:0;this.auto_ui.node_viewNode.y=o,t&&t()},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){I.LogMgr.debug(e.node.height),e.auto_ui.node_DragFather.y=cc.winSize.height/cc.winSize.width>2?-540:-500})},t.prototype._addEventListener=function(){this._addEvent(d.EVENT_TYPE.ResetGameBagAI,this.checkAI,this)},t.prototype.openView=function(e){var t=this;this.auto_ui.btn_VideoResetBtn.node.active=!0,this.gameOpenMoveTween(!0,function(){t.scheduleOnce(function(){t.checkBottomBtnScale()},.15),e&&e.isGameEnd&&(E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.EntryGuide7Completion?E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.GridGuide8):t.scheduleOnce(function(){t.checkAI()},c.default._instance.fightDelayTime),l.BuffMgr.getSecondaryFruitBuff()?(I.LogMgr.debug("\u6709\u4e8c\u7ea7\u5fc5\u5f97buff\uff0c\u5fc5\u51fa\u4e8c\u7ea7\u6c34\u679c"),t.resetEquip(!0,!0,!0)):t.resetEquip(!0,!1,!0),t.checkGuide(),t.scheduleOnce(function(){t.dressUpEquipMap.forEach(function(e){if(1002===e.equipData.shuiguoId){var t=l.BuffMgr.getFruitBuff(1002,e.equipData.equipLevel);p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Add_YinBi,t.nowvalue,e.node.convertToWorldSpaceAR(cc.v2(0,0)))}})},.5))})},t.prototype.onEnable=function(){this.changeSliderLabelColor()},t.prototype.changeSliderLabelColor=function(){var e=f.GameDataMgr.getSilverCoin;this.auto_ui.node_sliverLabelNode.color=e>=this.oneBuyMoney?cc.Color.WHITE:cc.Color.RED},t.prototype.onLoad=function(){var e=this;this.init("","",null),this.auto_ui.dbAnim_heChengEffect.addEventListener(dragonBones.EventObject.COMPLETE,function(){e.auto_ui.dbAnim_heChengEffect.node.active=!1},this),this._loadRes(u.BundleNames.Game,"res/bg/gezibg"+g.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.auto_ui.node_diTuNode.getComponent(cc.Sprite).spriteFrame=t}),this.auto_ui.btn_VideoGetCell.node.active=!1,E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.GuideCompletion&&(this.auto_ui.btn_VideoGetCell.node.active=this.maxX*this.maxY-this.cellCompMap.size>0&&f.GameDataMgr.getGameBag.videoCellCount<g.GameGlobalVariable.bagVideoCellCount),this.gameOpenMoveTween(!0,function(){e.startSet(),e.scheduleOnce(function(){e.checkBottomBtnScale()},.15)})},t.prototype.startSet=function(){var e=this;this.auto_ui.btn_UseGeZiBtn.node.active=!1,this.auto_ui.node_useGeZiTip.active=!1,this.cellFatherMove=this.auto_ui.node_DragEndNode.getComponent(y.default),this.cellFatherMove.initializeSettings(this);for(var t=this.auto_ui.node_DragFather.childrenCount-1;t>=0;t--)this.recycleEquip(this.auto_ui.node_DragFather.children[t]);var o=!1;if(!f.GameDataMgr.getGameBag.bagArray){f.GameDataMgr.getGameBag.bagArray=[],o=!0;for(var n=(this.maxX-this.startX)/2,i=(this.maxY-this.startY)/2,a=Math.floor(n),r=Math.ceil(n),c=Math.floor(i),s=Math.ceil(i),l=0;l<this.maxY;l++)for(var u=0;u<this.maxX;u++){var d=0;(u<a||u>=this.maxX-r||l<c||l>=this.maxY-s)&&(d=-1),f.GameDataMgr.getGameBag.bagArray.push(d)}}var p=this.auto_ui.node_cubeFather;if(0===p.childrenCount){this.auto_ui.node_diTuNode.active=!0;var h=this.auto_ui.node_cubeBaseFather;for(t=0;t<this.maxX*this.maxY;t++){var g=void 0;t<h.childrenCount?g=h.children[t]:(g=cc.instantiate(this.auto_ui.node_cubeItem)).parent=h,g.active=!0,(m=g.getComponent(v.default)).initializeSettings({cellIndex:t},!1),m.temporaryShowBgNode(!0),this.baseCellCompArray.push(m)}for(h.opacity=0,this.cellCompMap.clear(),l=0;l<this.maxY;l++)for(u=0;u<this.maxX;u++){var _=l*this.maxX+u;if(-1!==(d=f.GameDataMgr.getGameBag.bagArray[_])){var m=(g=cc.instantiate(this.auto_ui.node_cubeItem)).getComponent(v.default);this.cellCompMap.set(_,m),g.name="\u65b9\u5757"+_,g.parent=p,g.active=!0,m.initializeSettings({cellIndex:_},-1!==d)}}this.scheduleOnce(function(){e.cellCompMap.forEach(function(e){e.node.setPosition(p.convertToNodeSpaceAR(h.children[e.cellData.cellIndex].convertToWorldSpaceAR(cc.v2(0,0))))});var t=cc.v2(44,32);e.changeSizeByChild(e.auto_ui.node_cubeFather,t),e.setBgNodeSize(!1)})}this.startShowEquip(o),f.GameDataMgr.getGameBag.cellWposArray&&0!==f.GameDataMgr.getGameBag.cellWposArray.length||this.SaveCellWpos(),E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.EntryGuide7Completion&&E.PlayerDataMgr.gmSetGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.StartBattleGuide6),E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)!==x.GameBagGuideIndex.GuideCompletion?this.checkGuide():this.scheduleOnce(function(){e.checkAI()})},t.prototype.startShowEquip=function(e){var t=this;this.dressUpEquipMap.clear(),this.equipPool.clear();var o=f.GameDataMgr.getGameBag;if(o.dressUpEquips){var n=[],i=[];o.dressUpEquips.forEach(function(e){var o=t.getEquipNode(e.pfbName);o.parent=t.auto_ui.node_DragEndNode,o.active=!0,n.push(e.wPostion),i.push(o);var a=o.getComponent(m.default),r=-1===e.equipLevel;a.initializeSettings(e,r,t.onChildTouchStart.bind(t),t.onChildTouchMove.bind(t),t.onChildTouchUp.bind(t),t.makePaiZi.bind(t)),t.dressUpEquipMap.set(o.uuid,a);var c=[];e.lockCellIndex.forEach(function(e){t.cellCompMap.get(e).dragEndLockThis(a),c.push(t.cellCompMap.get(e))}),a.dragEndLockCell(c)}),this.scheduleOnce(function(){n.forEach(function(e,o){var n=i[o].parent.convertToNodeSpaceAR(e);i[o].setPosition(cc.v2(n.x,n.y+t.viewNodePosY))})})}o.equipPool&&o.equipPool.length>0?o.equipPool.forEach(function(e){var o=t.getEquipNode(e.pfbName);o.parent=t.auto_ui.node_DragFather,o.active=!0,o.setPosition(0,0);var n=o.getComponent(m.default),i=-1===e.equipLevel;n.initializeSettings(e,i,t.onChildTouchStart.bind(t),t.onChildTouchMove.bind(t),t.onChildTouchUp.bind(t),t.makePaiZi.bind(t)),t.equipPool.set(n.node.uuid,n)}):e&&this.resetEquip(!0,!1,!0),this.checkDragFatherLayout()},t.prototype.sliderResetClick=function(){var e=this;if(f.GameDataMgr.getSilverCoin>=this.oneBuyMoney)this.resetEquip(!1,!1,!1);else{var t=new G.VideoPurchaseData;t.titleStr=D.langMgr.getStr("0002"),t.coinCount=this.videoGetMoney,t.infoStr=D.langMgr.getStr("0057",this.videoGetMoney),t.clickCallBack=function(){f.GameDataMgr.addSilverCoin(e.videoGetMoney),e.changeSliderLabelColor(),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Add_YinBi,e.videoGetMoney,e.node.convertToWorldSpaceAR(cc.v2(0,0)),null,!1)},M.default.open(u.BundleNames.Game,T.UIView_Game.UI_VideoBuyOne,t)}},t.prototype._clickListener=function(e){var t=this,o=this.auto_ui;switch(e){case o.btn_ResetBtn:this.sliderResetClick();break;case o.btn_VideoResetBtn:var n="\u80cc\u5305\u89c6\u9891\u5237\u65b0";if(1===g.GameGlobalVariable.isSpecialLevel())n="\u65e0\u5c3d\u6a21\u5f0f\u80cc\u5305\u89c6\u9891\u5237\u65b0";else{var i=f.GameDataMgr.getCurrentLevelWaveState(g.GameGlobalVariable.nowlevel,2);n=g.GameGlobalVariable.nowlevel+"\u7ae0_"+(i+1)+"\u6ce2_"+n}r.ADMgr.showRewardedVideoAd(n,function(){t.resetEquip(!1,!0,!1),o.btn_VideoResetBtn.node.active=!1,t.checkBottomBtnScale()});break;case o.btn_start:this.gameStart();break;case o.btn_UseGeZiBtn:this.setCellFatherMove(!1);break;case o.btn_VideoGetCell:this.videoGetCell()}},t.prototype.videoGetCell=function(){var e=this,t="\u80cc\u5305\u89c6\u9891\u83b7\u53d6\u6269\u5c55\u683c\u5b50";if(1===g.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u80cc\u5305\u89c6\u9891\u83b7\u53d6\u6269\u5c55\u683c\u5b50";else{var o=f.GameDataMgr.getCurrentLevelWaveState(g.GameGlobalVariable.nowlevel,2);t=g.GameGlobalVariable.nowlevel+"\u7ae0_"+(o+1)+"\u6ce2_"+t}r.ADMgr.showRewardedVideoAd(t,function(){var t=g.GameGlobalVariable.bagVideoCellCount;f.GameDataMgr.getGameBag.videoCellCount++;var o=""+(t-f.GameDataMgr.getGameBag.videoCellCount);e.auto_ui.node_videoLastCount.children.forEach(function(e){e.active=e.name===o}),e.auto_ui.btn_VideoGetCell.node.active=e.maxX*e.maxY-e.cellCompMap.size>0&&f.GameDataMgr.getGameBag.videoCellCount<t,console.log(e.maxX*e.maxY-e.cellCompMap.size,f.GameDataMgr.getGameBag.videoCellCount,t),f.GameDataMgr.saveGameBagData(),e.checkBottomBtnScale();for(var n=w.default.getInstance.getOneCell(1,e.maxX*e.maxY-e.cellCompMap.size,f.GameDataMgr.getGameBag.videoCellCount),i=0;i<n.length;i++){var a=n[i];if(a){var r=e.getEquipNode(a.pfbName);if(!r)continue;r.parent=e.auto_ui.node_DragFather,e.auto_ui.node_DragFather.childrenCount>1&&r.setSiblingIndex(Math.floor(e.auto_ui.node_DragFather.childrenCount/2)),r.active=!0;var c=r.getComponent(m.default),l=-1===a.level,d=l?a.level:a.level-1,p={shuiguoId:a.shuiguoId,equipLevel:d,lockCellIndex:[],pfbName:a.pfbName,isHaveQiPao:1===a.isHaveQiPao};c.initializeSettings(p,l,e.onChildTouchStart.bind(e),e.onChildTouchMove.bind(e),e.onChildTouchUp.bind(e),e.makePaiZi.bind(e)),e.addEquipPoolData(c)}}s.AudioMgr.playSoundEffect("sound/resetEquip",!1,u.BundleNames.Game)})},t.prototype.gameStart=function(){if(this.dressUpEquipMap.size>0){p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_OpenGame),f.GameDataMgr.getGameBag.equipPool.length=0;for(var e=this.auto_ui.node_DragFather.childrenCount-1;e>=0;e--)this.recycleEquip(this.auto_ui.node_DragFather.children[e]);this.gameOpenMoveTween(!1,null)}else P.TipMgr.showToast(D.langMgr.getStr("0019"))},t.prototype.resetEquip=function(e,t,o){if(!e&&!t){if(!f.GameDataMgr.subtractSilverCoin(this.oneBuyMoney))return;this.changeSliderLabelColor()}this.makeEquip(t?4:3,t,o),this.saveData(),this.checkDragFatherLayout()},t.prototype.makeEquip=function(e,t,o){s.AudioMgr.playSoundEffect("sound/resetEquip",!1,u.BundleNames.Game);var n=f.GameDataMgr.getCurrentLevelWaveState(g.GameGlobalVariable.nowlevel,2)+1;1!==g.GameGlobalVariable.isSpecialLevel()&&o||(n=2);var i=w.default.getInstance.getEquip(e,t,this.maxX*this.maxY-this.cellCompMap.size,n);if(1===n&&o){for(var a=void 0,r=0;r<i.length;r++)if(1===(c=i[r]).level&&c.shuiguoId!==G.FruitId.\u6768\u6843\u5fcd\u8005&&c.shuiguoId!==G.FruitId.\u67e0\u6aac\u7cbe&&c.shuiguoId!==G.FruitId.\u8fa3\u59b9\u5b50&&c.shuiguoId!==G.FruitId.\u62db\u8d22\u6a59\u5b50){a=c;break}if(a)for(r=0;r<i.length;r++){var c;if(1===(c=i[r]).level&&c.shuiguoId!==a.shuiguoId){i[r]=a;break}}}if(E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.InitialGuide1?i=[h.Excel.bagEquipRule(14),h.Excel.bagEquipRule(32),h.Excel.bagEquipRule(12)]:E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.RefreshButtonGuide3?i=[h.Excel.bagEquipRule(14),h.Excel.bagEquipRule(32),h.Excel.bagEquipRule(10)]:E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.GridGuide8&&(i=[h.Excel.bagEquipRule(2),h.Excel.bagEquipRule(30),h.Excel.bagEquipRule(10)]),o&&this.maxX*this.maxY-this.cellCompMap.size>0){var l=w.default.getInstance.getMustGetGeZi();l&&(i[Math.floor(Math.random()*i.length)]=l)}for(r=this.auto_ui.node_DragFather.childrenCount-1;r>=0;r--)this.recycleEquip(this.auto_ui.node_DragFather.children[r]);for(this.equipPool.clear(),f.GameDataMgr.getGameBag.equipPool=[],r=0;r<e;r++){var d=i[r],p=this.getEquipNode(d.pfbName);if(p){p.parent=this.auto_ui.node_DragFather,p.active=!0;var _=p.getComponent(m.default),y=-1===d.level,v=y?d.level:d.level-1,b={shuiguoId:d.shuiguoId,equipLevel:v,lockCellIndex:[],pfbName:d.pfbName,isHaveQiPao:1===d.isHaveQiPao};_.initializeSettings(b,y,this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this),this.makePaiZi.bind(this)),this.addEquipPoolData(_)}}this.childPosMap.clear()},t.prototype.onChildTouchStart=function(e){if(!this.currPickNode){var t=e.target.parent.parent;this.setTouchStartNode(t)}},t.prototype.setTouchStartNode=function(e){this.childPosMap.set(e.uuid,e.getPosition()),this.currPickNode=e,this.currPickNodeComp=e.getComponent(m.default);var t=this.currPickNode.convertToWorldSpaceAR(cc.v2(0,0));this.currPickNode.parent=this.auto_ui.node_DragTempNode,this.currPickNode.setPosition(this.auto_ui.node_DragTempNode.convertToNodeSpaceAR(t)),this.currPickNodeComp.isGeZiType&&this.setCellFatherMove(!0),this.currPickNode.angle=0,this.moveLength=0,-1==this.guide4Time&&E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)!=x.GameBagGuideIndex.GridGuide8||!this.guideShou||(this.guideShou.active=!1),this.currPickNodeComp.lockCellArray&&0!==this.currPickNodeComp.lockCellArray.length||this.checkDragFatherLayout(this.currPickNode.uuid,-1),s.AudioMgr.playSoundEffect("effect/dianEquip"),this.currPickNodeComp&&this.currPickNodeComp.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1&&p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Show_Level5Tip,{isShow:!0,shuiGuoId:this.currPickNodeComp.equipData.shuiguoId}),this.currPickNodeComp.displayUnlockLevel5Tip(!0,this.equipPool,this.dressUpEquipMap)},t.prototype.onChildTouchMove=function(e){if(this.currPickNode){var t=this.currPickNode.parent.convertToNodeSpaceAR(e.getLocation());if(this.currPickNode.setPosition(t),Math.abs(e.getDeltaX())+Math.abs(e.getDeltaY())>3){var o=this.checkCellIsOk(!1);if(this.moveLength+=Math.abs(e.getDeltaX())+Math.abs(e.getDeltaY()),this.currPickNodeComp.equipData.shuiguoId===G.FruitId.\u67e0\u6aac\u7cbe)if(o.pickCellArray){var n=[];o.pickCellArray.forEach(function(e){n.push(e.cellData.cellIndex)}),this.checkUpBuff(n,!1)}else this.hideJianTou()}}},t.prototype.onChildTouchUp=function(){var e=this;if(this.currPickNode){this.currPickNodeComp.displayUnlockLevel5Tip(!1,null,null),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Show_Level5Tip,{isShow:!1,shuiGuoId:0}),this.hideJianTou(),this.moveLength<10&&!this.currPickNodeComp.isGeZiType&&!this.currPickNodeComp.qiPaoNode.active&&M.default.open(u.BundleNames.Game,T.UIView_Game.UI_GameEquipInfo,{shuiGuoId:this.currPickNodeComp.equipData.shuiguoId,level:this.currPickNodeComp.equipData.equipLevel}),this.moveLength=0,this.currPickNode.angle=0;var t=this.currPickNodeComp;t.displayPurchaseView(function(){e.lastPickArray.length>0&&e.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),t.lockCellArray&&(t.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),t.dragEndLockCell(null),e.removeDressUplData(t.node.uuid),e.addEquipPoolData(t)),e.currAddCellDataMap.delete(t.node.uuid),e.backToDady(t),e.currPickNode=null},function(){e.touchUpEndCall()})}},t.prototype.touchUpEndCall=function(){var e=this,t=this.checkCellIsOk(!0);this.lastPickArray.length>0&&this.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),this.lastPickArray.length=0;var o=this.currPickNodeComp;E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.SynthesisGuide4&&(2===this.guide4Time?t.otherEquip&&(t.isOk=!1):-1!==this.guide4Time&&0===this.currPickNodeComp.equipData.equipLevel&&t.otherEquip&&t.otherEquip.equipData.shuiguoId===this.currPickNodeComp.equipData.shuiguoId||(t.isOk=!1)),!t.isOk||t.otherEquip&&t.otherEquip.equipData.isHaveQiPao?this.handleCheckIsNotOk(o):this.handleCheckIsOk(o,t),this.currPickNode=null,this.saveData(),this.scheduleOnce(function(){e.checkAI()},c.default._instance.startDelayTime)},t.prototype.handleCheckIsNotOk=function(){this.currPickNodeComp.isGeZiType&&this.currAddCellDataMap.delete(this.currPickNodeComp.node.uuid),this.currPickNodeComp.lockCellArray&&(this.currPickNodeComp.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),this.currPickNodeComp.dragEndLockCell(null),this.removeDressUplData(this.currPickNode.uuid),this.addEquipPoolData(this.currPickNodeComp)),-1!==this.guide4Time&&this.guideShou&&(this.guideShou.active=!0,this.currPickNode.setSiblingIndex(0)),this.backToDady(this.currPickNodeComp)},t.prototype.handleCheckIsOk=function(e,t){var o=this;s.AudioMgr.playSoundEffect("effect/fangEquip"),this.guideShou&&E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)!==x.GameBagGuideIndex.GridGuide8&&(_.GuideCtrlInstance.recycleOneFingerGuide(this.guideShou),this.guideShou=null,this.scheduleOnce(function(){o.checkGuide()},.5)),E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.GridGuide8&&this.currPickNodeComp.isGeZiType&&this.guideCheckCell(t.pickCellArray)&&this.showGuide8_1(),t.pickCellArray?this.handlePickCell(t,e):t.otherEquip&&this.handleOtherEquip(t,e),this.currPickNodeComp.equipData.shuiguoId===G.FruitId.\u67e0\u6aac\u7cbe&&this.checkUpBuff(this.currPickNodeComp.equipData.lockCellIndex,!0)},t.prototype.handlePickCell=function(e,t){var o=this;if(this.currPickNodeComp.isGeZiType)this.currAddCellDataMap.set(this.currPickNode.uuid,{cellNode:this.currPickNode,pickCellArray:e.pickCellArray}),this.currPickNode.runAction(cc.moveTo(this.xifuTime,this.currPickNode.x+e.effectPos.x,this.currPickNode.y+e.effectPos.y));else{this.currPickNodeComp.lockCellArray?(this.currPickNodeComp.lockCellArray.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.removeDressUplData(this.currPickNode.uuid)):this.removeEquipPoolData(this.currPickNode.uuid),e.pickCellArray.forEach(function(e){if(e.equipComp&&o.dressUpEquipMap.has(e.equipComp.node.uuid)){o.removeDressUplData(e.equipComp.node.uuid);var t=e.equipComp;t.lockCellArray.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),t.dragEndLockCell(null),o.addEquipPoolData(t),o.backToDady(t)}}),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var n=cc.v2(this.currPickNode.x+e.effectPos.x,this.currPickNode.y+e.effectPos.y);this.currPickNode.runAction(cc.sequence(cc.moveTo(this.xifuTime,n.x,n.y),cc.delayTime(.15),cc.callFunc(function(){o.checkDressUpLabel(t)}))),this.currPickNodeComp.dragEndLockCell(e.pickCellArray),e.pickCellArray.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=1,e.dragEndLockThis(o.currPickNodeComp)}),this.addDressUpData(this.currPickNodeComp,n)}},t.prototype.handleOtherEquip=function(e,t){var o=this,n=e.otherEquip.lockCellArray,i=this.currPickNodeComp.lockCellArray,a=!1,r=null;if(this.currPickNodeComp.equipData.equipLevel<g.GameGlobalVariable.normalMaxLevel-1)this.currPickNodeComp.equipData.equipLevel++;else if(this.currPickNodeComp.equipData.equipLevel<g.GameGlobalVariable.zaZhongMaxLevel-1){a=!0;var c=h.Excel.shuiguo(this.currPickNodeComp.equipData.shuiguoId),l=e.otherEquip,d=this.currPickNodeComp;if(0===c.jinjieShuiGuoId){r=l.node.convertToWorldSpaceAR(cc.v2(0,0));var p=this.currPickNodeComp.node.convertToWorldSpaceAR(cc.v2(0,0));e.otherEquip=d,e.otherEquip.node.setPosition(e.otherEquip.node.parent.convertToNodeSpaceAR(p)),this.currPickNodeComp=l,this.currPickNodeComp.node.setPosition(this.currPickNodeComp.node.parent.convertToNodeSpaceAR(r)),t=this.currPickNodeComp,e.zaZhongPickCells=n}this.removeDressUplData(l.node.uuid),this.removeDressUplData(d.node.uuid),this.removeEquipPoolData(l.node.uuid),this.removeEquipPoolData(d.node.uuid),this.currPickNodeComp.equipData.equipLevel++,M.default.open(u.BundleNames.Game,T.UIView_Game.UI_GetZaZhong,{shuiGuoId:this.currPickNodeComp.equipData.shuiguoId})}if(a?s.AudioMgr.playSoundEffect("sound/upLevel5",!1,u.BundleNames.Game):s.AudioMgr.playSoundEffect("effect/gameBagHeCheng"),this.currPickNodeComp.resetShow(),this.showDragBone(e.otherEquip.node.convertToWorldSpaceAR(cc.v2(0,0))),this.currPickNode.angle=0,n&&e.otherEquip.equipData.pfbName===this.currPickNodeComp.equipData.pfbName){i?(i.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.removeDressUplData(this.currPickNode.uuid)):this.removeEquipPoolData(this.currPickNode.uuid),this.currPickNodeComp.dragEndLockCell(n),this.currPickNodeComp.lockCellArray.forEach(function(e){e.dragEndLockThis(o.currPickNodeComp)}),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var _=e.otherEquip.node.getPosition();this.currPickNode.runAction(cc.sequence(cc.moveTo(this.xifuTime,_.x,_.y),cc.delayTime(.15),cc.callFunc(function(){o.checkUpLevelLabel(t)}))),this.removeDressUplData(e.otherEquip.node.uuid),this.addDressUpData(this.currPickNodeComp,_)}else if(n&&n.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),a)if(i&&i.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),e.zaZhongPickCells&&e.zaZhongPickCells.length>0){e.zaZhongPickCells.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=1,e.dragEndLockThis(o.currPickNodeComp)}),this.currPickNodeComp.dragEndLockCell(e.zaZhongPickCells),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var y=e.zaZhongPickCells[0].node.convertToWorldSpaceAR(cc.v2(0,0)),v=this.currPickNodeComp.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),m=cc.v2(y.x-v.x,y.y-v.y);_=cc.v2(this.currPickNode.x+m.x,this.currPickNode.y+m.y),r&&(_.set(this.currPickNodeComp.node.parent.convertToNodeSpaceAR(r)),console.error(_)),this.currPickNode.runAction(cc.moveTo(this.xifuTime,_.x,_.y)),this.addDressUpData(this.currPickNodeComp,_)}else this.addEquipPoolData(this.currPickNodeComp),this.backToDady(this.currPickNodeComp,function(){o.checkUpLevelLabel(t)});else i&&(i.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.currPickNodeComp.dragEndLockCell(null),this.removeDressUplData(this.currPickNode.uuid),this.addEquipPoolData(this.currPickNodeComp)),this.removeEquipPoolData(e.otherEquip.node.uuid),this.backToDady(this.currPickNodeComp,function(){o.checkUpLevelLabel(t)});this.recycleEquip(e.otherEquip.node)},t.prototype.checkCellIsOk=function(e){var t,o,n=this,i=this.currPickNodeComp.getGridNode(),a=!0,r=null,c=[],s=[],l=this.auto_ui.node_cubeFather,u=f.GameDataMgr.getGameBag.bagArray;this.currPickNodeComp.isGeZiType&&(l=this.auto_ui.node_cubeBaseFather);for(var d=[],p=0;p<l.childrenCount;p++){var h=l.children[p];d.push(h.convertToWorldSpaceAR(cc.v2(0,0)))}var _=function(e){for(var t=i.children[e].convertToWorldSpaceAR(cc.v2(0,0)),o=!1,c=function(e){var i;if(i=n.currPickNodeComp.isGeZiType?e:l.children[e].getComponent(v.default).cellData.cellIndex,n.currPickNodeComp.isGeZiType){var a=!1;if(n.currAddCellDataMap.size>0&&n.currAddCellDataMap.forEach(function(e){if(e.cellNode!==n.currPickNode&&e.pickCellArray&&!a)for(var t=0;t<e.pickCellArray.length;t++){var o=e.pickCellArray[t];if(i===o.cellData.cellIndex){a=!0;break}}}),a)return"continue"}var c=-1!==u[i]&&!n.currPickNodeComp.isGeZiType,p=-1===u[i]&&n.currPickNodeComp.isGeZiType;if((c||p)&&cc.Vec2.distance(t,d[e])<n.effectMax)return o=!0,s.push(i),r||(r=cc.v2(d[e].x-t.x,d[e].y-t.y)),"break"},p=0;p<l.childrenCount&&"break"!==c(p);p++);o||(a=!1)};for(p=0;p<i.childrenCount;p++)_(p);this.lastPickArray.length>0&&this.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),this.lastPickArray.length=0,s.forEach(function(e){var t=n.currPickNodeComp.isGeZiType?n.baseCellCompArray[e]:n.cellCompMap.get(e);t.updateBgNodeColor(a?cc.Color.GREEN:cc.Color.RED),n.lastPickArray.push(t),c.push(t)});var y,m=this.currPickNodeComp.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1;if(a&&!this.currPickNodeComp.isGeZiType&&c.length>0&&this.currPickNodeComp.equipData.equipLevel<w.default.getInstance.getMaxLevel(this.currPickNodeComp.equipData.shuiguoId)-1){var b=!0;if(m){b=!1;var I=function(i){var a=c[i];if(a.equipComp&&a.equipComp.equipData.equipLevel===n.currPickNodeComp.equipData.equipLevel&&w.default.getInstance.getZaZhongId(a.equipComp.equipData.shuiguoId)===n.currPickNodeComp.equipData.shuiguoId){if(b=!0,t=a.equipComp,e&&c&&c.length>0){var r=[];c.forEach(function(e){e&&e.equipComp&&e.equipComp!==n.currPickNodeComp&&e.equipComp!==t&&!r.includes(e.equipComp)&&r.push(e.equipComp)}),r.forEach(function(e){n.removeDressUplData(e.node.uuid),n.addEquipPoolData(e),n.backToDady(e),e.lockCellArray&&e.lockCellArray.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),e.dragEndLockCell(null)})}return o=c,c=null,"break"}};for(p=0;p<c.length&&"break"!==I(p);p++);}else for(p=0;p<c.length;p++){var E=c[p];if(!E.equipComp||E.equipComp.uuid===this.currPickNodeComp.uuid||E.equipComp.equipData.equipLevel!==this.currPickNodeComp.equipData.equipLevel){b=!1;break}if(E.equipComp.equipData.shuiguoId!==this.currPickNodeComp.equipData.shuiguoId&&E.equipComp.equipData.equipLevel<g.GameGlobalVariable.normalMaxLevel-1){b=!1;break}}b&&!t&&(t=c[0].equipComp,c=null)}if(y=m?200:100,!a&&!this.currPickNodeComp.isGeZiType){c=null;var M=this.currPickNode.convertToWorldSpaceAR(cc.v2(0,0));this.equipPool.forEach(function(e){if(!t){var o=e.node.convertToWorldSpaceAR(cc.v2(0,0));e.node.uuid!==n.currPickNode.uuid&&n.currPickNodeComp.equipData.equipLevel<w.default.getInstance.getMaxLevel(n.currPickNodeComp.equipData.shuiguoId)-1&&e.equipData.equipLevel===n.currPickNodeComp.equipData.equipLevel&&cc.Vec2.distance(o,M)<y&&(e.equipData.shuiguoId!==n.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel<g.GameGlobalVariable.normalMaxLevel-1||w.default.getInstance.getZaZhongId(e.equipData.shuiguoId)!==n.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1||(t=e,a=!0,r=cc.v2(o.x-M.x,o.y-M.y)))}}),t||this.dressUpEquipMap.forEach(function(e,o){if(!t){var i=e.node.convertToWorldSpaceAR(cc.v2(0,0));o!==n.currPickNode.uuid&&n.currPickNodeComp.equipData.equipLevel<w.default.getInstance.getMaxLevel(n.currPickNodeComp.equipData.shuiguoId)-1&&e.equipData.equipLevel===n.currPickNodeComp.equipData.equipLevel&&cc.Vec2.distance(i,M)<y&&(e.equipData.shuiguoId!==n.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel<g.GameGlobalVariable.normalMaxLevel-1||w.default.getInstance.getZaZhongId(e.equipData.shuiguoId)!==n.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1||(t=e,a=!0,r=cc.v2(i.x-M.x,i.y-M.y)))}})}return{isOk:a,effectPos:r,pickCellArray:c,otherEquip:t,zaZhongPickCells:o}},t.prototype.recycleEquip=function(e){e.destroy()},t.prototype.getEquipNode=function(e){var t=this.auto_ui.node_EquipFather.getChildByName(e);return t?cc.instantiate(t):null},t.prototype.removeEquipPoolData=function(e){var t=this.equipPool.get(e);if(t){for(var o=t.equipData,n=0;n<f.GameDataMgr.getGameBag.equipPool.length;n++){var i=f.GameDataMgr.getGameBag.equipPool[n];if(i.equipLevel===o.equipLevel&&i.shuiguoId===o.shuiguoId&&this.comparisonArray(i.lockCellIndex,o.lockCellIndex)){f.GameDataMgr.getGameBag.equipPool.splice(n,1);break}}this.equipPool.delete(e)}},t.prototype.addEquipPoolData=function(e){e.equipData.wPostion=null,this.equipPool.set(e.node.uuid,e),f.GameDataMgr.getGameBag.equipPool.push(e.equipData)},t.prototype.removeDressUplData=function(e){var t=this.dressUpEquipMap.get(e);if(t){for(var o=t.equipData,n=0;n<f.GameDataMgr.getGameBag.dressUpEquips.length;n++){var i=f.GameDataMgr.getGameBag.dressUpEquips[n];if(i.equipLevel===o.equipLevel&&i.shuiguoId===o.shuiguoId&&this.comparisonArray(i.lockCellIndex,o.lockCellIndex)){f.GameDataMgr.getGameBag.dressUpEquips.splice(n,1);break}}this.dressUpEquipMap.delete(e)}},t.prototype.addDressUpData=function(e,t){e.equipData.wPostion=this.auto_ui.node_DragEndNode.convertToWorldSpaceAR(cc.v2(t.x,t.y-this.viewNodePosY)),I.LogMgr.debug(e.equipData.wPostion,t),this.dressUpEquipMap.set(e.node.uuid,e),f.GameDataMgr.getGameBag.dressUpEquips.push(e.equipData)},t.prototype.comparisonArray=function(e,t){return null===e&&null===t||null!==e&&null!==t&&e.length===t.length&&e.every(function(e){return-1!==t.indexOf(e)})},t.prototype.saveData=function(){f.GameDataMgr.saveGameBagData(),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_UPDATE_BAG)},t.prototype.setCellFatherMove=function(e){var t=this;if(this.cellFatherMove.setMoveability(e,this.auto_ui.node_bottomBtn.active),this.auto_ui.node_bottomBtn.active=!e,this.auto_ui.btn_UseGeZiBtn.node.active=e,this.auto_ui.node_useGeZiTip.active=e,this.auto_ui.btn_VideoGetCell.node.active=!e,e&&(this.auto_ui.node_useGeZiTip.stopAllActions(),this.auto_ui.node_useGeZiTip.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.8,.8),cc.scaleTo(1,.7,.7))))),E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)===x.GameBagGuideIndex.GridGuide8&&e?this.auto_ui.btn_UseGeZiBtn.interactable=!1:this.auto_ui.btn_UseGeZiBtn.interactable=!0,this.equipPool.forEach(function(t){t.isGeZiType||t.setClickable(!e,!0)}),this.dressUpEquipMap.forEach(function(t){t.setClickable(!e,!0)}),e)this.auto_ui.node_cubeBaseFather.opacity=255;else if(this.auto_ui.node_cubeBaseFather.opacity=0,this.currAddCellDataMap.size>0){this.checkDragCellIsOk(),this.currAddCellDataMap.forEach(function(e){e.pickCellArray.forEach(function(e){f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0;var o=t.baseCellCompArray[e.cellData.cellIndex].node,n=cc.instantiate(o);n.parent=t.auto_ui.node_cubeFather,n.setPosition(n.parent.convertToNodeSpaceAR(o.convertToWorldSpaceAR(cc.v2(0,0)))),t.cellCompMap.set(e.cellData.cellIndex,n.getComponent(v.default)),t.cellCompMap.get(e.cellData.cellIndex).initializeSettings(e.cellData,!0),n.name="\u65b9\u5757"+e.cellData.cellIndex}),t.removeEquipPoolData(e.cellNode.uuid),t.recycleEquip(e.cellNode)});var o=cc.v2(44,32),n=this.changeSizeByChild(this.auto_ui.node_cubeFather,o);this.dressUpEquipMap.forEach(function(e){e.node.x+=n.x,e.node.y+=n.y}),this.currAddCellDataMap.clear()}if(this.setBgNodeSize(e),!e){var i=g.GameGlobalVariable.bagVideoCellCount;this.auto_ui.btn_VideoGetCell.node.active=this.maxX*this.maxY-this.cellCompMap.size>0&&f.GameDataMgr.getGameBag.videoCellCount<i}},t.prototype.moveChangeBagCellIndex=function(e){var t=this;if(e&&e.isOk){var o=[];this.auto_ui.node_cubeFather.children.forEach(function(t,n){var i=t.getComponent(v.default);e.pickCellArray[n]||e.pickCellArray[n],t.name="\u65b9\u5757"+e.pickCellArray[n],i.updateCellData({cellIndex:e.pickCellArray[n]}),i.equipComp&&-1===o.indexOf(i.equipComp)&&o.push(i.equipComp)}),f.GameDataMgr.getGameBag.equipPool=[],o.forEach(function(e){var t=e.lockCellArray,o=[];t.forEach(function(e){o.push(e.cellData.cellIndex)}),e.equipData.lockCellIndex=o,f.GameDataMgr.getGameBag.equipPool.push(e.equipData)});var n=[];this.cellCompMap.forEach(function(e){n.push(e)}),this.cellCompMap.clear(),n.forEach(function(e){t.cellCompMap.set(e.cellData.cellIndex,e)});for(var i=f.GameDataMgr.getGameBag.bagArray,a=0;a<i.length;a++)this.cellCompMap.has(a)?f.GameDataMgr.getGameBag.bagArray[a]=this.cellCompMap.get(a).equipComp?1:0:f.GameDataMgr.getGameBag.bagArray[a]=-1}},t.prototype.checkDragCellIsOk=function(){var e=this,t=[],o=[];this.currAddCellDataMap.forEach(function(e,n){var i=[];e.pickCellArray.forEach(function(e){i.push(e.cellData.cellIndex)}),t.push(i),o.push(n)});for(var n=f.GameDataMgr.getGameBag.bagArray,i=0;i<t.length;i++)for(var a=0;a<t.length;a++){var r=t[a];r&&this.checkOneCellArrayIsOk(r,n)&&(r.forEach(function(e){n[e]=0}),t[a]=null,o[a]=null)}o.every(function(e){return null===e})||P.TipMgr.showToast(D.langMgr.getStr("0020")),o.forEach(function(t){if(t){var o=e.equipPool.get(t);e.backToDady(o),o.lockCellArray&&(o.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),o.dragEndLockCell(null))}e.currAddCellDataMap.delete(t)})},t.prototype.checkOneCellArrayIsOk=function(e,t){for(var o=!1,n=0;n<e.length;n++){var i=e[n],a=!1;if((i-1>=0&&(i-1)%this.maxX!=this.maxX-1&&t[i-1]>=0||i-this.maxX>=0&&t[i-this.maxX]>=0||i+1<t.length&&(i+1)%this.maxX!=0&&t[i+1]>=0||i+this.maxX<t.length&&t[i+this.maxX]>=0)&&(a=!0),a){o=!0;break}}return o},t.prototype.setBgNodeSize=function(e){var t=this;this.scheduleOnce(function(){if(t.auto_ui.node_diTuNode.active=!0,e)t.auto_ui.node_diTuNode.width=t.auto_ui.node_cubeBaseFather.width,t.auto_ui.node_diTuNode.height=t.auto_ui.node_cubeBaseFather.height,t.auto_ui.node_diTuNode.setAnchorPoint(t.auto_ui.node_cubeBaseFather.getAnchorPoint()),t.auto_ui.node_diTuNode.setPosition(t.auto_ui.node_cubeBaseFather.getPosition());else{t.auto_ui.node_cubeFather.setPosition(0,0);var o=t.auto_ui.node_cubeFather.width,n=t.auto_ui.node_cubeFather.height;t.auto_ui.node_diTuNode.width=o,t.auto_ui.node_diTuNode.height=n,t.auto_ui.node_diTuNode.setPosition(0,0),t.auto_ui.node_DragEndNode.setPosition(0,0),t.dressUpEquipMap.forEach(function(e){e.equipData.wPostion=e.node.convertToWorldSpaceAR(cc.v2(0,-1*t.viewNodePosY))}),t.SaveCellWpos()}})},t.prototype.changeSizeByChild=function(e,t){for(var o=1e4,n=-1e4,i=1e4,a=-1e4,r=[],c=0;c<e.children.length;c++){var s=(h=e.children[c]).convertToWorldSpaceAR(cc.v2(0,0));s.x-h.width/2<o&&(o=s.x-h.width/2),s.x+h.width/2>n&&(n=s.x+h.width/2),s.y-h.height/2<i&&(i=s.y-h.height/2),s.y+h.height/2>a&&(a=s.y+h.height/2),r.push(s)}var l=n-o+t.x,u=a-i+t.y;e.width=l,e.height=u;var d=e.convertToWorldSpaceAR(cc.v2(0,0)),p=cc.v2((n+o)/2,(a+i)/2);for(e.setPosition(e.parent.convertToNodeSpaceAR(p)),c=0;c<e.children.length;c++){var h;(h=e.children[c]).setPosition(e.convertToNodeSpaceAR(r[c]))}return cc.v2(d.x-p.x,d.y-p.y)},t.prototype.SaveCellWpos=function(){var e=this,t=[];this.auto_ui.node_cubeFather.children.forEach(function(o){t.push(o.convertToWorldSpaceAR(cc.v2(0,-1*e.viewNodePosY)))}),f.GameDataMgr.getGameBag.cellWposArray=t,f.GameDataMgr.saveGameBagData(),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_UPDATE_BAG)},t.prototype.backToDady=function(e,t){for(var o=this,n=e.node.convertToWorldSpaceAR(cc.v2(0,0)),i=this.auto_ui.node_DragFather.children.length,a=0;a<this.auto_ui.node_DragFather.children.length;a++){var r=this.auto_ui.node_DragFather.children[a].convertToWorldSpaceAR(cc.v2(0,0));if(n.x<r.x){i=a;break}}var c=e.equipIcon;c.parent=this.auto_ui.node_DragTempNode,c.setPosition(c.parent.convertToNodeSpaceAR(n)),e.node.parent=this.auto_ui.node_DragFather,e.node.setSiblingIndex(i),e.node.setPosition(0,0),e.setClickable(!1),e.scheduleOnce(function(){c.parent=e.node,c.setPosition(c.parent.convertToNodeSpaceAR(n));var i=Math.random(),a=0;i>.66?a=20:i<.33&&(a=-20),c.runAction(cc.sequence(cc.spawn(cc.moveTo(o.moveTime,0,0),cc.rotateTo(o.moveTime,a)),cc.delayTime(.15),cc.callFunc(function(){e.setClickable(!0),e.node.angle=c.angle,c.angle=0,t&&t()})))}),this.checkDragFatherLayout()},t.prototype.showDragBone=function(e){var t=this.auto_ui.dbAnim_heChengEffect.node;t.setPosition(t.parent.convertToNodeSpaceAR(e)),t.active=!0,this.auto_ui.dbAnim_heChengEffect.playAnimation("newAnimation",1)},t.prototype.makePaiZi=function(e){var t=cc.instantiate(this.paiZiPfb);return t.parent=e,t.getComponent(b.default)},t.prototype.checkDragFatherLayout=function(e,t){void 0===t&&(t=0);var o=30,n=this.auto_ui.node_DragFather.getComponent(cc.Layout),i=this.equipPool.size+t;if(i>=3){var a=0;this.equipPool.forEach(function(t){e&&e===t.node.uuid||(a+=t.node.width)}),a>700&&(o=Math.floor((700-a)/(i-1)))}n.spacingX!==o&&(n.spacingX=o,n.updateLayout())},t.prototype.checkDressUpLabel=function(e){if(-1===this.firstUseArray.indexOf(e.equipData.shuiguoId)){this.firstUseArray.push(e.equipData.shuiguoId);var t=h.Excel.shuiguo(e.equipData.shuiguoId),o=e.node.convertToWorldSpaceAR(cc.v2(0,0));o.y+=.7*e.node.height;var n="<color=#ffffff>"+t.starWord+"</c>";this.showTipNode(n,o,1.5);var i=Math.floor(5*Math.random());s.AudioMgr.playSoundEffect("sound/dressUp"+(i+1),!1,u.BundleNames.Game)}},t.prototype.checkUpLevelLabel=function(e){if(e.equipData.equipLevel!==g.GameGlobalVariable.normalMaxLevel){var t="",o=e.equipData.shuiguoId,n=1.5;if(w.default.getInstance.getMaxLevel(o)===g.GameGlobalVariable.zaZhongMaxLevel&&e.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1&&w.default.getInstance.getMaxLevel(this.currPickNodeComp.equipData.shuiguoId)===g.GameGlobalVariable.zaZhongMaxLevel){var i=h.Excel.shuiguo(o),a=h.Excel.shuiguo(w.default.getInstance.getZaZhongId(o)),r="player"+((0!==i.jinjieShuiGuoId?i:a).id-1e3)+"_5";t="<color=#ffffff>\u53ef\u4e0e4\u9636"+a.name+"\u6742\u4ea4\u5408\u6210\u81f35\u9636</c><img src='"+r+"'/>",n=3.5}else{var c=w.default.getInstance.getEquipUpData(o,e.equipData.equipLevel);0!==c.addattack&&(o===G.FruitId.\u8fa3\u59b9\u5b50?t+=D.langMgr.getStr("0073"):t+=D.langMgr.getStr("0072")),0!==c.addattackspeed&&(t+=D.langMgr.getStr("0074")),c.addbeidongbuff.length>0&&0!==c.addbeidongbuff[0]&&(o===G.FruitId.\u62db\u8d22\u6a59\u5b50?t+="<color=#ffffff>"+D.langMgr.getStr("0075")+"</c>":o===G.FruitId.\u67e0\u6aac\u7cbe?t+="<color=#ffffff>"+D.langMgr.getStr("0076")+" + </c><color=#00ff00>100 <color=#ffffff>%</c>":t+="<color=#ffffff>"+D.langMgr.getStr("0077")+"</c>")}if(t){var s=e.node.convertToWorldSpaceAR(cc.v2(0,0));s.y+=.7*e.node.height,this.showTipNode(t,s,n)}}},t.prototype.showTipNode=function(e,t,o){e="<outline color=#000000 width=3>"+e+"</outline>",this.auto_ui.rtxt_upTipLabel.string=e;var n=this.auto_ui.node_upTipNode;n.stopAllActions(),n.opacity=255,n.active=!0,n.setPosition(n.parent.convertToNodeSpaceAR(t)),n.children[0].x=0,n.x>215?n.children[0].x=215-n.x:n.x<-215&&(n.children[0].x=-215-n.x),n.runAction(cc.sequence(cc.delayTime(o),cc.fadeOut(.25),cc.callFunc(function(){n.active=!1})))},t.prototype.checkGuide=function(){var e=this;E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)!==x.GameBagGuideIndex.GuideCompletion&&(this.auto_ui.btn_VideoGetCell.node.active=!1,this.auto_ui.node_bottomBtn.children.forEach(function(e){return e.scale=1}),g.GameGlobalVariable.isFirstGuide=!0),this.scheduleOnce(function(){switch(E.PlayerDataMgr.getGuideIndexByTaskName(x.GuideName.GameBag)){case x.GameBagGuideIndex.InitialGuide1:e.showGuide1();break;case x.GameBagGuideIndex.DragFruitGuide2:e.showGuide2();break;case x.GameBagGuideIndex.RefreshButtonGuide3:e.showGuide3();break;case x.GameBagGuideIndex.SynthesisGuide4:e.showGuide4();break;case x.GameBagGuideIndex.StartBattleGuide6:e.showGuide6();break;case x.GameBagGuideIndex.GridGuide8:e.showGuide8();break;case x.GameBagGuideIndex.OtherFruitsGuide9:e.showGuide9();break;case x.GameBagGuideIndex.GuideEnd10:e.showGuide10()}})},t.prototype.showGuide1=function(){var e=this;_.GuideCtrlInstance.showGuide({callBack:function(){E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.DragFruitGuide2),e.showGuide2()},sayStr:D.langMgr.getStr("0023"),showTipNode:!0}),this.auto_ui.node_bottomBtn.active=!1},t.prototype.showGuide2=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){var t=this.auto_ui.node_DragFather.children[0];t||this.equipPool.forEach(function(e){t=e.node});var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.convertToNodeSpaceAR(o);_.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:n.x,y:n.y,getFingerCallBack:function(t){e.guideShou=t,n.x*=-1,n.y*=-1,n.normalizeSelf(),t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+200*n.x,t.y+500*n.y),cc.moveTo(.02,t.x,t.y))))}}),this.selfMap["\u663e\u793a\u5f15\u5bfc2\u7684\u6846"]||(this.selfMap["\u663e\u793a\u5f15\u5bfc2\u7684\u6846"]=!0,_.GuideCtrlInstance.showGuideMaskFrame(D.langMgr.getStr("0026"),this.node))}else E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.RefreshButtonGuide3),this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!1,this.auto_ui.btn_ResetBtn.node.active=!0,this.checkBottomBtnScale(),this.auto_ui.btn_ResetBtn.node.children[0].y=-35,this.auto_ui.btn_ResetBtn.node.children[1].active=!1,_.GuideCtrlInstance.showGuide({callBack:function(){e.checkGuide()},sayStr:D.langMgr.getStr("0053")})},t.prototype.showGuide3=function(){var e=this;this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!1,this.auto_ui.btn_ResetBtn.node.active=!0,this.checkBottomBtnScale(),this.auto_ui.btn_ResetBtn.node.children[0].y=-35,this.auto_ui.btn_ResetBtn.node.children[1].active=!1,this.scheduleOnce(function(){var t=e.auto_ui.btn_ResetBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(e.auto_ui.btn_ResetBtn.node.width,e.auto_ui.btn_ResetBtn.node.height);_.GuideCtrlInstance.showGuide({callBack:function(){e.resetEquip(!0,!1,!1),E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.SynthesisGuide4),e.auto_ui.btn_ResetBtn.node.active=!1,e.checkGuide(),e.auto_ui.btn_ResetBtn.node.children[0].y=-12,e.auto_ui.btn_ResetBtn.node.children[1].active=!0},wPos:t,size:o})})},t.prototype.showGuide4=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){if(this.guide4Time=-1,this.guideSGComp=null,this.dressUpEquipMap.forEach(function(e){return e.setClickable(!1)}),this.equipPool.forEach(function(t){if(t.setClickable(!1),!e.guideSGComp)switch(t.equipData.shuiguoId){case G.FruitId.\u6bd2\u8611\u83c7:e.guide4Time=0,e.guideSGComp=t,t.setClickable(!0);break;case G.FruitId.\u7206\u5934\u74dc:e.guide4Time=1,e.guideSGComp=t,t.setClickable(!0)}}),this.guideSGComp||(this.equipPool.forEach(function(t){t.setClickable(!0),e.guideSGComp=t}),this.guide4Time=2),this.guideSGComp){var t;this.dressUpEquipMap.forEach(function(o){o.equipData.shuiguoId===e.guideSGComp.equipData.shuiguoId&&(t=o.node.convertToWorldSpaceAR(cc.v2(0,0)))});var o=this.guideSGComp.node.convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.convertToNodeSpaceAR(o);t||this.cellCompMap.forEach(function(e){e.equipComp||(t=e.node.convertToWorldSpaceAR(cc.v2(0,0)))}),t.x-=o.x,t.y-=o.y,_.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:n.x,y:n.y,getFingerCallBack:function(o){e.guideShou=o,o.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,o.x+t.x,o.y+t.y),cc.moveTo(.02,o.x,o.y))))}})}this.selfMap["\u663e\u793a\u5f15\u5bfc4\u7684\u6846"]||(this.selfMap["\u663e\u793a\u5f15\u5bfc4\u7684\u6846"]=!0,_.GuideCtrlInstance.showGuideMaskFrame(D.langMgr.getStr("0054"),this.node))}else this.showGuide4_2()},t.prototype.showGuide4_2=function(){var e,t=this;if(this.dressUpEquipMap.forEach(function(t){t.equipData.shuiguoId===G.FruitId.\u62db\u8d22\u6a59\u5b50&&(e=t.node)}),e){var o=e.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(e.width,e.height);_.GuideCtrlInstance.showGuide({callBack:function(){E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.StartBattleGuide6),t.checkGuide()},sayStr:D.langMgr.getStr("0055"),sayNodePos:cc.v2(0,400),wPos:o,size:n,btnIsMax:!0})}},t.prototype.showGuide6=function(){var e=this;this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_ResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.checkBottomBtnScale(),_.GuideCtrlInstance.showGuide({callBack:function(){var t=e.auto_ui.btn_start.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(e.auto_ui.btn_start.node.width,e.auto_ui.btn_start.node.height);_.GuideCtrlInstance.showGuide({wPos:t,size:o,callBack:function(){e.dressUpEquipMap.forEach(function(e){return e.setClickable(!0)}),e.equipPool.forEach(function(e){return e.setClickable(!0)}),e.auto_ui.btn_ResetBtn.node.active=!0,e.auto_ui.btn_start.node.active=!0,e.auto_ui.btn_VideoResetBtn.node.active=!0,e.auto_ui.node_bottomBtn.active=!0,e.checkBottomBtnScale(),E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.EntryGuide7),e.gameStart()}})},sayStr:"Everything is ready. Let the Fruit Warriors join the battle now!"})},t.prototype.showGuide8=function(){var e=this;this.equipPool.forEach(function(e){e.isGeZiType||e.setClickable(!1)}),this.dressUpEquipMap.forEach(function(e){e.setClickable(!1)}),this.equipPool.forEach(function(t){if(t.isGeZiType){var o=t.node.convertToWorldSpaceAR(cc.v2(0,0)),n=e.node.convertToNodeSpaceAR(o),i=e.node.convertToWorldSpaceAR(cc.v2(0,0)),a=cc.v2(i.x-o.x,i.y-o.y);_.GuideCtrlInstance.showOneFingerGuide({parent:e.node,isWillClickClose:!1,x:n.x,y:n.y,getFingerCallBack:function(t){e.guideShou=t,t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+a.x,t.y+a.y),cc.moveTo(.02,t.x,t.y))))}})}}),_.GuideCtrlInstance.showGuideMaskFrame(D.langMgr.getStr("0056"),this.node),this.auto_ui.node_bottomBtn.active=!1},t.prototype.showGuide8_1=function(){var e=this;this.auto_ui.btn_UseGeZiBtn.interactable=!0;var t=this.auto_ui.btn_UseGeZiBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(this.auto_ui.btn_UseGeZiBtn.node.width,this.auto_ui.btn_UseGeZiBtn.node.height);_.GuideCtrlInstance.showGuide({wPos:t,size:o,callBack:function(){e.setCellFatherMove(!1),E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.OtherFruitsGuide9),e.checkGuide()}})},t.prototype.guideCheckCell=function(e){for(var t=f.GameDataMgr.getGameBag.bagArray,o=!1,n=0;n<e.length;n++){var i=e[n].cellData.cellIndex,a=!1;if((i-1>=0&&(i-1)%this.maxX!=this.maxX-1&&t[i-1]>=0||i-this.maxX>=0&&t[i-this.maxX]>=0||i+1<t.length&&(i+1)%this.maxX!=0&&t[i+1]>=0||i+this.maxX<t.length&&t[i+this.maxX]>=0)&&(a=!0),a){o=!0;break}}return o},t.prototype.showGuide9=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){var t=this.auto_ui.node_DragFather.children[0];t||this.equipPool.forEach(function(e){t=e.node});var o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.convertToNodeSpaceAR(o);_.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:n.x,y:n.y,getFingerCallBack:function(t){e.guideShou=t,n.x*=-1,n.y*=-1,n.normalizeSelf(),t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+200*n.x,t.y+500*n.y),cc.moveTo(.02,t.x,t.y))))}})}else E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.GuideEnd10),this.checkGuide()},t.prototype.showGuide10=function(){var e=this;this.auto_ui.btn_VideoResetBtn.node.active=!0,this.auto_ui.btn_ResetBtn.node.active=!0,this.auto_ui.btn_start.node.active=!0,this.auto_ui.node_bottomBtn.active=!0,this.checkBottomBtnScale();var t=this.auto_ui.btn_ResetBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(this.auto_ui.btn_ResetBtn.node.width,this.auto_ui.btn_ResetBtn.node.height);_.GuideCtrlInstance.showGuide({callBack:function(){e.resetEquip(!1,!1,!1),_.GuideCtrlInstance.showGuide({callBack:function(){E.PlayerDataMgr.setGuideIndex(x.GuideName.GameBag,x.GameBagGuideIndex.GuideCompletion),e.auto_ui.btn_VideoGetCell.node.active=!0,e.scheduleOnce(function(){e.checkBottomBtnScale()},.15)},sayStr:D.langMgr.getStr("0078")})},sayStr:D.langMgr.getStr("0079"),wPos:t,size:o})},t.prototype.checkUpBuff=function(e,t){var o=this;if(!this.isUpBuffCdTime&&e&&0!==e.length){this.isUpBuffCdTime=!0,this.scheduleOnce(function(){o.isUpBuffCdTime=!1},t?.2:0);for(var n=f.GameDataMgr.getGameBag.bagArray,i=[],a=0;a<e.length;a++){var r=e[a];if(r-1>=0&&(r-1)%this.maxX!=this.maxX-1&&n[r-1]>0||r-this.maxX>=0&&n[r-this.maxX]>0){var c=r-1;-1===e.indexOf(c)&&i.push(c)}r-this.maxX>=0&&n[r-this.maxX]>0&&(c=r-this.maxX,-1===e.indexOf(c)&&i.push(c)),r+1<n.length&&(r+1)%this.maxX!=0&&n[r+1]>0&&(c=r+1,-1===e.indexOf(c)&&i.push(c)),r+this.maxX<n.length&&n[r+this.maxX]>0&&(c=r+this.maxX,-1===e.indexOf(c)&&i.push(c))}var s=[],l=i.reduce(function(e,t){var n=o.cellCompMap.get(t);if(n&&n.equipComp){var i=h.Excel.shuiguo(n.equipComp.equipData.shuiguoId);5===i.attackstate||8===i.attackstate||9===i.attackstate||s.includes(n.equipComp)||(s.push(n.equipComp),e.push(n.equipComp.node))}return e},[]);l.length>0&&(t?this.showBuff(l):this.showJianTou(l))}},t.prototype.showBuff=function(e){for(var t=0;t<e.length;t++){var o=e[t];this.showOneUpBuff(o.convertToWorldSpaceAR(cc.v2(0,0)))}},t.prototype.showOneUpBuff=function(e){var t,o=this;(t=this.upBuffArray.length>0?this.upBuffArray.shift():cc.instantiate(this.auto_ui.node_upBuffEffect)).parent=this.auto_ui.node_upBuffFather,t.setPosition(t.parent.convertToNodeSpaceAR(e)),t.active=!0,t.getChildByName("1").getComponent(cc.ParticleSystem).resetSystem(),t.getChildByName("3").getComponent(cc.ParticleSystem).resetSystem(),this.scheduleOnce(function(){o.removeOneUpBuff(t)},2)},t.prototype.removeOneUpBuff=function(e){e.removeFromParent(),e.active=!1,this.upBuffArray.push(e)},t.prototype.showJianTou=function(e){var t=this;this.hideJianTou(),e.forEach(function(e,o){var n=e.convertToWorldSpaceAR(cc.v2(0,0));if(o<t.jianTouArray.length)t.jianTouArray[o].active=!0,t.jianTouArray[o].setPosition(t.jianTouArray[o].parent.convertToNodeSpaceAR(n));else{var i=cc.instantiate(t.auto_ui.node_jiantou);i.parent=t.auto_ui.node_upBuffFather,i.active=!0,i.children[0].runAction(cc.repeatForever(cc.sequence(cc.moveTo(.75,0,30),cc.moveTo(.75,0,0)))),t.jianTouArray.push(i),i.setPosition(i.parent.convertToNodeSpaceAR(n))}})},t.prototype.hideJianTou=function(){this.jianTouArray.forEach(function(e){return e.active=!1})},t.prototype.checkBottomBtnScale=function(){},t.prototype.checkAI=function(){var e=this;c.default._instance.isOpen&&this.scheduleOnce(function(){if(e.auto_ui.node_bottomBtn.active)if(e.getCanDressUpCell()){e.auto_ui.node_bottomBtn.active&&e.setCellFatherMove(!0),e.setTouchStartNode(e.aiPickEquip.node);var t=e.aiPickCell[0].node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),n=cc.v2(t.x-o.x,t.y-o.y);e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(c.default._instance.dragTime,e.aiPickEquip.node.x+n.x,e.aiPickEquip.node.y+n.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))}else e.getUpLevelEquip()||e.getLevelLowSelf()?(e.setTouchStartNode(e.aiPickEquip.node),e.aiPickOtherEquip.lockCellArray&&e.aiPickOtherEquip.lockCellArray.length>0?(t=e.aiPickOtherEquip.node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),n=cc.v2(t.x-o.x,t.y-o.y),e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(c.default._instance.dragTime,e.aiPickEquip.node.x+n.x,e.aiPickEquip.node.y+n.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))):e.scheduleOnce(function(){var t=e.aiPickOtherEquip.node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),n=cc.v2(t.x-o.x,t.y-o.y);e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(c.default._instance.dragTime,e.aiPickEquip.node.x+n.x,e.aiPickEquip.node.y+n.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))})):e.getEquipCanDressUp()?(e.setTouchStartNode(e.aiPickEquip.node),t=e.aiPickCell[0].node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),n=cc.v2(t.x-o.x,t.y-o.y),e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(c.default._instance.dragTime,e.aiPickEquip.node.x+n.x,e.aiPickEquip.node.y+n.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))):e.getCanResetEquipPool()?c.default._instance.displayClickButton(e.auto_ui.btn_ResetBtn.node,function(){e.sliderResetClick(),e.checkAI()}):e.getCanVideoResetEquipPool()?c.default._instance.displayClickButton(e.auto_ui.btn_VideoResetBtn.node,function(){e.resetEquip(!1,!0,!1),e.auto_ui.btn_VideoResetBtn.node.active=!1,e.checkAI()}):e.checkIsBigLevel()?c.default._instance.displayClickButton(e.auto_ui.btn_ResetBtn.node,function(){e.sliderResetClick()}):c.default._instance.displayClickButton(e.auto_ui.btn_start.node,function(){e.gameStart()});else c.default._instance.displayClickButton(e.auto_ui.btn_UseGeZiBtn.node,function(){e.setCellFatherMove(!1),e.checkAI()})},c.default._instance.aiCDTime)},t.prototype.getCanDressUpCell=function(){var e=this;this.aiPickEquip=null,this.aiPickCell=null;var t=!1;if(this.equipPool.forEach(function(e){e.isGeZiType&&(t=!0)}),!t)return!1;var o=null;if(this.equipPool.forEach(function(e){e.isGeZiType&&!o&&(o=e)}),o)for(var n=o.getGridNode().children.map(function(e,t,o){return 0===t?cc.v2(0,0):cc.v2(e.x-o[0].x,e.y-o[0].y)}),i=function(t){var i=n.map(function(e){return cc.v2(t.node.x+e.x,t.node.y+e.y)}),r=i.map(function(t){return e.baseCellCompArray.find(function(e){return cc.Vec2.distance(t,e.node.getPosition())<10&&-1===f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]})}).filter(function(e){return void 0!==e});if(r.length===i.length&&a.checkOneCellArrayIsOk(r.map(function(e){return e.cellData.cellIndex}),f.GameDataMgr.getGameBag.bagArray))return a.aiPickEquip=o,a.aiPickCell=r,{value:!0}},a=this,r=0,c=this.baseCellCompArray;r<c.length;r++){var s=i(c[r]);if("object"==typeof s)return s.value}return!1},t.prototype.getUpLevelEquip=function(){this.aiPickEquip=null,this.aiPickOtherEquip=null;var e=Array.from(this.equipPool.values()),t=Array.from(this.dressUpEquipMap.values()),o=function(e,t){for(var o=0,n=e;o<n.length;o++)for(var i=n[o],a=0,r=t;a<r.length;a++){var c=r[a];if(i!==c&&i.equipData.equipLevel===c.equipData.equipLevel&&(i.equipData.shuiguoId===c.equipData.shuiguoId||i.equipData.equipLevel===g.GameGlobalVariable.normalMaxLevel-1&&w.default.getInstance.getZaZhongId(i.equipData.shuiguoId)===c.equipData.shuiguoId))return[i,c]}return null},n=o(e,e);return n||(n=o(e,t)),n||(n=o(t,t)),!!n&&(this.aiPickEquip=n[0],this.aiPickOtherEquip=n[1],!0)},t.prototype.getLevelLowSelf=function(){this.aiPickEquip=null,this.aiPickOtherEquip=null;var e=Array.from(this.equipPool.values()),t=Array.from(this.dressUpEquipMap.values()),o=e.find(function(e){return t.some(function(t){return t.equipData.shuiguoId===e.equipData.shuiguoId&&t.equipData.equipLevel<e.equipData.equipLevel})});return!!o&&(this.aiPickEquip=o,this.aiPickOtherEquip=t.find(function(e){return e.equipData.shuiguoId===o.equipData.shuiguoId&&e.equipData.equipLevel<o.equipData.equipLevel}),!0)},t.prototype.getEquipCanDressUp=function(){var e=this;this.aiPickEquip=null,this.aiPickCell=null;for(var t=0,o=Array.from(this.equipPool.values()).sort(function(e,t){return t.equipData.equipLevel-e.equipData.equipLevel});t<o.length;t++)for(var n=o[t],i=n.getGridNode().children.map(function(e,t,o){return 0===t?cc.v2(0,0):cc.v2(e.x-o[0].x,e.y-o[0].y)}),a=function(t){var o=i.map(function(e){return cc.v2(t.x+e.x,t.y+e.y)}),a=o.map(function(t){return Array.from(e.cellCompMap.values()).find(function(e){return cc.Vec2.distance(t,e.node.getPosition())<10&&0===f.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]})}).filter(function(e){return void 0!==e});if(a.length===o.length)return r.aiPickEquip=n,r.aiPickCell=a,{value:!0}},r=this,c=0,s=this.auto_ui.node_cubeFather.children;c<s.length;c++){var l=a(s[c]);if("object"==typeof l)return l.value}return!1},t.prototype.getCanResetEquipPool=function(){return f.GameDataMgr.getGameBag.silverCoin>=this.oneBuyMoney},t.prototype.getCanVideoResetEquipPool=function(){return this.auto_ui.btn_VideoResetBtn.node.active},t.prototype.checkIsBigLevel=function(){if(g.GameGlobalVariable.nowlevel){var e=h.Excel.shuiguoguanqia(g.GameGlobalVariable.nowlevel).levelboshuid.length,t=f.GameDataMgr.getCurrentLevelWaveState(g.GameGlobalVariable.nowlevel,2)+1;I.LogMgr.debug("maxBoShu:",e,"boshu:",t);var o=0;if(e<=10?4===t?o=5:7===t?o=10:10===t&&(o=20):e<=15?5===t?o=5:10===t?o=10:15===t&&(o=20):5===t?o=5:10===t?o=10:20===t&&(o=20),0!==o){if(-1===this.mustResetTime)return this.mustResetTime=0,!0;if(this.mustResetTime>=o)return this.mustResetTime=-1,!1}}return!1},a([O(B.default)],t.prototype,"auto_ui",void 0),a([O(cc.Prefab)],t.prototype,"paiZiPfb",void 0),a([S],t)}(C.default);o.default=U,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./Item_CellFatherMove":"Item_CellFatherMove","./Item_GameBagCell":"Item_GameBagCell","./Item_GameEquip":"Item_GameEquip","./Item_PaiZi":"Item_PaiZi","./LanMgr":"LanMgr","./LogManager":"LogManager","./Logic_GetEquip":"Logic_GetEquip","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIManager":"UIManager","./UIView":"UIView","./UI_Bag_UIBindings":"UI_Bag_UIBindings"}],UI_BaoZha:[function(e,t,o){"use strict";cc._RF.push(t,"15d97ijoupCua+TUAldQifO","UI_BaoZha");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./NodePoolMag"),s=cc._decorator,l=s.ccclass,u=s.property,d=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosionAnimation=null,t.iceExplosionAnimation=null,t.cherryExplosionAnimation=null,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.playExplosion=function(e){void 0===e&&(e=100);var t=e<100?100:e;this.node.scale=1+t/100,this.node.children.forEach(function(e){e.active=!1}),this.explosionAnimation=this.node.children[0].getComponent(dragonBones.ArmatureDisplay),this.explosionAnimation.node.active=!0,this.explosionAnimation.playAnimation("newAnimation",1),this.explosionAnimation.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},t.prototype.playIceExplosion=function(){this.node.scale=3,this.node.children.forEach(function(e){e.active=!1}),this.iceExplosionAnimation=this.node.children[1].getComponent(dragonBones.ArmatureDisplay),this.iceExplosionAnimation.node.active=!0,this.iceExplosionAnimation.playAnimation("bingbao",1),this.iceExplosionAnimation.timeScale=1.5,this.iceExplosionAnimation.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},t.prototype.playCherryExplosion=function(e){void 0===e&&(e=100);var t=e<100?100:e;this.node.scale=1+t/100*.5,this.node.children.forEach(function(e){e.active=!1}),this.cherryExplosionAnimation=this.node.children[2].getComponent(cc.Animation),this.cherryExplosionAnimation.node.active=!0,this.cherryExplosionAnimation.play(),this.scheduleOnce(this.onAnimationState,1)},t.prototype.onAnimationState=function(){c.NodePoolMag.instance.recycleNodeToPool("baozha",this.node)},t.prototype.onDisable=function(){this.explosionAnimation&&this.explosionAnimation.node.active&&this.explosionAnimation.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this),this.iceExplosionAnimation&&this.iceExplosionAnimation.node.active&&this.iceExplosionAnimation.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},a([u(dragonBones.ArmatureDisplay)],t.prototype,"explosionAnimation",void 0),a([u(dragonBones.ArmatureDisplay)],t.prototype,"iceExplosionAnimation",void 0),a([u(cc.Animation)],t.prototype,"cherryExplosionAnimation",void 0),a([l],t)}(r.default));o.default=d,cc._RF.pop()},{"./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper"}],UI_BingDong:[function(e,t,o){"use strict";cc._RF.push(t,"3f0928St45BHIcTQk5qQ1Jn","UI_BingDong");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=(c.property,c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frozenAnimation=null,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.frozenAnimation=this.node.children[0].getComponent(dragonBones.ArmatureDisplay),this.frozenAnimation&&(this.frozenAnimation.timeScale=1,this.frozenAnimation.playAnimation("bingdong",1),this.scheduleOnce(function(){e.frozenAnimation&&(e.frozenAnimation.timeScale=0)},.4))},t.prototype.onDisable=function(){},a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_BoxAward:[function(e,t,o){"use strict";cc._RF.push(t,"08a07NusGlOYaTzfY+qMlRT","UI_BoxAward");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./CommonUtils"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchNode=null,t}return i(t,e),t.prototype.onEnable=function(){this.touchNode.width=cc.winSize.width,this.touchNode.height=cc.winSize.height,this.touchNode.active=!1},t.prototype.onDisable=function(){this.touchNode.active=!1},t.prototype.hideTouchNode=function(){this.node.active=!1,this.touchNode.active=!1},t.prototype.displayAward=function(e,t,o,n){void 0===n&&(n=1),this.node.x=e.x,this.node.active=!0,this.node.scale=0,cc.tween(this.node).to(.25,{scale:1},{easing:"backOut"}).start(),this.touchNode.active=!0,this.configureAwardNode(t,o,n)},t.prototype.getCurrentAwardNode=function(e,t,o){var n=null;return 1===o?("1"===t&&(n=e.awardbox1),"2"===t&&(n=e.awardbox2),"3"===t&&(n=e.awardbox3)):2===o&&("1"===t&&(n=e.tiaozhanbox1),"2"===t&&(n=e.tiaozhanbox2),"3"===t&&(n=e.tiaozhanbox3),"4"===t&&(n=e.tiaozhanbox4)),n},t.prototype.configureAwardNode=function(e,t,o){var n=this,i=this.getCurrentAwardNode(e,t,o),a=["ui/tu/powerIcon","ui/tu/goldIcon","ui/tu/diamondIcon","quality/suipian_1","quality/suipian_2","quality/suipian_3"],l=function(e,t){return r(n,void 0,void 0,function(){var o,n,i,r,l,d;return c(this,function(c){switch(c.label){case 0:switch(o=t.getChildByName("img").getComponent(cc.Sprite),n=t.getChildByName("awardlb").getComponent(cc.Label),i="",r=0,e[0]){case 1:i="res/"+a[1],r=e[1];break;case 2:i="res/"+a[2],r=e[1];break;case 3:i="res/"+a[0],r=e[1];break;case 5:switch(l=e[1],r=e[2],l){case 1:i="res/"+a[3];break;case 2:i="res/"+a[4];break;case 3:i="res/"+a[5]}}return[4,this._loadRes(s.BundleNames.Common,i,cc.SpriteFrame)];case 1:return d=c.sent(),o.spriteFrame=d,u.default.limitSpriteSize(o,60),n.string="+"+r,[2]}})})},d=this.node.children[0].children;d.forEach(function(e){return e.active=!1});for(var p=0;p<i.length;p++){var h=d[p];h||(h=cc.instantiate(d[0]),this.node.children[0].addChild(h)),h.active=!0,l(i[p],h)}this.scheduleOnce(function(){n.node.width=n.node.children[0].width;var e=n.node.x,t=n.node.x-n.node.width/2,o=n.node.x+n.node.width/2;t<-cc.winSize.width/2&&(n.node.x=-(cc.winSize.width/2-n.node.width/2)),o>cc.winSize.width/2&&(n.node.x=cc.winSize.width/2-n.node.width/2),n.node.children[1].x=e-n.node.x})},a([h(cc.Node)],t.prototype,"touchNode",void 0),a([p],t)}(l.default);o.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./ResKeeper":"ResKeeper"}],UI_BoxIitemInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"db86cmE4l1DT7wZgMPRJg/W","UI_BoxIitemInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_cardFather=null,t.node_ItemIcon=null,t.node_itemFather=null,t.txt_jiLvLabel=null,t.btn_closeBtn=null,t.btn_queDingBtn=null,t._btnNames=["btn_closeBtn","btn_queDingBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_cardFather",void 0),a([l(cc.Node)],t.prototype,"node_ItemIcon",void 0),a([l(cc.Node)],t.prototype,"node_itemFather",void 0),a([l(cc.Label)],t.prototype,"txt_jiLvLabel",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Button)],t.prototype,"btn_queDingBtn",void 0),a([s("UI_BoxIitemInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxIitemInfo:[function(e,t,o){"use strict";cc._RF.push(t,"6d5f73MlIxBaIqJRpYNLUxK","UI_BoxIitemInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_BoxIitemInfo_UIBindings"),l=e("./UIView"),u=e("./Excel"),d=e("./PlayerDataManager"),p=e("./BundleConfig"),h=e("./CommonUtils"),f=e("./Const_Hall"),g=cc._decorator,_=g.ccclass,y=g.property,v=function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t.spriteMaterial=[],t}return i(t,e),t.prototype._show=function(e){this.auto_ui.node_cardFather.children.forEach(function(t,o){t.active=o+1===e});var t=u.Excel.shuiguo_all.filter(function(t){return t.quality===e&&-1!==t.isShow}).map(function(e){var t=d.PlayerDataMgr.getEquipDataById(e.id).isUnLock;return{id:e.id,isUnLock:t}});t.sort(function(e,t){return e.isUnLock?t.isUnLock?e.id-t.id:-1:1});var o=t.filter(function(e){return e.isUnLock});this.auto_ui.txt_jiLvLabel.string=0===o.length?"\u6bcf\u4e2a\u6c34\u679c\u788e\u7247\u7684\u6982\u7387:0%":"\u6bcf\u4e2a\u6c34\u679c\u788e\u7247\u7684\u6982\u7387:"+(100/o.length).toFixed(2)+"%",this.auto_ui.node_itemFather.children.forEach(function(e){e.active=!1});for(var n=0;n<t.length;n++){var i=void 0;n<this.auto_ui.node_itemFather.childrenCount?i=this.auto_ui.node_itemFather.children[n]:(i=cc.instantiate(this.auto_ui.node_ItemIcon)).parent=this.auto_ui.node_itemFather,i.active=!0,this.showItem(i,t[n])}},t.prototype._clickListener=function(){this._close()},t.prototype.showItem=function(e,t){return r(this,void 0,Promise,function(){var o,n,i,a;return c(this,function(r){switch(r.label){case 0:return[4,this._loadRes(p.BundleNames.Common,"res/player/player"+(t.id-1e3)+"_1",cc.SpriteFrame)];case 1:return o=r.sent(),(n=e.getChildByName("icon").getComponent(cc.Sprite)).spriteFrame=o,h.default.limitSpriteSize(n,f.equipIconSize),n.setMaterial(0,t.isUnLock?this.spriteMaterial[0]:this.spriteMaterial[1]),i=u.Excel.shuiguo(t.id).quality,t.isUnLock||(i=0),[4,this._loadRes(p.BundleNames.Common,"res/quality/quality_"+i,cc.SpriteFrame)];case 2:return a=r.sent(),e.getChildByName("quality").getComponent(cc.Sprite).spriteFrame=a,e.getChildByName("lock").active=!t.isUnLock,[2]}})})},a([y(s.default)],t.prototype,"auto_ui",void 0),a([y([cc.Material])],t.prototype,"spriteMaterial",void 0),a([_],t)}(l.default);o.default=v,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_BoxIitemInfo_UIBindings":"UI_BoxIitemInfo_UIBindings"}],UI_BoxInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"aa83dbsAsVPUpNaz3EccPd7","UI_BoxInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_titleLabel=null,t.txt_priceLabel=null,t.txt_goldLabel=null,t.txt_lvLabel=null,t.txt_lanLabel=null,t.txt_ziLabel=null,t.node_boxBG=null,t.node_box2Node=null,t.btn_videoBuyBtn=null,t.btn_buyBtn=null,t.btn_lvIconBtn=null,t.btn_lanIconBtn=null,t.btn_ziIconBtn=null,t.btn_closeBtn=null,t._btnNames=["btn_videoBuyBtn","btn_buyBtn","btn_lvIconBtn","btn_lanIconBtn","btn_ziIconBtn","btn_closeBtn"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Label)],t.prototype,"txt_goldLabel",void 0),a([l(cc.Label)],t.prototype,"txt_lvLabel",void 0),a([l(cc.Label)],t.prototype,"txt_lanLabel",void 0),a([l(cc.Label)],t.prototype,"txt_ziLabel",void 0),a([l(cc.Node)],t.prototype,"node_boxBG",void 0),a([l(cc.Node)],t.prototype,"node_box2Node",void 0),a([l(cc.Button)],t.prototype,"btn_videoBuyBtn",void 0),a([l(cc.Button)],t.prototype,"btn_buyBtn",void 0),a([l(cc.Button)],t.prototype,"btn_lvIconBtn",void 0),a([l(cc.Button)],t.prototype,"btn_lanIconBtn",void 0),a([l(cc.Button)],t.prototype,"btn_ziIconBtn",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([s("UI_BoxInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxInfo:[function(e,t,o){"use strict";cc._RF.push(t,"7f37cK7xAhCva73zXDWKoJp","UI_BoxInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_BoxInfo_UIBindings"),c=e("./UIView"),s=e("./Excel"),l=e("./HallManager"),u=e("./UIManager"),d=e("./BundleConfig"),p=e("./PlayerDataManager"),h=e("./UIConfig_Home"),f=e("./LanMgr"),g=cc._decorator,_=g.ccclass,y=g.property,v=(g.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){this.infoData=e;var t=s.Excel.shopBoxLevel(l.HallMgr.shopData.boxLevel+1);0===e.type?this.auto_ui.txt_titleLabel.string=f.langMgr.getStr("0044"):this.auto_ui.txt_titleLabel.string=f.langMgr.getStr("0045");var o=0===e.type?t.moneyCount:t.bigMoneyCount,n=0===e.type?t.rewards:t.bigRewards;this.auto_ui.txt_goldLabel.node.parent.active=o>0,this.auto_ui.txt_goldLabel.string=""+o,this.auto_ui.txt_lvLabel.node.parent.active=n[0]>0,this.auto_ui.txt_lvLabel.string=""+n[0],this.auto_ui.txt_lanLabel.node.parent.active=n[1]>0,this.auto_ui.txt_lanLabel.string=""+n[1],this.auto_ui.txt_ziLabel.node.parent.active=n[2]>0,this.auto_ui.txt_ziLabel.string=""+n[2],this.auto_ui.node_boxBG.children[0].active=0===e.type,this.auto_ui.node_boxBG.children[1].active=1===e.type;var i=s.Excel.shopControl(1);0===e.type?this.auto_ui.btn_videoBuyBtn.interactable=i.box1BuyCount-l.HallMgr.shopData.box1BuyCount>0:this.auto_ui.btn_videoBuyBtn.interactable=i.box2BuyCount-l.HallMgr.shopData.box2BuyCount>0,this.auto_ui.txt_priceLabel.string=""+(0===e.type?i.boxPrice:i.bigBoxPrice),0===e.type?this.auto_ui.btn_buyBtn.interactable=p.PlayerDataMgr.globalData.diamond>=i.boxPrice:this.auto_ui.btn_buyBtn.interactable=p.PlayerDataMgr.globalData.diamond>=i.bigBoxPrice},t.prototype._clickListener=function(e){var t=this;switch(e){case this.auto_ui.btn_buyBtn:this.infoData&&this.infoData.clickCallBack&&(this.infoData.clickCallBack(!1),this._close());break;case this.auto_ui.btn_videoBuyBtn:this.infoData&&this.infoData.clickCallBack&&this.infoData.clickCallBack(function(){t._close()});break;case this.auto_ui.btn_closeBtn:this._close();break;case this.auto_ui.btn_lvIconBtn:this.showEquipInfo(1);break;case this.auto_ui.btn_lanIconBtn:this.showEquipInfo(2);break;case this.auto_ui.btn_ziIconBtn:this.showEquipInfo(3)}},t.prototype.showEquipInfo=function(e){u.default.open(d.BundleNames.Home,h.UIView_Home.UI_BoxItemInfo,e)},a([y(r.default)],t.prototype,"auto_ui",void 0),a([_],t)}(c.default));o.default=v,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./HallManager":"HallManager","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_BoxInfo_UIBindings":"UI_BoxInfo_UIBindings"}],UI_BoxLevelInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"63925zq8wBDe4xeo2wpRoos","UI_BoxLevelInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_lastBtn=null,t.btn_nextBtn=null,t.node_box1Node=null,t.node_box2Node=null,t.txt_box1LvLabel=null,t.txt_box1LanLabel=null,t.txt_box1ZiLabel=null,t.txt_box2LvLabel=null,t.txt_box2LanLabel=null,t.txt_box2ZiLabel=null,t.txt_levelLbael=null,t._btnNames=["btn_closeBtn","btn_lastBtn","btn_nextBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Button)],t.prototype,"btn_lastBtn",void 0),a([l(cc.Button)],t.prototype,"btn_nextBtn",void 0),a([l(cc.Node)],t.prototype,"node_box1Node",void 0),a([l(cc.Node)],t.prototype,"node_box2Node",void 0),a([l(cc.Label)],t.prototype,"txt_box1LvLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box1LanLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box1ZiLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2LvLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2LanLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2ZiLabel",void 0),a([l(cc.Label)],t.prototype,"txt_levelLbael",void 0),a([s("UI_BoxLevelInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxLevelInfo:[function(e,t,o){"use strict";cc._RF.push(t,"f51cfKC79tKw56yCCxVEgS3","UI_BoxLevelInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_BoxLevelInfo_UIBindings"),c=e("./UIView"),s=e("./HallManager"),l=e("./Excel"),u=cc._decorator,d=u.ccclass,p=u.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.currLevel=0,t.firstBoxData=null,t}return i(t,e),t.prototype._show=function(){this.currLevel=s.HallMgr.shopData.boxLevel,this.firstBoxData=l.Excel.shopBoxLevel(1),this.showLevel(this.currLevel)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close();break;case this.auto_ui.btn_lastBtn:this.currLevel=Math.max(0,this.currLevel-1),this.showLevel(this.currLevel);break;case this.auto_ui.btn_nextBtn:this.currLevel=Math.min(l.Excel.shopBoxLevel_all.size-1,this.currLevel+1),this.showLevel(this.currLevel)}},t.prototype.showLevel=function(e){this.currLevel=e;var t=this.auto_ui;t.txt_levelLbael.string="LV."+(e+1),t.btn_lastBtn.node.active=e>0,t.btn_nextBtn.node.active=e<l.Excel.shopBoxLevel_all.size-1;var o=l.Excel.shopBoxLevel(e+1),n=this.firstBoxData.rewards,i=this.firstBoxData.bigRewards;t.txt_box1LvLabel.node.parent.active=o.rewards[0]>0,t.txt_box1LvLabel.string="+"+(o.rewards[0]-n[0]),t.txt_box1LanLabel.node.parent.active=o.rewards[1]>0,t.txt_box1LanLabel.string="+"+(o.rewards[1]-n[1]),t.txt_box1ZiLabel.node.parent.active=o.rewards[2]>0,t.txt_box1ZiLabel.string="+"+(o.rewards[2]-n[2]),t.txt_box2LvLabel.node.parent.active=o.bigRewards[0]>0,t.txt_box2LvLabel.string="+"+(o.bigRewards[0]-i[0]),t.txt_box2LanLabel.node.parent.active=o.bigRewards[1]>0,t.txt_box2LanLabel.string="+"+(o.bigRewards[1]-i[1]),t.txt_box2ZiLabel.node.parent.active=o.bigRewards[2]>0,t.txt_box2ZiLabel.string="+"+(o.bigRewards[2]-i[2])},a([p(r.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default);o.default=h,cc._RF.pop()},{"./Excel":"Excel","./HallManager":"HallManager","./UIView":"UIView","./UI_BoxLevelInfo_UIBindings":"UI_BoxLevelInfo_UIBindings"}],UI_BoxUpLevel_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"75820nWcXRN4akaDso2ZEl4","UI_BoxUpLevel_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_lightNode=null,t.node_titileNode=null,t.node_box1Node=null,t.node_box2Node=null,t.txt_levelLabel=null,t.txt_titleLabel=null,t.txt_box1LvLabel=null,t.txt_box1LanLabel=null,t.txt_box1ZiLabel=null,t.txt_box2LvLabel=null,t.txt_box2LanLabel=null,t.txt_box2ZiLabel=null,t.btn_closeBtn=null,t._btnNames=["btn_closeBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_lightNode",void 0),a([l(cc.Node)],t.prototype,"node_titileNode",void 0),a([l(cc.Node)],t.prototype,"node_box1Node",void 0),a([l(cc.Node)],t.prototype,"node_box2Node",void 0),a([l(cc.Label)],t.prototype,"txt_levelLabel",void 0),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box1LvLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box1LanLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box1ZiLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2LvLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2LanLabel",void 0),a([l(cc.Label)],t.prototype,"txt_box2ZiLabel",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([s("UI_BoxUpLevel_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxUpLevel:[function(e,t,o){"use strict";cc._RF.push(t,"b9b47Y9D9ZBfZf/eqfGZIEw","UI_BoxUpLevel");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_BoxUpLevel_UIBindings"),c=e("./UIView"),s=e("./Excel"),l=e("./HallManager"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){for(var t=this,o=[],n=1;n<arguments.length;n++)o[n-1]=arguments[n];this.showLevel(l.HallMgr.shopData.boxLevel),this.auto_ui.node_lightNode.stopAllActions(),this.auto_ui.node_lightNode.runAction(cc.repeatForever(cc.rotateBy(3,360))),this.auto_ui.btn_closeBtn.node.active=!1,this.scheduleOnce(function(){t.auto_ui.btn_closeBtn.node.active=!0},2)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close(),this.auto_ui.node_lightNode.stopAllActions(),this.auto_ui.btn_closeBtn.node.active=!1}},t.prototype.showLevel=function(e){var t=this.auto_ui,o=s.Excel.shopBoxLevel(e),n=s.Excel.shopBoxLevel(e+1);t.txt_levelLabel.string="l"+(e+1),t.txt_box1LvLabel.node.parent.active=n.rewards[0]>0,t.txt_box1LvLabel.string="+"+(n.rewards[0]-o.rewards[0]),t.txt_box1LanLabel.node.parent.active=n.rewards[1]>0,t.txt_box1LanLabel.string="+"+(n.rewards[1]-o.rewards[1]),t.txt_box1ZiLabel.node.parent.active=n.rewards[2]>0,t.txt_box1ZiLabel.string="+"+(n.rewards[2]-o.rewards[2]),t.txt_box2LvLabel.node.parent.active=n.bigRewards[0]>0,t.txt_box2LvLabel.string="+"+(n.bigRewards[0]-o.bigRewards[0]),t.txt_box2LanLabel.node.parent.active=n.bigRewards[1]>0,t.txt_box2LanLabel.string="+"+(n.bigRewards[1]-o.bigRewards[1]),t.txt_box2ZiLabel.node.parent.active=n.bigRewards[2]>0,t.txt_box2ZiLabel.string="+"+(n.bigRewards[2]-o.bigRewards[2])},a([p(r.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default));o.default=h,cc._RF.pop()},{"./Excel":"Excel","./HallManager":"HallManager","./UIView":"UIView","./UI_BoxUpLevel_UIBindings":"UI_BoxUpLevel_UIBindings"}],UI_BulletBombCollider:[function(e,t,o){"use strict";cc._RF.push(t,"6f456gBygZA/pHcM9xqpHXN","UI_BulletBombCollider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./GameGlobalVariable"),u=e("./BuffMag"),d=e("./UI_MosterLogic"),p=e("./UI_BulletBomb"),h=cc._decorator,f=h.ccclass,g=(h.property,h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastCollisionTime=0,t}return i(t,e),t.prototype.onCollisionEnter=function(e,t){var o=(new Date).getTime();if(o-this.lastCollisionTime>=100){l.GameGlobalVariable.playBomb1SoundEffect(),this.lastCollisionTime=o;var n=t.node.parent.getComponent(p.default);n.getCurrentMonsterNodes().forEach(function(e){var t=e.getComponent(d.default);u.BuffMgr.monsterHit(t,n.attackfang),t.receiveAttack(n);var o=u.BuffMgr.getBlueMelonExtraBuff(n.attackfang);if(o){var i=t.xueliang*(o.value[0]/100);t.applyAdditionalAttack(i,5,n)}});var i=e.node.getComponent(d.default);u.BuffMgr.addMosterBombCount(i),n.hideBullet(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Add_BaoZha,n.node.getPosition(),1,n.getExplosionRange())}},t.prototype.handleMyCollisionEnter=function(e){var t=(new Date).getTime();if(t-this.lastCollisionTime>=100){l.GameGlobalVariable.playBomb1SoundEffect(),this.lastCollisionTime=t;var o=this.node.parent.getComponent(p.default);o.getCurrentMonsterNodes().forEach(function(e){var t=e.getComponent(d.default);u.BuffMgr.monsterHit(t,o.attackfang),t.receiveAttack(o);var n=u.BuffMgr.getBlueMelonExtraBuff(o.attackfang);if(n){var i=t.xueliang*(n.value[0]/100);t.applyAdditionalAttack(i,5,o)}});var n=e.getComponent(d.default);u.BuffMgr.addMosterBombCount(n),o.hideBullet(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Add_BaoZha,o.node.getPosition(),1,o.getExplosionRange())}},a([f],t)}(c.default));o.default=g,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_BulletBomb":"UI_BulletBomb","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletBomb:[function(e,t,o){"use strict";cc._RF.push(t,"d3c38pEhixLNJlUy5iWoxIE","UI_BulletBomb");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./Excel"),d=e("./NodePoolMag"),p=e("./UI_BulletBombCollider"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=e.call(this)||this;return t.bulletId=1,t.nowbox=null,t.spr=null,t.attack=0,t.attackfanwei=0,t.isbaoji=!1,t.attackfang=null,t.nowdirection=0,t.nowpos=null,t.tw=null,t.createtime=0,t.ispengzhuang=!1,t.bulletspeed=40,t.issend=!1,t}return i(t,e),t.prototype.initializeBullet=function(e,t){return r(this,void 0,Promise,function(){var o,n,i,a,r;return c(this,function(c){switch(c.label){case 0:return this.attack=e.attack,this.attackfang=e.playerId,this.isbaoji=e.isbaoji,o=e.skinlevel,this.createtime=(new Date).getTime(),[4,this._loadRes(s.BundleNames.Common,"res/player/player8_"+(o+1),cc.SpriteFrame)];case 1:return n=c.sent(),this.spr&&(this.spr.spriteFrame=n),this.nowpos=t,i=cc.v2(),cc.Vec2.subtract(i,cc.v2(t.x,t.y),this.node.getPosition()),this.nowdirection=Math.atan2(i.y,i.x),this.issend=!0,(a=u.Excel.getFruitBuff(this.attackfang.sgtianfuid))&&(this.attackfanwei=a.value[0]),this.tw&&this.tw.stop(),r=cc.tween(this.spr.node).to(.5,{scale:.9}).to(.5,{scale:1}),this.tw=cc.tween(this.spr.node).repeatForever(r).start(),[2]}})})},t.prototype.getExplosionRange=function(){return this.attackfanwei},t.prototype.fireBullet1=function(){this.moveBulletInDirection(this.nowdirection)},t.prototype.moveBulletInDirection=function(e){var t=cc.Vec2.distance(cc.v2(this.nowpos.x,this.nowpos.y),this.node.getPosition()),o=this.bulletspeed;t<this.bulletspeed&&(o=t),this.node.x+=Math.cos(e)*o,this.node.y+=Math.sin(e)*o,cc.Vec2.distance(cc.v2(this.nowpos.x,this.nowpos.y),this.node.getPosition())<=10&&(this.issend=!1,this.node.x=this.nowpos.x,this.node.y=this.nowpos.y)},t.prototype.getBulletAttack=function(){return this.attack},t.prototype.getCurrentMonsterNodes=function(){for(var e=[],t=0,o=this.attackfang.mosterNodes.children;t<o.length;t++){var n=o[t];cc.Vec2.distance(n.getPosition(),this.node.getPosition())-n.width/2-this.node.width/2<=this.attackfanwei&&e.push(n)}return e},t.prototype.hideBullet=function(){this.issend=!1,d.NodePoolMag.instance.recycleNodeToPool("bullet_2",this.node)},t.prototype.setBoxState=function(e){this.ispengzhuang=e},t.prototype.onUpdate=function(){this.issend&&this.fireBullet1()},t.prototype.collideWithMonster=function(e){if(this.ispengzhuang)for(var t=0,o=e.children;t<o.length;t++){var n=o[t];if(cc.Vec2.distance(n.getPosition(),this.node.getPosition())<=20){this.nowbox.getComponent(p.default).handleMyCollisionEnter(n);break}}},a([g],t.prototype,"bulletId",void 0),a([g(cc.Node)],t.prototype,"nowbox",void 0),a([g(cc.Sprite)],t.prototype,"spr",void 0),a([f],t)}(l.default));o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletBombCollider":"UI_BulletBombCollider"}],UI_BulletCollider:[function(e,t,o){"use strict";cc._RF.push(t,"6c4407x+99HuZrExpHs9ueO","UI_BulletCollider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./Excel"),u=e("./GameGlobalVariable"),d=e("./BuffMag"),p=e("./UI_MosterLogic"),h=e("./UI_Bullet"),f=cc._decorator,g=f.ccclass,_=(f.property,f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastCollisionTime=0,t.hasExplosion=!1,t}return i(t,e),t.prototype.onCollisionEnter=function(e,t){if((new Date).getTime()-this.lastCollisionTime>=50){this.lastCollisionTime=(new Date).getTime();var o=t.node.parent.getComponent(h.default);o.hideBullet();var n=e.node.getComponent(p.default),i=l.Excel.getFruitBuff(o.attackfang.sgtianfuid),a=-1;switch(i&&(a=i.buffefftype),a){case 4:u.GameGlobalVariable.playBomb2SoundEffect();var c=i.value[0];c+=c*d.BuffMgr.getBombBuffScope(o.attackfang);var f=o.getNowMosterNode(c);r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Add_BaoZha,o.node.getPosition(),3,c),n.beAttack(o,!0),f.forEach(function(e){var t=e.getComponent(p.default);if(t.node.uuid!=n.node.uuid){d.BuffMgr.monsterHit(t,o.attackfang);var a=o.getBulletAttack(n)*i.value[1]/100;t.fujiaAttack(a,1,o),d.BuffMgr.getMonsterBombDamageIncrease()>0&&t.setIsXiGuaBomb()}});break;default:d.BuffMgr.monsterHit(n,o.attackfang),n.beAttack(o),this.hasExplosion?u.GameGlobalVariable.playBomb2SoundEffect():u.GameGlobalVariable.playHitSound()}}},t.prototype.onOptimizedCollision=function(e){if((new Date).getTime()-this.lastCollisionTime>=50){this.lastCollisionTime=(new Date).getTime();var t=this.node.parent.getComponent(h.default);t.hideBullet();var o=e.getComponent(p.default),n=l.Excel.getFruitBuff(t.attackfang.sgtianfuid),i=-1;switch(n&&(i=n.buffefftype),i){case 4:u.GameGlobalVariable.playBomb2SoundEffect();var a=n.value[0];a+=a*d.BuffMgr.getBombBuffScope(t.attackfang);var c=t.getCurrentMonsterNodes(a);r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Add_BaoZha,t.node.getPosition(),3,a),o.receiveAttack(t,!0),c.forEach(function(e){var i=e.getComponent(p.default);if(i.node.uuid!=o.node.uuid){d.BuffMgr.monsterHit(i,t.attackfang);var a=t.getBulletAttack(o)*n.value[1]/100;i.fujiaAttack(a,1,t),d.BuffMgr.getMonsterBombDamageIncrease()>0&&i.setIsXiGuaBomb()}});break;default:d.BuffMgr.monsterHit(o,t.attackfang),o.receiveAttack(t),this.applyExtraDamage(t,o),this.applyAreaDamage(t,o),this.hasExplosion?u.GameGlobalVariable.playBomb2SoundEffect():u.GameGlobalVariable.playHitSound()}}},t.prototype.binDongEwai=function(){},t.prototype.applyAreaDamage=function(e,t){this.hasExplosion=!1;var o=d.BuffMgr.getRangeBuff(e.attackfang);if(o&&Math.random()<o.probability/100){var n=e.attack*o.value[0]/100,i=o.value[1];e.getNowMosterNode(i).forEach(function(i){var a=i.getComponent(p.default);t.node.uuid!=a.node.uuid&&(a.fujiaAttack(n,5,e),a.setJianShu(o.value[2],o.bufftime,e.attackfang))})}},t.prototype.applyExtraDamage=function(e,t){var o=d.BuffMgr.getBombBuff(e.attackfang);if(this.hasExplosion=!1,o){this.hasExplosion=!0;var n=e.attack*o.value[1]/100,i=o.value[0];e.getNowMosterNode(i).forEach(function(e){var o=e.getComponent(p.default);t.node.uuid!=o.node.uuid&&o.fujiaAttack(n,5)});var a=1;5==e.attackfang.playerId&&(a=3),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Add_BaoZha,e.node.getPosition(),a,i)}},a([g],t)}(c.default));o.default=_,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletMoveCollider:[function(e,t,o){"use strict";cc._RF.push(t,"a7f4foc2VtOh7IYPn02Tmri","UI_BulletMoveCollider");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./Excel"),s=e("./GameGlobalVariable"),l=e("./BuffMag"),u=e("./UI_MosterLogic"),d=e("./UI_BulletMove"),p=cc._decorator,h=p.ccclass,f=(p.property,p.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onCollisionEnter=function(e,t){s.GameGlobalVariable.playHitDurianSoundEffect();var o=t.node.parent.getComponent(d.default),n=e.node.getComponent(u.default);if(!n.isDie){l.BuffMgr.monsterHit(n,o.attackfang),n.receiveAttack(o),o.isChaoJi||o.hideBullet();var i=c.Excel.getFruitBuff(o.attackfang.sgtianfuid);if(11===i.buffefftype){var a=c.Excel.shuiguoguaiwu(n.mosterId);!o.isChaoJi&&Math.random()<i.probability/100*a.resistance&&n.knockback(i.value[0])}}},a([h],t)}(r.default));o.default=f,cc._RF.pop()},{"./BuffMag":"BuffMag","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_BulletMove":"UI_BulletMove","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletMove_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"2ba1axjozxP9rcfVYEWEhDj","UI_BulletMove_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_effNode=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_effNode",void 0),a([s("UI_BulletMove_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BulletMove:[function(e,t,o){"use strict";cc._RF.push(t,"ca3e0A3hL5HuI5uNa991De3","UI_BulletMove");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_BulletMove_UIBindings"),l=e("./BundleConfig"),u=e("./ResKeeper"),d=e("./GameGlobalVariable"),p=e("./NodePoolMag"),h=e("./UI_BulletBomb"),f=e("./BuffMag"),g=cc._decorator,_=g.ccclass,y=g.property,v=(g.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.bulletId=1,t.img=null,t.attack=0,t.attackfang=null,t.isbaoji=!1,t.nowpos=null,t.issend=!1,t.moveindex=5,t.isChaoJi=!1,t.languajiaodus=[],t.chongjiNode=null,t.bulletspeed=7,t}return i(t,e),t.prototype.initializeBullet=function(e){return r(this,void 0,Promise,function(){var t,o,n,i,a,r;return c(this,function(c){switch(c.label){case 0:if(this.node.angle=0,this.attack=e.attack,this.attackfang=e.playerId,this.isbaoji=e.isbaoji,this.moveindex=5,this.node.scale=1,this.isChaoJi=!1,this.clearImpactEffect(),f.BuffMgr.getDurianBuff(this.attackfang)&&(this.isChaoJi=!0,this.node.scale=1.7,this.addImpactEffect()),this.issend=!0,this.languajiaodus=[],f.BuffMgr.getDurianBomb(this.attackfang))for(t=this.getThreeUniqueRandomNumbers([0,200],[300,360]),o=0,n=t;o<n.length;o++)i=n[o],this.languajiaodus.push({angle:i,has:!1});return a=1,e&&4===e.playerLevel&&(a=5),[4,this._loadRes(l.BundleNames.Common,"res/player/player7_"+a,cc.SpriteFrame)];case 1:return r=c.sent(),this.img.spriteFrame=r,console.log("\u5f53\u524d\u968f\u673a\u89d2\u5ea6",this.languajiaodus),[2]}})})},t.prototype.onDisable=function(){this.clearImpactEffect()},t.prototype.addImpactEffect=function(){return r(this,void 0,Promise,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.chongjiNode=p.NodePoolMag.instance.getNodeFromPool("chongji"),this.chongjiNode?[3,2]:[4,this._loadRes(l.BundleNames.Game,"prefabs/effpre/UI_ChongJi",cc.Prefab)];case 1:e=t.sent(),p.NodePoolMag.instance.createNodePool("chongji",1,e),this.chongjiNode=p.NodePoolMag.instance.getNodeFromPool("chongji"),t.label=2;case 2:return this.chongjiNode.x=-40,this.chongjiNode.y=0,this.auto_ui.node_effNode.addChild(this.chongjiNode),[2]}})})},t.prototype.clearImpactEffect=function(){this.chongjiNode&&(p.NodePoolMag.instance.recycleNodeToPool("chongji",this.chongjiNode),this.chongjiNode=null)},t.prototype.hideBullet=function(){this.issend=!1,this.clearImpactEffect(),p.NodePoolMag.instance.recycleNodeToPool("bullet_3",this.node)},t.prototype.getRandomInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.prototype.getThreeUniqueRandomNumbers=function(e,t){for(var o=[],n=e[0];n<=e[1];n++)o.push(n);for(n=t[0];n<=t[1];n++)o.push(n);for(var i=[];i.length<3;){var a=o[this.getRandomInteger(0,o.length-1)];i.includes(a)||i.push(a)}return i},t.prototype.createLanGua=function(){var e=this,t=this.node.parent;if(t)for(var o=cc.Vec2.subtract(cc.v2(),this.node.getPosition(),t.getPosition()),n=180/Math.PI*Math.atan2(o.y,o.x)+180,i=function(t){var o=e.languajiaodus[t];if(!o.has){var i=o.angle;if(Math.abs(n-i)<=10){o.has=!0;var a=e.node.x,r=e.node.y;e.scheduleOnce(function(){e.createBulletExplosion(cc.v2(a,r))}),e.languajiaodus[t]=o}}},a=0;a<this.languajiaodus.length;a++)i(a)},t.prototype.createBulletExplosion=function(e){return r(this,void 0,Promise,function(){var t,o,n,i;return c(this,function(a){switch(a.label){case 0:return(t=p.NodePoolMag.instance.getNodeFromPool("bullet_2"))?[3,2]:[4,this._loadRes(l.BundleNames.Game,"prefabs/bullet/bullet2",cc.Prefab)];case 1:o=a.sent(),p.NodePoolMag.instance.createNodePool("bullet_2",1,o),t=p.NodePoolMag.instance.getNodeFromPool("bullet_2"),a.label=2;case 2:return t.x=e.x,t.y=e.y,d.GameGlobalVariable.languaNode.addChild(t),t.scale=0,cc.tween(t).to(.2,{scale:1}).start(),n=t.getComponent(h.default),i=f.BuffMgr.getDurianBomb(this.attackfang),n.initializeBullet({attack:this.attack*d.GameGlobalVariable.liulianlanguabomb,attackfanwei:i.value[0],playerId:this.attackfang,skinlevel:4,isbaoji:this.isbaoji},cc.v2(e.x,e.y)),[2]}})})},t.prototype.sendBullet1=function(){var e=this,t=d.GameGlobalVariable.paths.children[this.moveindex];if(t){if(5===this.moveindex)this.node.setPosition(t.x,t.y),this.moveindex-=1;else{var o=function(t){var n=d.GameGlobalVariable.paths.children[e.moveindex];if(n){var i=cc.Vec2.subtract(cc.v2(),cc.v2(n.x,n.y),e.node.getPosition()),a=Math.atan2(i.y,i.x),r=cc.Vec2.distance(e.node.getPosition(),cc.v2(n.x,n.y)),c=t,s=0;r<c&&(s=c-r,c=r),e.node.x+=Math.cos(a)*c,e.node.y+=Math.sin(a)*c,s>0&&(e.moveindex-=1,o(s))}else e.hideBullet()};o(this.getBulletSpeed())}this.updateDirection()}else this.hideBullet()},t.prototype.updateDirection=function(){switch(this.moveindex){case 4:this.auto_ui.node_effNode.angle=0;break;case 3:this.auto_ui.node_effNode.angle=-90;break;case 2:this.auto_ui.node_effNode.angle=180;break;case 1:this.auto_ui.node_effNode.angle=90;break;case 0:this.auto_ui.node_effNode.angle=0}},t.prototype.getBulletAttack=function(){return this.attack},t.prototype.getBulletSpeed=function(){return this.bulletspeed*=d.GameGlobalVariable.jiasuState,this.bulletspeed},t.prototype.onUpdate=function(){this.issend&&(this.node.children[0].angle+=this.getBulletSpeed(),this.sendBullet1(),this.attackfang.playerInfo.equipLevel>=4&&this.createLanGua())},a([y(s.default)],t.prototype,"auto_ui",void 0),a([y],t.prototype,"bulletId",void 0),a([y(cc.Sprite)],t.prototype,"img",void 0),a([_],t)}(u.default));o.default=v,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove_UIBindings":"UI_BulletMove_UIBindings"}],UI_Bullet:[function(e,t,o){"use strict";cc._RF.push(t,"fb126qN7c1NuqbbyTRBO6z1","UI_Bullet");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./GameGlobalVariable"),d=e("./NodePoolMag"),p=e("./UI_MosterLogic"),h=e("./UI_BulletCollider"),f=e("./Excel"),g=cc._decorator,_=g.ccclass,y=g.property,v=function(e){function t(){var t=e.call(this)||this;return t.bulletId=1,t.img=null,t.attack=0,t.isbaoji=!1,t.attackfang=null,t.attacktype=1,t.nowtagMoster=null,t.nowdirection=0,t.tuoweiNode=null,t.tagMosterX=0,t.tagMosterY=0,t.isshua=!1,t.offtime=0,t.bulletspeed=20,t.issend=!1,t}return i(t,e),t.prototype.initializeBullet=function(e,t){return r(this,void 0,Promise,function(){var o,n,i,a,r;return c(this,function(c){switch(c.label){case 0:if(this.attack=e.attack,this.isshua=!1,this.attackfang=e.playerId,this.attacktype=e.feixintype,this.isbaoji=e.isbaoji,this.nowtagMoster=t,o=cc.v2(),cc.Vec2.subtract(o,cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition()),this.nowdirection=Math.atan2(o.y,o.x),this.issend=!0,n=f.Excel.getFruitBuff(this.attackfang.sgtianfuid))switch(n.buffefftype){case 10:i=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition()),a=i/n.value[0]*(n.value[1]/100),this.attack+=this.attack*a}return[4,this._loadRes(s.BundleNames.Common,"res/player/player"+this.attackfang.playerId+"_1",cc.SpriteFrame)];case 1:return r=c.sent(),this.img.spriteFrame=r,this.createTrailEffect(),[2]}})})},t.prototype.onDisable=function(){this.tuoweiNode&&(d.NodePoolMag.instance.recycleNodeToPool("tuowei",this.tuoweiNode),this.tuoweiNode=null)},t.prototype.createTrailEffect=function(){return r(this,void 0,Promise,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return(e=d.NodePoolMag.instance.getNodeFromPool("tuowei"))?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/effpre/UI_TuoWei",cc.Prefab)];case 1:t=o.sent(),d.NodePoolMag.instance.createNodePool("tuowei",1,t),e=d.NodePoolMag.instance.getNodeFromPool("tuowei"),o.label=2;case 2:return this.tuoweiNode=e,u.GameGlobalVariable.effNode.addChild(e),[2]}})})},t.prototype.getBulletAttack=function(e){var t=this.attack;if(e.isjianshu&&14===this.attackfang.playerId){var o=f.Excel.shuiguo(1014);t+=t*(f.Excel.getFruitBuff(o.talent).value[0]/100)}return 1===e.nowmosterdata.boss&&10===this.attackfang.playerId&&(o=f.Excel.shuiguo(1010),t+=t*(f.Excel.getFruitBuff(o.talent).value[0]/100)),t},t.prototype.sendBulletType1=function(e){var t=cc.v2();this.isshua||(this.tagMosterX=this.nowtagMoster.x,this.tagMosterY=this.nowtagMoster.y),cc.Vec2.subtract(t,cc.v2(this.tagMosterX,this.tagMosterY),this.node.getPosition()),this.nowdirection=Math.atan2(t.y,t.x),this.moveBullet(this.nowdirection,e)},t.prototype.moveBullet=function(e,t){this.node.x+=Math.cos(e)*this.bulletspeed,this.node.y+=Math.sin(e)*this.bulletspeed,this.nowtagMoster.getComponent(p.default).isDie&&(this.isshua=!0);var o=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition());if(this.offtime+=t,o<=25&&this.img.node.getComponent(h.default).onOptimizedCollision(this.nowtagMoster),this.isshua){var n=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition());this.offtime+=t,n<=50&&this.hideBullet(),this.offtime>=.5&&(this.offtime=0,this.hideBullet())}},t.prototype.hideBullet=function(){this.issend=!1,d.NodePoolMag.instance.recycleNodeToPool("bullet_"+this.bulletId,this.node)},t.prototype.getCurrentMonsterNodes=function(e){for(var t=this.attackfang.mosterNodes.children,o=[],n=0;n<t.length;n++){var i=t[n];cc.Vec2.distance(i.getPosition(),this.node.getPosition())-(i.width/2+this.node.width/2)<=e&&o.push(i)}return o},t.prototype.sendBulletType2=function(){},t.prototype.getBulletSpeed=function(){return this.bulletspeed*=u.GameGlobalVariable.jiasuState,this.bulletspeed},t.prototype.onUpdate=function(e){this.issend&&(this.sendBulletType1(e),this.tuoweiNode&&(this.tuoweiNode.x=this.node.x,this.tuoweiNode.y=this.node.y))},a([y()],t.prototype,"bulletId",void 0),a([y(cc.Sprite)],t.prototype,"img",void 0),a([_],t)}(l.default);o.default=v,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletCollider":"UI_BulletCollider","./UI_MosterLogic":"UI_MosterLogic"}],UI_CameraControl:[function(e,t,o){"use strict";cc._RF.push(t,"05b01LKIy1MpJ/22zpE6jci","UI_CameraControl");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=cc._decorator.ccclass,u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){r.EventMgrInstance.addListener(s.EVENT_TYPE.Game_CameraControl,this.setCamera,this),r.EventMgrInstance.addListener("zuobiaozhuanhuan",this.convertPosition,this)},t.prototype.setCamera=function(e){cc.winSize.height/cc.winSize.width<=2&&(e-=.1);var t=0;1!==e&&(t=-50);var o="cubicActionIn";1!==e&&(o="cubicActionOut");var n=this.node.getComponent(cc.Camera);cc.tween(this.node).to(.7,{y:t},{easing:o}).start(),cc.tween(n).to(.7,{zoomRatio:e},{easing:o}).call(function(){r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Hide),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.GAME_LOCK_SCREE,!1)}).start()},t.prototype.convertPosition=function(e,t){var o=this.node.getComponent(cc.Camera),n=cc.v2();o.getScreenToWorldPoint(e,n),t(n)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.Game_CameraControl,this.setCamera,this)},a([l],t)}(c.default);o.default=u,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_ChiTiaoItem:[function(e,t,o){"use strict";cc._RF.push(t,"ce391aWdktAd7WS9N/RJL/2","UI_ChiTiaoItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=(c.property,c.inspector,function(e){function t(){return e.call(this)||this}return i(t,e),a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_ChiTiao_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"3141cUm4cJDmbGc9SHCZOH8","UI_ChiTiao_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_huanyipilb=null,t.txt_allhavelb=null,t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_huanyipilb",void 0),a([l(cc.Label)],t.prototype,"txt_allhavelb",void 0),a([s("UI_ChiTiao_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ChiTiao:[function(e,t,o){"use strict";cc._RF.push(t,"de461Cen4VP8rEDZLBj8LDC","UI_ChiTiao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_ChiTiao_UIBindings"),l=e("./UIView"),u=e("./Excel"),d=e("./BuffMag"),p=e("./BundleConfig"),h=e("./ExcelUtil"),f=e("./GameGlobalVariable"),g=e("./GameDataManager"),_=e("./CommonUtils"),y=e("./PlayerDataManager"),v=e("./GuideControl"),m=e("./LogManager"),b=e("./ADManager"),I=e("./AIControl"),w=e("./AudioManager"),E=e("./EventManager"),M=e("./EvenType"),C=e("./Const_Common"),B=e("./LanMgr"),P=cc._decorator,x=P.ccclass,G=P.property,T=(P.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.citiaoNode=null,t.btNode=null,t.huanNode=null,t.allNode=null,t.currentData={},t.isEffect=!1,t.currentCiTiao=[],t.currentSelectId=1,t.isClick=!1,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.btNode.scale=0,this.currentData=e,m.LogMgr.debug(e,t),this.initCiTiao(),this.updateCiShu(),this.updateBtNode(),_.default.clearCoins()},t.prototype.updateBtNode=function(){f.GameGlobalVariable.huanyipi<=0&&(this.huanNode.active=!1),f.GameGlobalVariable.allhave<=0&&(this.allNode.active=!1)},t.prototype.updateCiShu=function(){var e=h.ExcelUtil.getMatchingData(u.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value;this.auto_ui.txt_huanyipilb.string=f.GameGlobalVariable.huanyipi+"/"+e;var t=h.ExcelUtil.getMatchingData(u.Excel.shuiguoconfig_all,"configkey","allhave")[0].value;this.auto_ui.txt_allhavelb.string=f.GameGlobalVariable.allhave+"/"+t;var o=2,n=f.GameGlobalVariable.nowlevel;-1===n&&(o=1,n=f.GameGlobalVariable.teshulevel),g.GameDataMgr.updateCurrentLevel(n,f.GameGlobalVariable.huanyipi,f.GameGlobalVariable.allhave,o)},t.prototype.showEff=function(){var e=this;w.AudioMgr.playSoundEffect("sound/bufftanchu",!1,p.BundleNames.Game);var t=this.citiaoNode.children;t.forEach(function(e){return e.scale=0}),this.btNode.scale=0;var o=0;this.schedule(function(){o<3?cc.tween(t[o]).to(.2,{scale:1.1}).to(.1,{scale:1}).start():cc.tween(e.btNode).to(.2,{scale:1.1}).to(.1,{scale:1}).call(function(){var o=(e.node.height-1334)/2;if(y.PlayerDataMgr.getGuideIndexByTaskName(C.GuideName.GameBag)===C.GameBagGuideIndex.EntryGuide7){var n=t[0].convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(t[0].width,t[0].height);v.GuideCtrlInstance.showGuide({callBack:function(){e.onClick1(),y.PlayerDataMgr.setGuideIndex(C.GuideName.GameBag,C.GameBagGuideIndex.EntryGuide7Completion)},sayStr:B.langMgr.getStr("0080"),sayNodePos:cc.v2(0,500+o),wPos:n,size:i})}else e.AICheck()}).start(),o+=1},.1,3)},t.prototype.onHuanYiPi=function(){var e=this,t="\u89c6\u9891\u6362\u4e00\u6279\u8bcd\u6761";if(1===f.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u6362\u4e00\u6279\u8bcd\u6761";else{var o=g.GameDataMgr.getCurrentLevelWaveState(f.GameGlobalVariable.nowlevel,2)+1;t=f.GameGlobalVariable.nowlevel+"\u7ae0_"+o+"\u6ce2_"+t}b.ADMgr.showRewardedVideoAd(t,function(){f.GameGlobalVariable.decrementHuanYiPi(),e.updateBtNode(),e.updateCiShu(),e.initCiTiao()})},t.prototype.initCiTiao=function(){return r(this,void 0,Promise,function(){var e,t,o,n,i,a,r,s,l;return c(this,function(c){switch(c.label){case 0:if(this.isEffect)return[2];y.PlayerDataMgr.getGuideIndexByTaskName(C.GuideName.GameBag)===C.GameBagGuideIndex.EntryGuide7?(this.currentCiTiao.push(u.Excel.fruitcitiao(45)),this.currentCiTiao.push(u.Excel.fruitcitiao(53)),this.currentCiTiao.push(u.Excel.fruitcitiao(56))):(e=this.currentData.nowbo,t=!0,5===e&&1===f.GameGlobalVariable.nowlevel&&(t=!1),this.currentCiTiao=d.BuffMgr.getCurrentCiTiao(t)),console.log("\u5f53\u524d\u8bcd\u6761\u4e0b\u4fe1\u606f",this.currentCiTiao),o=this.citiaoNode.children,n=0,c.label=1;case 1:return n<this.currentCiTiao.length?(i=this.currentCiTiao[n],(a=o[n]).active=!0,(r=a.getChildByName("context").getComponent(cc.RichText)).maxWidth=450,this.setCiTiaoContent(r,i),a.getChildByName("diejia").active=-1!==i.citiaochuxian,[4,this._loadRes(p.BundleNames.Game,"res/\u6218\u6597buff/citiao"+i.quality,cc.SpriteFrame)]):[3,5];case 2:return s=c.sent(),a.getChildByName("img").getComponent(cc.Sprite).spriteFrame=s,[4,this._loadRes(p.BundleNames.Common,"res/skillicon/skill_"+i.id,cc.SpriteFrame)];case 3:l=c.sent(),a.getChildByName("icon1").getComponent(cc.Sprite).spriteFrame=l,c.label=4;case 4:return n++,[3,1];case 5:return this.showEff(),[2]}})})},t.prototype.setCiTiaoContent=function(e,t){var o=t.citiaomiaoshu,n=u.Excel.getFruitBuff(t.citiaoshuzhitype),i=(o=_.default.replaceStringSymbols(o,"[N]",["\n"])).split("[X]"),a="";if(i.length>1)for(var r=0;r<i.length;r++){var c=i[r];n.value[r]&&r<c.length-1&&44!==t.id?a+="<color=#ffffff>"+c+"</c><color=#00ff00>"+n.value[r]+"</color>":a+="<color=#ffffff>"+c+"</c>"}else a=i[0];a="<outline color=#000000 width=3>"+a+"</outline>",e.string=a},t.prototype.onClickAll=function(){var e=this;if(!this.isEffect){var t="\u89c6\u9891\u5168\u90fd\u8981\u8bcd\u6761";if(1===f.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u5168\u90fd\u8981\u8bcd\u6761";else{var o=g.GameDataMgr.getCurrentLevelWaveState(f.GameGlobalVariable.nowlevel,2)+1;t=f.GameGlobalVariable.nowlevel+"\u7ae0_"+o+"\u6ce2_"+t}b.ADMgr.showRewardedVideoAd(t,function(){f.GameGlobalVariable.decrementAllHave(),e.updateBtNode(),e.updateCiShu(),d.BuffMgr.addCurrentCiTiao(e.currentCiTiao[0]),d.BuffMgr.addCurrentCiTiao(e.currentCiTiao[1]),d.BuffMgr.addCurrentCiTiao(e.currentCiTiao[2]),e._close(),e.currentData.back(),setTimeout(function(){E.EventMgrInstance.emitEvent(M.EVENT_TYPE.Game_Add_CiTiao)},100)})}},t.prototype.onClick1=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[2].opacity=0,t[1].opacity=0,t[0].opacity=255,cc.tween(t[0]).to(.4,{scale:1.1},{easing:"backOut"}).delay(.2).call(function(){e.currentSelectId=1,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onClick2=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[2].opacity=0,t[0].opacity=0,t[1].opacity=255,cc.tween(t[1]).to(.4,{scale:1.1},{easing:"backOut"}).delay(.2).call(function(){e.currentSelectId=2,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onClick3=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[1].opacity=0,t[0].opacity=0,t[2].opacity=255,cc.tween(t[2]).delay(.2).to(.4,{scale:1.1},{easing:"backOut"}).call(function(){e.currentSelectId=3,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onCloseView=function(){d.BuffMgr.addCurrentCiTiao(this.currentCiTiao[this.currentSelectId-1]),this._close(),this.currentData.back(),E.EventMgrInstance.emitEvent(M.EVENT_TYPE.Game_Add_CiTiao)},t.prototype.AICheck=function(){var e=this;if(I.default._instance.isOpen){if(h.ExcelUtil.getMatchingData(u.Excel.shuiguoconfig_all,"configkey","allhave")[0].value>0){var t=0;if(this.currentCiTiao.forEach(function(e){e.quality>1&&t++}),t>=2)return I.default._instance.displayClickButton(this.allNode,function(){e.onClickAll()})}for(var o=0,n=0,i=0;i<this.currentCiTiao.length;i++){var a=this.currentCiTiao[i];a.quality>o&&(o=a.quality,n=i)}var r=null,c=null;switch(n){case 0:r=this.citiaoNode.children[0],c=this.onClick1.bind(this);break;case 1:r=this.citiaoNode.children[1],c=this.onClick2.bind(this);break;case 2:r=this.citiaoNode.children[2],c=this.onClick3.bind(this)}I.default._instance.displayClickButton(r,c)}},a([G(s.default)],t.prototype,"auto_ui",void 0),a([G(cc.Node)],t.prototype,"citiaoNode",void 0),a([G(cc.Node)],t.prototype,"btNode",void 0),a([G(cc.Node)],t.prototype,"huanNode",void 0),a([G(cc.Node)],t.prototype,"allNode",void 0),a([x],t)}(l.default));o.default=T,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./LanMgr":"LanMgr","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_ChiTiao_UIBindings":"UI_ChiTiao_UIBindings"}],UI_CreateMoster:[function(e,t,o){"use strict";cc._RF.push(t,"23771QohcxPTapMNjhureHO","UI_CreateMoster");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EventManager"),u=e("./LogManager"),d=e("./ResKeeper"),p=e("./CommonUtils"),h=e("./EvenType"),f=e("./Excel"),g=e("./GameGlobalVariable"),_=e("./NodePoolMag"),y=e("./UI_MosterLogic"),v=cc._decorator,m=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pathsNode=null,t.onOver=null,t.isCreateMoster=!1,t.mosterboshu=0,t.mostertime=0,t.mosteraindex=0,t.chuguaicount=0,t.isBoShuOver=!1,t.isonguai=!1,t.miaojishu=0,t}return i(t,e),t.prototype.onEnable=function(){l.EventMgrInstance.addListener(h.EVENT_TYPE.Game_Moster_FenLie,this.splitCreateMonster,this),l.EventMgrInstance.addListener(h.EVENT_TYPE.Game_ZhaoHuan_Moster,this.summonCreateMonster,this)},t.prototype.setOver=function(e){this.onOver=e},t.prototype.resetBoShu=function(){this.mostertime=0,this.mosteraindex=0},t.prototype.initMoster=function(){this.mostertime=0,this.isCreateMoster=!0},t.prototype.summonCreateMonster=function(e){var t=this,o=g.GameGlobalVariable.getMonsterDistance(e,this.pathsNode);this.scheduleOnce(function(){t.addMonster(e.mosterId,o.pos,null,o.tagindex)},.1)},t.prototype.splitCreateMonster=function(e){var t=this,o=g.GameGlobalVariable.splitCreateMonster(e,this.pathsNode);this.scheduleOnce(function(){o.forEach(function(o){t.addMonster(e.mosterId,o.pos,null,o.tagindex)})},.1)},t.prototype.recycleMonster=function(){this.resetValues();for(var e=this.node.children,t=e.length,o=0;o<t;o++){var n=e[0];_.NodePoolMag.instance.recycleNodeToPool("moster_"+n.getComponent(y.default).mosterId,n)}},t.prototype.getCurrentWave=function(){var e;e=1===g.GameGlobalVariable.isSpecialLevel()?f.Excel.shuiguotiaozhan(g.GameGlobalVariable.teshulevel):f.Excel.shuiguoguanqia(g.GameGlobalVariable.nowlevel);var t=this.mosterboshu+1;return t>e.levelboshuid.length&&(t=e.levelboshuid.length),t},t.prototype.resetValues=function(){this.mostertime=0,this.mosteraindex=0,this.chuguaicount=0},t.prototype.createMonster=function(){var e,t=this,o=(1===g.GameGlobalVariable.isSpecialLevel()?f.Excel.shuiguotiaozhan(g.GameGlobalVariable.teshulevel):f.Excel.shuiguoguanqia(g.GameGlobalVariable.nowlevel)).levelboshuid[this.mosterboshu];if(o){var n=f.Excel.shuiguoboshu(o),i=-1,a=n.mosterid[this.mosteraindex];if(!a)return u.LogMgr.debug("\u5f53\u524d\u8fd9\u4e00\u6ce2\u602a\u7269\u5168\u90e8\u51fa\u5b8c"),void(null===(e=this.onOver)||void 0===e||e.call(this));if(a[2]===this.mostertime&&(i=this.mosteraindex,this.mosteraindex+=1),-1===i)return;this.mostertime=0;var r=a[0],c=function(e){t.addMonster(r,t.pathsNode.children[0].getPosition(),n),--e>0&&t.scheduleOnce(function(){c(e)},p.default.limitIntegerInRange(1,3)/10)};c(a[1])}else u.LogMgr.debug("\u901a\u5173")},t.prototype.addMonster=function(e,t,o,n){return void 0===n&&(n=1),r(this,void 0,Promise,function(){var i,a,r;return c(this,function(c){switch(c.label){case 0:return 1===(i=f.Excel.shuiguoguaiwu(e)).boss&&l.EventMgrInstance.emitEvent(h.EVENT_TYPE.GAME_SHOW_BOOS),(a=_.NodePoolMag.instance.getNodeFromPool("moster_"+i.mostertype))?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/moster/moster"+i.mostertype,cc.Prefab)];case 1:r=c.sent(),_.NodePoolMag.instance.createNodePool("moster_"+i.mostertype,1,r),a=_.NodePoolMag.instance.getNodeFromPool("moster_"+i.mostertype),c.label=2;case 2:return a.setPosition(t),a.scale=0,cc.tween(a).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),this.node.addChild(a),this.chuguaicount++,a.getComponent(y.default).initializeMonsterInfo(e,this.pathsNode,this.chuguaicount,o,n),[2]}})})},t.prototype.onCreateMonster=function(e){this.miaojishu+=e*g.GameGlobalVariable.jiasuState,this.miaojishu>=1&&this.isCreateMoster&&(this.miaojishu=0,this.createMonster(),this.mostertime+=.5)},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(h.EVENT_TYPE.Game_Moster_FenLie,this.splitCreateMonster,this),l.EventMgrInstance.removeListener(h.EVENT_TYPE.Game_ZhaoHuan_Moster,this.summonCreateMonster,this)},a([b(cc.Node)],t.prototype,"pathsNode",void 0),a([m],t)}(d.default));o.default=I,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_MosterLogic":"UI_MosterLogic"}],UI_DeBugItem:[function(e,t,o){"use strict";cc._RF.push(t,"6e90c4zKlNEBbD43J+r3z2p","UI_DeBugItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./Excel"),d=e("./GameDataManager"),p=e("./HallGlobalVariable"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typeadd=0,t.togglebeilv1=null,t.togglebeilv2=null,t.jiabeicode=1,t}return i(t,e),t.prototype.onEnable=function(){this.jiabeicode=1,this.togglebeilv1&&this.togglebeilv2&&(this.togglebeilv1.isChecked=!1,this.togglebeilv2.isChecked=!1)},t.prototype.addHuoBi=function(){switch(this.typeadd){case 1:l.PlayerDataMgr.addDiamond(100*this.jiabeicode);break;case 2:l.PlayerDataMgr.addPower(100*this.jiabeicode);break;case 3:l.PlayerDataMgr.addGold(100*this.jiabeicode);break;case 4:this.addEquipFragments([100*this.jiabeicode,0,0]);break;case 5:this.addEquipFragments([0,100*this.jiabeicode,0]);break;case 6:this.addEquipFragments([0,0,100*this.jiabeicode]);break;case 7:this.handleMaxLevelUpdate();break;case 8:this.handleChallengeUpdate();break;case 9:l.PlayerDataMgr.resetWuJinCount(!0)}},t.prototype.onClickTen=function(){10===this.jiabeicode?(this.jiabeicode=1,this.togglebeilv1&&(this.togglebeilv1.isChecked=!1)):(this.jiabeicode=10,this.togglebeilv2&&(this.togglebeilv2.isChecked=!1),this.togglebeilv1&&(this.togglebeilv1.isChecked=!0))},t.prototype.onClickTen100=function(){100===this.jiabeicode?(this.jiabeicode=1,this.togglebeilv2&&(this.togglebeilv2.isChecked=!1)):(this.jiabeicode=100,this.togglebeilv1&&(this.togglebeilv1.isChecked=!1),this.togglebeilv2&&(this.togglebeilv2.isChecked=!0))},t.prototype.addEquipFragments=function(e){p.default.getSuiPian(e).forEach(function(e,t){l.PlayerDataMgr.addEquipFragments(t,e)})},t.prototype.handleMaxLevelUpdate=function(){var e=d.GameDataMgr.getCurrentMaxLevel();e+=1;var t=u.Excel.shuiguoguanqia(e+1).levelboshuid.length;d.GameDataMgr.updateLevelWave(e,t,2),p.default.isNeedResetWareHouse=!0,r.EventMgrInstance.emitEvent(s.EVENT_TYPE.HallResetUnLockFurit),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.HallResetBag)},t.prototype.handleChallengeUpdate=function(){var e=u.Excel.shuiguotiaozhan(1).levelboshuid.length;d.GameDataMgr.updateLevelWave(1,e,1)},a([g],t.prototype,"typeadd",void 0),a([g(cc.Toggle)],t.prototype,"togglebeilv1",void 0),a([g(cc.Toggle)],t.prototype,"togglebeilv2",void 0),a([f],t)}(c.default));o.default=_,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_Debug:[function(e,t,o){"use strict";cc._RF.push(t,"f4968oXKAhCu6M0XmHymk0H","UI_Debug");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./List"),c=cc._decorator,s=c.ccclass,l=c.property,u=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list_logs=null,t._logs=[],t}return i(t,e),t.prototype.refresh=function(e){this._logs=e,this.list_logs.numItems=e.length},t.prototype.logItemRender=function(e,t){e.getComponent(cc.Label).string=this._logs[t]},a([l(r.default)],t.prototype,"list_logs",void 0),a([s],t)}(cc.Component));o.default=u,cc._RF.pop()},{"./List":"List"}],UI_DuWu:[function(e,t,o){"use strict";cc._RF.push(t,"0f6e7ze3BdBNJ8MCe0FTo8G","UI_DuWu");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./NodePoolMag"),s=e("./BuffMag"),l=e("./UI_MosterLogic"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowBuffData=null,t.dushanPlayer=null,t.nowMoster=[],t.offTime=0,t}return i(t,e),t.prototype.initializeInfo=function(e,t){var o=this;this.nowBuffData=e,this.dushanPlayer=t,this.scheduleOnce(function(){o.nowMoster=[],c.NodePoolMag.instance.recycleNodeToPool("duwu",o.node)},this.nowBuffData.bufftime)},t.prototype.onCollisionEnter=function(e){var t=e.node.getComponent(l.default);this.nowMoster.push(t)},t.prototype.onCollisionExit=function(e){var t=e.node.getComponent(l.default),o=this.nowMoster.findIndex(function(e){return e.node.uuid===t.node.uuid});-1!==o&&this.nowMoster.splice(o,1)},t.prototype.onUpdate=function(e){var t=this;this.offTime+=e,this.offTime>=1&&(this.nowMoster.forEach(function(e){var o=s.BuffMgr.applyAttackBonus(t.dushanPlayer,t.dushanPlayer.sgattack,1);e.fujiaAttack(o,3,t.dushanPlayer)}),this.offTime=0)},a([p],t.prototype,"nowBuffData",void 0),a([p],t.prototype,"dushanPlayer",void 0),a([p],t.prototype,"nowMoster",void 0),a([p],t.prototype,"offTime",void 0),a([d],t)}(r.default));o.default=h,cc._RF.pop()},{"./BuffMag":"BuffMag","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_MosterLogic":"UI_MosterLogic"}],UI_Entry:[function(e,t,o){"use strict";cc._RF.push(t,"6c062MfaE9MvamhpuU0uzRy","UI_Entry");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./Const_Common"),l=e("./EvenType"),u=e("./PlayerDataManager"),d=e("./ExcelLoader"),p=e("./GameDataManager"),h=e("./GameGlobalVariable"),f=e("./UIConfig_Game"),g=e("./UIConfig_Home"),_=e("./BundleConfig"),y=e("./GameConfig"),v=e("./AudioManager"),m=e("./EventManager"),b=e("./LogManager"),I=e("./ResLoader"),w=e("./UIManager"),E=e("./UIView"),M=e("./0/YpNetMag"),C=cc._decorator,B=C.ccclass,P=C.property,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress_loading=null,t}return i(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype._show=function(){this.progress_loading.progress=0,this.startGameLoading()},t.prototype.startGameLoading=function(){var e=[this.loadGameConfig,this.loadExcelData,this.loadUserData,this.loadCommonBundle,this.loadMainBundle];this.completeTasks(e,this.loadGame),cc.sys.platform,cc.sys.WECHAT_GAME},t.prototype.loadExcelData=function(){return new Promise(function(e){var t=(new Date).getTime();d.ExcelLoader.loadAllExcelFiles().then(function(){console.log("\u6e38\u620f\u6570\u636e\u8868\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-t),e(!0)})})},t.prototype.loadGame=function(){this._close(),u.PlayerDataMgr.getGuideIndexByTaskName(s.GuideName.GameBag)!==s.GameBagGuideIndex.GuideCompletion?(u.PlayerDataMgr.gmSetGuideIndex(s.GuideName.GameBag,s.GameBagGuideIndex.InitialGuide1),p.GameDataMgr.clearGameBagData(),h.GameGlobalVariable.nowlevel=1,w.default.open(_.BundleNames.Game,f.UIView_Game.UI_GameView)):(m.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_Load_View,!0),w.default.open(_.BundleNames.Home,g.UIView_Home.UI_Hall)),this.onInitWhiteName()},t.prototype.completeTasks=function(e,t){var o=this,n=0,i=0,a=Promise.resolve();e.forEach(function(t){a=a.then(function(){return t()}).then(function(){n++,o.setProgress(n/e.length)}).catch(function(){i++})}),a.then(function(){0===i&&t.call(o)})},t.prototype.loadGameConfig=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){var e,n;return c(this,function(i){switch(i.label){case 0:return e=(new Date).getTime(),[4,I.default.loadRes("resources","config/GameConfig",cc.JsonAsset)];case 1:return(n=i.sent())?(y.default.appConfig=n.json,console.log("Load game config success:",y.default.appConfig),n.decRef(),t(!0),console.log("\u6e38\u620f\u672c\u5730\u914d\u7f6e\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-e)):(console.log("Load game config failure"),o(!1)),[2]}})})})},t.prototype.loadRemoteConfig=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){var e,n,i,a;return c(this,function(r){switch(r.label){case 0:return e=(new Date).getTime(),(n=y.default.appConfig.RemoteUrl)?(i=n+"/ADConfig.json",[4,Promise.resolve({json:{ADUnitId:[""]}})]):[3,2];case 1:return(a=r.sent())&&a.json?(y.default.adConfig=a.json,console.log("Load remote config success:",y.default.adConfig),t(!0),console.log("\u8fdc\u7a0b\u914d\u7f6e\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-e)):(console.log("Load remote config failure:",i),o(!1)),[3,3];case 2:console.log("Load remote config failure: RemoteUrl is null"),o(!1),r.label=3;case 3:return[2]}})})})},t.prototype.loadCommonBundle=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){var e,n;return c(this,function(i){switch(i.label){case 0:return e=(new Date).getTime(),[4,I.default.loadBundle(_.BundleNames.Common)];case 1:return n=i.sent(),console.log("Loaded main bundle",n),n?(t(!0),console.log("Common\u5206\u5305\u4e0b\u8f7d",(new Date).getTime()-e)):o(!1),[2]}})})})},t.prototype.loadMainBundle=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){var e,n;return c(this,function(i){switch(i.label){case 0:return e=(new Date).getTime(),[4,I.default.loadBundle(_.MainGameBundle)];case 1:return n=i.sent(),console.log("Loaded main bundle",n),n?(t(!0),console.log("Home\u5206\u5305\u4e0b\u8f7d",(new Date).getTime()-e)):o(!1),[2]}})})})},t.prototype.sdk_init=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){var e;return c(this,function(){e=(new Date).getTime();try{t(!0),console.log("\u6e38\u54c1\u670d\u52a1\u5668\u521d\u59cb\u5316",(new Date).getTime()-e)}catch(n){o(!1)}return[2]})})})},t.prototype.sdk_login=function(){var e=this;return new Promise(function(t,o){return r(e,void 0,void 0,function(){return c(this,function(){try{t(!0)}catch(e){o(!1)}return[2]})})})},t.prototype.onInitWhiteName=function(){return r(this,void 0,void 0,function(){return c(this,function(){return u.PlayerDataMgr.WHITE_NAME_NO_VIDEO=!0,[2]})})},t.prototype.loadUserData=function(){var e=this;return new Promise(function(t){return r(e,void 0,void 0,function(){var e;return c(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),console.log("\u521d\u59cb\u5316\u6570\u636e"),v.AudioMgr.initialize(),h.GameGlobalVariable.initializeConfig(),[4,M.GameNetworkManager.initServer({})];case 1:return o.sent(),[3,3];case 2:return e=o.sent(),b.LogMgr.error("load user data error:",e),[3,3];case 3:return t(!0),[2]}})})})},t.prototype.setProgress=function(e){e=Math.max(0,Math.min(1,e)),this.progress_loading.progress=e},a([P(cc.ProgressBar)],t.prototype,"progress_loading",void 0),a([B],t)}(E.default);o.default=x,cc._RF.pop()},{"./0/YpNetMag":"YpNetMag","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./ExcelLoader":"ExcelLoader","./GameConfig":"GameConfig","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./ResLoader":"ResLoader","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView"}],UI_EquipInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"fc5d8F5VDtPsrxpCVpZyD97","UI_EquipInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_upLevelBtn=null,t.btn_clearBtn=null,t.btn_useBtn=null,t.node_attributeFather=null,t.node_cardFather=null,t.node_ciTiaoFather=null,t.node_upLevelEffect=null,t.sp_tianFuIcon=null,t.txt_nameLabel=null,t.txt_decLabel=null,t.txt_upPriceLabel=null,t.txt_unLockLabel=null,t._btnNames=["btn_closeBtn","btn_upLevelBtn","btn_clearBtn","btn_useBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Button)],t.prototype,"btn_upLevelBtn",void 0),a([l(cc.Button)],t.prototype,"btn_clearBtn",void 0),a([l(cc.Button)],t.prototype,"btn_useBtn",void 0),a([l(cc.Node)],t.prototype,"node_attributeFather",void 0),a([l(cc.Node)],t.prototype,"node_cardFather",void 0),a([l(cc.Node)],t.prototype,"node_ciTiaoFather",void 0),a([l(cc.Node)],t.prototype,"node_upLevelEffect",void 0),a([l(cc.Sprite)],t.prototype,"sp_tianFuIcon",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([l(cc.Label)],t.prototype,"txt_decLabel",void 0),a([l(cc.Label)],t.prototype,"txt_upPriceLabel",void 0),a([l(cc.Label)],t.prototype,"txt_unLockLabel",void 0),a([s("UI_EquipInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_EquipInfo:[function(e,t,o){"use strict";cc._RF.push(t,"54fb5oUD3RO0Y4QC4SANMKG","UI_EquipInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_EquipInfo_UIBindings"),l=e("./UIView"),u=e("./Excel"),d=e("./BundleConfig"),p=e("./Item_Bag_EquipItem"),h=e("./PlayerDataManager"),f=e("./EventManager"),g=e("./EvenType"),_=e("./HallGlobalVariable"),y=e("./Item_Bag_CiTiao"),v=e("./TipsManager"),m=e("./CommonUtils"),b=e("./AudioManager"),I=e("./GuideControl"),w=e("./RedPointControl"),E=e("./AIControl"),M=e("./Const_Common"),C=e("./Const_Game"),B=e("./LanMgr"),P=cc._decorator,x=P.ccclass,G=P.property,T=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.ciTiaoPrefab=null,t.cardComponent=null,t}return i(t,e),t.prototype._show=function(e){this.args=e,this.initializeEquipInfo()},t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){h.PlayerDataMgr.getGuideIndexByTaskName(M.GuideName.EquipLevelUp)==M.UpEquipLevelGuideIndex.GuideClickUpgrade3?e.showEquipGuide():e.checkWearGuide()},.5)},t.prototype.showEquipGuide=function(){var e=this,t=this.auto_ui.btn_upLevelBtn.node,o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(t.width,t.height);I.GuideCtrlInstance.showGuide({callBack:function(){e.clickUpLevel(),h.PlayerDataMgr.setGuideIndex(M.GuideName.EquipLevelUp,M.UpEquipLevelGuideIndex.GuideBattle4),I.GuideCtrlInstance.showGuide({callBack:function(){h.PlayerDataMgr.setGuideIndex(M.GuideName.EquipLevelUp,M.UpEquipLevelGuideIndex.GuideCompletion),_.default.selfMap["\u6218\u6597\u6309\u94ae"]&&(I.GuideCtrlInstance.showOneFingerGuide({parent:_.default.selfMap["\u6218\u6597\u6309\u94ae"],isWillClickClose:!0,x:0,y:0,getFingerCallBack:null}),e._close())},sayStr:B.langMgr.getStr("0081")})},sayStr:B.langMgr.getStr("0082"),wPos:o,size:n})},t.prototype.checkWearGuide=function(){h.PlayerDataMgr.getGuideIndexByTaskName(M.GuideName.FruitDressUpEquip)==M.DressUpEquipGuideIndex.GuideDressing?h.PlayerDataMgr.setGuideIndex(M.GuideName.FruitDressUpEquip,M.DressUpEquipGuideIndex.GuideCompletion):this.checkAI()},t.prototype.initializeEquipInfo=function(){var e=u.Excel.shuiguo(this.args.openData.shuiGuoId),t=h.PlayerDataMgr.getEquipDataById(this.args.openData.shuiGuoId);this.auto_ui.txt_nameLabel.string=e.name,this.auto_ui.txt_decLabel.string=e.shuiguomiaoshu,this.displayCard(),this.displayCiTiao(),this.updateAttributes(),this.auto_ui.sp_tianFuIcon.spriteFrame=null,e.id!=C.FruitId.\u6768\u6843\u5fcd\u8005&&this.loadFruitSprite(e.id),t.isUnLock?this.auto_ui.txt_unLockLabel.string="":this.auto_ui.txt_unLockLabel.string=B.langMgr.getStr("0058",e.unLock);var o=h.PlayerDataMgr.hallGetEquipIsDressUp(this.args.openData.shuiGuoId);this.auto_ui.btn_clearBtn.node.active=o,this.auto_ui.btn_upLevelBtn.node.active=t.isUnLock&&t.level<=this.args.openData.upLevelDatas.length,this.auto_ui.btn_useBtn.node.active=t.isUnLock&&!o,t.level>this.args.openData.upLevelDatas.length?this.auto_ui.txt_upPriceLabel.string="MAX":(this.requiredLevelData=this.args.openData.upLevelDatas[t.level-1],this.auto_ui.txt_upPriceLabel.string=""+this.requiredLevelData.money)},t.prototype.updateAttributes=function(){var e=this,t=["First","Random","Take turns","Elite","-","Random","First","-","-"],o=u.Excel.shuiguo(this.args.openData.shuiGuoId),n=_.default.getShuiGuoCurrLevelData(this.args.openData.shuiGuoId);this.auto_ui.node_attributeFather.children.forEach(function(i,a){var r=i.getChildByName("value"),c=r.getChildByName("valueLabel").getComponent(cc.Label),s=r.getChildByName("addLabel").getComponent(cc.Label);switch(c.string="-",s.string="",a){case 0:0!==o.attack&&e.args.openData.shuiGuoId!=C.FruitId.\u8fa3\u59b9\u5b50&&(c.string=""+n[0].atk,n[1].atk>n[0].atk&&(s.string="+"+(n[1].atk-n[0].atk)));break;case 1:0!==o.attackspeed&&(c.string=""+n[0].atkSpeed,n[1].atkSpeed>n[0].atkSpeed&&(s.string="+"+(n[1].atkSpeed-n[0].atkSpeed)));break;case 2:c.string=t[o.attackstate-1];break;case 3:e.setSpecialAttributes(i,o,n,c,s)}})},t.prototype.setSpecialAttributes=function(e,t,o,n,i){var a=!!t.littleDesc&&t.littleDesc.length>0;if(e.getChildByName("nameLabel").getComponent(cc.Label).string=a?t.littleDesc:"-",a&&o[0]&&o[0].talent[0]){var r=o[0].buffIsBaiFenBi?"%":"";if(t.id==C.FruitId.\u69b4\u83b2\u738b?n.string=""+u.Excel.getFruitBuff(t.talent).probability+r:(n.string=""+o[0].talent[0]+r,t.id==C.FruitId.\u9999\u8549\u5c04\u624b&&(n.string=""+o[0].talent[1]+r)),o[1].talent[0]>o[0].talent[0]){var c=o[1].talent[0]-o[0].talent[0];i.string="+"+c.toFixed(1)}}},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_upLevelBtn:this.clickUpLevel();break;case this.auto_ui.btn_clearBtn:this.handleClearButtonClick();break;case this.auto_ui.btn_useBtn:this.handleUseButtonClick();break;case this.auto_ui.btn_closeBtn:this._close()}},t.prototype.handleClearButtonClick=function(){f.EventMgrInstance.emitEvent(g.EVENT_TYPE.HallBagRemoveId,this.args.openData.shuiGuoId),this._close()},t.prototype.handleUseButtonClick=function(){h.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e}).length<=0?f.EventMgrInstance.emitEvent(g.EVENT_TYPE.HallBagShowDrag,this.args.openData.shuiGuoId):(h.PlayerDataMgr.addDressUpEquip(this.args.openData.shuiGuoId),f.EventMgrInstance.emitEvent(g.EVENT_TYPE.HallResetBag)),this._close()},t.prototype.clickUpLevel=function(){h.PlayerDataMgr.globalData.gold<this.requiredLevelData.money?v.TipMgr.showToast(B.langMgr.getStr("0014")):h.PlayerDataMgr.useEquipFragments(this.args.openData.shuiGuoId,this.requiredLevelData.shengjixiaohao)&&(h.PlayerDataMgr.subtractGold(this.requiredLevelData.money),h.PlayerDataMgr.addEquipLevel(this.args.openData.shuiGuoId),this.initializeEquipInfo(),this.args.upLevelReset&&this.args.upLevelReset(),b.AudioMgr.playSoundEffect("effect/upLevel"),this.showUpLevelEffect(),f.EventMgrInstance.emitEvent(g.EVENT_TYPE.MainRedPointChange,w.RedPointType.upEquip))},t.prototype.showUpLevelEffect=function(){this.auto_ui.node_upLevelEffect.active=!0,this.auto_ui.node_upLevelEffect.children.forEach(function(e){e.getComponent(cc.ParticleSystem).resetSystem()})},t.prototype.displayCard=function(){return r(this,void 0,Promise,function(){var e,t;return c(this,function(o){switch(o.label){case 0:return this.cardComponent?(this.cardComponent.startSet(this.args.openData,!1,!1),this.cardComponent.auto_ui.txt_nameLabel.string="",[3,3]):[3,1];case 1:return[4,this._loadRes(d.BundleNames.Home,"item/Item_bag_equipItem",cc.Prefab)];case 2:e=o.sent(),(t=cc.instantiate(e)).parent=this.auto_ui.node_cardFather,t.setPosition(0,0),this.cardComponent=t.getComponent(p.default),this.cardComponent.startSet(this.args.openData,!1,!1),this.cardComponent.auto_ui.txt_nameLabel.string="",o.label=3;case 3:return[2]}})})},t.prototype.displayCiTiao=function(){return r(this,void 0,Promise,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return this.ciTiaoPrefab?[3,2]:(e=this,[4,this._loadRes(d.BundleNames.Home,"item/item_bag_ciTiao",cc.Prefab)]);case 1:e.ciTiaoPrefab=o.sent(),o.label=2;case 2:return this.scheduleOnce(function(){t.updateCiTiaoData()}),[2]}})})},t.prototype.updateCiTiaoData=function(){var e=this,t=_.default.getShuiGuoCiTiaoMap.get(this.args.openData.shuiGuoId);t.sort(function(e,t){return e.jiesuo-t.jiesuo}),this.auto_ui.node_ciTiaoFather.children.forEach(function(e){return e.active=!1}),t.forEach(function(t,o){var n;o<e.auto_ui.node_ciTiaoFather.childrenCount?n=e.auto_ui.node_ciTiaoFather.children[o]:(n=cc.instantiate(e.ciTiaoPrefab)).parent=e.auto_ui.node_ciTiaoFather,n.active=!0,n.getComponent(y.default).initializeSettings(t)})},t.prototype.loadFruitSprite=function(e){return r(this,void 0,Promise,function(){var t;return c(this,function(o){switch(o.label){case 0:return[4,this._loadRes(d.BundleNames.Common,"res/tianfuicon/tianfu_"+e,cc.SpriteFrame)];case 1:return t=o.sent(),this.auto_ui.sp_tianFuIcon.spriteFrame=t,m.default.limitSpriteSize(this.auto_ui.sp_tianFuIcon,80),[2]}})})},t.prototype.checkAI=function(){var e=this,t=E.default._instance;if(t.isOpen){var o=this.args.openData.shuiGuoId,n=h.PlayerDataMgr.getEquipDataById(o);h.PlayerDataMgr.globalData.gold>=this.requiredLevelData.money&&n.fragments>=this.requiredLevelData.shengjixiaohao?t.displayClickButton(this.auto_ui.btn_upLevelBtn.node,function(){e.clickUpLevel(),e.checkAI()}):this.args.isAiDressUp&&t.displayClickButton(this.auto_ui.btn_useBtn.node,function(){h.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e}).length<=0?f.EventMgrInstance.emitEvent(g.EVENT_TYPE.HallBagShowDrag,o):(h.PlayerDataMgr.addDressUpEquip(o),f.EventMgrInstance.emitEvent(g.EVENT_TYPE.HallResetBag),f.EventMgrInstance.emitEvent(g.EVENT_TYPE.ResetWareHouseAI)),e._close()})}},a([G(s.default)],t.prototype,"auto_ui",void 0),a([x],t)}(l.default);o.default=T,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./Item_Bag_CiTiao":"Item_Bag_CiTiao","./Item_Bag_EquipItem":"Item_Bag_EquipItem","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./TipsManager":"TipsManager","./UIView":"UIView","./UI_EquipInfo_UIBindings":"UI_EquipInfo_UIBindings"}],UI_GameDeBug:[function(e,t,o){"use strict";cc._RF.push(t,"76e474/scVIU4IOd3TPR7Tr","UI_GameDeBug");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./LoadingManager"),c=e("./UIManager"),s=e("./UIView"),l=e("./GuideControl"),u=e("./NodePoolMag"),d=e("./ModuleManager"),p=cc._decorator,h=p.ccclass,f=(p.property,p.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},t.prototype.onResetData=function(){r.LoadingMgr.show(),this.scheduleOnce(function(){window.tt?window.tt.restartMiniProgramSync?window.tt.restartMiniProgramSync():window.tt.exitMiniProgram({isFullExit:!0}):window.wx?window.wx.restartMiniProgram():cc.sys.isBrowser&&(c.default.closeAllViews(),d.ModuleMgr.clearAllModules(),l.GuideCtrlInstance.clearGuide(),u.NodePoolMag.instance.clearAllNodePools(),cc.director.loadScene("entry")),r.LoadingMgr.hide()},.5)},t.prototype.onCloseView=function(){this._close()},a([h],t)}(s.default));o.default=f,cc._RF.pop()},{"./GuideControl":"GuideControl","./LoadingManager":"LoadingManager","./ModuleManager":"ModuleManager","./NodePoolMag":"NodePoolMag","./UIManager":"UIManager","./UIView":"UIView"}],UI_GameEquipInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"274acU7OyhGsqNQ73Gs+SDj","UI_GameEquipInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_titleLabel=null,t.txt_zaJiaoTipLabel=null,t.txt_tianFuLabel=null,t.node_light=null,t.node_qiFather=null,t.node_huoFather=null,t.node_attributeFather=null,t.node_zaZhongTip=null,t.node_zaZhongName=null,t.node_tianFuNode=null,t.sp_iconSprite=null,t.sp_tianFuIcon=null,t.sp_ciTiaoIcon=null,t.rtxt_ciTiaoInfo=null,t.btn_closeBtn=null,t._btnNames=["btn_closeBtn"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Label)],t.prototype,"txt_zaJiaoTipLabel",void 0),a([l(cc.Label)],t.prototype,"txt_tianFuLabel",void 0),a([l(cc.Node)],t.prototype,"node_light",void 0),a([l(cc.Node)],t.prototype,"node_qiFather",void 0),a([l(cc.Node)],t.prototype,"node_huoFather",void 0),a([l(cc.Node)],t.prototype,"node_attributeFather",void 0),a([l(cc.Node)],t.prototype,"node_zaZhongTip",void 0),a([l(cc.Node)],t.prototype,"node_zaZhongName",void 0),a([l(cc.Node)],t.prototype,"node_tianFuNode",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.Sprite)],t.prototype,"sp_tianFuIcon",void 0),a([l(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),a([l(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([s("UI_GameEquipInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameEquipInfo:[function(e,t,o){"use strict";cc._RF.push(t,"0fcc8zAtZFIibOV45p/tKGg","UI_GameEquipInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_GameEquipInfo_UIBindings"),c=e("./UIView"),s=e("./Excel"),l=e("./HallGlobalVariable"),u=e("./BundleConfig"),d=e("./ExcelUtil"),p=e("./CommonUtils"),h=e("./BuffMag"),f=e("./GameGlobalVariable"),g=e("./Logic_GetEquip"),_=e("./Const_Game"),y=e("./LanMgr"),v=cc._decorator,m=v.ccclass,b=v.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype.onLoad=function(){this.auto_ui.node_light.runAction(cc.repeatForever(cc.rotateBy(5,360)))},t.prototype._show=function(e){var t=this;this.fruitId=e.shuiGuoId,this.fruitLevel=e.level,this.updateAttributes();var o=g.default.getInstance.getMaxLevel(e.shuiGuoId)===f.GameGlobalVariable.zaZhongMaxLevel;if(this.auto_ui.node_zaZhongTip.active=o,o){var n=s.Excel.shuiguo(e.shuiGuoId),i=s.Excel.shuiguo(g.default.getInstance.getZaZhongId(this.fruitId));this.auto_ui.txt_zaJiaoTipLabel.string=y.langMgr.getStr("0069",n.name,i.name);var a="player"+((0!=n.jinjieShuiGuoId?n:i).id-1e3)+"_5";this.auto_ui.node_zaZhongName.children.forEach(function(e){e.active=e.name===a})}if(this.auto_ui.node_tianFuNode.active=!1,4===e.level){this.auto_ui.node_zaZhongTip.active=!1,p.default.loadLevel5Effect(this.fruitId,this.auto_ui.node_qiFather,this.auto_ui.node_huoFather,this._loadRes.bind(this)),this.auto_ui.node_tianFuNode.active=!0,this._loadRes(u.BundleNames.Common,"res/tianfuicon/tianfu_"+e.shuiGuoId+"_1",cc.SpriteFrame).then(function(e){t.auto_ui.sp_ciTiaoIcon.spriteFrame=e});var r=-1;if(s.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId===e.shuiGuoId&&0!==t.newTianFuBuff&&(r=t.newTianFuBuff)}),-1!==r){var c=s.Excel.shuiguo(e.shuiGuoId),l=s.Excel.getFruitBuff(r);if(l){var d=l.value,h=l.buffdesc,_=[h=p.default.replaceStringSymbols(h,"\\n",[""])];h.includes("X")&&(_=h.split("X"));var v="";_.forEach(function(e,t){if(e.includes("#")){var o='<color=#ffff00 click="ShowZaZhongInfo">'+c.newName+"</c>";o="<u>"+o+"</u>",e=p.default.replaceStringSymbols(e,"#",[o])}v+="<color=#ffffff>"+e+"</c>",t<_.length-1&&d&&(v+="<color=#71ff00>"+d[t]+"</c>")}),v="<outline color=#000000 width=3><b>"+v+"</b></outline>",this.auto_ui.rtxt_ciTiaoInfo.string=v}}}},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close()}},t.prototype.updateAttributes=function(){var e=this,t=s.Excel.shuiguo(this.fruitId);this._loadRes(u.BundleNames.Common,"res/player/player"+(this.fruitId-1e3)+"_"+(this.fruitLevel+1),cc.SpriteFrame).then(function(t){e.auto_ui.sp_iconSprite.spriteFrame=t}),this.auto_ui.sp_tianFuIcon.spriteFrame=null,this.fruitId!==_.FruitId.\u6768\u6843\u5fcd\u8005&&this._loadRes(u.BundleNames.Common,"res/tianfuicon/tianfu_"+this.fruitId,cc.SpriteFrame).then(function(t){e.auto_ui.sp_tianFuIcon.spriteFrame=t,p.default.limitSpriteSize(e.auto_ui.sp_tianFuIcon,80)});var o=l.default.getShuiGuoCurrLevelData(this.fruitId);this.fruitLevel===f.GameGlobalVariable.normalMaxLevel?this.auto_ui.txt_titleLabel.string=t.newName+"(LV."+(this.fruitLevel+1)+")":this.auto_ui.txt_titleLabel.string=t.name+"(LV."+(this.fruitLevel+1)+")",this.auto_ui.txt_tianFuLabel.string=t.shuiguomiaoshu;var n=["First","Random","Take turns","Elite","-","Random","First","-","-"],i=this.calculateEquipAtk(t,this.fruitLevel,o[0]);this.calculateEquipAtk(t,this.fruitLevel+1,o[0]),this.auto_ui.node_attributeFather.children.forEach(function(o,a){var r=o.getChildByName("value").getChildByName("valueLabel").getComponent(cc.Label);switch(o.getChildByName("value").getChildByName("addLabel").getComponent(cc.Label).string="",r.string="-",a){case 0:0!==t.attack&&e.fruitId!==_.FruitId.\u8fa3\u59b9\u5b50&&(r.string=i.sgattack<1&&i.sgattack>0?i.sgattack.toFixed(2):""+i.sgattack);break;case 1:0!==t.attackspeed&&(r.string=i.sgattackspeed<1&&i.sgattackspeed>0?i.sgattackspeed.toFixed(2):""+i.sgattackspeed);break;case 2:r.string=n[t.attackstate-1];break;case 3:var c=!1;if(t.littleDesc&&t.littleDesc.length>0&&(c=!0),o.getChildByName("nameLabel").getComponent(cc.Label).string=c?t.littleDesc:"-",c){var l=h.BuffMgr.getFruitBuff(t.id,e.fruitLevel),u="";switch(e.fruitId){case _.FruitId.\u7206\u5934\u74dc:case _.FruitId.\u69b4\u83b2\u738b:case _.FruitId.\u9999\u8549\u5c04\u624b:case _.FruitId.\u9ec4\u74dc\u5927\u68d2:case _.FruitId.\u8fa3\u59b9\u5b50:case _.FruitId.\u51bb\u65af\u68a8:case _.FruitId.\u6bd2\u8611\u83c7:case _.FruitId.\u5929\u5c71\u96ea\u83b2:case _.FruitId.\u5143\u5a74\u679c:u="%"}r.string=s.Excel.getFruitBuff(t.talent).probability+u,e.fruitId===_.FruitId.\u69b4\u83b2\u738b?r.string=s.Excel.getFruitBuff(t.talent).probability+u:r.string=e.fruitId===_.FruitId.\u9999\u8549\u5c04\u624b?""+l.otherValue+u:""+l.nowvalue+u}}})},t.prototype.calculateEquipAtk=function(e,t,o){var n=o.atk,i=o.atkSpeed,a=d.ExcelUtil.getMatchingData(s.Excel.shuiguohecheng_all,"shuiguoId",e.id);t>=a.length&&(t=a.length-1);var r=a[t];return{sgattack:n+n*r.addattack/100,sgattackspeed:i/(1+r.addattackspeed/100)}},a([b(r.default)],t.prototype,"auto_ui",void 0),a([m],t)}(c.default);o.default=I,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Game":"Const_Game","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./Logic_GetEquip":"Logic_GetEquip","./UIView":"UIView","./UI_GameEquipInfo_UIBindings":"UI_GameEquipInfo_UIBindings"}],UI_GameFail_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"a5163FUvfdOXaiiz02GAqqV","UI_GameFail_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_timelb=null,t.btn_fuhuo=null,t.btn_nofuhuo=null,t._btnNames=["btn_fuhuo","btn_nofuhuo"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_timelb",void 0),a([l(cc.Button)],t.prototype,"btn_fuhuo",void 0),a([l(cc.Button)],t.prototype,"btn_nofuhuo",void 0),a([s("UI_GameFail_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameFail:[function(e,t,o){"use strict";cc._RF.push(t,"d1ffboiH4VHE72pDA6q24Ve","UI_GameFail");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_GameFail_UIBindings"),c=e("./UIView"),s=e("./ADManager"),l=e("./GameGlobalVariable"),u=e("./CommonUtils"),d=e("./GameDataManager"),p=cc._decorator,h=p.ccclass,f=p.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.nowdata={},t.time=10,t.offtime=0,t.isjishi=!1,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.nowdata=e,this.isjishi=!1,u.default.clearCoins()},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_fuhuo:this.handleRevive();break;case t.btn_nofuhuo:this.handleBackHome()}},t.prototype.handleRevive=function(){var e=this,t="\u89c6\u9891\u590d\u6d3b";if(1===l.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u590d\u6d3b";else{var o=d.GameDataMgr.getCurrentLevelWaveState(l.GameGlobalVariable.nowlevel,2)+1;t=l.GameGlobalVariable.nowlevel+"\u7ae0_"+o+"\u6ce2_"+t}s.ADMgr.showRewardedVideoAd(t,function(){e.nowdata.back(1),e.onCloseView()})},t.prototype.handleBackHome=function(){this.nowdata.back(4),this.onCloseView()},t.prototype.onCloseView=function(){this._close()},t.prototype.updateTime=function(){},t.prototype.jianTime=function(){this.time-=1,this.updateTime(),this.time<=0&&(this.isjishi=!0,this.handleBackHome())},t.prototype.update=function(e){this.isjishi||(this.offtime+=e,this.offtime>=1&&(this.offtime=0))},a([f(r.default)],t.prototype,"auto_ui",void 0),a([h],t)}(c.default);o.default=g,cc._RF.pop()},{"./ADManager":"ADManager","./CommonUtils":"CommonUtils","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./UIView":"UIView","./UI_GameFail_UIBindings":"UI_GameFail_UIBindings"}],UI_GameLock:[function(e,t,o){"use strict";cc._RF.push(t,"6177dIBc8ZFEqxcAs+D4/+J","UI_GameLock");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./EvenType"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.node.children[0].active=!1,r.EventMgrInstance.addListener(s.EVENT_TYPE.GAME_LOCK_SCREE,this.toggleLockScreen,this)},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(s.EVENT_TYPE.GAME_LOCK_SCREE,this.toggleLockScreen,this)},t.prototype.toggleLockScreen=function(e){this.node.children[0].active=e},a([u],t)}(c.default));o.default=d,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_GameOhterNode:[function(e,t,o){"use strict";cc._RF.push(t,"ff5c19kmgJCGKwG+WapLS5R","UI_GameOhterNode");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EventManager"),u=e("./ResKeeper"),d=e("./EvenType"),p=e("./NodePoolMag"),h=e("./UI_BaoZha"),f=cc._decorator,g=f.ccclass,_=(f.property,f.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){l.EventMgrInstance.addListener(d.EVENT_TYPE.Game_Add_BaoZha,this.handleAddBao,this)},t.prototype.handleAddBao=function(e,t,o){return void 0===t&&(t=1),r(this,void 0,Promise,function(){var n,i,a;return c(this,function(r){switch(r.label){case 0:return(n=p.NodePoolMag.instance.getNodeFromPool("baozha"))?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/effpre/UI_BaoZha",cc.Prefab)];case 1:i=r.sent(),p.NodePoolMag.instance.createNodePool("baozha",1,i),n=p.NodePoolMag.instance.getNodeFromPool("baozha"),r.label=2;case 2:if(n&&(n.x=e.x,n.y=e.y,this.node.addChild(n),a=n.getComponent(h.default)))switch(t){case 1:a.playExplosion(o);break;case 2:a.playIceExplosion();break;case 3:a.playCherryExplosion(o)}return[2]}})})},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(d.EVENT_TYPE.Game_Add_BaoZha,this.handleAddBao,this)},a([g],t)}(u.default));o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BaoZha":"UI_BaoZha"}],UI_GameOverItem:[function(e,t,o){"use strict";cc._RF.push(t,"196f0xlSM9Nl7TOegVK29Fe","UI_GameOverItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./CommonUtils"),d=e("./Excel"),p=e("./HallGlobalVariable"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.quality=null,t.countLb=null,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.initUI=function(e,t){return r(this,void 0,void 0,function(){var o,n,i,a,r,l;return c(this,function(c){switch(c.label){case 0:switch(e){case p.default.goldId:return[3,1];case 12345:return[3,4]}return[3,7];case 1:return[4,this._loadRes(s.BundleNames.Common,"res/ui/tu/goldIcon",cc.SpriteFrame)];case 2:return o=c.sent(),n=this.quality,[4,this._loadRes(s.BundleNames.Common,"res/quality/quality_m_1",cc.SpriteFrame)];case 3:return n.spriteFrame=c.sent(),this.icon.spriteFrame=o,[3,10];case 4:return[4,this._loadRes(s.BundleNames.Common,"res/ui/tu/jifen",cc.SpriteFrame)];case 5:return o=c.sent(),i=this.quality,[4,this._loadRes(s.BundleNames.Common,"res/quality/quality_m_3",cc.SpriteFrame)];case 6:return i.spriteFrame=c.sent(),this.icon.spriteFrame=o,[3,10];case 7:return a=d.Excel.shuiguo(e).quality,r=this.icon,[4,this._loadRes(s.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame)];case 8:return r.spriteFrame=c.sent(),u.default.limitSpriteSize(this.icon,100),l=this.quality,[4,this._loadRes(s.BundleNames.Common,"res/quality/quality_"+a,cc.SpriteFrame)];case 9:return l.spriteFrame=c.sent(),[3,10];case 10:return this.countLb.string="\xd7"+t,[2]}})})},t.prototype._loadRes=function(e,t,o){return r(this,void 0,Promise,function(){return c(this,function(){return[2,new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})]})})},a([g(cc.Sprite)],t.prototype,"icon",void 0),a([g(cc.Sprite)],t.prototype,"quality",void 0),a([g(cc.Label)],t.prototype,"countLb",void 0),a([f],t)}(l.default));o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./ResKeeper":"ResKeeper"}],UI_GameOver_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"8b3cbudq7tFU4Nv9kvvQMt3","UI_GameOver_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_successtop=null,t.node_failtop=null,t.txt_nowboshu=null,t.txt_sharecount=null,t.scroll_nowscroll=null,t.btn_fenxiang=null,t.btn_queding=null,t._btnNames=["btn_fenxiang","btn_queding"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_successtop",void 0),a([l(cc.Node)],t.prototype,"node_failtop",void 0),a([l(cc.Label)],t.prototype,"txt_nowboshu",void 0),a([l(cc.Label)],t.prototype,"txt_sharecount",void 0),a([l(cc.ScrollView)],t.prototype,"scroll_nowscroll",void 0),a([l(cc.Button)],t.prototype,"btn_fenxiang",void 0),a([l(cc.Button)],t.prototype,"btn_queding",void 0),a([s("UI_GameOver_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameOver:[function(e,t,o){"use strict";cc._RF.push(t,"361f6GU/5dAGrW/x4EB83ep","UI_GameOver");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./AIControl"),c=e("./AudioManager"),s=e("./BundleConfig"),l=e("./CommonUtils"),u=e("./Const_Hall"),d=e("./EventManager"),p=e("./EvenType"),h=e("./Excel"),f=e("./GameDataManager"),g=e("./GameGlobalVariable"),_=e("./HallGlobalVariable"),y=e("./LogManager"),v=e("./PlayerDataManager"),m=e("./UI_GameOver_UIBindings"),b=e("./UI_GameOverItem"),I=e("./UIView"),w=e("./Const_Common"),E=e("./Const_Game"),M=cc._decorator,C=M.ccclass,B=M.property,P=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.nowdata={},t.nowlevel=1,t.itemData=null,t}return i(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var o=e[0];this.nowdata=o,this.nowlevel=g.GameGlobalVariable.nowlevel,this.auto_ui.btn_fenxiang.node.active=!0,1===g.GameGlobalVariable.isSpecialLevel()&&(this.auto_ui.btn_fenxiang.node.active=!1,this.nowlevel=g.GameGlobalVariable.teshulevel,v.PlayerDataMgr.subtractWuJinCount(1)),1===this.nowdata.type?this.updateFailUI():this.updateSuccessUI(),1===g.GameGlobalVariable.isSpecialLevel()?this.initTiaoZhanAward():this.initAward(),this.checkAI(),f.GameDataMgr.updateCiTiaoData(this.nowlevel,null),l.default.clearCoins()},t.prototype.updateFailUI=function(){this.auto_ui.node_successtop.active=!1,this.auto_ui.node_failtop.active=!0,this.animateScaleNode(this.auto_ui.node_failtop);var e=f.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,g.GameGlobalVariable.isSpecialLevel());this.auto_ui.txt_nowboshu.string="\u6700\u9ad8\u8fdb\u5ea6:\u7b2c"+e+"\u6ce2",c.AudioMgr.playSoundEffect("sound/\u5931\u8d25",!1,s.BundleNames.Game)},t.prototype.updateSuccessUI=function(){c.AudioMgr.playSoundEffect("sound/\u80dc\u5229",!1,s.BundleNames.Game),this.auto_ui.node_successtop.active=!0,this.animateScaleNode(this.auto_ui.node_successtop),this.auto_ui.node_failtop.active=!1},t.prototype.animateScaleNode=function(e){this.scheduleOnce(function(){e.scale=0,cc.tween(e).to(.3,{scale:1},{easing:"backOut"}).start()})},t.prototype.initTiaoZhanAward=function(){var e=100*f.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,1);this.itemData=new u.GetItemsData,this.itemData.ids=[],this.itemData.counts=[],this.itemData.ids.push(12345),this.itemData.counts.push(e),this.initAwardUi(this.itemData)},t.prototype.initAward=function(){var e=this,t=h.Excel.shuiguoguanqia(this.nowlevel),o=t.levelaward,n=f.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,2),i=o[0][1];if(this.itemData=new u.GetItemsData,this.itemData.ids=[],this.itemData.counts=[],g.GameGlobalVariable.isFirstGuide=!1,v.PlayerDataMgr.getGuideIndexByTaskName(w.GuideName.EquipLevelUp)===w.UpEquipLevelGuideIndex.GiveFixedReward1)this.itemData.ids.push(_.default.goldId),this.itemData.counts.push(200),this.itemData.ids.push(E.FruitId.\u6768\u6843\u5fcd\u8005),this.itemData.counts.push(4);else{var a=Math.floor(n*(i/t.levelboshuid.length));a>0&&(this.itemData.ids.push(_.default.goldId),this.itemData.counts.push(a)),g.GameGlobalVariable.addjinbi=a;var r=function(e,o){return n<e?0:Math.floor((n+1-e)/(t.levelboshuid.length+1-e)*o)},c=r(t.awardboshuid[0],o[1][2]);y.LogMgr.debug("\u7eff\u8272\u788e\u7247\u6570\u91cf",c);var s=o[2]&&r(t.awardboshuid[1],o[2][2]);y.LogMgr.debug("\u84dd\u8272\u788e\u7247\u6570\u91cf",s);var l=o[3]&&r(t.awardboshuid[2],o[3][2]);y.LogMgr.debug("\u7d2b\u788e\u7247\u6570\u91cf",l),_.default.getSuiPian([c,s,l]).forEach(function(t,o){e.itemData.ids.push(o),e.itemData.counts.push(t),v.PlayerDataMgr.addEquipFragments(o,t)})}this.initAwardUi(this.itemData),f.GameDataMgr.getCurrentMaxLevel(),cc.sys.platform,cc.sys.BYTEDANCE_GAME},t.prototype.getNodes=function(e){var t=e.ids.length,o=1;if(t>4){var n=t%4;o=(t-n)/4+(n>0?1:0)}for(var i=this.auto_ui.scroll_nowscroll.content.children,a=[],r=0,c=0;c<i.length;c++){var s=i[c];c<o?(s.active=!0,s.children[0].children.forEach(function(t){r<e.ids.length?(t.scale=0,a.push(t),r++):t.active=!1})):s.active=!1}return a},t.prototype.initAwardUi=function(e){var t=this.getNodes(e),o=0;this.schedule(function(){var n=t[o],i=e.ids[o],a=e.counts[o];n.getComponent(b.default).initUI(i,a),cc.tween(n).to(.3,{scale:1},{easing:"backOut"}).start(),o+=1},.1,t.length-1)},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_fenxiang:this.handleShareButtonClick();break;case t.btn_queding:this.getReward(!1),this.onBackHome()}},t.prototype.handleShareButtonClick=function(){var e=this;cc.sys.isBrowser?(this.doubleRewards(),this.auto_ui.btn_fenxiang.node.active=!1):l.default.onShare(function(t){t&&(e.doubleRewards(),e.auto_ui.btn_fenxiang.node.active=!1)})},t.prototype.doubleRewards=function(){this.itemData.counts=this.itemData.counts.map(function(e){return 2*e}),this.initAwardUi(this.itemData)},t.prototype.getReward=function(e){var t=this;this.itemData&&(this.itemData.ids.forEach(function(o,n){var i=t.itemData.counts[n];e&&(i*=2),t.awardItem(o,i)}),v.PlayerDataMgr.getGuideIndexByTaskName(w.GuideName.EquipLevelUp)===w.UpEquipLevelGuideIndex.GiveFixedReward1&&v.PlayerDataMgr.setGuideIndex(w.GuideName.EquipLevelUp,w.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2))},t.prototype.awardItem=function(e,t){switch(e){case _.default.goldId:v.PlayerDataMgr.addGold(t);break;case 12345:var o=f.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,1);f.GameDataMgr.updateChallengePoints(1,100*o);break;default:v.PlayerDataMgr.addEquipFragments(e,t)}},t.prototype.onBackHome=function(){this.nowdata.back(2),this.onCloseView()},t.prototype.onBack=function(){this.nowdata.back(2),this.onCloseView()},t.prototype.onCloseView=function(){this._close(),d.EventMgrInstance.emitEvent(p.EVENT_TYPE.Game_Value_Fei)},t.prototype.checkAI=function(){var e=this;r.default._instance.isOpen&&this.scheduleOnce(function(){r.default._instance.displayClickButton(e.auto_ui.btn_queding.node,function(){e.getReward(!1),e.onBackHome()})},1)},a([B(m.default)],t.prototype,"auto_ui",void 0),a([C],t)}(I.default);o.default=P,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_GameOverItem":"UI_GameOverItem","./UI_GameOver_UIBindings":"UI_GameOver_UIBindings"}],UI_GamePuase:[function(e,t,o){"use strict";cc._RF.push(t,"47253S2o4VELqeiQMQoObNs","UI_GamePuase");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./AudioManager"),u=e("./UIManager"),d=e("./UIView"),p=e("./CommonUtils"),h=e("./Excel"),f=e("./BuffMag"),g=e("./UIConfig_Home"),_=cc._decorator,y=_.ccclass,v=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipView=null,t.scroll=null,t.tipUi=null,t.nowBack=null,t.endindex=-1,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.nowBack=e.back,this.tipView.active=!1},t.prototype.onEnable=function(){this.tipUi.active=!1,this.initUI(),p.default.clearCoins()},t.prototype.initUI=function(){return r(this,void 0,Promise,function(){var e,t,o,n,i,a,r,l,u,d,p,g,_,y,v,m,b;return c(this,function(c){switch(c.label){case 0:for(e=f.BuffMgr.ciTiaoData,t={},o=0,n=e;o<n.length;o++)i=n[o],t[i.id]||(t[i.id]={id:i.id,count:0}),t[i.id].count++;a=Object.keys(t),(r=this.scroll.content.children).forEach(function(e){return e.active=!1}),l=0,c.label=1;case 1:return l<a.length?(u=a[l],d=t[u],p=r[l]||cc.instantiate(r[0]),r[l]||this.scroll.content.addChild(p),p.active=!0,g=p.children[1].getComponent(cc.Sprite),_=p.children[0].getComponent(cc.Sprite),y=p.children[2].getComponent(cc.Label),v=h.Excel.fruitcitiao(d.id),[4,this._loadRes(s.BundleNames.Game,"res/skill_icon"+v.quality,cc.SpriteFrame)]):[3,5];case 2:return m=c.sent(),_.spriteFrame=m,[4,this._loadRes(s.BundleNames.Common,"res/skillicon/skill_"+d.id,cc.SpriteFrame)];case 3:b=c.sent(),g.spriteFrame=b,y.string="\xd7"+d.count,p.on(cc.Node.EventType.TOUCH_START,this.handleIconClick.bind(this,l,d),this),c.label=4;case 4:return l++,[3,1];case 5:return[2]}})})},t.prototype.handleIconClick=function(e,t){if(l.AudioMgr.playSoundEffect("effect/button"),this.endindex!==e){this.tipUi.active=!0,this.endindex=e;var o=this.scroll.content.children[e].convertToWorldSpaceAR(cc.v2(0,0)),n=this.node.convertToNodeSpaceAR(o);this.tipUi.y=n.y+100,this.tipUi.x=n.x;var i=-(this.tipUi.x+cc.winSize.width/2),a=this.tipUi.x+cc.winSize.width/2;i<cc.winSize.width/2&&(this.tipUi.x=-(cc.winSize.width/2-this.tipUi.width/2)),a>cc.winSize.width/2&&(this.tipUi.x=cc.winSize.width/2-this.tipUi.width/2),this.tipUi.getChildByName("jiantou").x=n.x-this.tipUi.x;var r=h.Excel.fruitcitiao(t.id),c=this.tipUi.getChildByName("lb").getComponent(cc.RichText),s=this.tipUi.getChildByName("layout").getChildByName("count").getComponent(cc.Label),u=h.Excel.getFruitBuff(r.citiaoshuzhitype);-1!==r.citiaochuxian?(this.tipUi.getChildByName("layout").active=!0,s.string=t.count*u.value[0]+"%"):this.tipUi.getChildByName("layout").active=!1,this.setBuffContent(c,r,t.count)}else this.tipUi.active=!1,this.endindex=-1},t.prototype.showSetting=function(){u.default.open(s.BundleNames.Home,g.UIView_Home.UI_Setting)},t.prototype.setBuffContent=function(e,t){var o=t.citiaomiaoshu,n=h.Excel.getFruitBuff(t.citiaoshuzhitype);o=p.default.replaceStringSymbols(o,"n",[""]).split("X");for(var i="",a=0;a<o.length;a++){var r=o[a];n.value[a]&&a<o.length-1?i+="<color=#ffffff>"+r+"</color><color=#00ff00>"+n.value[a]+"</color>":i+="<color=#ffffff>"+r+"</color>"}e.string="<outline color=#000000 width = 3>"+i+"</outline>"},t.prototype.onDisable=function(){},t.prototype.onJixu=function(){this._close(),this.nowBack&&this.nowBack(3)},t.prototype.backHome=function(){this.tipView.active=!0},t.prototype.realHome=function(){this._close(),this.nowBack&&this.nowBack(2)},t.prototype.closeHome=function(){this._close(),this.tipView.active=!1},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})},a([v(cc.Node)],t.prototype,"tipView",void 0),a([v(cc.ScrollView)],t.prototype,"scroll",void 0),a([v(cc.Node)],t.prototype,"tipUi",void 0),a([y],t)}(d.default);o.default=m,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView"}],UI_GameViewMap:[function(e,t,o){"use strict";cc._RF.push(t,"c34a1XuLaFHeYepZbAqOYpX","UI_GameViewMap");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EvenType"),u=e("./EventManager"),d=e("./GameDataManager"),p=e("./GameGlobalVariable"),h=e("./NodePoolMag"),f=e("./ResKeeper"),g=e("./UI_Bullet"),_=e("./UI_BulletBomb"),y=e("./UI_BulletMove"),v=e("./UI_Player"),m=cc._decorator,b=m.ccclass,I=m.property,w=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridNode=null,t.playerNode=null,t.bulletNode=null,t.mosterNode=null,t.boosTip=null,t.isOk=!0,t.currentIndex=-1,t.lastUpdateTime=0,t}return i(t,e),t.prototype.onEnable=function(){var e=this;u.EventMgrInstance.addListener(l.EVENT_TYPE.GAME_UPDATE_BAG,this.initUI,this),u.EventMgrInstance.addListener(l.EVENT_TYPE.GAME_SHOW_BOOS,this.displayBossTip,this),this.isOk=!0,this.scheduleOnce(function(){e.isOk=!1,e.initUI()},.5)},t.prototype.displayBossTip=function(){var e=this;if(!this.boosTip.active){this.boosTip.active=!0;var t=this.node.getChildByName("gezibg1");this.boosTip.width=t.width+95,this.boosTip.height=t.height+90,this.boosTip.opacity=0,cc.tween(this.boosTip).to(.2,{opacity:255}).start(),this.scheduleOnce(function(){cc.tween(e.boosTip).to(.2,{opacity:0}).call(function(){e.boosTip.active=!1}).start()},2)}},t.prototype.handleGameState=function(e){1===e&&this.recycleNodes()},t.prototype.recycleNodes=function(){for(var e=this.playerNode.children;e.length>0;){var t=e[0];h.NodePoolMag.instance.recycleNodeToPool("player"+t.getComponent(v.default).playerId,t)}for(var o=this.bulletNode.children;o.length>0;){var n=o[0],i=n.getComponent(g.default);i&&h.NodePoolMag.instance.recycleNodeToPool("bullet_"+i.bulletId,n)}if(p.GameGlobalVariable.liulianNode)for(var a=p.GameGlobalVariable.liulianNode.children;a.length>0;){var r=a[0],c=r.getComponent(y.default);h.NodePoolMag.instance.recycleNodeToPool("bullet_"+c.bulletId,r)}if(p.GameGlobalVariable.languaNode)for(var s=p.GameGlobalVariable.languaNode.children;s.length>0;){var l=s[0],u=l.getComponent(_.default);h.NodePoolMag.instance.recycleNodeToPool("bullet_"+u.bulletId,l)}},t.prototype.initUI=function(){return r(this,void 0,void 0,function(){var e,t,o,n,i,a,r,l,u,f,g,_,y,m,b,I,w,E,M,C;return c(this,function(c){switch(c.label){case 0:if(this.isOk)return[2];if((new Date).getTime()-this.lastUpdateTime<=100)return[2];this.lastUpdateTime=(new Date).getTime(),this.recycleNodes(),e=0,t=0,o=0,n=0,i=d.GameDataMgr.getGameBag.cellWposArray,a=Math.max(this.gridNode.children.length,i.length),r=0,c.label=1;case 1:return r<a?(l=i[r],u=this.gridNode.children[r],l?(C=this.gridNode.convertToNodeSpaceAR(l),u||(u=cc.instantiate(this.gridNode.children[0]),this.gridNode.addChild(u)),u.active=!0,f=u.getChildByName("grid").getComponent(cc.Sprite),[4,this._loadRes(s.BundleNames.Game,"res/bg/"+p.GameGlobalVariable.getSceneId(),cc.SpriteFrame)]):[3,3]):[3,5];case 2:return g=c.sent(),f.spriteFrame=g,u.x=C.x,u.y=C.y,e=Math.min(e,u.x),t=Math.max(t,u.x),o=Math.min(o,u.y),n=Math.max(n,u.y),[3,4];case 3:u&&(u.active=!1),c.label=4;case 4:return r++,[3,1];case 5:return _=this.node.getChildByName("gezibg1"),y=_.getComponent(cc.Sprite),[4,this._loadRes(s.BundleNames.Game,"res/bg/gezibg"+p.GameGlobalVariable.getSceneId(),cc.SpriteFrame)];case 6:m=c.sent(),y.spriteFrame=m,_.width=Math.abs(e-t)+170,_.height=Math.abs(o-n)+170,b=d.GameDataMgr.getGameBag.dressUpEquips,I=0,c.label=7;case 7:return I<b.length?-1!==this.currentIndex&&this.currentIndex!==I?[3,9]:(w=b[I],[4,this._loadRes(s.BundleNames.Game,"prefabs/player/player"+(w.shuiguoId-1e3),cc.Prefab)]):[3,10];case 8:E=c.sent(),(M=h.NodePoolMag.instance.getNodeFromPool("player"+(w.shuiguoId-1e3)))||(h.NodePoolMag.instance.createNodePool("player"+(w.shuiguoId-1e3),1,E),M=h.NodePoolMag.instance.getNodeFromPool("player"+(w.shuiguoId-1e3))),C=this.playerNode.convertToNodeSpaceAR(w.wPostion),M.x=C.x,M.y=C.y,this.playerNode.addChild(M),M.getComponent(v.default).initializePlayerInfo(this.mosterNode,w),c.label=9;case 9:return I++,[3,7];case 10:return[2]}})})},t.prototype.onDisable=function(){u.EventMgrInstance.removeListener(l.EVENT_TYPE.GAME_UPDATE_BAG,this.initUI,this),u.EventMgrInstance.removeListener(l.EVENT_TYPE.GAME_SHOW_BOOS,this.displayBossTip,this)},t.prototype._loadRes=function(e,t,o){return r(this,void 0,Promise,function(){return c(this,function(){return[2,new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})]})})},a([I(cc.Node)],t.prototype,"gridNode",void 0),a([I(cc.Node)],t.prototype,"playerNode",void 0),a([I(cc.Node)],t.prototype,"bulletNode",void 0),a([I(cc.Node)],t.prototype,"mosterNode",void 0),a([I(cc.Node)],t.prototype,"boosTip",void 0),a([b],t)}(f.default);o.default=w,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove":"UI_BulletMove","./UI_Player":"UI_Player"}],UI_GameView_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"9c592EicSlMX7vydgI+h42F","UI_GameView_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_bg=null,t.node_lu=null,t.node_chaoxue=null,t.node_playani=null,t.node_shuimitao=null,t.txt_level=null,t.txt_lunhui=null,t.btn_back=null,t.btn_jiasuNode=null,t.dbAnim_openGame=null,t._btnNames=["btn_back","btn_jiasuNode"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_bg",void 0),a([l(cc.Node)],t.prototype,"node_lu",void 0),a([l(cc.Node)],t.prototype,"node_chaoxue",void 0),a([l(cc.Node)],t.prototype,"node_playani",void 0),a([l(cc.Node)],t.prototype,"node_shuimitao",void 0),a([l(cc.Label)],t.prototype,"txt_level",void 0),a([l(cc.Label)],t.prototype,"txt_lunhui",void 0),a([l(cc.Button)],t.prototype,"btn_back",void 0),a([l(cc.Button)],t.prototype,"btn_jiasuNode",void 0),a([l(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_openGame",void 0),a([s("UI_GameView_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameView:[function(e,t,o){"use strict";cc._RF.push(t,"4551c4Mto9JcrkQxSOkrWCM","UI_GameView");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_GameView_UIBindings"),l=e("./UIView"),u=e("./EventManager"),d=e("./EvenType"),p=e("./Excel"),h=e("./NodePoolMag"),f=e("./BundleConfig"),g=e("./UI_MosterLogic"),_=e("./GameGlobalVariable"),y=e("./UI_Player"),v=e("./UI_ShowAttackInfo"),m=e("./UIManager"),b=e("./UIConfig_Game"),I=e("./CommonUtils"),w=e("./BuffMag"),E=e("./UI_Bullet"),M=e("./GameDataManager"),C=e("./UIConfig_Home"),B=e("./UI_DuWu"),P=e("./UI_Bag"),x=e("./ExcelUtil"),G=e("./UI_BulletBomb"),T=e("./UI_BulletMove"),D=e("./AudioManager"),N=e("./LogManager"),S=e("./PlayerDataManager"),O=e("./Const_Common"),U=e("./TipsManager"),k=e("./UI_GameViewMap"),R=e("./UI_CreateMoster"),L=e("./UI_SkillShow"),A=e("./LoadingManager"),j=e("./LanMgr"),F=cc._decorator,V=F.ccclass,q=F.property,H=(F.inspector,function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t.UI_BagNode=null,t.UI_BagPre=null,t.mosterNode=null,t.pathsNode=null,t.playerNode=null,t.bulletNode=null,t.languaNode=null,t.liulianNode=null,t.othereff=null,t.aixinNode=null,t.mapNode=null,t.tiaozhanTip=null,t.tongjiNode=null,t.bottmoNode=null,t.showattackinfo=null,t.bottomNd=null,t.isgamepuase=!0,t.jiasuCode=1,t.isadd=!1,t.nowlevel=1,t.xueliang=3,t.fuhuocount=0,t.maxcount=1,t.isOpenPuase=!1,t.isGameOver=!1,t.overstate=-1,t.addbool=!1,t.rolelevel=1,t.roleexperience=0,t.isCiTiaoOpen=!1,t.nowBag=null,t.mosterScript=null,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];var n=this;if(u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Load_View,!1),this.scheduleOnce(function(){},3),console.log("\u767b\u9646\u65f6\u95f4",(new Date).getTime()-_.GameGlobalVariable.offtime),this.mosterScript=this.mosterNode.getComponent(R.default),this.mosterScript.setOver(this.isOver.bind(this)),this.tiaozhanTip.active=!1,D.AudioMgr.playBackgroundMusic("sound/gamebgm",!0,f.BundleNames.Game),1===_.GameGlobalVariable.isSpecialLevel()){if(_.GameGlobalVariable.huanyipi=x.ExcelUtil.getMatchingData(p.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value,_.GameGlobalVariable.allhave=x.ExcelUtil.getMatchingData(p.Excel.shuiguoconfig_all,"configkey","allhave")[0].value,!M.GameDataMgr.getContinueChallenge()){M.GameDataMgr.clearGameBagData(),this.nowlevel=_.GameGlobalVariable.teshulevel;var i=p.Excel.shuiguotiaozhan(this.nowlevel);M.GameDataMgr.addSilverCoin(i.yinbi)}M.GameDataMgr.updateChallengeContinue(this.nowlevel,!0),this.maxcount=_.GameGlobalVariable.wujinfuhuocount}else if(this.maxcount=_.GameGlobalVariable.putongfuhuocount,this.nowlevel=_.GameGlobalVariable.nowlevel,w.BuffMgr.ciTiaoData&&w.BuffMgr.ciTiaoData.length>0){var a=M.GameDataMgr.getContinueGame();this.mosterScript.mosterboshu=a.nowboshu,_.GameGlobalVariable.huanyipi=M.GameDataMgr.getCiTiaoCount(_.GameGlobalVariable.nowlevel,1),_.GameGlobalVariable.allhave=M.GameDataMgr.getCiTiaoCount(_.GameGlobalVariable.nowlevel,2);var r=M.GameDataMgr.getRoleLevel(this.nowlevel,_.GameGlobalVariable.isSpecialLevel());r?(this.rolelevel=r.level,this.roleexperience=0):this.rolelevel=1}else _.GameGlobalVariable.huanyipi=x.ExcelUtil.getMatchingData(p.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value,_.GameGlobalVariable.allhave=x.ExcelUtil.getMatchingData(p.Excel.shuiguoconfig_all,"configkey","allhave")[0].value,M.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,_.GameGlobalVariable.isSpecialLevel()),S.PlayerDataMgr.getGuideIndexByTaskName(O.GuideName.GameBag)===O.GameBagGuideIndex.GuideCompletion&&M.GameDataMgr.clearGameBagData();_.GameGlobalVariable.bulletNode=this.bulletNode,_.GameGlobalVariable.languaNode=this.languaNode,_.GameGlobalVariable.liulianNode=this.liulianNode,_.GameGlobalVariable.mosterNode=this.mosterNode,_.GameGlobalVariable.effNode=this.othereff,_.GameGlobalVariable.paths=this.pathsNode,_.GameGlobalVariable.nowlevelhuobi=0,this.initUI(),this.showattackinfo.addEventListener(),this.auto_ui.dbAnim_openGame.node.active=!1,this.scheduleOnce(function(){n.loadBottom()},.5)},t.prototype.loadBottom=function(){return r(this,void 0,Promise,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.bottomNd?[3,2]:[4,this._loadRes(f.BundleNames.Game,"prefabs/bottomNode",cc.Prefab)];case 1:e=t.sent(),this.bottomNd=cc.instantiate(e),t.label=2;case 2:return this.bottmoNode.addChild(this.bottomNd),this.bottomNd.setPosition(0,0),[2]}})})},t.prototype._close=function(){e.prototype._close.call(this),this.showattackinfo.removeEventListener(),w.BuffMgr.resetCurrentWave(),h.NodePoolMag.instance.clearAllNodePools(),cc.game.setFrameRate(60)},t.prototype._addEventListener=function(){this._addEvent(d.EVENT_TYPE.Game_Update,this.updateMultiplier,this),this._addEvent(d.EVENT_TYPE.Game_Moster_DIE,this.onMonsterDie,this),this._addEvent(d.EVENT_TYPE.Game_Moster_Attack,this.reduceHealth,this),this._addEvent(d.EVENT_TYPE.Game_OpenGame,this.onStartGame,this),this._addEvent(d.EVENT_TYPE.Game_CreateDuWu,this.createPoisonFog,this),this._addEvent(d.EVENT_TYPE.GAME_BackHall,this.backView,this)},t.prototype.createPoisonFog=function(e,t,o){return r(this,void 0,Promise,function(){var n,i;return c(this,function(a){switch(a.label){case 0:return(n=h.NodePoolMag.instance.getNodeFromPool("duwu"))?[3,2]:[4,this._loadRes(f.BundleNames.Game,"prefabs/effpre/UI_DuWu",cc.Prefab)];case 1:i=a.sent(),h.NodePoolMag.instance.createNodePool("duwu",1,i),n=h.NodePoolMag.instance.getNodeFromPool("duwu"),a.label=2;case 2:return n.setPosition(e.node.x,e.node.y),n.angle=1===e.moveindex||3===e.moveindex||5===e.moveindex?0:90,this.othereff.addChild(n),n.getComponent(B.default).initializeInfo(t,o),[2]}})})},t.prototype.updateMultiplier=function(e){1!==this.jiasuCode&&this.onUpdate(e),this.onUpdate(e)},t.prototype.onDisable=function(){_.GameGlobalVariable.clearAttackRecords()},t.prototype.onUpdate=function(e){this.isgamepuase||(this.mosterScript.onCreateMonster(e),this.setPlayerState(e),this.setMonsterState(e),this.updateBullets(e),this.updateOtherEffects(e))},t.prototype.updateOtherEffects=function(e){this.othereff.getComponentsInChildren(B.default).forEach(function(t){t.onUpdate(e)})},t.prototype.updateBullets=function(e){var t=this;_.GameGlobalVariable.bulletNode.getComponentsInChildren(E.default).forEach(function(t){t.onUpdate(e)});var o=_.GameGlobalVariable.languaNode.getComponentsInChildren(G.default),n=0,i=[];o.forEach(function(t){t.node.zIndex=-2,i.push(t),t.onUpdate(e),n+=1}),n>100&&(i.sort(function(e,t){return e.createtime-t.createtime}),i.shift().hideBullet()),_.GameGlobalVariable.sortBlueMelons(i,this.mosterNode),i.forEach(function(e){e.getComponent(G.default).pengZhuangMoster(t.mosterNode)}),_.GameGlobalVariable.liulianNode.getComponentsInChildren(T.default).forEach(function(t){t.node.zIndex=-1,t.onUpdate(e)})},t.prototype.ceshiDaYin=function(){},t.prototype.setPlayerState=function(e){this.playerNode.getComponentsInChildren(y.default).forEach(function(t){t.node.active&&t.onUpdate(e)})},t.prototype.setMonsterState=function(e){this.mosterNode.getComponentsInChildren(g.default).forEach(function(t){t.onUpdate(e)});var t=_.GameGlobalVariable.sortMonsters(this.mosterNode),o=999;t.forEach(function(e){e.script.node.zIndex=o,o-=1})},t.prototype.onClose=function(){},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_back:if(S.PlayerDataMgr.getGuideIndexByTaskName(O.GuideName.GameBag)<O.GameBagGuideIndex.GuideCompletion)return void U.TipMgr.showToast(j.langMgr.getStr("0021"));this.onClickBack();break;case t.btn_jiasuNode:this.onClickSpeed()}},t.prototype.resetSpeed=function(){cc.director.getScheduler().setTimeScale(1)},t.prototype.setSpeedState=function(e){this.jiasuCode=e,2===this.jiasuCode?(cc.director.getScheduler().setTimeScale(2),this.auto_ui.btn_jiasuNode.node.children[3].active=!0,this.auto_ui.btn_jiasuNode.node.children[2].active=!1):(cc.director.getScheduler().setTimeScale(1),this.auto_ui.btn_jiasuNode.node.children[3].active=!1,this.auto_ui.btn_jiasuNode.node.children[2].active=!0)},t.prototype.onClickSpeed=function(){1===this.jiasuCode?this.setSpeedState(2):this.setSpeedState(1)},t.prototype.onBackToGame=function(){w.BuffMgr.cleanLiuLian(),this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.setNodeState(2),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_CameraControl,1),this.resetGame()},t.prototype.resetGame=function(){switch(this.overstate){case 1:this.resetSpeed(),this.mosterScript.mosterboshu++,M.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,_.GameGlobalVariable.isSpecialLevel());break;case 2:this.xueliang=3;break;case 3:this.mosterScript.mosterboshu=0,this.xueliang=3}this.isgamepuase=!1,this.mosterScript.recycleMonster(),this.updateRound()},t.prototype.onStartGame=function(){var e=this;this.overstate=-1,this.setSpeedState(this.jiasuCode),this.isgamepuase=!1,this.setNodeState(1),this.scheduleOnce(function(){u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_CameraControl,.68)},.3),this.scheduleOnce(function(){e.auto_ui.dbAnim_openGame.node.active=!0,e.auto_ui.dbAnim_openGame.playAnimation("newAnimation",1),D.AudioMgr.playSoundEffect("sound/pengzhuang",!1,f.BundleNames.Game)},.6),this.scheduleOnce(function(){e.auto_ui.dbAnim_openGame.node.active=!1},1.5),this.scheduleOnce(function(){e.playGame()},.5)},t.prototype.challengeGame=function(){this.overstate=-1,this.setSpeedState(this.jiasuCode),this.isgamepuase=!1,this.playGame()},t.prototype.setNodeState=function(e){var t=this;switch(e){case 1:this.scheduleOnce(function(){t.UI_BagNode.active=!1,t.mapNode.y=0,t.mapNode.opacity=255,t.updateRound()},.3),this.auto_ui.node_shuimitao.active=!0,this.auto_ui.node_shuimitao.opacity=0,cc.Tween.stopAllByTarget(this.auto_ui.node_shuimitao),cc.tween(this.auto_ui.node_shuimitao).to(.5,{opacity:255}).start(),this.auto_ui.node_chaoxue.active=!0,this.auto_ui.node_chaoxue.opacity=0,cc.tween(this.auto_ui.node_chaoxue).to(.5,{opacity:255}).start(),this.auto_ui.btn_jiasuNode.node.active=!0,this.auto_ui.btn_jiasuNode.node.opacity=0,cc.tween(this.auto_ui.btn_jiasuNode.node).to(.5,{opacity:255}).start(),this.aixinNode.active=!0,this.aixinNode.opacity=0,cc.tween(this.aixinNode).to(.5,{opacity:255}).start(),this.auto_ui.node_lu.active=!0,this.auto_ui.node_lu.opacity=0,cc.tween(this.auto_ui.node_lu).to(.5,{opacity:255}).start(),this.tongjiNode.active=!0,this.tongjiNode.opacity=0,cc.tween(this.tongjiNode).to(.5,{opacity:255}).start(),this.playerNode.active=!0,this.playerNode.opacity=0,cc.tween(this.playerNode).to(.5,{opacity:255}).start(),cc.game.setFrameRate(59);break;case 2:u.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_HIDE_TONGJI),cc.tween(this.mapNode).to(.5,{y:100}).start(),cc.tween(this.playerNode).to(.5,{y:100}).start(),this.scheduleOnce(function(){t.mapNode.getComponent(k.default).recycleNodes(),t.mapNode.opacity=0,t.mapNode.y=0,t.playerNode.y=0,t.playerNode.active=!1,t.UI_BagNode.active=!0,t.UI_BagNode.children[0].getComponent(P.default).openView({isGameEnd:!0}),t.updateRound()},.6),cc.Tween.stopAllByTarget(this.auto_ui.node_shuimitao),cc.tween(this.auto_ui.node_shuimitao).to(.5,{opacity:0}).call(function(){t.auto_ui.node_shuimitao.active=!1}).start(),cc.tween(this.auto_ui.node_chaoxue).to(.5,{opacity:0}).call(function(){t.auto_ui.node_chaoxue.active=!1}).start(),cc.tween(this.auto_ui.btn_jiasuNode.node).to(.5,{opacity:0}).call(function(){t.auto_ui.btn_jiasuNode.node.active=!1}).start(),cc.tween(this.aixinNode).to(.5,{opacity:0}).call(function(){t.aixinNode.active=!1}).start(),cc.tween(this.auto_ui.node_lu).to(.5,{opacity:0}).call(function(){t.auto_ui.node_lu.active=!1}).start(),cc.game.setFrameRate(60),cc.winSize.height/cc.winSize.width<2&&cc.tween(this.tongjiNode).to(.5,{opacity:0}).call(function(){t.tongjiNode.active=!1}).start()}},t.prototype.playGame=function(){this.mosterScript.initMoster(),this.updateExperienceUI(),this.updateHealth()},t.prototype.reduceHealth=function(e){var t=e.mosterId,o=1;1===p.Excel.shuiguoguaiwu(t).boss&&(o=3),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.COMMON_SHAK),this.xueliang-=o,this.xueliang<0&&(this.xueliang=0),D.AudioMgr.playSoundEffect("sound/abb",!1,f.BundleNames.Game),this.updateHealth(),this.xueliang<=0&&(this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.resetSpeed(),this.fuhuocount<this.maxcount?(this.fuhuocount+=1,1===_.GameGlobalVariable.isSpecialLevel()&&w.BuffMgr.clearCurrentCiTiao(),m.default.open(f.BundleNames.Game,b.UIView_Game.UI_GameFail,{back:this.onBack.bind(this),type:_.GameGlobalVariable.isSpecialLevel()})):this.onBack(4))},t.prototype.updateHealth=function(){for(var e=this.aixinNode.children,t=0;t<e.length;t++)e[t].children[0].active=this.xueliang>=t+1},t.prototype.showIllustration=function(){m.default.open(f.BundleNames.Game,b.UIView_Game.UI_TuJian)},t.prototype.updateRound=function(){var e;e=1===_.GameGlobalVariable.isSpecialLevel()?p.Excel.shuiguotiaozhan(this.nowlevel):p.Excel.shuiguoguanqia(this.nowlevel);var t=this.mosterScript.getCurrentWave();this.UI_BagNode.active&&1===_.GameGlobalVariable.isSpecialLevel()?this.auto_ui.txt_lunhui.string=j.langMgr.getStr("0067"):this.auto_ui.txt_lunhui.string=j.langMgr.getStr("0062",t+"/"+e.levelboshuid.length)},t.prototype.onBack=function(e){switch(e){case 1:1===_.GameGlobalVariable.isSpecialLevel()?u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Add_YinBi,30):u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Add_YinBi,15),this.overstate=2,this.onBackToGame();break;case 2:this.overstate=3,this.resetGame(),w.BuffMgr.clearCurrentCiTiao(),this.backView(),M.GameDataMgr.clearGameBagData(),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Hide),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_CameraControl,1);break;case 3:this.setSpeedState(this.jiasuCode),this.isCiTiaoOpen||this.isOpenPuase||(this.isgamepuase=!1);break;case 4:this.isGameOver=!0,m.default.open(f.BundleNames.Game,b.UIView_Game.UI_GameOver,{type:1,back:this.onBack.bind(this)})}},t.prototype.onClickBack=function(){var e=this;this.resetSpeed(),this.isgamepuase=!0,this.isOpenPuase=!0,m.default.open(f.BundleNames.Game,b.UIView_Game.UI_GamePuase,{back:function(t){e.isOpenPuase=!1,e.onBack(t)}})},t.prototype.backView=function(){M.GameDataMgr.updateChallengeContinue(this.nowlevel,!1),this.resetSpeed(),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),m.default.closeAllViews(),m.default.open(f.BundleNames.Home,C.UIView_Home.UI_Hall,_.GameGlobalVariable.isSpecialLevel())},t.prototype.onHideView=function(){this._close()},t.prototype.isGamePassed=function(){var e=1===_.GameGlobalVariable.isSpecialLevel()?p.Excel.shuiguotiaozhan(this.nowlevel):p.Excel.shuiguoguanqia(this.nowlevel),t=this.mosterScript.mosterboshu+1;return!!e.levelboshuid[t]||(M.GameDataMgr.updateLevelWave(this.nowlevel,t,_.GameGlobalVariable.isSpecialLevel()),this.isGameOver=!0,this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.resetSpeed(),this.isCiTiaoOpen||(u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Hide),console.log("\u6311\u6218\u6a21\u5f0f\u901a\u5173"),m.default.open(f.BundleNames.Game,b.UIView_Game.UI_GameOver,{type:2,back:this.onBack.bind(this)})),!1)},t.prototype.recycleBullets=function(){for(var e=this.bulletNode.children,t=e.length,o=0;o<t;o++){var n=e[0],i=n.getComponent(E.default);i&&h.NodePoolMag.instance.recycleNodeToPool("bullet_"+i.bulletId,n)}var a=_.GameGlobalVariable.liulianNode.children,r=a.length;for(o=0;o<r;o++){var c=a[0],s=c.getComponent(T.default);h.NodePoolMag.instance.recycleNodeToPool("bullet_"+s.bulletId,c)}},t.prototype.isOver=function(){var e=this;this.mosterNode.children.length<=0&&(N.LogMgr.debug("\u5f53\u524d\u4e00\u8f6e\u901a\u5173 \u8fdb\u5165\u5408\u6210\u754c\u9762"),-1===this.overstate&&(u.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_LOCK_SCREE,!0),this.isGamePassed()&&(w.BuffMgr.saveCurrentCiTiao(),w.BuffMgr.boshuAttackAdd(),1===_.GameGlobalVariable.isSpecialLevel()?(this.overstate=1,this.recycleBullets(),w.BuffMgr.cleanLiuLian(),this.mosterScript.mosterboshu+=1,M.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,_.GameGlobalVariable.isSpecialLevel()),this.mosterScript.recycleMonster(),this.updateRound(),this.tiaozhanTip.active=!0,this.tiaozhanTip.opacity=255,this.tiaozhanTip.scaleY=0,this.tiaozhanTip.children[1].getComponent(cc.Label).string=j.langMgr.getStr("0083",this.mosterScript.mosterboshu,this.mosterScript.mosterboshu+1),this.challengeGame(),cc.tween(this.tiaozhanTip).to(.5,{scaleY:1}).delay(.5).call(function(){u.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_LOCK_SCREE,!1)}).to(.25,{opacity:0}).call(function(){}).start()):(D.AudioMgr.playSoundEffect("sound/boxopen",!1,f.BundleNames.Game),this.auto_ui.node_playani.active=!0,this.auto_ui.node_playani.getComponent(dragonBones.ArmatureDisplay).playAnimation("box",1),this.scheduleOnce(function(){var t=p.Excel.shuiguoguanqia(_.GameGlobalVariable.nowlevel),o=w.BuffMgr.calculateFinalAward(t.yinbi);u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Add_YinBi,o),e.overstate=1,e.scheduleOnce(function(){e.auto_ui.node_playani.active=!1,e.onBackToGame(),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Hide),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_CameraControl,1)},2)},.6)))))},t.prototype.onMonsterDie=function(e){var t=e.moster,o=p.Excel.shuiguoguaiwu(t).mosterjinyan;o=w.BuffMgr.getPlayerExperienceValue(o),this.roleexperience+=o,this.updateExperienceUI()},t.prototype.updateExperienceUI=function(){var e=this;if(!this.isCiTiaoOpen&&!this.isGameOver){var t=p.Excel.shuiguoneibulevel(this.rolelevel);if(console.log("\u5f53\u524d\u83b7\u5f97\u7ecf\u9a8c\u53d8\u5316",this.roleexperience,t.jinyan),this.roleexperience>=t.jinyan&&(this.isCiTiaoOpen=!0,this.isgamepuase=!0,this.roleexperience-=t.jinyan,console.log("\u5269\u4f59\u7ecf\u9a8c",this.roleexperience),this.rolelevel+=1,this.scheduleOnce(function(){e.resetSpeed(),m.default.open(f.BundleNames.Game,b.UIView_Game.UI_ChiTiao,{back:e.backToCiTiao.bind(e),nowbo:e.mosterScript.getCurrentWave()})},.2)),this.bottomNd){var o=this.bottomNd.getComponent(L.default),n=this.roleexperience/t.jinyan;o.updateUI(this.rolelevel,n)}M.GameDataMgr.updateRoleLevel(this.nowlevel,this.rolelevel,this.roleexperience,_.GameGlobalVariable.isSpecialLevel())}},t.prototype.backToCiTiao=function(){this.setSpeedState(this.jiasuCode),this.isCiTiaoOpen=!1,this.isCiTiaoOpen||this.isOpenPuase||(this.isgamepuase=!1),this.updateExperienceUI()},t.prototype.initUI=function(){return r(this,void 0,Promise,function(){var e,t,o,n,i,a,r,s,l;return c(this,function(c){switch(c.label){case 0:return e=null,e=1===_.GameGlobalVariable.isSpecialLevel()?p.Excel.shuiguotiaozhan(this.nowlevel):p.Excel.shuiguoguanqia(this.nowlevel),t=(new Date).getTime(),o=this.auto_ui.node_bg.getComponent(cc.Sprite),n=this.auto_ui.node_chaoxue.getComponent(cc.Sprite),i=this.auto_ui.node_lu.getComponent(cc.Sprite),[4,this._loadRes(f.BundleNames.Game,"res/bg/changjin/\u573a\u666f"+e.dipicture,cc.SpriteFrame)];case 1:return a=c.sent(),o.spriteFrame=a,r=[{x:-63.189,y:529.428},{x:-63.189,y:529.428},{x:-38.237,y:560.618},{x:-61.717,y:536.019}],[4,this._loadRes(f.BundleNames.Game,"res/bg/caoxue"+e.dipicture,cc.SpriteFrame)];case 2:return s=c.sent(),n.spriteFrame=s,n.node.setPosition(r[e.dipicture-1]),[4,this._loadRes(f.BundleNames.Game,"res/bg/lu"+e.dipicture,cc.SpriteFrame)];case 3:return l=c.sent(),i.spriteFrame=l,console.log("\u80cc\u666f\u5e95\u56fe\u65f6\u95f4\u5dee",(new Date).getTime()-t),this.loadUIBag(),1===_.GameGlobalVariable.isSpecialLevel()?this.auto_ui.txt_level.string=j.langMgr.getStr("0066"):this.auto_ui.txt_level.string=j.langMgr.getStr("0065",this.nowlevel),cc.winSize.height/cc.winSize.width<2?this.tongjiNode.active=!1:this.tongjiNode.active=!0,this.updateRound(),this.setSpeedState(1),[2]}})})},t.prototype.loadUIBag=function(){return r(this,void 0,Promise,function(){var e;return c(this,function(t){switch(t.label){case 0:return A.LoadingMgr.show(),this.nowBag?[3,2]:[4,this._loadRes(f.BundleNames.Game,"prefabs/hecheng/UI_Bag",cc.Prefab)];case 1:e=t.sent(),this.nowBag=cc.instantiate(e),t.label=2;case 2:return this.UI_BagNode.addChild(this.nowBag),A.LoadingMgr.hide(),[2]}})})},t.prototype.onClickTongGuan=function(){var e;this.overstate=1,e=1===_.GameGlobalVariable.isSpecialLevel()?p.Excel.shuiguotiaozhan(this.nowlevel):p.Excel.shuiguoguanqia(this.nowlevel),this.mosterScript.mosterboshu=e.levelboshuid.length,this.isGamePassed()},t.prototype.onClickCiTiao=function(){m.default.open(f.BundleNames.Game,b.UIView_Game.UI_ChiTiao,{back:this.backToCiTiao.bind(this)})},t.prototype.setCiTiaoContent=function(e){var t=e.citiaomiaoshu,o=p.Excel.getFruitBuff(e.citiaoshuzhitype).value.map(function(e){return e.toString()});return I.default.replaceStringSymbols(t,"X",o)},a([q(s.default)],t.prototype,"auto_ui",void 0),a([q(cc.Node)],t.prototype,"UI_BagNode",void 0),a([q(cc.Prefab)],t.prototype,"UI_BagPre",void 0),a([q(cc.Node)],t.prototype,"mosterNode",void 0),a([q(cc.Node)],t.prototype,"pathsNode",void 0),a([q(cc.Node)],t.prototype,"playerNode",void 0),a([q(cc.Node)],t.prototype,"bulletNode",void 0),a([q(cc.Node)],t.prototype,"languaNode",void 0),a([q(cc.Node)],t.prototype,"liulianNode",void 0),a([q(cc.Node)],t.prototype,"othereff",void 0),a([q(cc.Node)],t.prototype,"aixinNode",void 0),a([q(cc.Node)],t.prototype,"mapNode",void 0),a([q(cc.Node)],t.prototype,"tiaozhanTip",void 0),a([q(cc.Node)],t.prototype,"tongjiNode",void 0),a([q(cc.Node)],t.prototype,"bottmoNode",void 0),a([q(v.default)],t.prototype,"showattackinfo",void 0),a([V],t)}(l.default));o.default=H,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LanMgr":"LanMgr","./LoadingManager":"LoadingManager","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_Bag":"UI_Bag","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove":"UI_BulletMove","./UI_CreateMoster":"UI_CreateMoster","./UI_DuWu":"UI_DuWu","./UI_GameViewMap":"UI_GameViewMap","./UI_GameView_UIBindings":"UI_GameView_UIBindings","./UI_MosterLogic":"UI_MosterLogic","./UI_Player":"UI_Player","./UI_ShowAttackInfo":"UI_ShowAttackInfo","./UI_SkillShow":"UI_SkillShow"}],UI_GameYinBi:[function(e,t,o){"use strict";cc._RF.push(t,"fc8c3SaFllM/qzP5zJqA3Qw","UI_GameYinBi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./CommonUtils"),c=e("./EventManager"),s=e("./EvenType"),l=e("./GameDataManager"),u=e("./LogManager"),d=e("./ResKeeper"),p=cc._decorator,h=p.ccclass,f=p.property,g=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.cost=null,t}return i(t,e),t.prototype.onEnable=function(){c.EventMgrInstance.addListener(s.EVENT_TYPE.Game_YinBiValue,this.initYinBi,this),c.EventMgrInstance.addListener(s.EVENT_TYPE.Game_Add_YinBi,this.addYinBi,this),this.initYinBi()},t.prototype.addYinBi=function(e,t,o,n){void 0===t&&(t=null),void 0===n&&(n=!0),u.LogMgr.debug("addYinBi",e,t,o,n),r.default.showCoinAnimation(this.icon.node.convertToWorldSpaceAR(cc.v2()),t,e,"yinbi",n,o)},t.prototype.initYinBi=function(){this.cost.string=l.GameDataMgr.getSilverCoin+""},t.prototype.onDisable=function(){c.EventMgrInstance.removeListener(s.EVENT_TYPE.Game_YinBiValue,this.initYinBi,this),c.EventMgrInstance.removeListener(s.EVENT_TYPE.Game_Add_YinBi,this.addYinBi,this)},a([f(cc.Sprite)],t.prototype,"icon",void 0),a([f(cc.Label)],t.prototype,"cost",void 0),a([h],t)}(d.default));o.default=g,cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],UI_GetItems_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"5213b2dc2ZNQKHODtEADSf0","UI_GetItems_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=e("./List"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.list_min=null,t.list_max=null,t._btnNames=["btn_close"],t}return i(t,e),a([u(cc.Button)],t.prototype,"btn_close",void 0),a([u(c.default)],t.prototype,"list_min",void 0),a([u(c.default)],t.prototype,"list_max",void 0),a([l("UI_GetItems_UIBindings")],t)}(r.default);o.default=d,cc._RF.pop()},{"./List":"List","./UIBindings":"UIBindings"}],UI_GetItems:[function(e,t,o){"use strict";cc._RF.push(t,"0893bpZnzNDRZ8n8vvRlEpj","UI_GetItems");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_GetItems_UIBindings"),c=e("./UIView"),s=e("./Item_Icon"),l=e("./AudioManager"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.delayTime=.1,t}return i(t,e),t.prototype._show=function(e){this.delayTime=.1,this.itemData=e,e.ids.length<=5?this.auto_ui.list_min.numItems=e.ids.length:this.auto_ui.list_max.numItems=e.ids.length,l.AudioMgr.playSoundEffect("effect/getReward")},t.prototype.getItemRender=function(e,t){e.getComponent(s.default).initialize(this.itemData.ids[t],this.itemData.counts[t]),e.stopAllActions(),e.scale=0,e.runAction(cc.sequence(cc.delayTime(this.delayTime),cc.scaleTo(.1,1,1))),this.delayTime+=.05},t.prototype._clickListener=function(){this.itemData&&this.itemData.clickCallBack&&this.itemData.clickCallBack(),this.itemData=null,this._close()},a([p(r.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default));o.default=h,cc._RF.pop()},{"./AudioManager":"AudioManager","./Item_Icon":"Item_Icon","./UIView":"UIView","./UI_GetItems_UIBindings":"UI_GetItems_UIBindings"}],UI_GetZaZhong_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"e7e41ijiENKvrKfWo2WTCOa","UI_GetZaZhong_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.txt_titleLabel=null,t.node_light=null,t.node_qiFather=null,t.node_huoFather=null,t.sp_icon=null,t.sp_ciTiaoIcon=null,t.btn_closeBtn=null,t.rtxt_ciTiaoInfo=null,t._btnNames=["btn_closeBtn"],t}return i(t,e),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Node)],t.prototype,"node_light",void 0),a([l(cc.Node)],t.prototype,"node_qiFather",void 0),a([l(cc.Node)],t.prototype,"node_huoFather",void 0),a([l(cc.Sprite)],t.prototype,"sp_icon",void 0),a([l(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),a([s("UI_GetZaZhong_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GetZaZhong:[function(e,t,o){"use strict";cc._RF.push(t,"4e49dugrHdB7ovb3gPxfOD8","UI_GetZaZhong");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_GetZaZhong_UIBindings"),c=e("./BundleConfig"),s=e("./CommonUtils"),l=e("./Excel"),u=e("./UIView"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){var t=l.Excel.shuiguo(e.shuiGuoId);if(t){var o=this.auto_ui;o.txt_titleLabel.string=t.newName;var n="player"+(e.shuiGuoId-1e3)+"_5";this._loadRes(c.BundleNames.Common,"res/player/"+n,cc.SpriteFrame).then(function(e){o.sp_icon.spriteFrame=e});var i="tianfu_"+e.shuiGuoId+"_1";this._loadRes(c.BundleNames.Common,"res/tianfuicon/"+i,cc.SpriteFrame).then(function(e){o.sp_ciTiaoIcon.spriteFrame=e}),o.node_light.stopAllActions(),o.node_light.runAction(cc.repeatForever(cc.rotateBy(5,360)));var a=-1;if(l.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId===e.shuiGuoId&&0!==t.newTianFuBuff&&(a=t.newTianFuBuff)}),-1!==a){var r=l.Excel.getFruitBuff(a);if(r){var u=r.buffdesc,d=[u=s.default.replaceStringSymbols(u,"\\n",[""])];u.includes("X")&&(d=u.split("X"));var p="";d.forEach(function(e,o){if(e.includes("#")){var n='<u><color=#ffff00 click="ShowZaZhongInfo">'+t.newName+"</c></u>";e=s.default.replaceStringSymbols(e,"#",[n])}p+="<color=#ffffff>"+e+"</c>",o<d.length-1&&r.value&&(p+="<color=#71ff00>"+r.value[o]+"</c>")}),p="<outline color=#000000 width=3>"+p+"</outline>",o.rtxt_ciTiaoInfo.string=p}}s.default.loadLevel5Effect(e.shuiGuoId,o.node_qiFather,o.node_huoFather,this._loadRes.bind(this))}else this._close()},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close()}},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})},a([h(r.default)],t.prototype,"auto_ui",void 0),a([p],t)}(u.default);o.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIView":"UIView","./UI_GetZaZhong_UIBindings":"UI_GetZaZhong_UIBindings"}],UI_Hall_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"52699qfIxJNS7wt1cWJniO8","UI_Hall_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_choice=null,t.btn_shake=null,t.btn_music=null,t.btn_setting=null,t.btn_start=null,t.btn_sidebar=null,t.btn_powerAddBtn=null,t.btn_goldAddBtn=null,t.btn_diamondAddBtn=null,t.btn_shopBtn=null,t.btn_wareHouseBtn=null,t.btn_fightingBtn=null,t.btn_newsBtn=null,t.node_setting=null,t.node_off_shake=null,t.node_off_music=null,t.node_NewMainView=null,t.node_NewViewFather=null,t.node_bottomBtnFather=null,t.txt_powerLabel=null,t.txt_goldLabel=null,t.txt_diamondLabel=null,t._btnNames=["btn_choice","btn_shake","btn_music","btn_setting","btn_start","btn_sidebar","btn_powerAddBtn","btn_goldAddBtn","btn_diamondAddBtn","btn_shopBtn","btn_wareHouseBtn","btn_fightingBtn","btn_newsBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_choice",void 0),a([l(cc.Button)],t.prototype,"btn_shake",void 0),a([l(cc.Button)],t.prototype,"btn_music",void 0),a([l(cc.Button)],t.prototype,"btn_setting",void 0),a([l(cc.Button)],t.prototype,"btn_start",void 0),a([l(cc.Button)],t.prototype,"btn_sidebar",void 0),a([l(cc.Button)],t.prototype,"btn_powerAddBtn",void 0),a([l(cc.Button)],t.prototype,"btn_goldAddBtn",void 0),a([l(cc.Button)],t.prototype,"btn_diamondAddBtn",void 0),a([l(cc.Button)],t.prototype,"btn_shopBtn",void 0),a([l(cc.Button)],t.prototype,"btn_wareHouseBtn",void 0),a([l(cc.Button)],t.prototype,"btn_fightingBtn",void 0),a([l(cc.Button)],t.prototype,"btn_newsBtn",void 0),a([l(cc.Node)],t.prototype,"node_setting",void 0),a([l(cc.Node)],t.prototype,"node_off_shake",void 0),a([l(cc.Node)],t.prototype,"node_off_music",void 0),a([l(cc.Node)],t.prototype,"node_NewMainView",void 0),a([l(cc.Node)],t.prototype,"node_NewViewFather",void 0),a([l(cc.Node)],t.prototype,"node_bottomBtnFather",void 0),a([l(cc.Label)],t.prototype,"txt_powerLabel",void 0),a([l(cc.Label)],t.prototype,"txt_goldLabel",void 0),a([l(cc.Label)],t.prototype,"txt_diamondLabel",void 0),a([s("UI_Hall_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Hall:[function(e,t,o){"use strict";cc._RF.push(t,"cbc447QF6dIoabEFmuFsMLw","UI_Hall");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./AIControl"),c=e("./AudioManager"),s=e("./BaseModule"),l=e("./BundleConfig"),u=e("./Const_Common"),d=e("./EvenType"),p=e("./EventManager"),h=e("./GameDataManager"),f=e("./GameGlobalVariable"),g=e("./GuideControl"),_=e("./HallGlobalVariable"),y=e("./LanMgr"),v=e("./ModuleManager"),m=e("./PlayerDataManager"),b=e("./RedPointControl"),I=e("./ResLoader"),w=e("./TipsManager"),E=e("./UIConfig_Game"),M=e("./UIConfig_Home"),C=e("./UIManager"),B=e("./UIView"),P=e("./UI_Hall_UIBindings"),x=cc._decorator,G=x.ccclass,T=x.property,D=(x.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t._deltaTime=0,t}var o;return i(t,e),o=t,t.prototype._show=function(){var e=this;o._instance=this,p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Load_View,!1),this.auto_ui.node_setting.active=!1,this.auto_ui.setClickFast(this.auto_ui.btn_setting),this.auto_ui.btn_sidebar.node.active=!1,cc.sys.platform,cc.sys.BYTEDANCE_GAME,c.AudioMgr.playBackgroundMusic("sound/homebg",!0,l.BundleNames.Home),this.resetRichLabel(),m.PlayerDataMgr.getWuJinCount(),_.default.selfMap["\u6218\u6597\u6309\u94ae"]=this.auto_ui.btn_fightingBtn.node,this.scheduleOnce(function(){e.checkContinueGame()}),this.checkUnLockFruit(),this.loadGame()},t.prototype.checkUnLockFruit=function(){var e=this,t=m.PlayerDataMgr.gameWinCheckUnlock();t&&t.length>0?C.default.open(l.BundleNames.Home,M.UIView_Home.UI_UnlockNewEquip,{shuiGuoIds:t,callBack:function(){if(m.PlayerDataMgr.getGuideIndexByTaskName(u.GuideName.FruitDressUpEquip)===u.DressUpEquipGuideIndex.GuideDialog){var t=e.auto_ui.btn_wareHouseBtn.node,o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(t.width,t.height),i=(e.node.height-1334)/2;g.GuideCtrlInstance.showGuide({callBack:function(){m.PlayerDataMgr.setGuideIndex(u.GuideName.FruitDressUpEquip,u.DressUpEquipGuideIndex.SelectFruit),e.showViewByType(1)},sayStr:y.langMgr.getStr("0048"),wPos:o,size:n,sayNodePos:cc.v2(0,-250-i)})}else r.default._instance.displayClickButton(e.auto_ui.btn_wareHouseBtn.node,function(){e.showViewByType(1)});p.EventMgrInstance.emitEvent(d.EVENT_TYPE.HallResetBag),_.default.isNeedResetWareHouse=!0}}):b.RedPointCtrl.getRedPointStatusByType(b.RedPointType.upEquip)&&r.default._instance.displayClickButton(e.auto_ui.btn_wareHouseBtn.node,function(){e.showViewByType(1)}),_.default.selfMap["\u6218\u6597\u6309\u94ae"]=this.auto_ui.btn_fightingBtn.node},t.prototype.checkContinueGame=function(){m.PlayerDataMgr.getGuideIndexByTaskName(u.GuideName.GameBag)!==u.GameBagGuideIndex.GuideCompletion||r.default._instance.isOpen||(h.GameDataMgr.getContinueGame()&&(C.default.open(l.BundleNames.Home,M.UIView_Home.UI_JiXuGame,1),this.showViewByType(2)),h.GameDataMgr.getContinueChallenge()?(this.showViewByType(3),C.default.open(l.BundleNames.Home,M.UIView_Home.UI_JiXuGame,2)):-1!==f.GameGlobalVariable.nowlevel?this.showViewByType(2):this.showViewByType(3))},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){if(m.PlayerDataMgr.getGuideIndexByTaskName(u.GuideName.EquipLevelUp)===u.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2){var t=e.auto_ui.btn_wareHouseBtn.node,o=t.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.size(t.width,t.height),i=(e.node.height-1334)/2;g.GuideCtrlInstance.showGuide({callBack:function(){e.showViewByType(1)},sayStr:y.langMgr.getStr("0049"),wPos:o,size:n,sayNodePos:cc.v2(0,-250-i)})}})},t.prototype._addEventListener=function(){this._addEvent(d.EVENT_TYPE.Game_count_down_time,this._refreshTime,this),this._addEvent(d.EVENT_TYPE.Hall_ResetRich,this.resetRichLabel,this),this._addEvent(d.EVENT_TYPE.Hall_StartGame,this._start,this),this._addEvent(d.EVENT_TYPE.GAME_TIAOZHAN_VIEW,this.openSpecialChallenge,this),this._addEvent(d.EVENT_TYPE.HallResetUnLockFurit,this.checkUnLockFruit,this)},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_start:this._start();break;case t.btn_choice:this._choice();break;case t.btn_setting:this._setting();break;case t.btn_sidebar:this._sidebar();break;case t.btn_shopBtn:this.showViewByType(0);break;case t.btn_wareHouseBtn:this.showViewByType(1);break;case t.btn_fightingBtn:this.showViewByType(2);break;case t.btn_newsBtn:this.showViewByType(3);break;case t.btn_powerAddBtn:C.default.open(l.BundleNames.Home,M.UIView_Home.UI_AddPower);break;case t.btn_goldAddBtn:this.showViewByType(0,{isBottom:!0}),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.HallScrollShop,{isBottom:!0});break;case t.btn_diamondAddBtn:this.showViewByType(0,{isUp:!0}),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.HallScrollShop,{isUp:!0})}},t.prototype._start=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!1),m.PlayerDataMgr.globalData.power>=f.GameGlobalVariable.kaishitilicount||t?(t||m.PlayerDataMgr.subtractPower(f.GameGlobalVariable.kaishitilicount),p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),f.GameGlobalVariable.nowlevel=e,f.GameGlobalVariable.offtime=(new Date).getTime(),C.default.open(l.BundleNames.Game,E.UIView_Game.UI_GameView)):w.TipMgr.showToast(y.langMgr.getStr("0008"))},t.prototype.openSpecialChallenge=function(){p.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),f.GameGlobalVariable.teshulevel=1,f.GameGlobalVariable.nowlevel=-1,this._close(),C.default.open(l.BundleNames.Game,E.UIView_Game.UI_GameView)},t.prototype.onHideView=function(){v.ModuleMgr.clearAllModules(),this._close()},t.prototype._choice=function(){},t.prototype._setting=function(){this.auto_ui.node_setting.active=!this.auto_ui.node_setting.active},t.prototype._sidebar=function(){C.default.open(l.BundleNames.Home,M.UIView_Home.UI_Sidebar)},t.prototype.onResume=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];c.AudioMgr.playBackgroundMusic("sound/homebgm",!0,l.BundleNames.Home)},t.prototype._refreshTime=function(){},t.prototype.update=function(){},t.prototype.resetRichLabel=function(){var e=this.auto_ui;e.txt_powerLabel.string=m.PlayerDataMgr.globalData.power+"/"+m.PlayerDataMgr.globalData.maxPower,e.txt_goldLabel.string=""+m.PlayerDataMgr.globalData.gold,e.txt_diamondLabel.string=""+m.PlayerDataMgr.globalData.diamond},t.prototype.showViewByType=function(e,t){switch(void 0===t&&(t={}),this.auto_ui.node_bottomBtnFather.children.forEach(function(t,o){t.children[1].active=o===e,o===e?(t.width=t.children[1].width,t.height=t.children[1].height):(t.width=t.children[0].width,t.height=t.children[0].height)}),e){case 0:v.ModuleMgr.show(s.ModuleNames.Shop,this.auto_ui.node_NewViewFather,t);break;case 1:v.ModuleMgr.show(s.ModuleNames.WareHouse,this.auto_ui.node_NewViewFather,t);break;case 2:v.ModuleMgr.show(s.ModuleNames.Fighting,this.auto_ui.node_NewViewFather,t);break;case 3:v.ModuleMgr.show(s.ModuleNames.News,this.auto_ui.node_NewViewFather,t)}},t.prototype.loadGame=function(){I.default.loadBundle(l.BundleNames.Game).then(function(e){console.log("Loaded main bundle",e)})},a([T(P.default)],t.prototype,"auto_ui",void 0),o=a([G],t)}(B.default));o.default=D,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./ModuleManager":"ModuleManager","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResLoader":"ResLoader","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_Hall_UIBindings":"UI_Hall_UIBindings"}],UI_HuDun:[function(e,t,o){"use strict";cc._RF.push(t,"2c0e5cX22pEK6LDbjAdesGI","UI_HuDun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./NodePoolMag"),s=cc._decorator,l=s.ccclass,u=(s.property,s.inspector,function(e){function t(){var t=e.call(this)||this;return t.xuelinag=0,t}return i(t,e),t.prototype.initializeHealth=function(e){this.xuelinag=e},t.prototype.reduceHealth=function(e){this.xuelinag-=e;var t=this.node.opacity;cc.tween(this.node).to(.1,{opacity:t-50}).to(.1,{opacity:t}).start(),this.xuelinag<=0&&c.NodePoolMag.instance.recycleNodeToPool("hudun",this.node)},a([l],t)}(r.default));o.default=u,cc._RF.pop()},{"./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper"}],UI_JiXuGame_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"37756Ofko1Fk6ogcDSpu1Bb","UI_JiXuGame_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_queDingBtn=null,t.btn_quxiaoBtn=null,t.txt_desclb=null,t._btnNames=["btn_closeBtn","btn_queDingBtn","btn_quxiaoBtn"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Button)],t.prototype,"btn_queDingBtn",void 0),a([l(cc.Button)],t.prototype,"btn_quxiaoBtn",void 0),a([l(cc.Label)],t.prototype,"txt_desclb",void 0),a([s("UI_JiXuGame_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_JiXuGame:[function(e,t,o){"use strict";cc._RF.push(t,"bd9bbDsvH5CQJ/b2CFsTNyq","UI_JiXuGame");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_JiXuGame_UIBindings"),c=e("./UIView"),s=e("./GameDataManager"),l=e("./BuffMag"),u=e("./EventManager"),d=e("./EvenType"),p=e("./LanMgr"),h=cc._decorator,f=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentCodeState=1,t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];if(this.currentCodeState=e,2===e)this.auto_ui.txt_desclb.string=p.langMgr.getStr("0046");else{var n=s.GameDataMgr.getContinueGame();this.auto_ui.txt_desclb.string=p.langMgr.getStr("0047",n.level)}},t.prototype.onEnable=function(){},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close(),this.startGame(1);break;case this.auto_ui.btn_queDingBtn:this._close(),this.startGame(2);break;case this.auto_ui.btn_quxiaoBtn:this._close(),this.startGame(1)}},t.prototype.startGame=function(e){var t=s.GameDataMgr.getContinueGame();1===e?(s.GameDataMgr.clearGameBagData(),1===this.currentCodeState?s.GameDataMgr.updateCiTiaoData(t.level,null):s.GameDataMgr.updateChallengeContinue(1,!1)):2===e&&(1===this.currentCodeState?(l.BuffMgr.setSavedCiTiao(t.citiaodata),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Hall_StartGame,t.level,!0)):u.EventMgrInstance.emitEvent(d.EVENT_TYPE.GAME_TIAOZHAN_VIEW,1,!0))},a([g(r.default)],t.prototype,"auto_ui",void 0),a([f],t)}(c.default);o.default=_,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./LanMgr":"LanMgr","./UIView":"UIView","./UI_JiXuGame_UIBindings":"UI_JiXuGame_UIBindings"}],UI_JianTou:[function(e,t,o){"use strict";cc._RF.push(t,"63a8do9fFxKyJyf2q5waAtd","UI_JianTou");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=cc._decorator,d=u.ccclass,p=(u.property,u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=1,t.elapsedOfflineTime=0,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.startArrow=function(){return r(this,void 0,Promise,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:switch(e=function(e,o){return r(t,void 0,void 0,function(){var t,n,i;return c(this,function(a){switch(a.label){case 0:return[4,this._loadRes(s.BundleNames.Game,o,cc.SpriteFrame)];case 1:return t=a.sent(),(n=null===(i=this.node.children[e])||void 0===i?void 0:i.getComponent(cc.Sprite))&&(n.spriteFrame=t),[2,t]}})})},this.state){case 1:return[3,1];case 2:return[3,5];case 3:return[3,9]}return[3,13];case 1:return[4,e(2,"res/jian1")];case 2:return o.sent(),[4,e(1,"res/jian3")];case 3:return o.sent(),[4,e(0,"res/jian3")];case 4:return o.sent(),this.state=2,[3,14];case 5:return[4,e(2,"res/jian2")];case 6:return o.sent(),[4,e(1,"res/jian1")];case 7:return o.sent(),[4,e(0,"res/jian3")];case 8:return o.sent(),this.state=3,[3,14];case 9:return[4,e(2,"res/jian3")];case 10:return o.sent(),[4,e(1,"res/jian2")];case 11:return o.sent(),[4,e(0,"res/jian1")];case 12:return o.sent(),this.state=1,[3,14];case 13:return[3,14];case 14:return[2]}})})},t.prototype.update=function(e){this.elapsedOfflineTime+=e,this.elapsedOfflineTime>=.3&&(this.elapsedOfflineTime=0,this.startArrow())},t.prototype._loadRes=function(e,t,o){return r(this,void 0,Promise,function(){return c(this,function(){return[2,new Promise(function(n,i){var a;null===(a=cc.assetManager.getBundle(e))||void 0===a||a.load(t,o,function(e,t){e?i(e):n(t)})})]})})},a([d],t)}(l.default));o.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],UI_LiuXue:[function(e,t,o){"use strict";cc._RF.push(t,"aad78wWN9pAM7L0LsEWUjqL","UI_LiuXue");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xuedi=null,t.mosteids={1:{w:123,h:123}},t.nodePool=null,t.cachedNodes=[],t.currentTween=null,t.accumulatedTime=0,t}return i(t,e),t.prototype.onEnable=function(){var e=this;this.node.children.forEach(function(t){t.scale=0,t.opacity=0,e.recycleNode(t)}),this.dispatchXueDi()},t.prototype.getLiuXueNode=function(){var e=this.cachedNodes.shift();return e||(e=cc.instantiate(this.xuedi),this.node.addChild(e)),e},t.prototype.recycleNode=function(e){this.cachedNodes.push(e)},t.prototype.createRandomPoint=function(e,t){var o=2*Math.random()*Math.PI,n=Math.random()*t;return e.add(new cc.Vec2(Math.cos(o)*n,Math.sin(o)*n))},t.prototype.dispatchXueDi=function(){var e=this,t=this.obtainRandomPosition(this.node.getBoundingBox()),o=this.getLiuXueNode();o.setPosition(t),o.scale=0,o.opacity=0,this.currentTween=cc.tween(o).to(.1,{scale:1.2,opacity:255}).to(.5,{scale:0,opacity:0,y:o.position.y-150}).call(function(){e.recycleNode(o)}).start()},t.prototype.obtainRandomPosition=function(e){var t=e.x+Math.random()*e.width,o=e.y+Math.random()*e.height+50;return new cc.Vec2(t,o)},t.prototype.update=function(e){this.accumulatedTime+=e,this.accumulatedTime>.2&&(this.dispatchXueDi(),this.accumulatedTime=0)},t.prototype.onDisable=function(){var e=this;this.currentTween&&(this.currentTween.stop(),this.node.children.forEach(function(t){t.scale=0,t.opacity=0,e.recycleNode(t)}))},a([s(cc.Node)],t.prototype,"xuedi",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],UI_Loading:[function(e,t,o){"use strict";cc._RF.push(t,"ed8b8ApAO1LWoHqLy7DKI6N","UI_Loading");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=(r.property,r.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.show=function(){},a([c],t)}(cc.Component));o.default=s,cc._RF.pop()},{}],UI_MosterLogic_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"bb8a1CfUutJO6+bz2mRS8bd","UI_MosterLogic_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_piaozipos=null,t.node_hudunnode=null,t.node_effnode=null,t.txt_xuelb=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_piaozipos",void 0),a([l(cc.Node)],t.prototype,"node_hudunnode",void 0),a([l(cc.Node)],t.prototype,"node_effnode",void 0),a([l(cc.Label)],t.prototype,"txt_xuelb",void 0),a([s("UI_MosterLogic_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_MosterLogic:[function(e,t,o){"use strict";cc._RF.push(t,"3942dkIzf5GNJQkJEI7Cncq","UI_MosterLogic");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./UI_MosterLogic_UIBindings"),l=e("./ResKeeper"),u=e("./EventManager"),d=e("./EvenType"),p=e("./NodePoolMag"),h=e("./BundleConfig"),f=e("./UI_HuDun"),g=e("./UI_MosterXueTiao"),_=e("./LogManager"),y=e("./GameDataManager"),v=e("./GameGlobalVariable"),m=e("./AudioManager"),b=e("./Excel"),I=e("./BuffMag"),w=cc._decorator,E=w.ccclass,M=w.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.mosterId=1,t.hunmoNode=null,t.mosterXueTiao=null,t.xueliang=0,t.maxxueliang=0,t.mosterspeed=0,t.defy=999999,t.liuxueContentNode=null,t.zhengshangNode=null,t.nowmosterdata=null,t.paths=null,t.nowtexindex=0,t.twmove=null,t.nowHuDunNode=null,t.iszhaohuan=!1,t.zhaohuantime=100,t.isXiGuaBomb=!1,t.isDie=!1,t.ohterbullet=null,t.zhongduNode=null,t.bingdongNode=null,t.dongjieNode=null,t.liuxueNode=null,t.bingdongjianshu=0,t.isjianshu=!1,t.jianshutime=0,t.isdongjie=!1,t.dongjietime=0,t.iszhongdu=!1,t.dushan=0,t.zhongdutime=0,t.isliuxue=!1,t.liuxueshang=0,t.liuxuetime=0,t.isransao=!1,t.ransaoshang=0,t.ransaotime=0,t.diejiacount=0,t.dushangplayer=null,t.nowbuffatackplay=null,t.ismove=!1,t.moveindex=0,t.tesofftime=0,t.dutimeleiji=0,t.liutimeleiji=0,t.ransaotimeleiji=0,t.jiansuleiji=0,t.dongjieleiji=0,t.zhaohuantimeleiji=0,t}return i(t,e),t.prototype.onEnable=function(){this.node.children.forEach(function(e){e.active=!0}),999999!==this.defy?this.hunmoNode.y=this.defy:this.defy=this.hunmoNode.y,this.hunmoNode.active=!1,this.node.getChildByName("dongImg").active=!1,this.liuxueContentNode=this.node.getChildByName("liuxueNode"),this.zhengshangNode=this.node.getChildByName("zhengshang"),this.zhengshangNode.active=!1},t.prototype.onDisable=function(){this.nowHuDunNode&&(p.NodePoolMag.instance.recycleNodeToPool("hudun",this.nowHuDunNode),this.nowHuDunNode=null),I.BuffMgr.clearMonsterBombCount(this),this.removePoisonEffect(),this.removeFreezeEffect(),this.removeFrozenEffect(),this.removeBleedEffect(),this.deactivateXiGuaBomb(),this.unscheduleAllCallbacks()},t.prototype.activateXiGuaBomb=function(){return r(this,void 0,void 0,function(){return c(this,function(){return this.isXiGuaBomb||this.isDie||(this.isXiGuaBomb=!0,this.zhengshangNode.active=!0),[2]})})},t.prototype.deactivateXiGuaBomb=function(){this.zhengshangNode.active=!1},t.prototype.initializeMonsterInfo=function(e,t,o,n,i){return void 0===i&&(i=1),r(this,void 0,void 0,function(){var a,r,s,l,u,d,h,f,g;return c(this,function(){if(this.isDie=!1,this.isXiGuaBomb=!1,this.nowtexindex=o,a=b.Excel.shuiguoguaiwu(e),this.nowmosterdata=a,this.mosterspeed=this.nowmosterdata.mosterspeed/60,this.xueliang=this.nowmosterdata.mosterxue,r=1,1===v.GameGlobalVariable.isSpecialLevel()){if(s=y.GameDataMgr.getCurrentMaxLevel(),!(l=b.Excel.shuiguoguanqia(s)))return _.LogMgr.debug("\u5f53\u524d\u5173\u5361\u65e0Boss",s),[2];u=l.levelboshuid[l.levelboshuid.length-1],d=b.Excel.shuiguoboshu(u),r=d.mosterjiaxue}for(n&&(this.xueliang=this.nowmosterdata.mosterxue*n.mosterjiaxue*r),this.maxxueliang=this.xueliang,this.mosterXueTiao.initializeBloodBar(this.maxxueliang),this.moveindex=i,this.paths=t,this.updateHealthBar(),this.ismove=!0,this.node.opacity=0,cc.tween(this.node).to(.2,{opacity:255}).start(),h=this.auto_ui.node_piaozipos.children,f=0;f<h.length;f++)g=h[0],p.NodePoolMag.instance.recycleNodeToPool("piaozi",g);return this.twmove=cc.tween(this.node.children[0]).to(.25,{scaleY:.9}).to(.25,{scaleY:1}),cc.tween(this.node.children[0]).repeatForever(this.twmove).start(),[2]})})},t.prototype.addShield=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.nowHuDunNode=p.NodePoolMag.instance.getNodeFromPool("hudun"),this.nowHuDunNode?[3,2]:[4,this._loadRes(h.BundleNames.Game,"prefabs/effpre/UI_HuDun",cc.Prefab)];case 1:e=t.sent(),p.NodePoolMag.instance.createNodePool("hudun",1,e),this.nowHuDunNode=p.NodePoolMag.instance.getNodeFromPool("hudun"),t.label=2;case 2:return this.auto_ui.node_hudunnode.addChild(this.nowHuDunNode),this.nowHuDunNode.getComponent(f.default).initializeHealth(100),this.iszhaohuan=!1,[2]}})})},t.prototype.updateHealthBar=function(){this.xueliang<=0&&this.handleMonsterDeath()},t.prototype.handleMonsterDeath=function(e){var t=this;if(void 0===e&&(e=1),!this.isDie){I.BuffMgr.clearMonsterStack(this),I.BuffMgr.cleanMosterBomb(this.node.uuid);var o=I.BuffMgr.getPoisonFog();this.iszhongdu&&o&&u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_CreateDuWu,this,o,this.dushangplayer),this.ohterbullet&&this.ohterbullet.attackfang&&I.BuffMgr.setBombDamage(this.ohterbullet.attackfang,this),this.node.children.forEach(function(e){e.active=!1}),this.hunmoNode.active=!0,this.hunmoNode.opacity=255,cc.tween(this.hunmoNode).to(.5,{y:this.hunmoNode.y+100}).to(.1,{opacity:0}).call(function(){t.node.stopAllActions(),t.unscheduleAllCallbacks(),t.resetMonsterState(),p.NodePoolMag.instance.recycleNodeToPool("moster_"+t.mosterId,t.node)}).start(),this.isDie=!0,this.ismove=!1,1===e&&u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Moster_DIE,{moster:this.mosterId})}},t.prototype.moveStep=function(){if(this.ismove){var e=this.paths.children[this.moveindex];if(!e)return this.handleMonsterDeath(2),void u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_Moster_Attack,{mosterId:this.mosterId});var t=e.x,o=e.y;if(0===this.moveindex)this.node.setPosition(t,o),this.moveindex+=1;else{var n=cc.Vec2.subtract(cc.v2(),cc.v2(t,o),this.node.getPosition()),i=Math.atan2(n.y,n.x),a=cc.Vec2.distance(this.node.getPosition(),cc.v2(t,o));this.node.x+=Math.cos(i)*this.getCurrentSpeed(),this.node.y+=Math.sin(i)*this.getCurrentSpeed(),a<5&&(this.moveindex+=1)}}},t.prototype.getNearbyMonsterNodes=function(e){for(var t=this.node.parent.children,o=[],n=0;n<t.length;n++){var i=t[n],a=cc.Vec2.distance(i.getPosition(),this.node.getPosition());(a-=i.width/2+this.node.width/2)<=e&&o.push(i)}return o},t.prototype.knockback=function(e){var t=this;if(this.moveindex>=2){this.ismove=!1;var o=this.moveindex-1;o<0&&(o=0);var n=function(e,o){var i=t.paths.children[o];if(i){var a=i.x,r=i.y,c=cc.Vec2.distance(t.node.getPosition(),cc.v2(a,r)),s=0;e>c&&(s=e-c,e=c);var l=cc.Vec2.subtract(cc.v2(),cc.v2(a,r),t.node.getPosition()),u=Math.atan2(l.y,l.x),d=t.node.x+Math.cos(u)*e,p=t.node.y+Math.sin(u)*e;cc.tween(t.node).to(.1,{x:d,y:p}).call(function(){s>0?n(s,o-1):(t.moveindex=o+1,t.scheduleOnce(function(){t.ismove=!0},.1))}).start()}else t.moveindex=o+1};n(e,o)}},t.prototype.receiveAttack=function(e,t){if(void 0===t&&(t=!1),!this.isDie){this.ohterbullet=e;var o=e.getBulletAttack(this),n=I.BuffMgr.addPlayerAttack(this,e.attackfang),i=I.BuffMgr.getMonsterBombBonus(this),a=0;2===e.bulletId&&(a=I.BuffMgr.getMonsterBombSailingCount(this));var r=0;this.isXiGuaBomb&&(r=I.BuffMgr.getMonsterBombDamageIncrease()),o+=o*(n+i+a+r),o+=I.BuffMgr.getFixedAttack(e.attackfang),this.playHitEffect();var c=1;e.isbaoji&&(c=2),(2===e.bulletId||t)&&(c=5),this.reduceHealth(o,c,e.attackfang)}},t.prototype.reduceHealth=function(e,t,o){if(this.nowHuDunNode){var n=this.nowHuDunNode.getComponent(f.default);n.reduceHealth(e),n.xuelinag<0&&(this.nowHuDunNode=null)}else e=I.BuffMgr.getTotalMonsterDamage(e),this.mosterXueTiao.decreaseBlood(e),this.xueliang-=e,this.updateHealthBar();var i=this.auto_ui.node_piaozipos;o&&o.playerId&&v.GameGlobalVariable.recordAttack(o.playerId,e),u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_ShangHai_FeiZi,e,i.convertToWorldSpaceAR(cc.v2()),null,t)},t.prototype.applyAdditionalAttack=function(e,t,o){this.isDie||(this.ohterbullet=o,this.playHitEffect(),this.reduceHealth(e,t,o))},t.prototype.playHitEffect=function(){var e=this.node.children[0].getChildByName("item").getComponent(cc.Sprite),t={value:0};cc.tween(t).to(.1,{value:1},{onUpdate:function(){e.getMaterial(0).setProperty("u_rate",t.value)}}).call(function(){e.getMaterial(0).setProperty("u_rate",t.value)}).start()},t.prototype.getCurrentSpeed=function(){var e=0;if(this.isdongjie)e=0;else{var t=.3*this.mosterspeed,o=I.BuffMgr.getCurrentSpeedRatio();(e=this.mosterspeed-this.mosterspeed*(this.bingdongjianshu+o))<t&&(e=t)}return e*v.GameGlobalVariable.jiasuState},t.prototype.resetMonsterState=function(){this.isjianshu=!1,this.isdongjie=!1,this.iszhongdu=!1,this.isliuxue=!1,this.isransao=!1,this.dushan=0,this.bingdongjianshu=0},t.prototype.applySlowEffect=function(e,t,o){this.isjianshu&&!I.BuffMgr.isStacked(o)||(this.diejiacount+=1,this.diejiacount>=3&&(this.diejiacount=3),this.unschedule(this.resetFreezeValue),this.addFreezeEffect(),this.isjianshu=!0,this.bingdongjianshu=e/100*this.diejiacount,this.scheduleOnce(this.resetFreezeValue,t),this.setFrozenImage(!0,this.diejiacount),_.LogMgr.debug("\u51b0\u51bb\u51cf\u901f\u6548\u76ca",this.bingdongjianshu))},t.prototype.addPoisonEffect=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.zhongduNode=p.NodePoolMag.instance.getNodeFromPool("zhongdu"),this.zhongduNode?[3,2]:[4,this._loadRes(h.BundleNames.Game,"prefabs/effpre/UI_ZhongDu",cc.Prefab)];case 1:e=t.sent(),p.NodePoolMag.instance.createNodePool("zhongdu",1,e),this.zhongduNode=p.NodePoolMag.instance.getNodeFromPool("zhongdu"),t.label=2;case 2:return this.zhongduNode.x=0,this.zhongduNode.y=0,v.GameGlobalVariable.effNode.addChild(this.zhongduNode),[2]}})})},t.prototype.removePoisonEffect=function(){this.zhongduNode&&(p.NodePoolMag.instance.recycleNodeToPool("zhongdu",this.zhongduNode),this.zhongduNode=null)},t.prototype.addFreezeEffect=function(){return r(this,void 0,void 0,function(){return c(this,function(){return[2]})})},t.prototype.updateEffects=function(){this.zhongduNode&&this.zhongduNode.setPosition(this.node.getPosition()),this.dongjieNode&&this.dongjieNode.setPosition(this.node.getPosition())},t.prototype.removeFreezeEffect=function(){this.bingdongNode&&(p.NodePoolMag.instance.recycleNodeToPool("bingshuang",this.bingdongNode),this.bingdongNode=null)},t.prototype.addFrozenEffect=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.isdongjie?[2]:(m.AudioMgr.playSoundEffect("sound/\u51bb\u7ed3",!1,h.BundleNames.Game),this.dongjieNode=p.NodePoolMag.instance.getNodeFromPool("dongjie"),this.dongjieNode?[3,2]:[4,this._loadRes(h.BundleNames.Game,"prefabs/effpre/UI_BingDong",cc.Prefab)]);case 1:e=t.sent(),p.NodePoolMag.instance.createNodePool("dongjie",1,e),this.dongjieNode=p.NodePoolMag.instance.getNodeFromPool("dongjie"),t.label=2;case 2:return this.dongjieNode.x=0,this.dongjieNode.y=0,v.GameGlobalVariable.effNode.addChild(this.dongjieNode),[2]}})})},t.prototype.removeFrozenEffect=function(){this.dongjieNode&&(p.NodePoolMag.instance.recycleNodeToPool("dongjie",this.dongjieNode),this.dongjieNode=null)},t.prototype.addBleedEffect=function(){return r(this,void 0,void 0,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.isliuxue?[2]:this.liuxueContentNode?(this.liuxueNode=p.NodePoolMag.instance.getNodeFromPool("liuxue"),this.liuxueNode?[3,2]:[4,this._loadRes(h.BundleNames.Game,"prefabs/effpre/UI_LiuXue",cc.Prefab)]):[3,3];case 1:e=t.sent(),p.NodePoolMag.instance.createNodePool("liuxue",1,e),this.liuxueNode=p.NodePoolMag.instance.getNodeFromPool("liuxue"),t.label=2;case 2:this.liuxueNode.x=0,this.liuxueNode.y=0,this.liuxueNode.width=this.liuxueContentNode.width,this.liuxueNode.height=this.liuxueContentNode.height,this.liuxueContentNode.addChild(this.liuxueNode),t.label=3;case 3:return[2]}})})},t.prototype.removeBleedEffect=function(){this.liuxueNode&&(p.NodePoolMag.instance.recycleNodeToPool("liuxue",this.liuxueNode),this.liuxueNode=null)},t.prototype.setFrozenImage=function(e,t){return r(this,void 0,void 0,function(){var o;return c(this,function(n){switch(n.label){case 0:return this.isDie?[2]:e?(v.GameGlobalVariable.playHitSoundEffect(),this.node.getChildByName("dongImg").active=!0,[4,this._loadRes(h.BundleNames.Common,"res/player/"+t,cc.SpriteFrame)]):[3,2];case 1:return o=n.sent(),this.node.getChildByName("dongImg").getComponent(cc.Sprite).spriteFrame=o,[3,3];case 2:this.node.getChildByName("dongImg").active=!1,n.label=3;case 3:return[2]}})})},t.prototype.applySpeedReduction=function(e,t){switch(this.nowbuffatackplay=t,e.buffefftype){case 2:var o=I.BuffMgr.isStacked(t);this.isjianshu&&!o||(this.diejiacount+=1,this.diejiacount>=3&&(this.diejiacount=3),this.unschedule(this.resetFreezeValue),this.addFreezeEffect(),this.isjianshu=!0,this.jianshutime=e.bufftime,this.bingdongjianshu=e.value[0]/100*this.diejiacount,this.scheduleOnce(this.resetFreezeValue,e.bufftime),this.setFrozenImage(!0,this.diejiacount),_.LogMgr.debug("\u51b0\u51bb\u51cf\u901f\u6548\u76ca",this.bingdongjianshu));break;case 5:if(b.Excel.shuiguoguaiwu(this.mosterId),Math.random()<=e.probability/100){if(this.isdongjie)return;this.addFrozenEffect(),this.isdongjie=!0,this.dongjietime=e.bufftime,_.LogMgr.debug("\u51bb\u7ed3\u6548\u76ca",this.isdongjie)}break;case 1:if(this.dushan=e.value[0]/100,this.iszhongdu)return;this.addPoisonEffect(),this.dushangplayer=t,this.iszhongdu=!0,this.zhongdutime=e.bufftime;break;case 22:if(this.isliuxue)return;this.addBleedEffect(),this.liuxueshang=e.value[0]+e.value[0]*I.BuffMgr.getBleedBonus(t),this.isliuxue=!0,this.liuxuetime=e.bufftime;break;case 24:if(this.isransao)return;this.ransaoshang=e.value[0],this.isransao=!0,this.ransaotime=e.bufftime}},t.prototype.resetFreezeValue=function(){this.bingdongjianshu=0,this.isjianshu=!1,this.diejiacount=0,this.removeFreezeEffect(),this.setFrozenImage(!1,0)},t.prototype.resetFrozenState=function(){this.isdongjie=!1,this.removeFrozenEffect()},t.prototype.applyPoisonDamage=function(){var e=I.BuffMgr.getPoisonDamage(),t=I.BuffMgr.applyAttackBonus(this.dushangplayer,this.dushangplayer.sgattack,1)*this.dushan;e&&(t+=t*(e.value[0]/100)),this.reduceHealth(t,3,this.nowbuffatackplay)},t.prototype.applyBleedDamage=function(){this.reduceHealth(this.liuxueshang,4,this.nowbuffatackplay)},t.prototype.applyBurnDamage=function(){this.reduceHealth(this.ransaoshang,5,this.nowbuffatackplay)},t.prototype.onUpdate=function(e){this.moveStep(),this.updateEffects(),this.isransao&&(this.ransaotimeleiji+=e,this.ransaotimeleiji>=1&&(this.applyBurnDamage(),this.ransaotime-=1,this.ransaotime<=0&&(this.isransao=!1),this.ransaotimeleiji=0)),this.iszhongdu&&(this.dutimeleiji+=e,this.dutimeleiji>=1&&(this.applyPoisonDamage(),this.zhongdutime-=1,this.zhongdutime<=0&&(this.removePoisonEffect(),this.iszhongdu=!1),this.dutimeleiji=0)),this.isliuxue&&(this.liutimeleiji+=e,this.liutimeleiji>=1&&(this.applyBleedDamage(),this.liuxuetime-=1,this.liuxuetime<=0&&(this.removeBleedEffect(),this.isliuxue=!1),this.liutimeleiji=0)),this.isdongjie&&(this.dongjieleiji+=e,this.dongjieleiji>=1&&(this.dongjietime-=1,this.dongjietime<=0&&this.resetFrozenState(),this.dongjieleiji=0)),this.iszhaohuan&&(this.zhaohuantimeleiji+=e,this.zhaohuantimeleiji>=1&&(u.EventMgrInstance.emitEvent(d.EVENT_TYPE.Game_ZhaoHuan_Moster,this),this.zhaohuantimeleiji=0))},a([M(s.default)],t.prototype,"auto_ui",void 0),a([M],t.prototype,"mosterId",void 0),a([M(cc.Node)],t.prototype,"hunmoNode",void 0),a([M(g.default)],t.prototype,"mosterXueTiao",void 0),a([E],t)}(l.default);o.default=C,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_HuDun":"UI_HuDun","./UI_MosterLogic_UIBindings":"UI_MosterLogic_UIBindings","./UI_MosterXueTiao":"UI_MosterXueTiao"}],UI_MosterXueTiao:[function(e,t,o){"use strict";cc._RF.push(t,"1d25fPzjkNIhpBYK96uzA/9","UI_MosterXueTiao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=e("./AutoImagZiTi"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xue2=null,t.xue1=null,t.bloodLabel=null,t.bloodScript=null,t.maxValue=0,t.currentValue=0,t.currentOffTime=0,t.tween=null,t}return i(t,e),t.prototype.initializeBloodBar=function(e){var t=this.node.getChildByName("xuetiaolb");t&&(this.bloodScript=t.getComponent(c.default),this.bloodLabel=t.getComponent(cc.Label)),this.maxValue=e,this.currentValue=e,this.xue1.fillStart=1,this.xue2.fillStart=1;var o=(this.currentValue+"").split(".")[0];this.bloodLabel&&(this.bloodLabel.string=o),this.bloodScript&&this.bloodScript.setSprites(o)},t.prototype.decreaseBlood=function(e){this.currentValue-=e,this.currentValue<0&&(this.currentValue=0);var t=this.currentValue/this.maxValue;t<0&&(t=0),this.xue2.fillStart=t,this.tween&&this.tween.stop(),this.tween=cc.tween(this.xue1).delay(.1).to(.2,{fillStart:t}).start();var o=(this.currentValue+"").split(".")[0];this.bloodLabel&&(this.bloodLabel.string=o),this.bloodScript&&this.bloodScript.setSprites(o)},a([u(cc.Sprite)],t.prototype,"xue2",void 0),a([u(cc.Sprite)],t.prototype,"xue1",void 0),a([l],t)}(r.default);o.default=d,cc._RF.pop()},{"./AutoImagZiTi":"AutoImagZiTi","./ResKeeper":"ResKeeper"}],UI_MoveYun:[function(e,t,o){"use strict";cc._RF.push(t,"d804f3y169KJp7JJiscxtvG","UI_MoveYun");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=(c.property,c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code=1,t.speed=1,t}return i(t,e),t.prototype.update=function(){var e=1===this.code?1:-1;this.node.x+=e*this.speed,this.node.x>800?this.code=2:this.node.x<-800&&(this.code=1)},a([s],t)}(r.default));o.default=l,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_OpenBox_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"9b4f1RRqklCRIC+CB+0dijm","UI_OpenBox_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_lightNode=null,t.node_boxNode=null,t.node_titileNode=null,t.node_openTip=null,t.dbAnim_box1=null,t.dbAnim_box2=null,t.txt_countLabel=null,t.txt_titleLabel=null,t.btn_openBtn=null,t._btnNames=["btn_openBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_lightNode",void 0),a([l(cc.Node)],t.prototype,"node_boxNode",void 0),a([l(cc.Node)],t.prototype,"node_titileNode",void 0),a([l(cc.Node)],t.prototype,"node_openTip",void 0),a([l(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_box1",void 0),a([l(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_box2",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Button)],t.prototype,"btn_openBtn",void 0),a([s("UI_OpenBox_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_OpenBox:[function(e,t,o){"use strict";cc._RF.push(t,"0530bOhPpFAoolE6E2ruqwI","UI_OpenBox");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_OpenBox_UIBindings"),c=e("./UIView"),s=e("./AudioManager"),l=e("./BundleConfig"),u=e("./LanMgr"),d=cc._decorator,p=d.ccclass,h=d.property,f=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.boxType=0,t}return i(t,e),t.prototype._show=function(e){var t=e.clickCallBack,o=e.boxType,n=e.boxCount;this.clickCallBack=t,this.boxType=o,this.auto_ui.txt_countLabel.string=n.toString(),this.auto_ui.dbAnim_box1.node.active=0===o,this.auto_ui.dbAnim_box2.node.active=1===o,1===o?(this.auto_ui.txt_titleLabel.string=u.langMgr.getStr("0045"),this.auto_ui.dbAnim_box2.playAnimation("daiji_1",0)):(this.auto_ui.txt_titleLabel.string=u.langMgr.getStr("0044"),this.auto_ui.dbAnim_box1.playAnimation("daiji_1",0)),this.startTween()},t.prototype._clickListener=function(e){e===this.auto_ui.btn_openBtn&&this.handleClick()},t.prototype.startTween=function(){var e=this.auto_ui.btn_openBtn.node,t=this.auto_ui.node_boxNode,o=this.auto_ui.node_titileNode,n=this.auto_ui.node_lightNode;e.active=!1,t.stopAllActions(),o.stopAllActions(),o.scaleX=0,n.stopAllActions(),n.scale=0,t.y=1e3;var i=cc.sequence(cc.moveTo(.35,0,0),cc.scaleTo(.05,1,.8),cc.scaleTo(.05,1,1),cc.callFunc(function(){n.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.05,1,1),cc.callFunc(function(){n.runAction(cc.repeatForever(cc.rotateBy(3,360))),e.active=!0}))),o.runAction(cc.scaleTo(.25,1,1))}));t.runAction(i)},t.prototype.handleClick=function(){var e=this,t=this.auto_ui.btn_openBtn.node,o=this.auto_ui.node_lightNode;t.active=!1,s.AudioMgr.playSoundEffect("sound/openBox",!1,l.BundleNames.Home),0===this.boxType?this.auto_ui.dbAnim_box1.playAnimation("kai",0):this.auto_ui.dbAnim_box2.playAnimation("kai",0),this.scheduleOnce(function(){o.stopAllActions(),e.clickCallBack&&e.clickCallBack(),e._close()},1.1)},a([h(r.default)],t.prototype,"auto_ui",void 0),a([p],t)}(c.default));o.default=f,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./LanMgr":"LanMgr","./UIView":"UIView","./UI_OpenBox_UIBindings":"UI_OpenBox_UIBindings"}],UI_PlaerInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"fd3a5JgD/tKR70W/OS9SsNj","UI_PlaerInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.sp_shuiguoimg=null,t.txt_attacklb=null,t.txt_attackspeed=null,t.txt_baoji=null,t.txt_baojilv=null,t.scroll_citiao=null,t}return i(t,e),a([l(cc.Sprite)],t.prototype,"sp_shuiguoimg",void 0),a([l(cc.Label)],t.prototype,"txt_attacklb",void 0),a([l(cc.Label)],t.prototype,"txt_attackspeed",void 0),a([l(cc.Label)],t.prototype,"txt_baoji",void 0),a([l(cc.Label)],t.prototype,"txt_baojilv",void 0),a([l(cc.ScrollView)],t.prototype,"scroll_citiao",void 0),a([s("UI_PlaerInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_PlaerInfo:[function(e,t,o){"use strict";cc._RF.push(t,"f70c9P8Sx9Aqb9NEEbDQbm5","UI_PlaerInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./UIView"),u=e("./UI_PlaerInfo_UIBindings"),d=e("./Excel"),p=e("./BuffMag"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.initializePlayerInfo(e)},t.prototype.initializePlayerInfo=function(e){return r(this,void 0,Promise,function(){var t,o,n,i,a;return c(this,function(r){switch(r.label){case 0:return t=e.playerInfo.equipLevel,[4,this._loadRes(s.BundleNames.Common,"res/player/player"+e.playerId+"_"+(t+1),cc.SpriteFrame)];case 1:return o=r.sent(),this.auto_ui.sp_shuiguoimg.spriteFrame=o,n=p.BuffMgr.applyAttackBonus(e,e.sgattack,1),i=p.BuffMgr.getAttackCritical(e,!0),a=p.BuffMgr.applyAttackBonus(e,e.sgattackspeed,2),this.auto_ui.txt_attacklb.string="ATK: "+n,this.auto_ui.txt_attackspeed.string="ATTACK SPEED: "+a,this.auto_ui.txt_baoji.string="Crit: "+100*(e.sgbaojia+i.baojijiacheng)+"%",this.auto_ui.txt_baojilv.string="Critical Chance: "+100*(e.sgbaojilv+i.baojijilv)+"%",this.updateBuffList(e),[2]}})})},t.prototype.updateBuffList=function(e){var t=p.BuffMgr.getPlayerCiTiaoList(e),o=this.auto_ui.scroll_citiao.content,n=o.children;n.forEach(function(e){e.active=!1});for(var i=0;i<t.length;i++){var a=t[i],r=n[i];r||(r=cc.instantiate(n[0]),o.addChild(r)),r.active=!0;var c=r.children[0].getComponent(cc.RichText);this.setBuffDescription(c,a)}},t.prototype.setBuffDescription=function(e,t){for(var o=t.citiaomiaoshu,n=d.Excel.getFruitBuff(t.citiaoshuzhitype),i=o.split("X"),a="",r=0;r<i.length;r++){var c=i[r];n.value[r]?a+="<color=#ffffff>"+c+"</c><color=#00ff00>"+n.value[r]+"</color>":a+="<color=#ffffff>"+c+"</c>"}a="<outline color=#000000>"+a+"</outline>",e.string=a},t.prototype.onCloseView=function(){this._close()},a([g(u.default)],t.prototype,"auto_ui",void 0),a([f],t)}(l.default));o.default=_,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./Excel":"Excel","./UIView":"UIView","./UI_PlaerInfo_UIBindings":"UI_PlaerInfo_UIBindings"}],UI_Player_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"ad212OQIj5OHpA9HE5/T3Q9","UI_Player_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_sendpoint=null,t}return i(t,e),a([l(cc.Node)],t.prototype,"node_sendpoint",void 0),a([s("UI_Player_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Player:[function(e,t,o){"use strict";cc._RF.push(t,"066c7wmzz1Fdqmt7FuHjiy4","UI_Player");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./LogManager"),u=e("./ResKeeper"),d=e("./CommonUtils"),p=e("./UI_Player_UIBindings"),h=e("./PlayerDataManager"),f=e("./ExcelUtil"),g=e("./GameGlobalVariable"),_=e("./NodePoolMag"),y=e("./UI_BulletBomb"),v=e("./BuffMag"),m=e("./UI_MosterLogic"),b=e("./Excel"),I=e("./UI_Bullet"),w=cc._decorator,E=w.ccclass,M=w.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.playerId=1,t.playimg=null,t.eff1=null,t.eff2=null,t.sgattack=0,t.sgattackspeed=0,t.sgbaojilv=0,t.sgbaojia=0,t.sgattacktype=1,t.sgattacktagtype=-1,t.sgtianfuid=-1,t.kuangrePlayer=null,t.buffId=-1,t.xiaolajiao=null,t.mosterNodes=null,t.playerInfo=null,t.kuangReParNode=null,t.levelIconSpr=null,t.nowAttackIndex=0,t.kuangReEffNode=null,t.attackTime=0,t.kuangReTime=0,t.offKuangReTime=0,t.kuangReIsOver=!1,t.playerPause=!1,t.isSend=!1,t.isMove=!1,t}return i(t,e),t.prototype.onEnable=function(){this.xiaolajiao=this.node.getChildByName("xialajiao"),this.xiaolajiao.active=!1},t.prototype.onClickPlayer=function(){},t.prototype.onDisable=function(){this.clearFrenzyEffect(),this.kuangrePlayer=null,v.BuffMgr.clearPlayerSendCount(this),this.attackTime=0},t.prototype.initializePlayerInfo=function(e,t){return r(this,void 0,void 0,function(){var o,n;return c(this,function(i){switch(i.label){case 0:return this.kuangReParNode=this.node.getChildByName("kuangreNode"),this.mosterNodes=e,this.playerInfo=t,this.eff1&&this.eff2&&(this.eff1.active=this.eff2.active=4===this.playerInfo.equipLevel),o=1e3+this.playerId,n=b.Excel.shuiguo(o),l.LogMgr.debug("\u6c34\u679c\u4fe1\u606f",n),this.sgattack=n.attack,this.sgattackspeed=n.attackspeed,this.sgbaojilv=n.baojilv,this.sgbaojia=n.baojivalue,this.sgattacktype=n.attacktype,this.sgattacktagtype=n.attackstate,this.addExternalLevel(),this.addSynthesis(),this.sgtianfuid=n.talent,[4,this.initUI()];case 1:return i.sent(),[2]}})})},t.prototype.addExternalLevel=function(){if(this.playerInfo){for(var e=f.ExcelUtil.getMatchingData(b.Excel.shuiguolevel_all,"shuiguoId",this.playerId+1e3),t=h.PlayerDataMgr.getEquipDataById(this.playerId+1e3).level,o=0,n=0,i=0;i<e.length;i++)i+1<=t&&i>0&&(o+=e[i-1].addattack,n+=e[i-1].addAtkSpeed);this.sgattack+=o,this.sgattackspeed-=n}},t.prototype.addSynthesis=function(){if(this.playerInfo){var e=f.ExcelUtil.getMatchingData(b.Excel.shuiguohecheng_all,"shuiguoId",this.playerId+1e3)[this.playerInfo.equipLevel];e&&(this.sgattack+=this.sgattack*e.addattack/100,this.sgattackspeed/=1+e.addattackspeed/100)}},t.prototype.getCurrentSynthesisLevel=function(){if(this.playerInfo){var e=f.ExcelUtil.getMatchingData(b.Excel.shuiguohecheng_all,"shuiguoId",this.playerId+1e3);if(e)return e[this.playerInfo.equipLevel]}},t.prototype.initUI=function(){return r(this,void 0,void 0,function(){var e,t,o;return c(this,function(n){switch(n.label){case 0:return this.playerInfo?[4,this._loadRes(s.BundleNames.Common,"res/player/player"+this.playerId+"_"+(this.playerInfo.equipLevel+1),cc.SpriteFrame)]:[3,3];case 1:return e=n.sent(),this.playimg.spriteFrame=e,this.levelIconSpr=this.node.getChildByName("levelicon").getComponent(cc.Sprite),t=["\u5c0f\u724c\u5b50","\u5c0f\u724c\u5b50-1","\u5c0f\u724c\u5b50-2","\u5c0f\u724c\u5b50-3","xiaowu"],[4,this._loadRes(s.BundleNames.Common,"res/player/"+t[this.playerInfo.equipLevel],cc.SpriteFrame)];case 2:o=n.sent(),this.levelIconSpr.spriteFrame=o,n.label=3;case 3:return[2]}})})},t.prototype.getAttackTarget=function(e){var t=null;if(!this.mosterNodes){var o=g.GameGlobalVariable.mosterNode;return o.children.length>0?o.children[0]:t}if(this.mosterNodes.children.length>0){var n=void 0;switch(e){case 4:n=this.mosterNodes.children;for(var i=null,a=0;a<n.length;a++){var r=n[a].getComponent(m.default);if(1===r.nowmosterdata.boss){i=r;break}}t=i?i.node:n[0].script.node;break;case 1:t=(n=g.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?n[0].script.node:null;break;case 2:t=(n=g.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?n[d.default.limitIntegerInRange(0,n.length-1)].script.node:null;break;case 3:var c=(n=g.GameGlobalVariable.sortMonsters(this.mosterNodes))[this.nowAttackIndex];c||(this.nowAttackIndex=0,c=n[this.nowAttackIndex]),t=c?c.script.node:null,this.nowAttackIndex+=1;break;case 8:case 5:break;default:t=(n=g.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?n[0].script.node:null}}return t},t.prototype.sendAttack=function(){var e=this,t=this.getAttackTarget(this.sgattacktagtype);if(t){cc.tween(this.playimg.node).to(.1,{scaleY:1.3,scaleX:1.1}).to(.1,{scale:1}).start();var o=v.BuffMgr.playerAttackModeInProgress(this,this.sgattacktype),n=v.BuffMgr.applyAttackBonus(this,this.sgattack,1),i=v.BuffMgr.getAttackCritical(this),a=this.sgbaojilv+i.baojijilv,r=this.sgbaojia+i.baojijiacheng,c=!1;Math.random()<=a&&(c=!0,n*=r),v.BuffMgr.isContinuousAttack(this)&&this.scheduleOnce(function(){e.sendBullet(o,n,t,c)},.1),this.sendBullet(o,n,t,c)}},t.prototype.sendMoveAttack=function(){if(this.mosterNodes.children.length>=1){var e=v.BuffMgr.applyAttackBonus(this,this.sgattack,1);this.createMoveBullet(e)}},t.prototype.sendBombAttack=function(){if(this.mosterNodes.children.length>=1){cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start();var e=v.BuffMgr.applyAttackBonus(this,this.sgattack,1),t=this.getBulletBombPosition();t&&this.createBombBullet(e,t)}},t.prototype.sendBullet=function(e,t,o,n){switch(e){case 1:this.createBullet(t,o,1,n);break;case 2:for(var i=g.GameGlobalVariable.sortMonsters(this.mosterNodes),a=0;a<3;a++){var r=i[a];r&&this.createBullet(t,r.script.node,a+1,n)}}},t.prototype.getBulletBombPosition=function(){for(var e=g.GameGlobalVariable.paths.children,t=[],o=0;o<e.length-1;o++){var n=e[o],i=e[o+1],a=0,r=0;0===o&&(a=-100),o+1===5&&(r=100);var c=d.default.getRandomInteger(n.x+a,i.x+r),s=d.default.getRandomInteger(n.y,i.y);t.push(cc.v2(c,s))}return t[d.default.getRandomInteger(0,t.length-1)]},t.prototype.createMoveBullet=function(e){return r(this,void 0,void 0,function(){var t,o,n,i;return c(this,function(){return t=v.BuffMgr.getAttackCritical(this),o=this.sgbaojilv+t.baojijilv,n=this.sgbaojia+t.baojijiacheng,i=!1,Math.random()<=o&&(i=!0,e*=n),cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start(),g.GameGlobalVariable.addMovingBullet({attack:e,playerId:this,playerLevel:this.playerInfo.equipLevel,isbaoji:i}),[2]})})},t.prototype.createBombBullet=function(e,t){return r(this,void 0,void 0,function(){var o,n,i,a,r=this;return c(this,function(c){switch(c.label){case 0:return(o=_.NodePoolMag.instance.getNodeFromPool("bullet_2"))?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/bullet/bullet2",cc.Prefab)];case 1:n=c.sent(),_.NodePoolMag.instance.createNodePool("bullet_2",1,n),o=_.NodePoolMag.instance.getNodeFromPool("bullet_2"),c.label=2;case 2:return i=this.auto_ui.node_sendpoint.convertToWorldSpaceAR(cc.v2()),a=g.GameGlobalVariable.languaNode.convertToNodeSpaceAR(i),o.x=a.x,o.y=a.y,g.GameGlobalVariable.languaNode.addChild(o),this.scheduleOnce(function(){var n=o.getComponent(y.default),i=v.BuffMgr.getAttackCritical(r),a=r.sgbaojilv+i.baojijilv,c=r.sgbaojia+i.baojijiacheng,s=!1;Math.random()<=a&&(s=!0,e*=c),n.initializeBullet({attack:e,playerId:r,skinlevel:r.playerInfo.equipLevel,isbaoji:s},t)}),[2]}})})},t.prototype.createBullet=function(e,t,o,n){return r(this,void 0,void 0,function(){var i,a,r,l,u=this;return c(this,function(c){switch(c.label){case 0:return(i=_.NodePoolMag.instance.getNodeFromPool("bullet_1"))?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/bullet/bullet1",cc.Prefab)];case 1:a=c.sent(),_.NodePoolMag.instance.createNodePool("bullet_1",5,a),i=_.NodePoolMag.instance.getNodeFromPool("bullet_1"),c.label=2;case 2:return r=this.auto_ui.node_sendpoint.convertToWorldSpaceAR(cc.v2()),l=g.GameGlobalVariable.bulletNode.convertToNodeSpaceAR(r),i.x=l.x,i.y=l.y,g.GameGlobalVariable.bulletNode.addChild(i),this.scheduleOnce(function(){i.getComponent(I.default).initializeBullet({attack:e,playerId:u,feixintype:o,isbaoji:n},t)}),[2]}})})},t.prototype.setFrenzyEffect=function(e){if(!this.kuangrePlayer||this.kuangrePlayer.node.uuid!==e.node.uuid){this.kuangrePlayer=e;var t=b.Excel.getFruitBuff(e.sgtianfuid);this.kuangReTime=t.bufftime,l.LogMgr.debug("\u8bbe\u7f6e\u72c2\u70ed\u6548\u679c",this),this.addFrenzyEffect()}},t.prototype.addFrenzyEffect=function(){return r(this,void 0,void 0,function(){var e,t=this;return c(this,function(o){switch(o.label){case 0:return this.xiaolajiao.active=!0,this.kuangReEffNode=_.NodePoolMag.instance.getNodeFromPool("kuangre"),this.kuangReEffNode?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/effpre/UI_KuangRe",cc.Prefab)];case 1:e=o.sent(),_.NodePoolMag.instance.createNodePool("kuangre",1,e),this.kuangReEffNode=_.NodePoolMag.instance.getNodeFromPool("kuangre"),o.label=2;case 2:return this.kuangReEffNode.x=0,this.kuangReEffNode.y=0,this.kuangReParNode.addChild(this.kuangReEffNode),this.scheduleOnce(function(){t.kuangReEffNode.scale=1}),[2]}})})},t.prototype.clearFrenzyEffect=function(){this.kuangReEffNode&&(this.xiaolajiao.active=!1,_.NodePoolMag.instance.recycleNodeToPool("kuangre",this.kuangReEffNode),this.kuangReEffNode=null,this.kuangReTime=0,this.offKuangReTime=0)},t.prototype.puasePlayer=function(){},t.prototype.onUpdate=function(e){if(this.kuangrePlayer&&!this.kuangReIsOver&&(this.offKuangReTime+=e,this.offKuangReTime>=1&&(this.kuangReTime-=1,this.offKuangReTime=0,this.kuangReTime<=0&&(v.BuffMgr.isFrenzyOver()?this.kuangReIsOver=!0:(this.clearFrenzyEffect(),this.kuangrePlayer=null,this.kuangReTime=0)))),!this.playerPause){this.attackTime+=e;var t=v.BuffMgr.applyAttackBonus(this,this.sgattackspeed,2);t<.2&&(t=5===this.playerId?.25:.15),t/=g.GameGlobalVariable.jiasuState,this.attackTime>=t&&(this.startAttack(),this.attackTime=0)}},t.prototype.startAttack=function(){switch(v.BuffMgr.addPlayerSendCount(this),this.sgattacktagtype){case 7:this.sendMoveAttack();break;case 6:this.sendBombAttack();break;case 5:break;case 9:cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start(),v.BuffMgr.setFrenzyBuff(this);break;default:this.sendAttack()}},a([M(p.default)],t.prototype,"auto_ui",void 0),a([M],t.prototype,"playerId",void 0),a([M(cc.Sprite)],t.prototype,"playimg",void 0),a([M(cc.Node)],t.prototype,"eff1",void 0),a([M(cc.Node)],t.prototype,"eff2",void 0),a([E],t)}(u.default);o.default=C,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_MosterLogic":"UI_MosterLogic","./UI_Player_UIBindings":"UI_Player_UIBindings"}],UI_QianDaoItem:[function(e,t,o){"use strict";cc._RF.push(t,"cfc6eQzO3VPmIwNhTG3u27m","UI_QianDaoItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./CommonUtils"),d=e("./PlayerDataManager"),p=cc._decorator,h=p.ccclass,f=p.property,g=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qiandaoday=null,t.qiandaovalue=null,t.iconSpr=null,t.lockweilai=null,t.putonglinqu=null,t.linquLock=null,t.nowcode=1,t.nowqiandao=null,t}return i(t,e),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.initUI=function(e){return r(this,void 0,Promise,function(){var t,o,n,i;return c(this,function(a){switch(a.label){case 0:return this.nowqiandao=e,this.qiandaoday.string="Day "+e.id,this.qiandaovalue.string=String(e.award),t={1:"res/ui/tu/goldIcon",2:"res/ui/tu/diamondIcon",3:"res/ui/tu/powerIcon",5:"res/quality/suipian_1",6:"res/quality/suipian_2",7:"res/quality/suipian_3"}[e.awardtype],o=null,t?[4,this._loadRes(s.BundleNames.Common,t,cc.SpriteFrame)]:[3,2];case 1:o=a.sent(),a.label=2;case 2:return o&&(this.iconSpr.spriteFrame=o),u.default.limitSpriteSize(this.iconSpr,80),n=d.PlayerDataMgr.getQianDaoCount(),i=e.id-1,n>i?(this.linquLock.active=!0,this.lockweilai.active=!0,this.putonglinqu.active=!1,this.nowcode=-1):n===i&&1===d.PlayerDataMgr.globalData.isqiandaocode?(this.linquLock.active=!1,this.lockweilai.active=!1,this.putonglinqu.active=!0,this.nowcode=1):(this.linquLock.active=!1,this.lockweilai.active=!0,this.putonglinqu.active=!1,this.nowcode=2),[2]}})})},a([f(cc.Label)],t.prototype,"qiandaoday",void 0),a([f(cc.Label)],t.prototype,"qiandaovalue",void 0),a([f(cc.Sprite)],t.prototype,"iconSpr",void 0),a([f(cc.Node)],t.prototype,"lockweilai",void 0),a([f(cc.Node)],t.prototype,"putonglinqu",void 0),a([f(cc.Node)],t.prototype,"linquLock",void 0),a([h],t)}(l.default));o.default=g,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_QianDao:[function(e,t,o){"use strict";cc._RF.push(t,"d40cdJMpFdKfJc7XOpOy/Dt","UI_QianDao");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./BundleConfig"),c=e("./ADManager"),s=e("./EventManager"),l=e("./TipsManager"),u=e("./UIManager"),d=e("./UIView"),p=e("./EvenType"),h=e("./PlayerDataManager"),f=e("./Excel"),g=e("./Const_Hall"),_=e("./HallGlobalVariable"),y=e("./UI_QianDaoItem"),v=e("./UIConfig_Home"),m=e("./LanMgr"),b=cc._decorator,I=b.ccclass,w=b.property,E=(b.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.state1=null,t.state2=null,t}return i(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];h.PlayerDataMgr.resetQianDaoCount(),this.initializeQianDao()},t.prototype.initializeQianDao=function(){for(var e=this,t=f.Excel.shuiguoqiandao_all.size,o=this.content.children,n=function(t){var n=f.Excel.shuiguoqiandao(t+1),i=o[t];i||(i=cc.instantiate(o[0]),e.content.addChild(i)),e.scheduleOnce(function(){i.getComponent(y.default).initUI(n)})},i=0;i<t;i++)n(i);1===h.PlayerDataMgr.globalData.isqiandaocode?(this.state1.active=!0,this.state2.active=!1):(this.state1.active=!1,this.state2.active=!0)},t.prototype.onLinQu=function(e,t){void 0===t&&(t=1);for(var o=this.content.children,n=null,i=0;i<o.length;i++){var a=o[i].getComponent(y.default);if(1===a.nowcode){n=a.nowqiandao;break}}var c=n.award*t;h.PlayerDataMgr.setQianDaoState();var d=new g.GetItemsData;d.ids=[],d.counts=[];var f=null;switch(n.awardtype){case 1:d.ids.push(_.default.goldId),d.counts.push(c);break;case 2:d.ids.push(_.default.diamondId),d.counts.push(c);break;case 3:d.ids.push(_.default.powerId),d.counts.push(c);break;case 5:f=_.default.getSuiPian([c,0,0]);break;case 6:f=_.default.getSuiPian([0,c,0]);break;case 7:f=_.default.getSuiPian([0,0,c])}f&&f.forEach(function(e,t){d.ids.push(t),d.counts.push(e)}),u.default.open(r.BundleNames.Home,v.UIView_Home.UI_GetItems,d),d.clickCallBack=function(){d.ids.forEach(function(e,t){var o=d.counts[t];switch(e){case _.default.goldId:s.EventMgrInstance.emitEvent(p.EVENT_TYPE.Home_Add_Gold,2,o);break;case _.default.diamondId:s.EventMgrInstance.emitEvent(p.EVENT_TYPE.Home_Add_Gold,3,o);break;case _.default.powerId:s.EventMgrInstance.emitEvent(p.EVENT_TYPE.Home_Add_Gold,1,o);break;default:l.TipMgr.showToast(m.langMgr.getStr("0013")),h.PlayerDataMgr.addEquipFragments(e,o)}})},this.onCloseQianDao()},t.prototype.onDoubelLinQu=function(){var e=this;c.ADMgr.showRewardedVideoAd("\u53cc\u500d\u7b7e\u5230",function(){e.onLinQu(null,2)})},t.prototype.onCloseQianDao=function(){this._close()},a([w(cc.Node)],t.prototype,"content",void 0),a([w(cc.Node)],t.prototype,"state1",void 0),a([w(cc.Node)],t.prototype,"state2",void 0),a([I],t)}(d.default));o.default=E,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_QianDaoItem":"UI_QianDaoItem"}],UI_Setting_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"108ad7WyIpDAZTuUBE8vk5R","UI_Setting_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.btn_btclose=null,t.node_yinyuepro=null,t.node_yinyueHk=null,t.node_yinxiaopro=null,t.node_yinxiaoHk=null,t.txt_idLabel=null,t._btnNames=["btn_close","btn_btclose"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_close",void 0),a([l(cc.Button)],t.prototype,"btn_btclose",void 0),a([l(cc.Node)],t.prototype,"node_yinyuepro",void 0),a([l(cc.Node)],t.prototype,"node_yinyueHk",void 0),a([l(cc.Node)],t.prototype,"node_yinxiaopro",void 0),a([l(cc.Node)],t.prototype,"node_yinxiaoHk",void 0),a([l(cc.Label)],t.prototype,"txt_idLabel",void 0),a([s("UI_Setting_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Setting:[function(e,t,o){"use strict";cc._RF.push(t,"052ec15vNpK56s7b+ZzeGa2","UI_Setting");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_Setting_UIBindings"),c=e("./UIView"),s=e("./AudioManager"),l=e("./LogManager"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.startX=0,t.maxx=395,t.minx=0,t}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o];this.initializeState()},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_btclose:case t.btn_close:this._close()}},t.prototype.onLoad=function(){var e,t=null===(e=this.auto_ui)||void 0===e?void 0:e.txt_idLabel;t&&(t.string="")},t.prototype.onEnable=function(){var e=this.auto_ui,t=e.node_yinxiaoHk,o=e.node_yinyueHk;t.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this),o.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),o.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this)},t.prototype.handleTouchStart=function(e){this.startX=e.getLocationX(),l.LogMgr.debug("\u5f00\u59cb\u89e6\u6478")},t.prototype.handleTouchMove=function(e){l.LogMgr.debug("\u89e6\u6478\u4e2d");var t=e.getLocationX()-this.startX,o=e.getCurrentTarget();(t>0&&o.x<this.maxx||t<0&&o.x>this.minx)&&(o.x+=t),o.x=Math.max(this.minx,Math.min(this.maxx,o.x));var n=o.name,i=o.x/this.maxx;this.updateVolume(n,i),this.startX=e.getLocationX()},t.prototype.initializeState=function(){var e=s.AudioMgr.getAudioSettings(),t=e.effectVolume,o=e.musicVolume,n=this.auto_ui,i=n.node_yinyueHk,a=n.node_yinxiaoHk,r=n.node_yinyuepro,c=n.node_yinxiaopro;i.x=this.maxx*o,a.x=this.maxx*t,r.getComponent(cc.ProgressBar).progress=o,c.getComponent(cc.ProgressBar).progress=t},t.prototype.onDisable=function(){},t.prototype.updateVolume=function(e,t){"$node_yinxiaoHk"===e?(this.auto_ui.node_yinxiaopro.getComponent(cc.ProgressBar).progress=t,s.AudioMgr.setSoundEffectVolume(t)):"$node_yinyueHk"===e&&(this.auto_ui.node_yinyuepro.getComponent(cc.ProgressBar).progress=t,s.AudioMgr.setBackgroundMusicVolume(t))},a([p(r.default)],t.prototype,"auto_ui",void 0),a([d],t)}(c.default));o.default=h,cc._RF.pop()},{"./AudioManager":"AudioManager","./LogManager":"LogManager","./UIView":"UIView","./UI_Setting_UIBindings":"UI_Setting_UIBindings"}],UI_ShopItemInfo_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"f5522jG1UtDP4+cf4V5GkGI","UI_ShopItemInfo_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_iconBg=null,t.sp_iconSprite=null,t.txt_countLabel=null,t.txt_infoLabel=null,t.txt_priceLabel=null,t.txt_titleLabel=null,t.btn_clickBtn=null,t.btn_closeBtn=null,t.node_videoIcon=null,t.node_goldIcon=null,t.node_diamondIcon=null,t._btnNames=["btn_clickBtn","btn_closeBtn"],t}return i(t,e),a([l(cc.Sprite)],t.prototype,"sp_iconBg",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([l(cc.Label)],t.prototype,"txt_infoLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Button)],t.prototype,"btn_clickBtn",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.Node)],t.prototype,"node_videoIcon",void 0),a([l(cc.Node)],t.prototype,"node_goldIcon",void 0),a([l(cc.Node)],t.prototype,"node_diamondIcon",void 0),a([s("UI_ShopItemInfo_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ShopItemInfo:[function(e,t,o){"use strict";cc._RF.push(t,"b7a05sG6TlNRZfiq3t45fRp","UI_ShopItemInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_ShopItemInfo_UIBindings"),c=e("./UIView"),s=e("./CommonUtils"),l=e("./BundleConfig"),u=e("./Const_Hall"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){var t=this.auto_ui;t.txt_titleLabel.string=e.titleName,t.sp_iconBg.spriteFrame=e.qualitySpriteFrame,t.sp_iconSprite.spriteFrame=e.iconSpriteFrame,e.qualitySpriteFrame||this._loadRes(l.BundleNames.Common,"res/quality/quality_1",cc.SpriteFrame).then(function(e){t.sp_iconBg.spriteFrame=e}),s.default.limitSpriteSize(t.sp_iconSprite,u.equipIconSize),t.txt_countLabel.string=e.count.toString(),t.txt_infoLabel.string=e.infoStr,t.node_videoIcon.active=e.richType===u.RichType.Video,t.node_goldIcon.active=e.richType===u.RichType.Gold,t.node_diamondIcon.active=e.richType===u.RichType.Diamond,t.txt_priceLabel.string=e.price.toString(),this.clickCallBack=e.clickCallBack},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_closeBtn:this._close();break;case t.btn_clickBtn:this.clickCallBack&&this.clickCallBack(),this._close();break;default:console.warn("Unhandled button click: ",e)}},a([h(r.default)],t.prototype,"auto_ui",void 0),a([p],t)}(c.default);o.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./UIView":"UIView","./UI_ShopItemInfo_UIBindings":"UI_ShopItemInfo_UIBindings"}],UI_ShowAttackInfo:[function(e,t,o){"use strict";cc._RF.push(t,"31b20WJALpENbqa4mJ6OVeF","UI_ShowAttackInfo");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./CommonUtils"),l=e("./EvenType"),u=e("./NodePoolMag"),d=e("./UI_AttackInfo"),p=cc._decorator,h=p.ccclass,f=p.property,g=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t}return i(t,e),t.prototype.addEventListener=function(){r.EventMgrInstance.addListener(l.EVENT_TYPE.Game_ShangHai_FeiZi,this.handlePiaoZi,this)},t.prototype.removeEventListener=function(){r.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_ShangHai_FeiZi,this.handlePiaoZi,this)},t.prototype.handlePiaoZi=function(e,t,o,n){void 0===n&&(n=1);var i=u.NodePoolMag.instance.getNodeFromPool("piaozi");if(i||(u.NodePoolMag.instance.createNodePool("piaozi",1,this.item),i=u.NodePoolMag.instance.getNodeFromPool("piaozi")),i.stopAllActions(),o){var a=s.default.limitIntegerInRange(0,o.width/2);Math.random()>.5&&(a=-a),t.x=a,t.y=0,o.addChild(i),i.zIndex=2===n?1:0}else t=this.node.convertToNodeSpaceAR(t),t=this.getRandomPoint(t,50),this.node.addChild(i),i.zIndex=2===n?1:0;i.getComponent(d.default).updateValue(e,n),i.x=t.x,i.y=t.y+80,i.opacity=255,cc.tween(i).to(.1,{scale:1.5}).to(.3,{scale:1}).call(function(){}).start(),cc.tween(i).to(.1,{y:i.y+100}).to(.3,{y:i.y+120}).delay(.1).to(.05,{opacity:0}).call(function(){u.NodePoolMag.instance.recycleNodeToPool("piaozi",i)}).start()},t.prototype.getRandomPoint=function(e,t){var o=2*Math.random()*Math.PI,n=Math.random()*t;return e.add(new cc.Vec2(Math.cos(o)*n,Math.sin(o)*n))},a([f(cc.Prefab)],t.prototype,"item",void 0),a([h],t)}(c.default));o.default=g,cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_AttackInfo":"UI_AttackInfo"}],UI_ShowBossTip:[function(e,t,o){"use strict";cc._RF.push(t,"4d46fi3cbBD6ayPPDOgUFo2","UI_ShowBossTip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EventManager"),u=e("./ResKeeper"),d=e("./EvenType"),p=e("./BossComming"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowNode=null,t}return i(t,e),t.prototype.onEnable=function(){l.EventMgrInstance.addListener(d.EVENT_TYPE.GAME_SHOW_BOOS,this.displayAnimation,this)},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(d.EVENT_TYPE.GAME_SHOW_BOOS,this.displayAnimation,this)},t.prototype.displayAnimation=function(){return r(this,void 0,Promise,function(){var e;return c(this,function(t){switch(t.label){case 0:return this.nowNode?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/BossComming",cc.Prefab)];case 1:e=t.sent(),this.nowNode=cc.instantiate(e),this.node.addChild(this.nowNode),t.label=2;case 2:return this.nowNode.getComponent(p.default).displayAnimation(),[2]}})})},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){var a=cc.assetManager.getBundle(e);if(!a)return i(new Error("Bundle "+e+" is not found"));a.load(t,o,function(e,t){if(e)return i(e);n(t)})})},a([g(cc.Node)],t.prototype,"nowNode",void 0),a([f],t)}(u.default));o.default=_,cc._RF.pop()},{"./BossComming":"BossComming","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_ShowZaZhong_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"336323LsVBHhazr8rVyM+XX","UI_ShowZaZhong_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_qiFather=null,t.node_huoFather=null,t.sp_icon=null,t.sp_ciTiaoIcon=null,t.txt_titleLabel=null,t.btn_closeBtn=null,t.rtxt_ciTiaoInfo=null,t._btnNames=["btn_closeBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_qiFather",void 0),a([l(cc.Node)],t.prototype,"node_huoFather",void 0),a([l(cc.Sprite)],t.prototype,"sp_icon",void 0),a([l(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([l(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),a([s("UI_ShowZaZhong_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ShowZaZhong:[function(e,t,o){"use strict";cc._RF.push(t,"717abMKL2BN0Lk18wlWcqIo","UI_ShowZaZhong");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_ShowZaZhong_UIBindings"),c=e("./UIView"),s=e("./Excel"),l=e("./BundleConfig"),u=e("./CommonUtils"),d=cc._decorator,p=d.ccclass,h=d.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(e){var t=s.Excel.shuiguo(e.shuiGuoId);if(t){var o=this.auto_ui,n=o.txt_titleLabel,i=o.sp_icon,a=o.sp_ciTiaoIcon,r=o.rtxt_ciTiaoInfo,c=o.node_qiFather,d=o.node_huoFather;n.string=t.newName,this._loadRes(l.BundleNames.Common,"res/player/player"+(e.shuiGuoId-1e3)+"_5",cc.SpriteFrame).then(function(e){i.spriteFrame=e}),this._loadRes(l.BundleNames.Common,"res/tianfuicon/tianfu_"+e.shuiGuoId+"_1",cc.SpriteFrame).then(function(e){a.spriteFrame=e});var p=-1;if(s.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId==e.shuiGuoId&&0!==t.newTianFuBuff&&(p=t.newTianFuBuff)}),-1!==p){var h=s.Excel.getFruitBuff(p);if(h){var f=h.value,g=h.buffdesc,_=u.default.replaceStringSymbols(g,"\\n",[""]),y=_.includes("X")?_.split("X"):[_],v=y.map(function(e,o){if(e.includes("#")){var n='<u><color=#ffff00 click="ShowZaZhongInfo">'+t.newName+"</c></u>";e=u.default.replaceStringSymbols(e,"#",[n])}var i="<color=#ffffff>"+e+"</c>";return f&&o<y.length-1&&(i+="<color=#71ff00>"+f[o]+"</c>"),i}).join("");v="<outline color=#000000 width=3><b>"+v+"</b></outline>",r.string=v}}u.default.loadLevel5Effect(e.shuiGuoId,c,d,this._loadRes.bind(this))}else this._close()},t.prototype._clickListener=function(e){e===this.auto_ui.btn_closeBtn&&this._close()},a([h(r.default)],t.prototype,"auto_ui",void 0),a([p],t)}(c.default);o.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIView":"UIView","./UI_ShowZaZhong_UIBindings":"UI_ShowZaZhong_UIBindings"}],UI_ShuoMing:[function(e,t,o){"use strict";cc._RF.push(t,"822e3aWj0NCBbEU93cCicnz","UI_ShuoMing");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./AudioManager"),c=e("./UIView"),s=cc._decorator,l=s.ccclass,u=(s.property,s.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},t.prototype.onCloseView=function(){r.AudioMgr.playSoundEffect("effect/button"),this._close()},a([l],t)}(c.default));o.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./UIView":"UIView"}],UI_Sidebar_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"f8eb9q7nThMT6kgb3r/COgc","UI_Sidebar_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.btn_sidebar=null,t._buttonNames=["btn_close","btn_sidebar"],t}return i(t,e),a([l(cc.Button)],t.prototype,"btn_close",void 0),a([l(cc.Button)],t.prototype,"btn_sidebar",void 0),a([s("UI_Sidebar_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Sidebar:[function(e,t,o){"use strict";cc._RF.push(t,"d10a7/osTVMh75EnGEcfYHl","UI_Sidebar");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_Sidebar_UIBindings"),c=e("./UIView"),s=cc._decorator,l=s.ccclass,u=s.property,d=function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t}return i(t,e),t.prototype._show=function(){},t.prototype._clickListener=function(e){var t,o;switch(e){case null===(t=this.auto_ui)||void 0===t?void 0:t.btn_close:this._close();break;case null===(o=this.auto_ui)||void 0===o?void 0:o.btn_sidebar:this._goto()}},t.prototype._goto=function(){},a([u(r.default)],t.prototype,"auto_ui",void 0),a([l],t)}(c.default);o.default=d,cc._RF.pop()},{"./UIView":"UIView","./UI_Sidebar_UIBindings":"UI_Sidebar_UIBindings"}],UI_SkillItem:[function(e,t,o){"use strict";cc._RF.push(t,"0e4212LsrNJKJ8x/LqngJDw","UI_SkillItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./Excel"),d=cc._decorator,p=d.ccclass,h=d.property,f=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconimg=null,t.iconbg=null,t.countLb=null,t.callback=null,t.data=null,t}return i(t,e),t.prototype.initializeView=function(e,t){return r(this,void 0,Promise,function(){var o,n,i;return c(this,function(a){switch(a.label){case 0:return this.callback=t,this.data=e,console.log("shujuid",this.data),o=u.Excel.fruitcitiao(e.id),[4,this._loadRes(s.BundleNames.Game,"res/skill_icon"+o.quality,cc.SpriteFrame)];case 1:return n=a.sent(),this.iconbg.spriteFrame=n,[4,this._loadRes(s.BundleNames.Common,"res/skillicon/skill_"+e.id,cc.SpriteFrame)];case 2:return i=a.sent(),this.iconimg.spriteFrame=i,this.countLb.string="\xd7"+e.count,[2]}})})},t.prototype.onClick=function(){this.callback(this)},t.prototype._loadRes=function(e,t,o){return new Promise(function(n,i){cc.assetManager.loadBundle(e,function(e,a){e?i(e):a.load(t,o,function(e,t){e?i(e):n(t)})})})},a([h(cc.Sprite)],t.prototype,"iconimg",void 0),a([h(cc.Sprite)],t.prototype,"iconbg",void 0),a([h(cc.Label)],t.prototype,"countLb",void 0),a([p],t)}(l.default));o.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./ResKeeper":"ResKeeper"}],UI_SkillShow:[function(e,t,o){"use strict";cc._RF.push(t,"e2cfb3wJvRHHp7NhXQV8iJG","UI_SkillShow");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./ResKeeper"),s=e("./CommonUtils"),l=e("./EvenType"),u=e("./Excel"),d=e("./BuffMag"),p=e("./UI_SkillItem"),h=cc._decorator,f=h.ccclass,g=h.property,_=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipView=null,t.rolelevel=null,t.progress=null,t.scrollView=null,t.selectedItemId=-1,t}return i(t,e),t.prototype.onEnable=function(){this.tipView.active=!1,this.scrollView=this.node.getChildByName("New ScrollView").getComponent(cc.ScrollView),this.addListeners(),r.EventMgrInstance.addListener(l.EVENT_TYPE.Game_Hide,this.hideTipView,this),r.EventMgrInstance.addListener(l.EVENT_TYPE.Game_Add_CiTiao,this.addListeners,this)},t.prototype.hideTipView=function(){this.selectedItemId=-1,this.tipView.active=!1},t.prototype.addListeners=function(){var e=this,t=d.BuffMgr.ciTiaoData,o={};t.forEach(function(e){o[e.id]||(o[e.id]={id:e.id,count:0}),o[e.id].count+=1});var n=Object.keys(o),i=this.scrollView.content.children;i.forEach(function(e){e.active=!1}),n.forEach(function(t,n){var a=i[n];a||(a=cc.instantiate(i[0]),e.scrollView.content.addChild(a)),a.active=!0,a.getComponent(p.default).initializeView(o[t],e.handleItemClick.bind(e))}),this.scheduleOnce(function(){e.scrollView.scrollToBottomRight(.2)},.5),this.tipView.active=!1,this.selectedItemId=-1},t.prototype.handleItemClick=function(e){if(e.nowdata.id!==this.selectedItemId){var t=e.node.convertToWorldSpaceAR(cc.v2()),o=this.node.parent.convertToNodeSpaceAR(t);this.tipView.x=o.x,this.tipView.y=o.y+200;var n=this.node.parent.width-380;this.tipView.x+this.tipView.width/2>n/2&&(this.tipView.x=n/2-(this.tipView.width/2+20)),this.tipView.x-this.tipView.width/2<-n/2&&(this.tipView.x=-(n/2-(this.tipView.width/2+20))),this.tipView.getChildByName("jiantou").x=o.x-this.tipView.x;var i=u.Excel.fruitcitiao(e.nowdata.id),a=this.tipView.getChildByName("layout").getChildByName("lb").getComponent(cc.RichText),r=this.tipView.getChildByName("layout").getChildByName("layout").getChildByName("count").getComponent(cc.Label),c=u.Excel.getFruitBuff(i.citiaoshuzhitype);-1!==i.citiaochuxian?(this.tipView.getChildByName("layout").getChildByName("layout").active=!0,r.node.active=!0,r.string=e.nowdata.count*c.value[0]+"%"):this.tipView.getChildByName("layout").getChildByName("layout").active=!1,this.updateCiTiaoContent(a,i,e.nowdata.count),this.tipView.active=!0,this.selectedItemId=e.nowdata.id}else this.selectedItemId=-1,this.tipView.active=!1},t.prototype.updateCiTiaoContent=function(e,t){var o=t.citiaomiaoshu,n=u.Excel.getFruitBuff(t.citiaoshuzhitype),i=(o=s.default.replaceStringSymbols(o,"n",[""])).split("X"),a="";i.forEach(function(e,t){t<i.length-1&&n.value[t]?a+="<color=#ffffff>"+e+"</c><color=#00ff00>"+n.value[t]+"</color>":a+="<color=#ffffff>"+e+"</c>"}),e.string="<outline color=#000000 width=4>"+a+"</outline>"},t.prototype.onDisable=function(){r.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_Hide,this.hideTipView,this),r.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_Add_CiTiao,this.addListeners,this)},t.prototype.updateUI=function(e,t){this.rolelevel.string="Lv."+e,this.progress.progress=t},a([g(cc.Node)],t.prototype,"tipView",void 0),a([g(cc.Label)],t.prototype,"rolelevel",void 0),a([g(cc.ProgressBar)],t.prototype,"progress",void 0),a([f],t)}(c.default));o.default=_,cc._RF.pop()},{"./BuffMag":"BuffMag","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ResKeeper":"ResKeeper","./UI_SkillItem":"UI_SkillItem"}],UI_TestBtn:[function(e,t,o){"use strict";cc._RF.push(t,"e7cf1DiXmpNKq7QBLcgMRu4","UI_TestBtn"),Object.defineProperty(o,"__esModule",{value:!0});var n=e("./ResKeeper"),i=cc._decorator,a=i.ccclass,r=(i.property,i.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.active=!1},__decorate([a],t)}(n.default));o.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_Toast:[function(e,t,o){"use strict";cc._RF.push(t,"c3c55KalMBN8Krap9o6njNP","UI_Toast");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=(r.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_toast=null,t.anm_toast=null,t}return i(t,e),t.prototype.show=function(e){this.node.active=!0,this.txt_toast.string=e,this.node.width=e.length*this.txt_toast.fontSize+100,this.anm_toast.play(),this.updateAnimationListener()},t.prototype.updateAnimationListener=function(){this.anm_toast.off(cc.Animation.EventType.FINISHED,this.onAnimationComplete,this),this.anm_toast.on(cc.Animation.EventType.FINISHED,this.onAnimationComplete,this)},t.prototype.onAnimationComplete=function(){this.node.active=!1},a([s(cc.Label)],t.prototype,"txt_toast",void 0),a([s(cc.Animation)],t.prototype,"anm_toast",void 0),a([c],t)}(cc.Component));o.default=l,cc._RF.pop()},{}],UI_TongJiCongZhi:[function(e,t,o){"use strict";cc._RF.push(t,"fd4abFvJeRAf7QhISFcra9l","UI_TongJiCongZhi");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./EventManager"),u=e("./ResKeeper"),d=e("./EvenType"),p=e("./UI_AttackTongJi"),h=cc._decorator,f=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentNode=null,t.currentNode=null,t}return i(t,e),t.prototype.onEnable=function(){l.EventMgrInstance.addListener(d.EVENT_TYPE.GAME_HIDE_TONGJI,this.hideStatisticsTip,this)},t.prototype.onDisable=function(){l.EventMgrInstance.removeListener(d.EVENT_TYPE.GAME_HIDE_TONGJI,this.hideStatisticsTip,this)},t.prototype.showTip=function(){var e;return r(this,void 0,Promise,function(){var t;return c(this,function(o){switch(o.label){case 0:return this.currentNode?[3,2]:[4,this._loadRes(s.BundleNames.Game,"prefabs/TongJiUi",cc.Prefab)];case 1:t=o.sent(),this.currentNode=cc.instantiate(t),null===(e=this.contentNode)||void 0===e||e.addChild(this.currentNode),o.label=2;case 2:return this.currentNode.getComponent(p.default).displayStatistics(),[2]}})})},t.prototype.hideStatisticsTip=function(){this.currentNode&&this.currentNode.getComponent(p.default).hideStatistics()},a([g(cc.Node)],t.prototype,"contentNode",void 0),a([f],t)}(u.default);o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper","./UI_AttackTongJi":"UI_AttackTongJi"}],UI_TouchClick:[function(e,t,o){"use strict";cc._RF.push(t,"9e9e2o0WiNE/Zyk3+f+nhe9","UI_TouchClick");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./EventManager"),c=e("./LogManager"),s=e("./ResKeeper"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.onEnable=function(){this.node.children[0].active=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.handleTouchStart=function(e){var t=this;c.LogMgr.debug("Touch Position - x:",e.getLocationX(),"y:",e.getLocationY()),r.EventMgrInstance.emitEvent("zuobiaozhuanhuan",e.getLocation(),function(e){var o=t.node.convertToNodeSpaceAR(e),n=t.node.children[0];n.x=o.x,n.y=o.y,r.EventMgrInstance.emitEvent("clicksend",n)})},a([u],t)}(s.default));o.default=d,cc._RF.pop()},{"./EventManager":"EventManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],UI_TuJianItem:[function(e,t,o){"use strict";cc._RF.push(t,"68346xQKdJPAIgXzQnzoDuM","UI_TuJianItem");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},c=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0});var s=e("./BundleConfig"),l=e("./ResKeeper"),u=e("./PlayerDataManager"),d=e("./Excel"),p=e("./LanMgr"),h=cc._decorator,f=h.ccclass,g=h.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuiguo1=null,t.shuiguo2=null,t.shuiguo3=null,t.putongmater=null,t.zhihuimater=null,t.lockNode=null,t.unlockNode=null,t.paizi1=0,t.paizi2=0,t.paizi3=0,t.paizi1y=0,t.paizi2y=0,t.paizi3y=0,t.jiesuostate={},t}return i(t,e),t.prototype.initializeData=function(e){var t=e.id-1e3,o=e.jinjieShuiGuoId-1e3;this.initializeShuiGuo1(t,this.shuiguo1,1),this.initializeShuiGuo1(o,this.shuiguo2,2),this.initializeShuiGuo3(t,o,this.shuiguo3),this.paizi1=this.shuiguo1.getChildByName("paizi").x,this.paizi2=this.shuiguo2.getChildByName("paizi").x,this.paizi3=this.shuiguo3.getChildByName("paizi").x,this.paizi1y=this.shuiguo1.getChildByName("paizi").y,this.paizi2y=this.shuiguo2.getChildByName("paizi").y,this.paizi3y=this.shuiguo3.getChildByName("paizi").y},t.prototype.initializeShuiGuo3=function(e,t,o){return r(this,void 0,Promise,function(){var t,n,i,a,r;return c(this,function(c){switch(c.label){case 0:return t=o.children[0].getComponent(cc.Sprite),[4,this._loadRes(s.BundleNames.Common,"res/player/player"+e+"_5",cc.SpriteFrame)];case 1:switch(n=c.sent(),t.spriteFrame=n,t.setMaterial(0,this.putongmater),i=o.getChildByName("paizi"),o.getChildByName("shuiguoname").getComponent(cc.Label).string=d.Excel.shuiguo(e+1e3).newName,a=this.paizi3,r=this.paizi3y,e){case 10:i.x=a-20,t.node.height=120,t.node.width=50;break;case 4:i.x=a-20,t.node.height=120,t.node.width=60;break;case 8:i.y=r-50,t.node.height=60,t.node.width=120;break;default:t.node.height=120,t.node.width=120}return[2]}})})},t.prototype.initializeShuiGuo1=function(e,t,o){return r(this,void 0,Promise,function(){var n,i,a,r,l,h,f,g,_;return c(this,function(c){switch(c.label){case 0:return t?(n=d.Excel.shuiguo(e+1e3),i=t.children[1].getComponent(cc.Sprite),a=t.children[0].getComponent(cc.Label),(r=u.PlayerDataMgr.getEquipDataById(e+1e3))&&r.isUnLock?(i.setMaterial(0,this.putongmater),l=n.jinJieLv,r.level>=l?(a.node.active=!1,this.jiesuostate[e]=3):(a.string="\u5916\u90e8\u7b49\u7ea7"+l+"\u89e3\u9501",this.jiesuostate[e]=2)):(this.jiesuostate[e]=1,i.setMaterial(0,this.zhihuimater),a.string=p.langMgr.getStr("0058",n.unLock)),[4,this._loadRes(s.BundleNames.Common,"res/player/player"+e+"_4",cc.SpriteFrame)]):[2];case 1:switch(h=c.sent(),i.spriteFrame=h,f=t.getChildByName("paizi"),g=0,_=0,1===o?(g=this.paizi1,_=this.paizi1y):2===o&&(g=this.paizi2,_=this.paizi2y),e){case 10:f.x=g-20,i.node.height=120,i.node.width=50;break;case 4:f.x=g-20,i.node.height=120,i.node.width=60;break;case 8:f.y=_+30,i.node.height=60,i.node.width=120;break;default:i.node.height=120,i.node.width=120}return[2]}})})},a([g(cc.Node)],t.prototype,"shuiguo1",void 0),a([g(cc.Node)],t.prototype,"shuiguo2",void 0),a([g(cc.Node)],t.prototype,"shuiguo3",void 0),a([g(cc.Material)],t.prototype,"putongmater",void 0),a([g(cc.Material)],t.prototype,"zhihuimater",void 0),a([g(cc.Node)],t.prototype,"lockNode",void 0),a([g(cc.Node)],t.prototype,"unlockNode",void 0),a([f],t)}(l.default);o.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_TuJian:[function(e,t,o){"use strict";cc._RF.push(t,"3c67f8Y43VH5rC/7v+quU1s","UI_TuJian");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIView"),c=e("./PlayerDataManager"),s=e("./Excel"),l=e("./UI_TuJianItem"),u=cc._decorator,d=u.ccclass,p=u.property,h=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNode=null,t.layout1=null,t.layout2=null,t.weijiesuo=null,t}return i(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onEnable=function(){this.initUI()},t.prototype.initUI=function(){for(var e=s.Excel.shuiguo_all,t=e.size,o=[],n=[],i=0;i<t;i++){var a=e.get(i+1001);a&&a.jinJieLv>0&&(this.isUnlocked(a)?o.push(a):n.push(a))}this.setFruitItems(this.layout1,o),this.setFruitItems(this.layout2,n)},t.prototype.setFruitItems=function(e,t){var o=this;e.children.forEach(function(e){e.active=!1}),t.forEach(function(t,n){var i=e.children[n];i||(i=cc.instantiate(o.itemNode),e.addChild(i)),i.setPosition(0,0),i.active=!0,i.getComponent(l.default).initializeData(t)})},t.prototype.isUnlocked=function(e){var t=this.getFruitById(e.id),o=this.getFruitById(e.jinjieShuiGuoId);return!(!t||!o)},t.prototype.getFruitById=function(e){var t=c.PlayerDataMgr.getEquipDataById(e),o=s.Excel.shuiguo(e);return!(!t||!t.isUnLock)&&t.level>=o.jinJieLv},t.prototype.onCloseView=function(){this._close()},a([p(cc.Node)],t.prototype,"itemNode",void 0),a([p(cc.Node)],t.prototype,"layout1",void 0),a([p(cc.Node)],t.prototype,"layout2",void 0),a([p(cc.Node)],t.prototype,"weijiesuo",void 0),a([d],t)}(r.default));o.default=h,cc._RF.pop()},{"./Excel":"Excel","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_TuJianItem":"UI_TuJianItem"}],UI_UnlockNewEquip_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"4df92Rzt7tHPZ1FmGQB73+Z","UI_UnlockNewEquip_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_view=null,t.node_guang=null,t.btn_mengban=null,t.sp_iconSprite=null,t.txt_nameLabel=null,t._btnNames=["btn_mengban"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_view",void 0),a([l(cc.Node)],t.prototype,"node_guang",void 0),a([l(cc.Button)],t.prototype,"btn_mengban",void 0),a([l(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),a([l(cc.Label)],t.prototype,"txt_nameLabel",void 0),a([s("UI_UnlockNewEquip_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_UnlockNewEquip:[function(e,t,o){"use strict";cc._RF.push(t,"f05f4MmRYVCKLFb+4/Ia88z","UI_UnlockNewEquip");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_UnlockNewEquip_UIBindings"),c=e("./UIView"),s=e("./BundleConfig"),l=e("./AudioManager"),u=e("./Excel"),d=cc._decorator,p=d.ccclass,h=d.property,f=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.fruitIds=[],t.clickCallback=null,t}return i(t,e),t.prototype._show=function(e){this.fruitIds=e.shuiGuoIds,this.clickCallback=e.callBack,this.showSingleEquip(this.fruitIds.shift()),this.auto_ui.node_guang.stopAllActions(),this.auto_ui.node_guang.runAction(cc.repeatForever(cc.rotateBy(5,360)))},t.prototype.showSingleEquip=function(e){var t=this;l.AudioMgr.playSoundEffect("effect/getReward"),this.auto_ui.node_view.scale=0,this.auto_ui.node_view.runAction(cc.scaleTo(.5,1,1)),this._loadRes(s.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame).then(function(e){t.auto_ui.sp_iconSprite.spriteFrame=e});var o=u.Excel.shuiguo(e);this.auto_ui.txt_nameLabel.string=o.name},t.prototype._clickListener=function(e){e===this.auto_ui.btn_mengban&&(this.fruitIds.length>0?this.showSingleEquip(this.fruitIds.shift()):(this.clickCallback&&this.clickCallback(),this._close()))},a([h(r.default)],t.prototype,"auto_ui",void 0),a([p],t)}(c.default));o.default=f,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./Excel":"Excel","./UIView":"UIView","./UI_UnlockNewEquip_UIBindings":"UI_UnlockNewEquip_UIBindings"}],UI_VideoBuyOne_UIBindings:[function(e,t,o){"use strict";cc._RF.push(t,"2d927xc4mJP4J1Pf/KSP/fX","UI_VideoBuyOne_UIBindings");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UIBindings"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.node_type=null,t.sp_furitIconSprite=null,t.txt_countLabel=null,t.txt_infoLabel=null,t.txt_priceLabel=null,t.txt_titleLabel=null,t.btn_clickBtn=null,t.btn_closeBtn=null,t._btnNames=["btn_clickBtn","btn_closeBtn"],t}return i(t,e),a([l(cc.Node)],t.prototype,"node_type",void 0),a([l(cc.Sprite)],t.prototype,"sp_furitIconSprite",void 0),a([l(cc.Label)],t.prototype,"txt_countLabel",void 0),a([l(cc.Label)],t.prototype,"txt_infoLabel",void 0),a([l(cc.Label)],t.prototype,"txt_priceLabel",void 0),a([l(cc.Label)],t.prototype,"txt_titleLabel",void 0),a([l(cc.Button)],t.prototype,"btn_clickBtn",void 0),a([l(cc.Button)],t.prototype,"btn_closeBtn",void 0),a([s("UI_VideoBuyOne_UIBindings")],t)}(r.default);o.default=u,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_VideoBuyOne:[function(e,t,o){"use strict";cc._RF.push(t,"5370cBlZ5xCjZ5iYAHmzIJq","UI_VideoBuyOne");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./UI_VideoBuyOne_UIBindings"),c=e("./UIView"),s=e("./BundleConfig"),l=e("./ADManager"),u=e("./AIControl"),d=e("./GameGlobalVariable"),p=e("./GameDataManager"),h=e("./Const_Game"),f=cc._decorator,g=f.ccclass,_=f.property,y=(f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.openData=null,t}return i(t,e),t.prototype._show=function(e){var t=this;this.openData=e;var o=this.auto_ui,n=o.txt_titleLabel,i=o.txt_infoLabel,a=o.node_type,r=o.txt_countLabel,c=o.sp_furitIconSprite,l=o.btn_clickBtn;n.string=e.titleStr,i.string=e.infoStr,a.children[1].active=e.coinCount>0,a.children[2].active=0===e.coinCount,e.coinCount>0?r.string=""+e.coinCount:(a.children[2].destroyAllChildren(),c.node.scale=e.pfbName===h.FruitPrefabName.gezi||e.pfbName===h.FruitPrefabName.heng2?1:.5,this._loadRes(s.BundleNames.Game,"item/qiPao_"+e.pfbName,cc.Prefab).then(function(e){var t=cc.instantiate(e);t.children[0].active=!0,a.children[2].addChild(t),a.children[2].scale=c.node.scale,t.setPosition(0,0)}),c.spriteFrame=e.furidSprite||null),u.default._instance.isOpen&&u.default._instance.displayClickButton(l.node,function(){t.openData.clickCallBack&&t.openData.clickCallBack(),t._close()})},t.prototype._clickListener=function(e){var t=this,o=this.auto_ui,n=o.btn_closeBtn,i=o.btn_clickBtn;switch(e){case n:this.openData.failCallBack&&this.openData.failCallBack(),this._close();break;case i:var a=this.openData.titleStr,r=d.GameGlobalVariable;if(1===r.isSpecialLevel())a="\u65e0\u5c3d\u6a21\u5f0f"+a;else{var c=p.GameDataMgr.getCurrentLevelWaveState(r.nowlevel,2)+1;a=r.nowlevel+"\u7ae0_"+c+"\u6ce2_"+a}l.ADMgr.showRewardedVideoAd(a,function(){t.openData.clickCallBack&&t.openData.clickCallBack(),t._close()})}},a([_(r.default)],t.prototype,"auto_ui",void 0),a([g],t)}(c.default));o.default=y,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./BundleConfig":"BundleConfig","./Const_Game":"Const_Game","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./UIView":"UIView","./UI_VideoBuyOne_UIBindings":"UI_VideoBuyOne_UIBindings"}],UI_WuJinTiaoZhan:[function(e,t,o){"use strict";cc._RF.push(t,"0d7f8Oci1FCZIm/bsv+kz3i","UI_WuJinTiaoZhan");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ADManager"),c=e("./BundleConfig"),s=e("./Const_Hall"),l=e("./EvenType"),u=e("./EventManager"),d=e("./Excel"),p=e("./GameDataManager"),h=e("./GameGlobalVariable"),f=e("./HallGlobalVariable"),g=e("./LanMgr"),_=e("./PlayerDataManager"),y=e("./TimeUtils"),v=e("./TipsManager"),m=e("./UIConfig_Game"),b=e("./UIConfig_Home"),I=e("./UIManager"),w=e("./UIRotate"),E=e("./UIView"),M=e("./UI_BoxAward"),C=cc._decorator,B=C.ccclass,P=C.property,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wujintime=null,t.wujinfenshu=null,t.wujincount=null,t.shaodangBt=null,t.awardBoxs=null,t.awardNode=null,t.startBt=null,t.saodangLb=null,t.kaishiLb=null,t.tagfen=[1500,3e3,4500,6e3],t}return i(t,e),t.prototype.onEnable=function(){u.EventMgrInstance.addListener(l.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeEndlessModeUI,this),u.EventMgrInstance.addListener(l.EVENT_TYPE.Game_TiaoZhan_JiFen,this.initializeEndlessModeUI,this),u.EventMgrInstance.addListener(l.EVENT_TYPE.Game_TIAOZHAN_PASS,this.initializeEndlessModeUI,this),this.initializeEndlessModeUI()},t.prototype.onDisable=function(){u.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_TiaoZhan_JiFen,this.initializeEndlessModeUI,this),u.EventMgrInstance.removeListener(l.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeEndlessModeUI,this),u.EventMgrInstance.removeListener(l.EVENT_TYPE.Game_TIAOZHAN_PASS,this.initializeEndlessModeUI,this)},t.prototype._show=function(e){for(var t=[],o=1;o<arguments.length;o++)t[o-1]=arguments[o]},t.prototype.initializeEndlessModeUI=function(){var e=_.PlayerDataMgr.getWuJinCount();this.wujincount.string=g.langMgr.getStr("0063",e),this.wujinfenshu.string="\u4eca\u65e5\u7d2f\u8ba1"+p.GameDataMgr.getChallengePoints(1),this.shaodangBt.active=1===p.GameDataMgr.getCurrentLevelPassState(1,1),this.initializeAwardBox(),this.saodangLb.string="\xd7"+h.GameGlobalVariable.wujinsaodangcount,this.kaishiLb.string="\xd7"+h.GameGlobalVariable.wujintilicount},t.prototype.initializeAwardBox=function(){var e=this;this.awardBoxs.children.forEach(function(t,o){var n=e.tagfen[o];t.children[1].getComponent(cc.Label).string="\u7d2f\u8ba1"+n+"\u5206",e.updateBoxStatus(t,n,o)})},t.prototype.updateBoxStatus=function(e,t,o){p.GameDataMgr.getChallengePoints(1)>=t?p.GameDataMgr.getChallengeAwardRecord(1,o+1)?(this.setAwardBoxStatus(e,!0,!1,!1),e.children[0].getComponent(w.default).stopRotateTween()):(this.setAwardBoxStatus(e,!1,!0,!0),e.children[0].getComponent(w.default).startRotateTween()):(this.setAwardBoxStatus(e,!1,!0,!1),e.children[0].getComponent(w.default).stopRotateTween())},t.prototype.setAwardBoxStatus=function(e,t,o,n){e.children[0].getChildByName("unlockimg").active=t,e.children[0].getChildByName("lockimg").active=o,e.children[0].getChildByName("redpoint").active=n},t.prototype.onSaoDang=function(){_.PlayerDataMgr.globalData.power>=h.GameGlobalVariable.wujinsaodangcount?_.PlayerDataMgr.getWuJinCount()>0?r.ADMgr.showRewardedVideoAd("\u89c6\u9891\u626b\u8361",function(){h.GameGlobalVariable.nowlevel=-1,h.GameGlobalVariable.teshulevel=1,_.PlayerDataMgr.subtractPower(h.GameGlobalVariable.wujinsaodangcount),_.PlayerDataMgr.subtractWuJinCount(1),I.default.open(c.BundleNames.Game,m.UIView_Game.UI_GameOver,{type:2,back:function(){}})}):v.TipMgr.showToast(g.langMgr.getStr("0022")):v.TipMgr.showToast(g.langMgr.getStr("0008"))},t.prototype.showTip=function(){I.default.open(c.BundleNames.Home,b.UIView_Home.UI_ShuoMing)},t.prototype.onStartGame=function(){_.PlayerDataMgr.globalData.power>=h.GameGlobalVariable.wujintilicount?_.PlayerDataMgr.getWuJinCount()>0?(_.PlayerDataMgr.subtractPower(h.GameGlobalVariable.wujintilicount),u.EventMgrInstance.emitEvent(l.EVENT_TYPE.GAME_TIAOZHAN_VIEW),this._close()):v.TipMgr.showToast(g.langMgr.getStr("0022")):v.TipMgr.showToast(g.langMgr.getStr("0008"))},t.prototype.onAwardBoxClick=function(e,t){var o=this.tagfen[Number(t)-1],n=p.GameDataMgr.getChallengePoints(1),i=d.Excel.shuiguoguanqia(5);n<o?this.awardNode.getComponent(M.default).displayAward(e.getCurrentTarget(),i,t,2):p.GameDataMgr.getChallengeAwardRecord(1,Number(t))?v.TipMgr.showToast(g.langMgr.getStr("0011")):(v.TipMgr.showToast(g.langMgr.getStr("0012")),this.getAwardDataByBoxIndex(i,t),p.GameDataMgr.updateChallengeAwardRecord(1,Number(t)),this.initializeAwardBox())},t.prototype.getAwardDataByBoxIndex=function(e,t){switch(t){case"1":this.getAwardData(e.tiaozhanbox1);break;case"2":this.getAwardData(e.tiaozhanbox2);break;case"3":this.getAwardData(e.tiaozhanbox3);break;case"4":this.getAwardData(e.tiaozhanbox4)}},t.prototype.getAwardData=function(e){var t=this,o=new s.GetItemsData;o.ids=[],o.counts=[],e.forEach(function(e){var n=e[0],i=e[1],a=e[2];switch(n){case 1:o.ids.push(f.default.goldId),o.counts.push(i);break;case 2:o.ids.push(f.default.diamondId),o.counts.push(i);break;case 3:o.ids.push(f.default.powerId),o.counts.push(i);break;case 5:t.getFragmentData(a).forEach(function(e,t){o.ids.push(t),o.counts.push(e)})}}),o.clickCallBack=this.createAwardCallback(o),I.default.open(c.BundleNames.Home,b.UIView_Home.UI_GetItems,o)},t.prototype.getFragmentData=function(e){var t=new Map;return 1===e?t=f.default.getSuiPian([e,0,0]):2===e?t=f.default.getSuiPian([0,e,0]):3===e&&(t=f.default.getSuiPian([0,0,e])),t},t.prototype.createAwardCallback=function(e){var t=this;return function(){e.ids.forEach(function(o,n){var i=e.counts[n];t.dispatchAwardEvent(o,i)})}},t.prototype.dispatchAwardEvent=function(e,t){switch(e){case f.default.goldId:u.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,2,t);break;case f.default.diamondId:u.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,3,t);break;case f.default.powerId:u.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,1,t);break;default:v.TipMgr.showToast(g.langMgr.getStr("0013")),_.PlayerDataMgr.addEquipFragments(e,t)}},t.prototype.update=function(){this.wujintime.string=y.default.convertSecondsToHMS(y.default.getMillisecondsUntilMidnight()/1e3)+"\u5237\u65b0"},t.prototype.onCloseView=function(){this._close()},a([P(cc.Label)],t.prototype,"wujintime",void 0),a([P(cc.Label)],t.prototype,"wujinfenshu",void 0),a([P(cc.Label)],t.prototype,"wujincount",void 0),a([P(cc.Node)],t.prototype,"shaodangBt",void 0),a([P(cc.Node)],t.prototype,"awardBoxs",void 0),a([P(cc.Node)],t.prototype,"awardNode",void 0),a([P(cc.Node)],t.prototype,"startBt",void 0),a([P(cc.Label)],t.prototype,"saodangLb",void 0),a([P(cc.Label)],t.prototype,"kaishiLb",void 0),a([B],t)}(E.default);o.default=x,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LanMgr":"LanMgr","./PlayerDataManager":"PlayerDataManager","./TimeUtils":"TimeUtils","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIRotate":"UIRotate","./UIView":"UIView","./UI_BoxAward":"UI_BoxAward"}],"UVTransform-unpack":[function(e,t,o){"use strict";cc._RF.push(t,"b5e6ancQp5D/K4CwYOZXHa2","UVTransform-unpack");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=cc.v2(0,0),t.duration=3,t.renderComponent=null,t.currentCode=1,t.elapsedTime=0,t.deltaX=1,t.deltaY=1,t.currentOffsetX=0,t.currentOffsetY=0,t.offsetXPositive=0,t.offsetYPositive=0,t}return i(t,e),t.prototype.onLoad=function(){this.renderComponent=this.node.getComponent(cc.RenderComponent)},t.prototype.start=function(){this.currentCode=1,this.elapsedTime=0,this.deltaX=1,this.deltaY=1,this.currentOffsetX=this.deltaX/this.duration/cc.game.getFrameRate(),this.currentOffsetY=this.deltaY/this.duration/cc.game.getFrameRate(),this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY},t.prototype.onEnable=function(){},t.prototype.switchCode=function(){switch(this.currentCode){case 1:case 2:this.currentCode=3;break;case 3:this.currentCode=4;break;case 4:this.currentCode=1}switch(this.currentCode){case 1:this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=this.currentOffsetY;break;case 2:this.offsetXPositive=-this.currentOffsetX,this.offsetYPositive=this.currentOffsetY;break;case 3:this.offsetXPositive=-this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY;break;case 4:this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY}},t.prototype.update=function(e){this.elapsedTime+=e,this.elapsedTime>10&&(this.elapsedTime=0);var t=this.offset.x+this.offsetXPositive;t>=this.deltaX&&(t+=this.deltaX);var o=this.offset.y+this.offsetYPositive;o>=this.deltaY&&(o+=this.deltaY),this.offset=cc.v2(t,o),this.renderComponent&&this.renderComponent.getMaterial(0).setProperty("uv_offset",this.offset)},a([s(cc.Vec2)],t.prototype,"offset",void 0),a([s],t.prototype,"duration",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],UnLockLight:[function(e,t,o){"use strict";cc._RF.push(t,"0e170ek5Z1EsK3MlaU7aPXf","UnLockLight");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=e("./ResKeeper"),c=cc._decorator,s=c.ccclass,l=c.property,u=function(e){function t(){var t=e.call(this)||this;return t.selfMask=null,t.lightNode=null,t}return i(t,e),t.prototype.initialize=function(e,t,o){var n=this;this.selfMask.node.width=e.width,this.selfMask.node.height=e.height,t?(this.selfMask.spriteFrame=t,this.selfMask.type=cc.Mask.Type.IMAGE_STENCIL):this.selfMask.type=cc.Mask.Type.RECT;var i=Math.floor(2*e.width/1200);i<1&&(i=1),this.lightNode.stopAllActions(),this.lightNode.x=-e.width,this.lightNode.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveTo(i,e.width,0),cc.callFunc(function(){n.lightNode.x=-e.width})),o),cc.callFunc(function(){n.node.destroy()})))},a([l(cc.Mask)],t.prototype,"selfMask",void 0),a([l(cc.Node)],t.prototype,"lightNode",void 0),a([s],t)}(r.default);o.default=u,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UserData:[function(e,t,o){"use strict";cc._RF.push(t,"8bc89Y/w7BAe7V7XDb0GdpP","UserData"),Object.defineProperty(o,"__esModule",{value:!0}),o.UserInstance=void 0;var n=function(){function e(){this._platform={avatarUrl:"",nickName:""},this._server=null,this._code="",this._openId=null,this._unionId=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"platform",{get:function(){return this._platform},set:function(e){Object.assign(this._platform,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._server},set:function(e){this._server=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this._code||""},set:function(e){this._code=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openId",{get:function(){return this._openId||""},set:function(e){this._openId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unionId",{get:function(){return this._unionId||""},set:function(e){this._unionId=e},enumerable:!1,configurable:!0}),e}();o.UserInstance=n.getInstance(),cc._RF.pop()},{}],VisibleController:[function(e,t,o){"use strict";cc._RF.push(t,"5575bT25nxBT6+UPhKHA5Hh","VisibleController");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0}),o.VisibleNode=void 0;var r=cc._decorator,c=r.ccclass,s=r.property,l=r.menu,u=function(){function e(){this.name="",this.nd=[]}return a([s({displayName:"\u63a7\u5236\u540d\u79f0"})],e.prototype,"name",void 0),a([s({type:cc.Node,displayName:"\u63a7\u5236\u8282\u70b9"})],e.prototype,"nd",void 0),a([c("VisibleNode")],e)}();o.VisibleNode=u;var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodes=[],t._currentSelectIdx=0,t}return i(t,e),Object.defineProperty(t.prototype,"choiceIndex",{get:function(){return this._currentSelectIdx},set:function(){},enumerable:!1,configurable:!0}),t.prototype.setChoiceIndex=function(e){e<0||e>=this.nodes.length||(this._currentSelectIdx=e,this.nodes.forEach(function(e){return e.nd.forEach(function(e){return e.active=!1})}),this.nodes[e].nd.forEach(function(e){return e.active=!0}))},t.prototype.setChoiceName=function(e){var t=this;this.nodes.forEach(function(e){return e.nd.forEach(function(e){return e.active=!1})});var o=this.nodes.find(function(o,n){return o.name===e&&(t._currentSelectIdx=n,!0)});o&&o.nd.forEach(function(e){return e.active=!0})},t.prototype.getChoiceIndex=function(){return this._currentSelectIdx},t.prototype.getChoiceNodes=function(){return this._currentSelectIdx>=0&&this._currentSelectIdx<this.nodes.length?this.nodes[this._currentSelectIdx].nd:[]},a([s({type:[u],displayName:"Controller"})],t.prototype,"nodes",void 0),a([s({type:cc.Integer})],t.prototype,"_currentSelectIdx",void 0),a([s({type:cc.Integer})],t.prototype,"choiceIndex",null),a([c,l("Controller/Visible Controller")],t)}(cc.Component);o.default=d,cc._RF.pop()},{}],YpNetMag:[function(e,t,o){"use strict";cc._RF.push(t,"5d085J7OIpOfqbjciOm0erp","YpNetMag");var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))(function(i,a){function r(e){try{s(n.next(e))}catch(t){a(t)}}function c(e){try{s(n.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(r,c)}s((n=n.apply(e,t||[])).next())})},i=this&&this.__generator||function(e,t){var o,n,i,a,r={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function c(e){return function(t){return s([e,t])}}function s(a){if(o)throw new TypeError("Generator is already executing.");for(;r;)try{if(o=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,n=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!(i=(i=r.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){r=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){r.label=a[1];break}if(6===a[0]&&r.label<i[1]){r.label=i[1],i=a;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(a);break}i[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(c){a=[6,c],n=0}finally{o=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}};Object.defineProperty(o,"__esModule",{value:!0}),o.GameNetworkManager=void 0;var a=e("../GameDataManager"),r=e("../HallManager"),c=e("../PlayerDataManager"),s=function(){function e(){}return e.initServer=function(){return n(this,void 0,Promise,function(){return i(this,function(){return e.isLoad=!0,this.initLoca(),[2]})})},e.failSever=function(){},e.initLoca=function(){a.GameDataMgr.initialize(),c.PlayerDataMgr.initialize(),r.HallMgr.initialize()},e.accesUserinfo=function(){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(){})]})})},e.getUserAppInfo=function(){return n(this,void 0,Promise,function(){return i(this,function(){return[2,new Promise(function(e){e({})})]})})},e.mapSwitchJson=function(e){var t={};return e.forEach(function(e,o){t[o]=e}),t},e.isEmpty=function(e){return"object"==typeof e?!Object.keys(e).length:null==e||"null"===e||"undefined"===e||""===e},e.transformData=function(e){return this.isEmpty(e)&&(e={}),JSON.stringify(e)},e.dataFormTrans=function(e){return this.isEmpty(e)?{}:JSON.parse(e)},e.saveSeverStorage=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=null),n(this,void 0,Promise,function(){return i(this,function(){return t&&t(),[2]})})},e.getRemoteStorage=function(){return n(this,void 0,Promise,function(){return i(this,function(){return[2,!1]})})},e.loadingIn=!1,e.isLoad=!1,e.failTimeId=0,e.isFail=!1,e.GetTimeAll=0,e.offTime=0,e.nowServerData=null,e}();o.GameNetworkManager=s,cc._RF.pop()},{"../GameDataManager":"GameDataManager","../HallManager":"HallManager","../PlayerDataManager":"PlayerDataManager"}],lookMemery:[function(e,t,o){"use strict";cc._RF.push(t,"54bdek3CLtOK7ESMMaON2u0","lookMemery");var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),a=this&&this.__decorate||function(e,t,o,n){var i,a=arguments.length,r=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,o,n);else for(var c=e.length-1;c>=0;c--)(i=e[c])&&(r=(a<3?i(r):a>3?i(t,o,r):i(t,o))||r);return a>3&&r&&Object.defineProperty(t,o,r),r};Object.defineProperty(o,"__esModule",{value:!0});var r=cc._decorator,c=r.ccclass,s=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.offtime=0,t}return i(t,e),t.prototype.start=function(){},t.prototype.calculateImageMemoryUsage=function(){var e=cc.assetManager.assets,t=[];e.forEach(function(e){e instanceof cc.SpriteFrame&&t.push(e)}),t.sort(function(e,t){return t.getTexture().height*t.getTexture().width-e.getTexture().height*e.getTexture().width});var o="",n=0;return t.forEach(function(e){var t=e.getTexture(),i=e.getOriginalSize(),a=t._native,r=t._uuid,c=a.includes("jpg")?3:4,s=i.width*i.height*c/1024/1024;n+=s,o+="\n"+r+a+"...."+s.toFixed(2)+"M",console.log("\u5185\u5b58\u5360\u7528:",""+r+a+e.name+"\n\u5360\u7528\u5185\u5b58:"+s.toFixed(2)+"M")}),n=Math.floor(1e4*n)/1e4,o="Total Image Mem...."+n.toFixed(2)+"M"+o,console.log("Image Mem==",o),console.log("\u5171\u5360\u7528\u5185\u5b58:",n.toFixed(2)+"M"),n.toFixed(2)},t.prototype.updateMoneyInfo=function(){},t.prototype.update=function(){},a([s(cc.Label)],t.prototype,"label",void 0),a([s],t.prototype,"text",void 0),a([c],t)}(cc.Component);o.default=l,cc._RF.pop()},{}],temp:[function(e,t){"use strict";cc._RF.push(t,"d73c5vWzFZFELDZoxBAdRb6","temp"),cc._RF.pop()},{}]},{},["CrazySDK","CrazySDK.types","CrazySDKDemo","CrazySDKDemoLoadScript","YpNetMag","ADManager","AIControl","AddPowerByTime","ArrayUtils","AudioManager","AutoImagZiTi","BagCiTiaoRichText","BaseExcel","BaseModule","BossComming","BossComming_UIBindings","BuffMag","BundleConfig","CameraShak","CommonUtils","Const_Common","Const_Game","Const_Hall","DataManager","DebugManager","DingbuShipei","EditorAsset","Entry","EvenType","EventManager","Excel","ExcelData","ExcelLoader","ExcelUtil","FMButton","GameBagData","GameConfig","GameDataManager","GameGlobalVariable","GuideControl","GuideMask","GuideShou","HallGlobalVariable","HallManager","IpadShiPei","Item_Bag_CiTiao","Item_Bag_CiTiao_UIBindings","Item_Bag_EquipItem","Item_Bag_EquipItem_UIBindings","Item_CellFatherMove","Item_GameBagCell","Item_GameBagCell_UIBindings","Item_GameEquip","Item_Icon","Item_Icon_UIBindings","Item_PaiZi","Item_PaiZi_UIBindings","Item_Setting","Item_Setting_UIBindings","Item_Shop_BoxItem","Item_Shop_BoxItem_UIBindings","Item_Shop_GoldItem","Item_Shop_GoldItem_UIBindings","Item_Shop_TodayItem","Item_Shop_TodayItem_UIBindings","LabelDefault","Lan","LanMgr","LanTxt","LayoutExtent","List","ListItem","LiuHaiShiPei","LoadingManager","LodingGuodu","LodingGuodu_UIBindings","LogManager","Logic_ChildMoveEvent","Logic_GetEquip","MiniGame","MiniGameSdk","ModuleManager","Module_Fighting","Module_Fighting_RedPoint","Module_Fighting_UIBindings","Module_News","Module_News_RedPoint","Module_Shop","Module_Shop_UIBindings","Module_WareHouse","Module_WareHouse_UIBindings","NodePoolMag","ObjectUtils","PlatformManager","PlayerDataManager","PosController","Province","QiPaoTween","RedPointControl","RedPointItem","ResKeeper","ResLoader","ResUtil","RichTextLink","ScheduleManage","SingletonManager","TimeUtils","TipsManager","UIAdaptive","UIBindings","UIConfig_Entry","UIConfig_Game","UIConfig_Home","UIFuDong","UIHomeAddCoin","UIManager","UIRotate","UIScale","UIScene","UITools","UIView","UI_AddPower","UI_AddPower_UIBindings","UI_AttackInfo","UI_AttackTongJi","UI_Bag","UI_Bag_UIBindings","UI_BaoZha","UI_BingDong","UI_BoxAward","UI_BoxIitemInfo","UI_BoxIitemInfo_UIBindings","UI_BoxInfo","UI_BoxInfo_UIBindings","UI_BoxLevelInfo","UI_BoxLevelInfo_UIBindings","UI_BoxUpLevel","UI_BoxUpLevel_UIBindings","UI_Bullet","UI_BulletBomb","UI_BulletBombCollider","UI_BulletCollider","UI_BulletMove","UI_BulletMoveCollider","UI_BulletMove_UIBindings","UI_CameraControl","UI_ChiTiao","UI_ChiTiaoItem","UI_ChiTiao_UIBindings","UI_CreateMoster","UI_DeBugItem","UI_Debug","UI_DuWu","UI_Entry","UI_EquipInfo","UI_EquipInfo_UIBindings","UI_GameDeBug","UI_GameEquipInfo","UI_GameEquipInfo_UIBindings","UI_GameFail","UI_GameFail_UIBindings","UI_GameLock","UI_GameOhterNode","UI_GameOver","UI_GameOverItem","UI_GameOver_UIBindings","UI_GamePuase","UI_GameView","UI_GameViewMap","UI_GameView_UIBindings","UI_GameYinBi","UI_GetItems","UI_GetItems_UIBindings","UI_GetZaZhong","UI_GetZaZhong_UIBindings","UI_Hall","UI_Hall_UIBindings","UI_HuDun","UI_JiXuGame","UI_JiXuGame_UIBindings","UI_JianTou","UI_LiuXue","UI_Loading","UI_MosterLogic","UI_MosterLogic_UIBindings","UI_MosterXueTiao","UI_MoveYun","UI_OpenBox","UI_OpenBox_UIBindings","UI_PlaerInfo","UI_PlaerInfo_UIBindings","UI_Player","UI_Player_UIBindings","UI_QianDao","UI_QianDaoItem","UI_Setting","UI_Setting_UIBindings","UI_ShopItemInfo","UI_ShopItemInfo_UIBindings","UI_ShowAttackInfo","UI_ShowBossTip","UI_ShowZaZhong","UI_ShowZaZhong_UIBindings","UI_ShuoMing","UI_Sidebar","UI_Sidebar_UIBindings","UI_SkillItem","UI_SkillShow","UI_TestBtn","UI_Toast","UI_TongJiCongZhi","UI_TouchClick","UI_TuJian","UI_TuJianItem","UI_UnlockNewEquip","UI_UnlockNewEquip_UIBindings","UI_VideoBuyOne","UI_VideoBuyOne_UIBindings","UI_WuJinTiaoZhan","UVTransform-unpack","UnLockLight","UserData","VisibleController","lookMemery","temp"]);